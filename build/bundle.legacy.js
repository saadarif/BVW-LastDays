var app=function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t,e,n){return n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},t(n,n.exports),n.exports}var n,i,a=function(t){return t&&t.Math===Math&&t},o=a("object"==typeof globalThis&&globalThis)||a("object"==typeof window&&window)||a("object"==typeof self&&self)||a("object"==typeof t&&t)||a("object"==typeof t&&t)||function(){return this}()||Function("return this")(),s=function(t){try{return!!t()}catch(t){return!0}},A=!s((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})),u=!s((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),l=Function.prototype.call,c=u?l.bind(l):function(){return l.apply(l,arguments)},h={}.propertyIsEnumerable,f=Object.getOwnPropertyDescriptor,d=f&&!h.call({1:2},1)?function(t){var e=f(this,t);return!!e&&e.enumerable}:h,p={f:d},v=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},m=Function.prototype,y=m.call,_=u&&m.bind.bind(y,y),w=u?_:function(t){return function(){return y.apply(t,arguments)}},x=w({}.toString),B=w("".slice),k=function(t){return B(x(t),8,-1)},C=Object,F=w("".split),E=s((function(){return!C("z").propertyIsEnumerable(0)}))?function(t){return"String"===k(t)?F(t,""):C(t)}:C,I=function(t){return null==t},U=TypeError,S=function(t){if(I(t))throw new U("Can't call method on "+t);return t},Q=function(t){return E(S(t))},T="object"==typeof document&&document.all,M=void 0===T&&void 0!==T?function(t){return"function"==typeof t||t===T}:function(t){return"function"==typeof t},D=function(t){return"object"==typeof t?null!==t:M(t)},L=function(t,e){return arguments.length<2?(n=o[t],M(n)?n:void 0):o[t]&&o[t][e];var n},P=w({}.isPrototypeOf),O="undefined"!=typeof navigator&&String(navigator.userAgent)||"",R=o.process,z=o.Deno,H=R&&R.versions||z&&z.version,V=H&&H.v8;V&&(i=(n=V.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!i&&O&&(!(n=O.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=O.match(/Chrome\/(\d+)/))&&(i=+n[1]);var N=i,K=o.String,G=!!Object.getOwnPropertySymbols&&!s((function(){var t=Symbol("symbol detection");return!K(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&N&&N<41})),j=G&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,$=Object,W=j?function(t){return"symbol"==typeof t}:function(t){var e=L("Symbol");return M(e)&&P(e.prototype,$(t))},Z=String,q=function(t){try{return Z(t)}catch(t){return"Object"}},X=TypeError,Y=function(t){if(M(t))return t;throw new X(q(t)+" is not a function")},J=function(t,e){var n=t[e];return I(n)?void 0:Y(n)},tt=TypeError,et=Object.defineProperty,nt=function(t,e){try{et(o,t,{value:e,configurable:!0,writable:!0})}catch(n){o[t]=e}return e},rt=e((function(t){var e="__core-js_shared__",n=t.exports=o[e]||nt(e,{});(n.versions||(n.versions=[])).push({version:"3.37.1",mode:"global",copyright:"Â© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.1/LICENSE",source:"https://github.com/zloirock/core-js"})})),it=function(t,e){return rt[t]||(rt[t]=e||{})},at=Object,ot=function(t){return at(S(t))},st=w({}.hasOwnProperty),At=Object.hasOwn||function(t,e){return st(ot(t),e)},ut=0,lt=Math.random(),ct=w(1..toString),ht=function(t){return"Symbol("+(void 0===t?"":t)+")_"+ct(++ut+lt,36)},ft=o.Symbol,dt=it("wks"),pt=j?ft.for||ft:ft&&ft.withoutSetter||ht,vt=function(t){return At(dt,t)||(dt[t]=G&&At(ft,t)?ft[t]:pt("Symbol."+t)),dt[t]},gt=TypeError,mt=vt("toPrimitive"),yt=function(t,e){if(!D(t)||W(t))return t;var n,r=J(t,mt);if(r){if(void 0===e&&(e="default"),n=c(r,t,e),!D(n)||W(n))return n;throw new gt("Can't convert object to primitive value")}return void 0===e&&(e="number"),function(t,e){var n,r;if("string"===e&&M(n=t.toString)&&!D(r=c(n,t)))return r;if(M(n=t.valueOf)&&!D(r=c(n,t)))return r;if("string"!==e&&M(n=t.toString)&&!D(r=c(n,t)))return r;throw new tt("Can't convert object to primitive value")}(t,e)},_t=function(t){var e=yt(t,"string");return W(e)?e:e+""},wt=o.document,xt=D(wt)&&D(wt.createElement),bt=function(t){return xt?wt.createElement(t):{}},Bt=!A&&!s((function(){return 7!==Object.defineProperty(bt("div"),"a",{get:function(){return 7}}).a})),kt=Object.getOwnPropertyDescriptor,Ct={f:A?kt:function(t,e){if(t=Q(t),e=_t(e),Bt)try{return kt(t,e)}catch(t){}if(At(t,e))return v(!c(p.f,t,e),t[e])}},Ft=A&&s((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Et=String,It=TypeError,Ut=function(t){if(D(t))return t;throw new It(Et(t)+" is not an object")},St=TypeError,Qt=Object.defineProperty,Tt=Object.getOwnPropertyDescriptor,Mt="enumerable",Dt="configurable",Lt="writable",Pt={f:A?Ft?function(t,e,n){if(Ut(t),e=_t(e),Ut(n),"function"==typeof t&&"prototype"===e&&"value"in n&&Lt in n&&!n[Lt]){var r=Tt(t,e);r&&r[Lt]&&(t[e]=n.value,n={configurable:Dt in n?n[Dt]:r[Dt],enumerable:Mt in n?n[Mt]:r[Mt],writable:!1})}return Qt(t,e,n)}:Qt:function(t,e,n){if(Ut(t),e=_t(e),Ut(n),Bt)try{return Qt(t,e,n)}catch(t){}if("get"in n||"set"in n)throw new St("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},Ot=A?function(t,e,n){return Pt.f(t,e,v(1,n))}:function(t,e,n){return t[e]=n,t},Rt=Function.prototype,zt=A&&Object.getOwnPropertyDescriptor,Ht=At(Rt,"name"),Vt={EXISTS:Ht,PROPER:Ht&&"something"===function(){}.name,CONFIGURABLE:Ht&&(!A||A&&zt(Rt,"name").configurable)},Nt=w(Function.toString);M(rt.inspectSource)||(rt.inspectSource=function(t){return Nt(t)});var Kt,Gt,jt,$t=rt.inspectSource,Wt=o.WeakMap,Zt=M(Wt)&&/native code/.test(String(Wt)),qt=it("keys"),Xt=function(t){return qt[t]||(qt[t]=ht(t))},Yt={},Jt="Object already initialized",te=o.TypeError,ee=o.WeakMap;if(Zt||rt.state){var ne=rt.state||(rt.state=new ee);ne.get=ne.get,ne.has=ne.has,ne.set=ne.set,Kt=function(t,e){if(ne.has(t))throw new te(Jt);return e.facade=t,ne.set(t,e),e},Gt=function(t){return ne.get(t)||{}},jt=function(t){return ne.has(t)}}else{var re=Xt("state");Yt[re]=!0,Kt=function(t,e){if(At(t,re))throw new te(Jt);return e.facade=t,Ot(t,re,e),e},Gt=function(t){return At(t,re)?t[re]:{}},jt=function(t){return At(t,re)}}var ie={set:Kt,get:Gt,has:jt,enforce:function(t){return jt(t)?Gt(t):Kt(t,{})},getterFor:function(t){return function(e){var n;if(!D(e)||(n=Gt(e)).type!==t)throw new te("Incompatible receiver, "+t+" required");return n}}},ae=e((function(t){var e=Vt.CONFIGURABLE,n=ie.enforce,r=ie.get,i=String,a=Object.defineProperty,o=w("".slice),u=w("".replace),l=w([].join),c=A&&!s((function(){return 8!==a((function(){}),"length",{value:8}).length})),h=String(String).split("String"),f=t.exports=function(t,r,s){"Symbol("===o(i(r),0,7)&&(r="["+u(i(r),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),s&&s.getter&&(r="get "+r),s&&s.setter&&(r="set "+r),(!At(t,"name")||e&&t.name!==r)&&(A?a(t,"name",{value:r,configurable:!0}):t.name=r),c&&s&&At(s,"arity")&&t.length!==s.arity&&a(t,"length",{value:s.arity});try{s&&At(s,"constructor")&&s.constructor?A&&a(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var f=n(t);return At(f,"source")||(f.source=l(h,"string"==typeof r?r:"")),t};Function.prototype.toString=f((function(){return M(this)&&r(this).source||$t(this)}),"toString")})),oe=function(t,e,n,r){r||(r={});var i=r.enumerable,a=void 0!==r.name?r.name:e;if(M(n)&&ae(n,a,r),r.global)i?t[e]=n:nt(e,n);else{try{r.unsafe?t[e]&&(i=!0):delete t[e]}catch(t){}i?t[e]=n:Pt.f(t,e,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return t},se=Math.ceil,Ae=Math.floor,ue=Math.trunc||function(t){var e=+t;return(e>0?Ae:se)(e)},le=function(t){var e=+t;return e!=e||0===e?0:ue(e)},ce=Math.max,he=Math.min,fe=function(t,e){var n=le(t);return n<0?ce(n+e,0):he(n,e)},de=Math.min,pe=function(t){var e=le(t);return e>0?de(e,9007199254740991):0},ve=function(t){return pe(t.length)},ge=function(t){return function(e,n,r){var i=Q(e),a=ve(i);if(0===a)return!t&&-1;var o,s=fe(r,a);if(t&&n!=n){for(;a>s;)if((o=i[s++])!=o)return!0}else for(;a>s;s++)if((t||s in i)&&i[s]===n)return t||s||0;return!t&&-1}},me={includes:ge(!0),indexOf:ge(!1)},ye=me.indexOf,_e=w([].push),we=function(t,e){var n,r=Q(t),i=0,a=[];for(n in r)!At(Yt,n)&&At(r,n)&&_e(a,n);for(;e.length>i;)At(r,n=e[i++])&&(~ye(a,n)||_e(a,n));return a},xe=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],be=xe.concat("length","prototype"),Be={f:Object.getOwnPropertyNames||function(t){return we(t,be)}},ke={f:Object.getOwnPropertySymbols},Ce=w([].concat),Fe=L("Reflect","ownKeys")||function(t){var e=Be.f(Ut(t)),n=ke.f;return n?Ce(e,n(t)):e},Ee=function(t,e,n){for(var r=Fe(e),i=Pt.f,a=Ct.f,o=0;o<r.length;o++){var s=r[o];At(t,s)||n&&At(n,s)||i(t,s,a(e,s))}},Ie=/#|\.prototype\./,Ue=function(t,e){var n=Qe[Se(t)];return n===Me||n!==Te&&(M(e)?s(e):!!e)},Se=Ue.normalize=function(t){return String(t).replace(Ie,".").toLowerCase()},Qe=Ue.data={},Te=Ue.NATIVE="N",Me=Ue.POLYFILL="P",De=Ue,Le=Ct.f,Pe=function(t,e){var n,r,i,a,s,A=t.target,u=t.global,l=t.stat;if(n=u?o:l?o[A]||nt(A,{}):o[A]&&o[A].prototype)for(r in e){if(a=e[r],i=t.dontCallGetSet?(s=Le(n,r))&&s.value:n[r],!De(u?r:A+(l?".":"#")+r,t.forced)&&void 0!==i){if(typeof a==typeof i)continue;Ee(a,i)}(t.sham||i&&i.sham)&&Ot(a,"sham",!0),oe(n,r,a,t)}},Oe={};Oe[vt("toStringTag")]="z";var Re,ze="[object z]"===String(Oe),He=vt("toStringTag"),Ve=Object,Ne="Arguments"===k(function(){return arguments}()),Ke=ze?k:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Ve(t),He))?n:Ne?k(e):"Object"===(r=k(e))&&M(e.callee)?"Arguments":r},Ge=String,je=function(t){if("Symbol"===Ke(t))throw new TypeError("Cannot convert a Symbol value to a string");return Ge(t)},$e=Object.keys||function(t){return we(t,xe)},We=A&&!Ft?Object.defineProperties:function(t,e){Ut(t);for(var n,r=Q(e),i=$e(e),a=i.length,o=0;a>o;)Pt.f(t,n=i[o++],r[n]);return t},Ze={f:We},qe=L("document","documentElement"),Xe="prototype",Ye="script",Je=Xt("IE_PROTO"),tn=function(){},en=function(t){return"<"+Ye+">"+t+"</"+Ye+">"},nn=function(t){t.write(en("")),t.close();var e=t.parentWindow.Object;return t=null,e},rn=function(){try{Re=new ActiveXObject("htmlfile")}catch(t){}var t,e,n;rn="undefined"!=typeof document?document.domain&&Re?nn(Re):(e=bt("iframe"),n="java"+Ye+":",e.style.display="none",qe.appendChild(e),e.src=String(n),(t=e.contentWindow.document).open(),t.write(en("document.F=Object")),t.close(),t.F):nn(Re);for(var r=xe.length;r--;)delete rn[Xe][xe[r]];return rn()};Yt[Je]=!0;var an=Object.create||function(t,e){var n;return null!==t?(tn[Xe]=Ut(t),n=new tn,tn[Xe]=null,n[Je]=t):n=rn(),void 0===e?n:Ze.f(n,e)},on=w([].slice),sn=Be.f,An="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],un={f:function(t){return An&&"Window"===k(t)?function(t){try{return sn(t)}catch(t){return on(An)}}(t):sn(Q(t))}},ln=function(t,e,n){return n.get&&ae(n.get,e,{getter:!0}),n.set&&ae(n.set,e,{setter:!0}),Pt.f(t,e,n)},cn={f:vt},hn=o,fn=Pt.f,dn=function(t){var e=hn.Symbol||(hn.Symbol={});At(e,t)||fn(e,t,{value:cn.f(t)})},pn=Pt.f,vn=vt("toStringTag"),gn=function(t,e,n){t&&!n&&(t=t.prototype),t&&!At(t,vn)&&pn(t,vn,{configurable:!0,value:e})},mn=function(t){if("Function"===k(t))return w(t)},yn=mn(mn.bind),_n=function(t,e){return Y(t),void 0===e?t:u?yn(t,e):function(){return t.apply(e,arguments)}},wn=Array.isArray||function(t){return"Array"===k(t)},xn=function(){},bn=L("Reflect","construct"),Bn=/^\s*(?:class|function)\b/,kn=w(Bn.exec),Cn=!Bn.test(xn),Fn=function(t){if(!M(t))return!1;try{return bn(xn,[],t),!0}catch(t){return!1}},En=function(t){if(!M(t))return!1;switch(Ke(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Cn||!!kn(Bn,$t(t))}catch(t){return!0}};En.sham=!0;var In=!bn||s((function(){var t;return Fn(Fn.call)||!Fn(Object)||!Fn((function(){t=!0}))||t}))?En:Fn,Un=vt("species"),Sn=Array,Qn=function(t,e){return new(function(t){var e;return wn(t)&&(e=t.constructor,(In(e)&&(e===Sn||wn(e.prototype))||D(e)&&null===(e=e[Un]))&&(e=void 0)),void 0===e?Sn:e}(t))(0===e?0:e)},Tn=w([].push),Mn=function(t){var e=1===t,n=2===t,r=3===t,i=4===t,a=6===t,o=7===t,s=5===t||a;return function(A,u,l,c){for(var h,f,d=ot(A),p=E(d),v=ve(p),g=_n(u,l),m=0,y=c||Qn,_=e?y(A,v):n||o?y(A,0):void 0;v>m;m++)if((s||m in p)&&(f=g(h=p[m],m,d),t))if(e)_[m]=f;else if(f)switch(t){case 3:return!0;case 5:return h;case 6:return m;case 2:Tn(_,h)}else switch(t){case 4:return!1;case 7:Tn(_,h)}return a?-1:r||i?i:_}},Dn={forEach:Mn(0),map:Mn(1),filter:Mn(2),some:Mn(3),every:Mn(4),find:Mn(5),findIndex:Mn(6),filterReject:Mn(7)},Ln=Dn.forEach,Pn=Xt("hidden"),On="Symbol",Rn="prototype",zn=ie.set,Hn=ie.getterFor(On),Vn=Object[Rn],Nn=o.Symbol,Kn=Nn&&Nn[Rn],Gn=o.RangeError,jn=o.TypeError,$n=o.QObject,Wn=Ct.f,Zn=Pt.f,qn=un.f,Xn=p.f,Yn=w([].push),Jn=it("symbols"),tr=it("op-symbols"),er=it("wks"),nr=!$n||!$n[Rn]||!$n[Rn].findChild,rr=function(t,e,n){var r=Wn(Vn,e);r&&delete Vn[e],Zn(t,e,n),r&&t!==Vn&&Zn(Vn,e,r)},ir=A&&s((function(){return 7!==an(Zn({},"a",{get:function(){return Zn(this,"a",{value:7}).a}})).a}))?rr:Zn,ar=function(t,e){var n=Jn[t]=an(Kn);return zn(n,{type:On,tag:t,description:e}),A||(n.description=e),n},or=function(t,e,n){t===Vn&&or(tr,e,n),Ut(t);var r=_t(e);return Ut(n),At(Jn,r)?(n.enumerable?(At(t,Pn)&&t[Pn][r]&&(t[Pn][r]=!1),n=an(n,{enumerable:v(0,!1)})):(At(t,Pn)||Zn(t,Pn,v(1,an(null))),t[Pn][r]=!0),ir(t,r,n)):Zn(t,r,n)},sr=function(t,e){Ut(t);var n=Q(e),r=$e(n).concat(cr(n));return Ln(r,(function(e){A&&!c(Ar,n,e)||or(t,e,n[e])})),t},Ar=function(t){var e=_t(t),n=c(Xn,this,e);return!(this===Vn&&At(Jn,e)&&!At(tr,e))&&(!(n||!At(this,e)||!At(Jn,e)||At(this,Pn)&&this[Pn][e])||n)},ur=function(t,e){var n=Q(t),r=_t(e);if(n!==Vn||!At(Jn,r)||At(tr,r)){var i=Wn(n,r);return!i||!At(Jn,r)||At(n,Pn)&&n[Pn][r]||(i.enumerable=!0),i}},lr=function(t){var e=qn(Q(t)),n=[];return Ln(e,(function(t){At(Jn,t)||At(Yt,t)||Yn(n,t)})),n},cr=function(t){var e=t===Vn,n=qn(e?tr:Q(t)),r=[];return Ln(n,(function(t){!At(Jn,t)||e&&!At(Vn,t)||Yn(r,Jn[t])})),r};G||(Nn=function(){if(P(Kn,this))throw new jn("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?je(arguments[0]):void 0,e=ht(t),n=function(t){var r=void 0===this?o:this;r===Vn&&c(n,tr,t),At(r,Pn)&&At(r[Pn],e)&&(r[Pn][e]=!1);var i=v(1,t);try{ir(r,e,i)}catch(t){if(!(t instanceof Gn))throw t;rr(r,e,i)}};return A&&nr&&ir(Vn,e,{configurable:!0,set:n}),ar(e,t)},Kn=Nn[Rn],oe(Kn,"toString",(function(){return Hn(this).tag})),oe(Nn,"withoutSetter",(function(t){return ar(ht(t),t)})),p.f=Ar,Pt.f=or,Ze.f=sr,Ct.f=ur,Be.f=un.f=lr,ke.f=cr,cn.f=function(t){return ar(vt(t),t)},A&&(ln(Kn,"description",{configurable:!0,get:function(){return Hn(this).description}}),oe(Vn,"propertyIsEnumerable",Ar,{unsafe:!0}))),Pe({global:!0,constructor:!0,wrap:!0,forced:!G,sham:!G},{Symbol:Nn}),Ln($e(er),(function(t){dn(t)})),Pe({target:On,stat:!0,forced:!G},{useSetter:function(){nr=!0},useSimple:function(){nr=!1}}),Pe({target:"Object",stat:!0,forced:!G,sham:!A},{create:function(t,e){return void 0===e?an(t):sr(an(t),e)},defineProperty:or,defineProperties:sr,getOwnPropertyDescriptor:ur}),Pe({target:"Object",stat:!0,forced:!G},{getOwnPropertyNames:lr}),function(){var t=L("Symbol"),e=t&&t.prototype,n=e&&e.valueOf,r=vt("toPrimitive");e&&!e[r]&&oe(e,r,(function(t){return c(n,this)}),{arity:1})}(),gn(Nn,On),Yt[Pn]=!0;var hr=G&&!!Symbol.for&&!!Symbol.keyFor,fr=it("string-to-symbol-registry"),dr=it("symbol-to-string-registry");Pe({target:"Symbol",stat:!0,forced:!hr},{for:function(t){var e=je(t);if(At(fr,e))return fr[e];var n=L("Symbol")(e);return fr[e]=n,dr[n]=e,n}});var pr=it("symbol-to-string-registry");Pe({target:"Symbol",stat:!0,forced:!hr},{keyFor:function(t){if(!W(t))throw new TypeError(q(t)+" is not a symbol");if(At(pr,t))return pr[t]}});var vr=Function.prototype,gr=vr.apply,mr=vr.call,yr="object"==typeof Reflect&&Reflect.apply||(u?mr.bind(gr):function(){return mr.apply(gr,arguments)}),_r=w([].push),wr=String,xr=L("JSON","stringify"),br=w(/./.exec),Br=w("".charAt),kr=w("".charCodeAt),Cr=w("".replace),Fr=w(1..toString),Er=/[\uD800-\uDFFF]/g,Ir=/^[\uD800-\uDBFF]$/,Ur=/^[\uDC00-\uDFFF]$/,Sr=!G||s((function(){var t=L("Symbol")("stringify detection");return"[null]"!==xr([t])||"{}"!==xr({a:t})||"{}"!==xr(Object(t))})),Qr=s((function(){return'"\\udf06\\ud834"'!==xr("\udf06\ud834")||'"\\udead"'!==xr("\udead")})),Tr=function(t,e){var n=on(arguments),r=function(t){if(M(t))return t;if(wn(t)){for(var e=t.length,n=[],r=0;r<e;r++){var i=t[r];"string"==typeof i?_r(n,i):"number"!=typeof i&&"Number"!==k(i)&&"String"!==k(i)||_r(n,je(i))}var a=n.length,o=!0;return function(t,e){if(o)return o=!1,e;if(wn(this))return e;for(var r=0;r<a;r++)if(n[r]===t)return e}}}(e);if(M(r)||void 0!==t&&!W(t))return n[1]=function(t,e){if(M(r)&&(e=c(r,this,wr(t),e)),!W(e))return e},yr(xr,null,n)},Mr=function(t,e,n){var r=Br(n,e-1),i=Br(n,e+1);return br(Ir,t)&&!br(Ur,i)||br(Ur,t)&&!br(Ir,r)?"\\u"+Fr(kr(t,0),16):t};xr&&Pe({target:"JSON",stat:!0,arity:3,forced:Sr||Qr},{stringify:function(t,e,n){var r=on(arguments),i=yr(Sr?Tr:xr,null,r);return Qr&&"string"==typeof i?Cr(i,Er,Mr):i}});var Dr=!G||s((function(){ke.f(1)}));Pe({target:"Object",stat:!0,forced:Dr},{getOwnPropertySymbols:function(t){var e=ke.f;return e?e(ot(t)):[]}});var Lr=vt("species"),Pr=function(t){return N>=51||!s((function(){var e=[];return(e.constructor={})[Lr]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},Or=Dn.filter,Rr=Pr("filter");Pe({target:"Array",proto:!0,forced:!Rr},{filter:function(t){return Or(this,t,arguments.length>1?arguments[1]:void 0)}});var zr=Ct.f,Hr=!A||s((function(){zr(1)}));Pe({target:"Object",stat:!0,forced:Hr,sham:!A},{getOwnPropertyDescriptor:function(t,e){return zr(Q(t),e)}});var Vr=function(t,e,n){A?Pt.f(t,e,v(0,n)):t[e]=n};Pe({target:"Object",stat:!0,sham:!A},{getOwnPropertyDescriptors:function(t){for(var e,n,r=Q(t),i=Ct.f,a=Fe(r),o={},s=0;a.length>s;)void 0!==(n=i(r,e=a[s++]))&&Vr(o,e,n);return o}});var Nr=Function,Kr=w([].concat),Gr=w([].join),jr={},$r=u?Nr.bind:function(t){var e=Y(this),n=e.prototype,r=on(arguments,1),i=function(){var n=Kr(r,on(arguments));return this instanceof i?function(t,e,n){if(!At(jr,e)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";jr[e]=Nr("C,a","return new C("+Gr(r,",")+")")}return jr[e](t,n)}(e,n.length,n):e.apply(t,n)};return D(n)&&(i.prototype=n),i},Wr=TypeError,Zr=function(t){if(In(t))return t;throw new Wr(q(t)+" is not a constructor")},qr=L("Reflect","construct"),Xr=Object.prototype,Yr=[].push,Jr=s((function(){function t(){}return!(qr((function(){}),[],t)instanceof t)})),ti=!s((function(){qr((function(){}))})),ei=Jr||ti;function ni(t){return ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ni(t)}function ri(t){var e=function(t,e){if("object"!=ni(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ni(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ni(e)?e:e+""}function ii(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ri(r.key),r)}}function ai(t,e,n){return e&&ii(t.prototype,e),n&&ii(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function oi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function si(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ai(t,e){if(e&&("object"==ni(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return si(t)}function ui(t){return ui=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ui(t)}function li(t,e){return li=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},li(t,e)}function ci(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&li(t,e)}function hi(t,e,n){return(e=ri(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fi(t){if(Array.isArray(t))return t}function di(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function pi(t,e){if(t){if("string"==typeof t)return di(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?di(t,e):void 0}}function vi(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function gi(t,e){return fi(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a,o,s=[],A=!0,u=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;A=!1}else for(;!(A=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);A=!0);}catch(t){u=!0,i=t}finally{try{if(!A&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}(t,e)||pi(t,e)||vi()}Pe({target:"Reflect",stat:!0,forced:ei,sham:ei},{construct:function(t,e){Zr(t),Ut(e);var n=arguments.length<3?t:Zr(arguments[2]);if(ti&&!Jr)return qr(t,e,n);if(t===n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return yr(Yr,r,e),new(yr($r,t,r))}var i=n.prototype,a=an(D(i)?i:Xr),o=yr(t,a,e);return D(o)?o:a}});var mi=Dn.map,yi=Pr("map");Pe({target:"Array",proto:!0,forced:!yi},{map:function(t){return mi(this,t,arguments.length>1?arguments[1]:void 0)}});var _i=s((function(){$e(1)}));Pe({target:"Object",stat:!0,forced:_i},{keys:function(t){return $e(ot(t))}});var wi=ze?{}.toString:function(){return"[object "+Ke(this)+"]"};ze||oe(Object.prototype,"toString",wi,{unsafe:!0});var xi={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},bi=bt("span").classList,Bi=bi&&bi.constructor&&bi.constructor.prototype,ki=Bi===Object.prototype?void 0:Bi,Ci=function(t,e){var n=[][t];return!!n&&s((function(){n.call(null,e||function(){return 1},1)}))},Fi=Dn.forEach,Ei=Ci("forEach")?[].forEach:function(t){return Fi(this,t,arguments.length>1?arguments[1]:void 0)},Ii=function(t){if(t&&t.forEach!==Ei)try{Ot(t,"forEach",Ei)}catch(e){t.forEach=Ei}};for(var Ui in xi)xi[Ui]&&Ii(o[Ui]&&o[Ui].prototype);function Si(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Si=function(){return!!t})()}function Qi(t,e,n){if(Si())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var i=new(t.bind.apply(t,r));return n&&li(i,n.prototype),i}function Ti(t){var e="function"==typeof Map?new Map:void 0;return Ti=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return Qi(t,arguments,ui(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),li(n,t)},Ti(t)}function Mi(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function Di(t){return function(t){if(Array.isArray(t))return di(t)}(t)||Mi(t)||pi(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Li(){return Li="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=ui(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},Li.apply(null,arguments)}Ii(ki);var Pi=o.Symbol,Oi=Pi&&Pi.prototype;if(A&&M(Pi)&&(!("description"in Oi)||void 0!==Pi().description)){var Ri={},zi=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:je(arguments[0]),e=P(Oi,this)?new Pi(t):void 0===t?Pi():Pi(t);return""===t&&(Ri[e]=!0),e};Ee(zi,Pi),zi.prototype=Oi,Oi.constructor=zi;var Hi="Symbol(description detection)"===String(Pi("description detection")),Vi=w(Oi.valueOf),Ni=w(Oi.toString),Ki=/^Symbol\((.*)\)[^)]+$/,Gi=w("".replace),ji=w("".slice);ln(Oi,"description",{configurable:!0,get:function(){var t=Vi(this);if(At(Ri,t))return"";var e=Ni(t),n=Hi?ji(e,7,-1):Gi(e,Ki,"$1");return""===n?void 0:n}}),Pe({global:!0,constructor:!0,forced:!0},{Symbol:zi})}dn("iterator");var $i=TypeError,Wi=function(t){if(t>9007199254740991)throw $i("Maximum allowed index exceeded");return t},Zi=vt("isConcatSpreadable"),qi=N>=51||!s((function(){var t=[];return t[Zi]=!1,t.concat()[0]!==t})),Xi=function(t){if(!D(t))return!1;var e=t[Zi];return void 0!==e?!!e:wn(t)},Yi=!qi||!Pr("concat");Pe({target:"Array",proto:!0,arity:1,forced:Yi},{concat:function(t){var e,n,r,i,a,o=ot(this),s=Qn(o,0),A=0;for(e=-1,r=arguments.length;e<r;e++)if(Xi(a=-1===e?o:arguments[e]))for(i=ve(a),Wi(A+i),n=0;n<i;n++,A++)n in a&&Vr(s,A,a[n]);else Wi(A+1),Vr(s,A++,a);return s.length=A,s}});var Ji=function(t){for(var e=ot(this),n=ve(e),r=arguments.length,i=fe(r>1?arguments[1]:void 0,n),a=r>2?arguments[2]:void 0,o=void 0===a?n:fe(a,n);o>i;)e[i++]=t;return e},ta=Pt.f,ea=vt("unscopables"),na=Array.prototype;void 0===na[ea]&&ta(na,ea,{configurable:!0,value:an(null)});var ra=function(t){na[ea][t]=!0};Pe({target:"Array",proto:!0},{fill:Ji}),ra("fill");var ia=function(t,e,n){var r,i;Ut(t);try{if(!(r=J(t,"return"))){if("throw"===e)throw n;return n}r=c(r,t)}catch(t){i=!0,r=t}if("throw"===e)throw n;if(i)throw r;return Ut(r),n},aa=function(t,e,n,r){try{return r?e(Ut(n)[0],n[1]):e(n)}catch(e){ia(t,"throw",e)}},oa={},sa=vt("iterator"),Aa=Array.prototype,ua=function(t){return void 0!==t&&(oa.Array===t||Aa[sa]===t)},la=vt("iterator"),ca=function(t){if(!I(t))return J(t,la)||J(t,"@@iterator")||oa[Ke(t)]},ha=TypeError,fa=function(t,e){var n=arguments.length<2?ca(t):e;if(Y(n))return Ut(c(n,t));throw new ha(q(t)+" is not iterable")},da=Array,pa=function(t){var e=ot(t),n=In(this),r=arguments.length,i=r>1?arguments[1]:void 0,a=void 0!==i;a&&(i=_n(i,r>2?arguments[2]:void 0));var o,s,A,u,l,h,f=ca(e),d=0;if(!f||this===da&&ua(f))for(o=ve(e),s=n?new this(o):da(o);o>d;d++)h=a?i(e[d],d):e[d],Vr(s,d,h);else for(s=n?new this:[],l=(u=fa(e,f)).next;!(A=c(l,u)).done;d++)h=a?aa(u,i,[A.value,d],!0):A.value,Vr(s,d,h);return s.length=d,s},va=vt("iterator"),ga=!1;try{var ma=0,ya={next:function(){return{done:!!ma++}},return:function(){ga=!0}};ya[va]=function(){return this},Array.from(ya,(function(){throw 2}))}catch(t){}var _a=function(t,e){try{if(!e&&!ga)return!1}catch(t){return!1}var n=!1;try{var r={};r[va]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},wa=!_a((function(t){Array.from(t)}));Pe({target:"Array",stat:!0,forced:wa},{from:pa});var xa,ba,Ba,ka=!s((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Ca=Xt("IE_PROTO"),Fa=Object,Ea=Fa.prototype,Ia=ka?Fa.getPrototypeOf:function(t){var e=ot(t);if(At(e,Ca))return e[Ca];var n=e.constructor;return M(n)&&e instanceof n?n.prototype:e instanceof Fa?Ea:null},Ua=vt("iterator"),Sa=!1;[].keys&&("next"in(Ba=[].keys())?(ba=Ia(Ia(Ba)))!==Object.prototype&&(xa=ba):Sa=!0);var Qa=!D(xa)||s((function(){var t={};return xa[Ua].call(t)!==t}));Qa&&(xa={}),M(xa[Ua])||oe(xa,Ua,(function(){return this}));var Ta={IteratorPrototype:xa,BUGGY_SAFARI_ITERATORS:Sa},Ma=Ta.IteratorPrototype,Da=function(){return this},La=function(t,e,n,r){var i=e+" Iterator";return t.prototype=an(Ma,{next:v(+!r,n)}),gn(t,i,!1),oa[i]=Da,t},Pa=String,Oa=TypeError,Ra=function(t){if(function(t){return D(t)||null===t}(t))return t;throw new Oa("Can't set "+Pa(t)+" as a prototype")},za=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=function(t,e,n){try{return w(Y(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(t){}}(Object.prototype,"__proto__","set"),t(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return S(n),Ra(r),D(n)?(e?t(n,r):n.__proto__=r,n):n}}():void 0),Ha=Vt.PROPER,Va=Vt.CONFIGURABLE,Na=Ta.IteratorPrototype,Ka=Ta.BUGGY_SAFARI_ITERATORS,Ga=vt("iterator"),ja="keys",$a="values",Wa="entries",Za=function(){return this},qa=function(t,e,n,r,i,a,o){La(n,e,r);var s,A,u,l=function(t){if(t===i&&v)return v;if(!Ka&&t&&t in d)return d[t];switch(t){case ja:case $a:case Wa:return function(){return new n(this,t)}}return function(){return new n(this)}},h=e+" Iterator",f=!1,d=t.prototype,p=d[Ga]||d["@@iterator"]||i&&d[i],v=!Ka&&p||l(i),g="Array"===e&&d.entries||p;if(g&&(s=Ia(g.call(new t)))!==Object.prototype&&s.next&&(Ia(s)!==Na&&(za?za(s,Na):M(s[Ga])||oe(s,Ga,Za)),gn(s,h,!0)),Ha&&i===$a&&p&&p.name!==$a&&(Va?Ot(d,"name",$a):(f=!0,v=function(){return c(p,this)})),i)if(A={values:l($a),keys:a?v:l(ja),entries:l(Wa)},o)for(u in A)(Ka||f||!(u in d))&&oe(d,u,A[u]);else Pe({target:e,proto:!0,forced:Ka||f},A);return d[Ga]!==v&&oe(d,Ga,v,{name:i}),oa[e]=v,A},Xa=function(t,e){return{value:t,done:e}},Ya=Pt.f,Ja="Array Iterator",to=ie.set,eo=ie.getterFor(Ja),no=qa(Array,"Array",(function(t,e){to(this,{type:Ja,target:Q(t),index:0,kind:e})}),(function(){var t=eo(this),e=t.target,n=t.index++;if(!e||n>=e.length)return t.target=void 0,Xa(void 0,!0);switch(t.kind){case"keys":return Xa(n,!1);case"values":return Xa(e[n],!1)}return Xa([n,e[n]],!1)}),"values"),ro=oa.Arguments=oa.Array;if(ra("keys"),ra("values"),ra("entries"),A&&"values"!==ro.name)try{Ya(ro,"name",{value:"values"})}catch(t){}var io=w([].join),ao=E!==Object||!Ci("join",",");Pe({target:"Array",proto:!0,forced:ao},{join:function(t){return io(Q(this),void 0===t?",":t)}});var oo=Pr("slice"),so=vt("species"),Ao=Array,uo=Math.max;Pe({target:"Array",proto:!0,forced:!oo},{slice:function(t,e){var n,r,i,a=Q(this),o=ve(a),s=fe(t,o),A=fe(void 0===e?o:e,o);if(wn(a)&&(n=a.constructor,(In(n)&&(n===Ao||wn(n.prototype))||D(n)&&null===(n=n[so]))&&(n=void 0),n===Ao||void 0===n))return on(a,s,A);for(r=new(void 0===n?Ao:n)(uo(A-s,0)),i=0;s<A;s++,i++)s in a&&Vr(r,i,a[s]);return r.length=i,r}});var lo=TypeError,co=function(t,e){if(!delete t[e])throw new lo("Cannot delete property "+q(e)+" of "+q(t))},ho=Math.floor,fo=function(t,e){var n=t.length;if(n<8)for(var r,i,a=1;a<n;){for(i=a,r=t[a];i&&e(t[i-1],r)>0;)t[i]=t[--i];i!==a++&&(t[i]=r)}else for(var o=ho(n/2),s=fo(on(t,0,o),e),A=fo(on(t,o),e),u=s.length,l=A.length,c=0,h=0;c<u||h<l;)t[c+h]=c<u&&h<l?e(s[c],A[h])<=0?s[c++]:A[h++]:c<u?s[c++]:A[h++];return t},po=fo,vo=O.match(/firefox\/(\d+)/i),go=!!vo&&+vo[1],mo=/MSIE|Trident/.test(O),yo=O.match(/AppleWebKit\/(\d+)\./),_o=!!yo&&+yo[1],wo=[],xo=w(wo.sort),bo=w(wo.push),Bo=s((function(){wo.sort(void 0)})),ko=s((function(){wo.sort(null)})),Co=Ci("sort"),Fo=!s((function(){if(N)return N<70;if(!(go&&go>3)){if(mo)return!0;if(_o)return _o<603;var t,e,n,r,i="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)wo.push({k:e+r,v:n})}for(wo.sort((function(t,e){return e.v-t.v})),r=0;r<wo.length;r++)e=wo[r].k.charAt(0),i.charAt(i.length-1)!==e&&(i+=e);return"DGBEFHACIJK"!==i}}));Pe({target:"Array",proto:!0,forced:Bo||!ko||!Co||!Fo},{sort:function(t){void 0!==t&&Y(t);var e=ot(this);if(Fo)return void 0===t?xo(e):xo(e,t);var n,r,i=[],a=ve(e);for(r=0;r<a;r++)r in e&&bo(i,e[r]);for(po(i,function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:je(e)>je(n)?1:-1}}(t)),n=ve(i),r=0;r<n;)e[r]=i[r++];for(;r<a;)co(e,r++);return e}});var Eo=TypeError,Io=Object.getOwnPropertyDescriptor,Uo=A&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}()?function(t,e){if(wn(t)&&!Io(t,"length").writable)throw new Eo("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e},So=Pr("splice"),Qo=Math.max,To=Math.min;Pe({target:"Array",proto:!0,forced:!So},{splice:function(t,e){var n,r,i,a,o,s,A=ot(this),u=ve(A),l=fe(t,u),c=arguments.length;for(0===c?n=r=0:1===c?(n=0,r=u-l):(n=c-2,r=To(Qo(le(e),0),u-l)),Wi(u+n-r),i=Qn(A,r),a=0;a<r;a++)(o=l+a)in A&&Vr(i,a,A[o]);if(i.length=r,n<r){for(a=l;a<u-r;a++)s=a+n,(o=a+r)in A?A[s]=A[o]:co(A,s);for(a=u;a>u-r+n;a--)co(A,a-1)}else if(n>r)for(a=u-r;a>l;a--)s=a+n-1,(o=a+r-1)in A?A[s]=A[o]:co(A,s);for(a=0;a<n;a++)A[a+l]=arguments[a+2];return Uo(A,u-r+n),i}});var Mo=Vt.EXISTS,Do=Function.prototype,Lo=w(Do.toString),Po=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,Oo=w(Po.exec);A&&!Mo&&ln(Do,"name",{configurable:!0,get:function(){try{return Oo(Po,Lo(this))[1]}catch(t){return""}}});var Ro=s((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}})),zo=Object.isExtensible,Ho=s((function(){zo(1)}))||Ro?function(t){return!!D(t)&&((!Ro||"ArrayBuffer"!==k(t))&&(!zo||zo(t)))}:zo,Vo=!s((function(){return Object.isExtensible(Object.preventExtensions({}))})),No=e((function(t){var e=Pt.f,n=!1,r=ht("meta"),i=0,a=function(t){e(t,r,{value:{objectID:"O"+i++,weakData:{}}})},o=t.exports={enable:function(){o.enable=function(){},n=!0;var t=Be.f,e=w([].splice),i={};i[r]=1,t(i).length&&(Be.f=function(n){for(var i=t(n),a=0,o=i.length;a<o;a++)if(i[a]===r){e(i,a,1);break}return i},Pe({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:un.f}))},fastKey:function(t,e){if(!D(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!At(t,r)){if(!Ho(t))return"F";if(!e)return"E";a(t)}return t[r].objectID},getWeakData:function(t,e){if(!At(t,r)){if(!Ho(t))return!0;if(!e)return!1;a(t)}return t[r].weakData},onFreeze:function(t){return Vo&&n&&Ho(t)&&!At(t,r)&&a(t),t}};Yt[r]=!0})),Ko=TypeError,Go=function(t,e){this.stopped=t,this.result=e},jo=Go.prototype,$o=function(t,e,n){var r,i,a,o,s,A,u,l=n&&n.that,h=!(!n||!n.AS_ENTRIES),f=!(!n||!n.IS_RECORD),d=!(!n||!n.IS_ITERATOR),p=!(!n||!n.INTERRUPTED),v=_n(e,l),g=function(t){return r&&ia(r,"normal",t),new Go(!0,t)},m=function(t){return h?(Ut(t),p?v(t[0],t[1],g):v(t[0],t[1])):p?v(t,g):v(t)};if(f)r=t.iterator;else if(d)r=t;else{if(!(i=ca(t)))throw new Ko(q(t)+" is not iterable");if(ua(i)){for(a=0,o=ve(t);o>a;a++)if((s=m(t[a]))&&P(jo,s))return s;return new Go(!1)}r=fa(t,i)}for(A=f?t.next:r.next;!(u=c(A,r)).done;){try{s=m(u.value)}catch(t){ia(r,"throw",t)}if("object"==typeof s&&s&&P(jo,s))return s}return new Go(!1)},Wo=TypeError,Zo=function(t,e){if(P(e,t))return t;throw new Wo("Incorrect invocation")},qo=function(t,e,n){var r,i;return za&&M(r=e.constructor)&&r!==n&&D(i=r.prototype)&&i!==n.prototype&&za(t,i),t},Xo=function(t,e,n){var r=-1!==t.indexOf("Map"),i=-1!==t.indexOf("Weak"),a=r?"set":"add",A=o[t],u=A&&A.prototype,l=A,c={},h=function(t){var e=w(u[t]);oe(u,t,"add"===t?function(t){return e(this,0===t?0:t),this}:"delete"===t?function(t){return!(i&&!D(t))&&e(this,0===t?0:t)}:"get"===t?function(t){return i&&!D(t)?void 0:e(this,0===t?0:t)}:"has"===t?function(t){return!(i&&!D(t))&&e(this,0===t?0:t)}:function(t,n){return e(this,0===t?0:t,n),this})};if(De(t,!M(A)||!(i||u.forEach&&!s((function(){(new A).entries().next()})))))l=n.getConstructor(e,t,r,a),No.enable();else if(De(t,!0)){var f=new l,d=f[a](i?{}:-0,1)!==f,p=s((function(){f.has(1)})),v=_a((function(t){new A(t)})),g=!i&&s((function(){for(var t=new A,e=5;e--;)t[a](e,e);return!t.has(-0)}));v||((l=e((function(t,e){Zo(t,u);var n=qo(new A,t,l);return I(e)||$o(e,n[a],{that:n,AS_ENTRIES:r}),n}))).prototype=u,u.constructor=l),(p||g)&&(h("delete"),h("has"),r&&h("get")),(g||d)&&h(a),i&&u.clear&&delete u.clear}return c[t]=l,Pe({global:!0,constructor:!0,forced:l!==A},c),gn(l,t),i||n.setStrong(l,t,r),l},Yo=function(t,e,n){for(var r in e)oe(t,r,e[r],n);return t},Jo=vt("species"),ts=function(t){var e=L(t);A&&e&&!e[Jo]&&ln(e,Jo,{configurable:!0,get:function(){return this}})},es=No.fastKey,ns=ie.set,rs=ie.getterFor,is={getConstructor:function(t,e,n,r){var i=t((function(t,i){Zo(t,a),ns(t,{type:e,index:an(null),first:void 0,last:void 0,size:0}),A||(t.size=0),I(i)||$o(i,t[r],{that:t,AS_ENTRIES:n})})),a=i.prototype,o=rs(e),s=function(t,e,n){var r,i,a=o(t),s=u(t,e);return s?s.value=n:(a.last=s={index:i=es(e,!0),key:e,value:n,previous:r=a.last,next:void 0,removed:!1},a.first||(a.first=s),r&&(r.next=s),A?a.size++:t.size++,"F"!==i&&(a.index[i]=s)),t},u=function(t,e){var n,r=o(t),i=es(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key===e)return n};return Yo(a,{clear:function(){for(var t=o(this),e=t.first;e;)e.removed=!0,e.previous&&(e.previous=e.previous.next=void 0),e=e.next;t.first=t.last=void 0,t.index=an(null),A?t.size=0:this.size=0},delete:function(t){var e=this,n=o(e),r=u(e,t);if(r){var i=r.next,a=r.previous;delete n.index[r.index],r.removed=!0,a&&(a.next=i),i&&(i.previous=a),n.first===r&&(n.first=i),n.last===r&&(n.last=a),A?n.size--:e.size--}return!!r},forEach:function(t){for(var e,n=o(this),r=_n(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!u(this,t)}}),Yo(a,n?{get:function(t){var e=u(this,t);return e&&e.value},set:function(t,e){return s(this,0===t?0:t,e)}}:{add:function(t){return s(this,t=0===t?0:t,t)}}),A&&ln(a,"size",{configurable:!0,get:function(){return o(this).size}}),i},setStrong:function(t,e,n){var r=e+" Iterator",i=rs(e),a=rs(r);qa(t,e,(function(t,e){ns(this,{type:r,target:t,state:i(t),kind:e,last:void 0})}),(function(){for(var t=a(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?Xa("keys"===e?n.key:"values"===e?n.value:[n.key,n.value],!1):(t.target=void 0,Xa(void 0,!0))}),n?"entries":"values",!n,!0),ts(e)}};Xo("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),is);var as=Object.assign,os=Object.defineProperty,ss=w([].concat),As=!as||s((function(){if(A&&1!==as({b:1},as(os({},"a",{enumerable:!0,get:function(){os(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol("assign detection"),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!==as({},t)[n]||$e(as({},e)).join("")!==r}))?function(t,e){for(var n=ot(t),r=arguments.length,i=1,a=ke.f,o=p.f;r>i;)for(var s,u=E(arguments[i++]),l=a?ss($e(u),a(u)):$e(u),h=l.length,f=0;h>f;)s=l[f++],A&&!c(o,u,s)||(n[s]=u[s]);return n}:as;Pe({target:"Object",stat:!0,arity:2,forced:Object.assign!==As},{assign:As});var us,ls,cs,hs,fs="process"===k(o.process),ds=vt("species"),ps=function(t,e){var n,r=Ut(t).constructor;return void 0===r||I(n=Ut(r)[ds])?e:Zr(n)},vs=TypeError,gs=function(t,e){if(t<e)throw new vs("Not enough arguments");return t},ms=/(?:ipad|iphone|ipod).*applewebkit/i.test(O),ys=o.setImmediate,_s=o.clearImmediate,ws=o.process,xs=o.Dispatch,bs=o.Function,Bs=o.MessageChannel,ks=o.String,Cs=0,Fs={},Es="onreadystatechange";s((function(){us=o.location}));var Is=function(t){if(At(Fs,t)){var e=Fs[t];delete Fs[t],e()}},Us=function(t){return function(){Is(t)}},Ss=function(t){Is(t.data)},Qs=function(t){o.postMessage(ks(t),us.protocol+"//"+us.host)};ys&&_s||(ys=function(t){gs(arguments.length,1);var e=M(t)?t:bs(t),n=on(arguments,1);return Fs[++Cs]=function(){yr(e,void 0,n)},ls(Cs),Cs},_s=function(t){delete Fs[t]},fs?ls=function(t){ws.nextTick(Us(t))}:xs&&xs.now?ls=function(t){xs.now(Us(t))}:Bs&&!ms?(hs=(cs=new Bs).port2,cs.port1.onmessage=Ss,ls=_n(hs.postMessage,hs)):o.addEventListener&&M(o.postMessage)&&!o.importScripts&&us&&"file:"!==us.protocol&&!s(Qs)?(ls=Qs,o.addEventListener("message",Ss,!1)):ls=Es in bt("script")?function(t){qe.appendChild(bt("script"))[Es]=function(){qe.removeChild(this),Is(t)}}:function(t){setTimeout(Us(t),0)});var Ts={set:ys,clear:_s},Ms=Object.getOwnPropertyDescriptor,Ds=function(t){if(!A)return o[t];var e=Ms(o,t);return e&&e.value},Ls=function(){this.head=null,this.tail=null};Ls.prototype={add:function(t){var e={item:t,next:null},n=this.tail;n?n.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}};var Ps,Os,Rs,zs,Hs,Vs=Ls,Ns=/ipad|iphone|ipod/i.test(O)&&"undefined"!=typeof Pebble,Ks=/web0s(?!.*chrome)/i.test(O),Gs=Ts.set,js=o.MutationObserver||o.WebKitMutationObserver,$s=o.document,Ws=o.process,Zs=o.Promise,qs=Ds("queueMicrotask");if(!qs){var Xs=new Vs,Ys=function(){var t,e;for(fs&&(t=Ws.domain)&&t.exit();e=Xs.get();)try{e()}catch(t){throw Xs.head&&Ps(),t}t&&t.enter()};ms||fs||Ks||!js||!$s?!Ns&&Zs&&Zs.resolve?((zs=Zs.resolve(void 0)).constructor=Zs,Hs=_n(zs.then,zs),Ps=function(){Hs(Ys)}):fs?Ps=function(){Ws.nextTick(Ys)}:(Gs=_n(Gs,o),Ps=function(){Gs(Ys)}):(Os=!0,Rs=$s.createTextNode(""),new js(Ys).observe(Rs,{characterData:!0}),Ps=function(){Rs.data=Os=!Os}),qs=function(t){Xs.head||Ps(),Xs.add(t)}}var Js=qs,tA=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},eA=o.Promise,nA="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,rA=!nA&&!fs&&"object"==typeof window&&"object"==typeof document;eA&&eA.prototype;var iA,aA,oA,sA=vt("species"),AA=!1,uA=M(o.PromiseRejectionEvent),lA=De("Promise",(function(){var t=$t(eA),e=t!==String(eA);if(!e&&66===N)return!0;if(!N||N<51||!/native code/.test(t)){var n=new eA((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))};if((n.constructor={})[sA]=r,!(AA=n.then((function(){}))instanceof r))return!0}return!e&&(rA||nA)&&!uA})),cA={CONSTRUCTOR:lA,REJECTION_EVENT:uA,SUBCLASSING:AA},hA=TypeError,fA=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw new hA("Bad Promise constructor");e=t,n=r})),this.resolve=Y(e),this.reject=Y(n)},dA={f:function(t){return new fA(t)}},pA=Ts.set,vA="Promise",gA=cA.CONSTRUCTOR,mA=cA.REJECTION_EVENT,yA=cA.SUBCLASSING,_A=ie.getterFor(vA),wA=ie.set,xA=eA&&eA.prototype,bA=eA,BA=xA,kA=o.TypeError,CA=o.document,FA=o.process,EA=dA.f,IA=EA,UA=!!(CA&&CA.createEvent&&o.dispatchEvent),SA="unhandledrejection",QA=function(t){var e;return!(!D(t)||!M(e=t.then))&&e},TA=function(t,e){var n,r,i,a=e.value,o=1===e.state,s=o?t.ok:t.fail,A=t.resolve,u=t.reject,l=t.domain;try{s?(o||(2===e.rejection&&OA(e),e.rejection=1),!0===s?n=a:(l&&l.enter(),n=s(a),l&&(l.exit(),i=!0)),n===t.promise?u(new kA("Promise-chain cycle")):(r=QA(n))?c(r,n,A,u):A(n)):u(a)}catch(t){l&&!i&&l.exit(),u(t)}},MA=function(t,e){t.notified||(t.notified=!0,Js((function(){for(var n,r=t.reactions;n=r.get();)TA(n,t);t.notified=!1,e&&!t.rejection&&LA(t)})))},DA=function(t,e,n){var r,i;UA?((r=CA.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),o.dispatchEvent(r)):r={promise:e,reason:n},!mA&&(i=o["on"+t])?i(r):t===SA&&function(t,e){try{1===arguments.length?console.error(t):console.error(t,e)}catch(t){}}("Unhandled promise rejection",n)},LA=function(t){c(pA,o,(function(){var e,n=t.facade,r=t.value;if(PA(t)&&(e=tA((function(){fs?FA.emit("unhandledRejection",r,n):DA(SA,n,r)})),t.rejection=fs||PA(t)?2:1,e.error))throw e.value}))},PA=function(t){return 1!==t.rejection&&!t.parent},OA=function(t){c(pA,o,(function(){var e=t.facade;fs?FA.emit("rejectionHandled",e):DA("rejectionhandled",e,t.value)}))},RA=function(t,e,n){return function(r){t(e,r,n)}},zA=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,MA(t,!0))},HA=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw new kA("Promise can't be resolved itself");var r=QA(e);r?Js((function(){var n={done:!1};try{c(r,e,RA(HA,n,t),RA(zA,n,t))}catch(e){zA(n,e,t)}})):(t.value=e,t.state=1,MA(t,!1))}catch(e){zA({done:!1},e,t)}}};if(gA&&(BA=(bA=function(t){Zo(this,BA),Y(t),c(iA,this);var e=_A(this);try{t(RA(HA,e),RA(zA,e))}catch(t){zA(e,t)}}).prototype,(iA=function(t){wA(this,{type:vA,done:!1,notified:!1,parent:!1,reactions:new Vs,rejection:!1,state:0,value:void 0})}).prototype=oe(BA,"then",(function(t,e){var n=_A(this),r=EA(ps(this,bA));return n.parent=!0,r.ok=!M(t)||t,r.fail=M(e)&&e,r.domain=fs?FA.domain:void 0,0===n.state?n.reactions.add(r):Js((function(){TA(r,n)})),r.promise})),aA=function(){var t=new iA,e=_A(t);this.promise=t,this.resolve=RA(HA,e),this.reject=RA(zA,e)},dA.f=EA=function(t){return t===bA||undefined===t?new aA(t):IA(t)},M(eA)&&xA!==Object.prototype)){oA=xA.then,yA||oe(xA,"then",(function(t,e){var n=this;return new bA((function(t,e){c(oA,n,t,e)})).then(t,e)}),{unsafe:!0});try{delete xA.constructor}catch(t){}za&&za(xA,BA)}Pe({global:!0,constructor:!0,wrap:!0,forced:gA},{Promise:bA}),gn(bA,vA,!1),ts(vA);var VA=cA.CONSTRUCTOR||!_a((function(t){eA.all(t).then(void 0,(function(){}))}));Pe({target:"Promise",stat:!0,forced:VA},{all:function(t){var e=this,n=dA.f(e),r=n.resolve,i=n.reject,a=tA((function(){var n=Y(e.resolve),a=[],o=0,s=1;$o(t,(function(t){var A=o++,u=!1;s++,c(n,e,t).then((function(t){u||(u=!0,a[A]=t,--s||r(a))}),i)})),--s||r(a)}));return a.error&&i(a.value),n.promise}});var NA=cA.CONSTRUCTOR,KA=eA&&eA.prototype;if(Pe({target:"Promise",proto:!0,forced:NA,real:!0},{catch:function(t){return this.then(void 0,t)}}),M(eA)){var GA=L("Promise").prototype.catch;KA.catch!==GA&&oe(KA,"catch",GA,{unsafe:!0})}Pe({target:"Promise",stat:!0,forced:VA},{race:function(t){var e=this,n=dA.f(e),r=n.reject,i=tA((function(){var i=Y(e.resolve);$o(t,(function(t){c(i,e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}}),Pe({target:"Promise",stat:!0,forced:cA.CONSTRUCTOR},{reject:function(t){var e=dA.f(this);return(0,e.reject)(t),e.promise}});var jA=cA.CONSTRUCTOR;L("Promise"),Pe({target:"Promise",stat:!0,forced:jA},{resolve:function(t){return function(t,e){if(Ut(t),D(e)&&e.constructor===t)return e;var n=dA.f(t);return(0,n.resolve)(e),n.promise}(this,t)}});var $A=function(){var t=Ut(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e},WA=o.RegExp,ZA=s((function(){var t=WA("a","y");return t.lastIndex=2,null!==t.exec("abcd")})),qA=ZA||s((function(){return!WA("a","y").sticky})),XA=ZA||s((function(){var t=WA("^r","gy");return t.lastIndex=2,null!==t.exec("str")})),YA={BROKEN_CARET:XA,MISSED_STICKY:qA,UNSUPPORTED_Y:ZA},JA=o.RegExp,tu=s((function(){var t=JA(".","s");return!(t.dotAll&&t.test("\n")&&"s"===t.flags)})),eu=o.RegExp,nu=s((function(){var t=eu("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),ru=ie.get,iu=it("native-string-replace",String.prototype.replace),au=RegExp.prototype.exec,ou=au,su=w("".charAt),Au=w("".indexOf),uu=w("".replace),lu=w("".slice),cu=function(){var t=/a/,e=/b*/g;return c(au,t,"a"),c(au,e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),hu=YA.BROKEN_CARET,fu=void 0!==/()??/.exec("")[1];(cu||fu||hu||tu||nu)&&(ou=function(t){var e,n,r,i,a,o,s,A=this,u=ru(A),l=je(t),h=u.raw;if(h)return h.lastIndex=A.lastIndex,e=c(ou,h,l),A.lastIndex=h.lastIndex,e;var f=u.groups,d=hu&&A.sticky,p=c($A,A),v=A.source,g=0,m=l;if(d&&(p=uu(p,"y",""),-1===Au(p,"g")&&(p+="g"),m=lu(l,A.lastIndex),A.lastIndex>0&&(!A.multiline||A.multiline&&"\n"!==su(l,A.lastIndex-1))&&(v="(?: "+v+")",m=" "+m,g++),n=new RegExp("^(?:"+v+")",p)),fu&&(n=new RegExp("^"+v+"$(?!\\s)",p)),cu&&(r=A.lastIndex),i=c(au,d?n:A,m),d?i?(i.input=lu(i.input,g),i[0]=lu(i[0],g),i.index=A.lastIndex,A.lastIndex+=i[0].length):A.lastIndex=0:cu&&i&&(A.lastIndex=A.global?i.index+i[0].length:r),fu&&i&&i.length>1&&c(iu,i[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(i[a]=void 0)})),i&&f)for(i.groups=o=an(null),a=0;a<f.length;a++)o[(s=f[a])[0]]=i[s[1]];return i});var du=ou;Pe({target:"RegExp",proto:!0,forced:/./.exec!==du},{exec:du});var pu=RegExp.prototype,vu=function(t){var e=t.flags;return void 0!==e||"flags"in pu||At(t,"flags")||!P(pu,t)?e:c($A,t)},gu=Vt.PROPER,mu="toString",yu=RegExp.prototype,_u=yu[mu],wu=s((function(){return"/a/b"!==_u.call({source:"a",flags:"b"})})),xu=gu&&_u.name!==mu;(wu||xu)&&oe(yu,mu,(function(){var t=Ut(this);return"/"+je(t.source)+"/"+je(vu(t))}),{unsafe:!0}),Xo("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),is);var bu=w("".charAt),Bu=w("".charCodeAt),ku=w("".slice),Cu=function(t){return function(e,n){var r,i,a=je(S(e)),o=le(n),s=a.length;return o<0||o>=s?t?"":void 0:(r=Bu(a,o))<55296||r>56319||o+1===s||(i=Bu(a,o+1))<56320||i>57343?t?bu(a,o):r:t?ku(a,o,o+2):i-56320+(r-55296<<10)+65536}},Fu={codeAt:Cu(!1),charAt:Cu(!0)},Eu=Fu.charAt,Iu="String Iterator",Uu=ie.set,Su=ie.getterFor(Iu);qa(String,"String",(function(t){Uu(this,{type:Iu,string:je(t),index:0})}),(function(){var t,e=Su(this),n=e.string,r=e.index;return r>=n.length?Xa(void 0,!0):(t=Eu(n,r),e.index+=t.length,Xa(t,!1))}));var Qu=vt("species"),Tu=RegExp.prototype,Mu=function(t,e,n,r){var i=vt(t),a=!s((function(){var e={};return e[i]=function(){return 7},7!==""[t](e)})),o=a&&!s((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[Qu]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return e=!0,null},n[i](""),!e}));if(!a||!o||n){var A=/./[i],u=e(i,""[t],(function(t,e,n,r,i){var o=e.exec;return o===du||o===Tu.exec?a&&!i?{done:!0,value:c(A,e,n,r)}:{done:!0,value:c(t,n,e,r)}:{done:!1}}));oe(String.prototype,t,u[0]),oe(Tu,i,u[1])}r&&Ot(Tu[i],"sham",!0)},Du=Fu.charAt,Lu=function(t,e,n){return e+(n?Du(t,e).length:1)},Pu=TypeError,Ou=function(t,e){var n=t.exec;if(M(n)){var r=c(n,t,e);return null!==r&&Ut(r),r}if("RegExp"===k(t))return c(du,t,e);throw new Pu("RegExp#exec called on incompatible receiver")};Mu("match",(function(t,e,n){return[function(e){var n=S(this),r=I(e)?void 0:J(e,t);return r?c(r,e,n):new RegExp(e)[t](je(n))},function(t){var r=Ut(this),i=je(t),a=n(e,r,i);if(a.done)return a.value;if(!r.global)return Ou(r,i);var o=r.unicode;r.lastIndex=0;for(var s,A=[],u=0;null!==(s=Ou(r,i));){var l=je(s[0]);A[u]=l,""===l&&(r.lastIndex=Lu(i,pe(r.lastIndex),o)),u++}return 0===u?null:A}]}));var Ru,zu=vt("match"),Hu=function(t){var e;return D(t)&&(void 0!==(e=t[zu])?!!e:"RegExp"===k(t))},Vu=TypeError,Nu=function(t){if(Hu(t))throw new Vu("The method doesn't accept regular expressions");return t},Ku=vt("match"),Gu=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[Ku]=!1,"/./"[t](e)}catch(t){}}return!1},ju=Ct.f,$u=mn("".slice),Wu=Math.min,Zu=Gu("startsWith"),qu=!(Zu||(Ru=ju(String.prototype,"startsWith"),!Ru||Ru.writable));Pe({target:"String",proto:!0,forced:!qu&&!Zu},{startsWith:function(t){var e=je(S(this));Nu(t);var n=pe(Wu(arguments.length>1?arguments[1]:void 0,e.length)),r=je(t);return $u(e,n,n+r.length)===r}});var Xu,Yu="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff",Ju=w("".replace),tl=RegExp("^["+Yu+"]+"),el=RegExp("(^|[^"+Yu+"])["+Yu+"]+$"),nl=function(t){return function(e){var n=je(S(e));return 1&t&&(n=Ju(n,tl,"")),2&t&&(n=Ju(n,el,"$1")),n}},rl={start:nl(1),end:nl(2),trim:nl(3)},il=Vt.PROPER,al=rl.trim;Pe({target:"String",proto:!0,forced:(Xu="trim",s((function(){return!!Yu[Xu]()||"âÂá "!=="âÂá "[Xu]()||il&&Yu[Xu].name!==Xu})))},{trim:function(){return al(this)}});var ol=/"/g,sl=w("".replace),Al=function(t,e,n,r){var i=je(S(t)),a="<"+e;return""!==n&&(a+=" "+n+'="'+sl(je(r),ol,"&quot;")+'"'),a+">"+i+"</"+e+">"},ul=function(t){return s((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))};Pe({target:"String",proto:!0,forced:ul("anchor")},{anchor:function(t){return Al(this,"a","name",t)}});var ll,cl,hl,fl="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,dl=ie.enforce,pl=ie.get,vl=o.Int8Array,gl=vl&&vl.prototype,ml=o.Uint8ClampedArray,yl=ml&&ml.prototype,_l=vl&&Ia(vl),wl=gl&&Ia(gl),xl=Object.prototype,bl=o.TypeError,Bl=vt("toStringTag"),kl=ht("TYPED_ARRAY_TAG"),Cl="TypedArrayConstructor",Fl=fl&&!!za&&"Opera"!==Ke(o.opera),El=!1,Il={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Ul={BigInt64Array:8,BigUint64Array:8},Sl=function(t){var e=Ia(t);if(D(e)){var n=pl(e);return n&&At(n,Cl)?n[Cl]:Sl(e)}},Ql=function(t){if(!D(t))return!1;var e=Ke(t);return At(Il,e)||At(Ul,e)};for(ll in Il)(hl=(cl=o[ll])&&cl.prototype)?dl(hl)[Cl]=cl:Fl=!1;for(ll in Ul)(hl=(cl=o[ll])&&cl.prototype)&&(dl(hl)[Cl]=cl);if((!Fl||!M(_l)||_l===Function.prototype)&&(_l=function(){throw new bl("Incorrect invocation")},Fl))for(ll in Il)o[ll]&&za(o[ll],_l);if((!Fl||!wl||wl===xl)&&(wl=_l.prototype,Fl))for(ll in Il)o[ll]&&za(o[ll].prototype,wl);if(Fl&&Ia(yl)!==wl&&za(yl,wl),A&&!At(wl,Bl))for(ll in El=!0,ln(wl,Bl,{configurable:!0,get:function(){return D(this)?this[kl]:void 0}}),Il)o[ll]&&Ot(o[ll],kl,ll);var Tl={NATIVE_ARRAY_BUFFER_VIEWS:Fl,TYPED_ARRAY_TAG:El&&kl,aTypedArray:function(t){if(Ql(t))return t;throw new bl("Target is not a typed array")},aTypedArrayConstructor:function(t){if(M(t)&&(!za||P(_l,t)))return t;throw new bl(q(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,n,r){if(A){if(n)for(var i in Il){var a=o[i];if(a&&At(a.prototype,t))try{delete a.prototype[t]}catch(n){try{a.prototype[t]=e}catch(t){}}}wl[t]&&!n||oe(wl,t,n?e:Fl&&gl[t]||e,r)}},exportTypedArrayStaticMethod:function(t,e,n){var r,i;if(A){if(za){if(n)for(r in Il)if((i=o[r])&&At(i,t))try{delete i[t]}catch(t){}if(_l[t]&&!n)return;try{return oe(_l,t,n?e:Fl&&_l[t]||e)}catch(t){}}for(r in Il)!(i=o[r])||i[t]&&!n||oe(i,t,e)}},getTypedArrayConstructor:Sl,isView:function(t){if(!D(t))return!1;var e=Ke(t);return"DataView"===e||At(Il,e)||At(Ul,e)},isTypedArray:Ql,TypedArray:_l,TypedArrayPrototype:wl},Ml=Tl.NATIVE_ARRAY_BUFFER_VIEWS,Dl=o.ArrayBuffer,Ll=o.Int8Array,Pl=!Ml||!s((function(){Ll(1)}))||!s((function(){new Ll(-1)}))||!_a((function(t){new Ll,new Ll(null),new Ll(1.5),new Ll(t)}),!0)||s((function(){return 1!==new Ll(new Dl(2),1,void 0).length})),Ol=RangeError,Rl=function(t){if(void 0===t)return 0;var e=le(t),n=pe(e);if(e!==n)throw new Ol("Wrong length or index");return n},zl=Math.sign||function(t){var e=+t;return 0===e||e!=e?e:e<0?-1:1},Hl=Math.abs,Vl=2220446049250313e-31,Nl=1/Vl,Kl=function(t,e,n,r){var i=+t,a=Hl(i),o=zl(i);if(a<r)return o*function(t){return t+Nl-Nl}(a/r/e)*r*e;var s=(1+e/Vl)*a,A=s-(s-a);return A>n||A!=A?o*(1/0):o*A},Gl=Math.fround||function(t){return Kl(t,1.1920928955078125e-7,34028234663852886e22,11754943508222875e-54)},jl=Array,$l=Math.abs,Wl=Math.pow,Zl=Math.floor,ql=Math.log,Xl=Math.LN2,Yl=function(t,e,n){var r,i,a,o=jl(n),s=8*n-e-1,A=(1<<s)-1,u=A>>1,l=23===e?Wl(2,-24)-Wl(2,-77):0,c=t<0||0===t&&1/t<0?1:0,h=0;for((t=$l(t))!=t||t===1/0?(i=t!=t?1:0,r=A):(r=Zl(ql(t)/Xl),t*(a=Wl(2,-r))<1&&(r--,a*=2),(t+=r+u>=1?l/a:l*Wl(2,1-u))*a>=2&&(r++,a/=2),r+u>=A?(i=0,r=A):r+u>=1?(i=(t*a-1)*Wl(2,e),r+=u):(i=t*Wl(2,u-1)*Wl(2,e),r=0));e>=8;)o[h++]=255&i,i/=256,e-=8;for(r=r<<e|i,s+=e;s>0;)o[h++]=255&r,r/=256,s-=8;return o[--h]|=128*c,o},Jl=function(t,e){var n,r=t.length,i=8*r-e-1,a=(1<<i)-1,o=a>>1,s=i-7,A=r-1,u=t[A--],l=127&u;for(u>>=7;s>0;)l=256*l+t[A--],s-=8;for(n=l&(1<<-s)-1,l>>=-s,s+=e;s>0;)n=256*n+t[A--],s-=8;if(0===l)l=1-o;else{if(l===a)return n?NaN:u?-1/0:1/0;n+=Wl(2,e),l-=o}return(u?-1:1)*n*Wl(2,l-e)},tc=Vt.PROPER,ec=Vt.CONFIGURABLE,nc="ArrayBuffer",rc="DataView",ic="prototype",ac="Wrong index",oc=ie.getterFor(nc),sc=ie.getterFor(rc),Ac=ie.set,uc=o[nc],lc=uc,cc=lc&&lc[ic],hc=o[rc],fc=hc&&hc[ic],dc=Object.prototype,pc=o.Array,vc=o.RangeError,gc=w(Ji),mc=w([].reverse),yc=Yl,_c=Jl,wc=function(t){return[255&t]},xc=function(t){return[255&t,t>>8&255]},bc=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},Bc=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},kc=function(t){return yc(Gl(t),23,4)},Cc=function(t){return yc(t,52,8)},Fc=function(t,e,n){ln(t[ic],e,{configurable:!0,get:function(){return n(this)[e]}})},Ec=function(t,e,n,r){var i=sc(t),a=Rl(n),o=!!r;if(a+e>i.byteLength)throw new vc(ac);var s=i.bytes,A=a+i.byteOffset,u=on(s,A,A+e);return o?u:mc(u)},Ic=function(t,e,n,r,i,a){var o=sc(t),s=Rl(n),A=r(+i),u=!!a;if(s+e>o.byteLength)throw new vc(ac);for(var l=o.bytes,c=s+o.byteOffset,h=0;h<e;h++)l[c+h]=A[u?h:e-h-1]};if(fl){var Uc=tc&&uc.name!==nc;s((function(){uc(1)}))&&s((function(){new uc(-1)}))&&!s((function(){return new uc,new uc(1.5),new uc(NaN),1!==uc.length||Uc&&!ec}))?Uc&&ec&&Ot(uc,"name",nc):((lc=function(t){return Zo(this,cc),qo(new uc(Rl(t)),this,lc)})[ic]=cc,cc.constructor=lc,Ee(lc,uc)),za&&Ia(fc)!==dc&&za(fc,dc);var Sc=new hc(new lc(2)),Qc=w(fc.setInt8);Sc.setInt8(0,2147483648),Sc.setInt8(1,2147483649),!Sc.getInt8(0)&&Sc.getInt8(1)||Yo(fc,{setInt8:function(t,e){Qc(this,t,e<<24>>24)},setUint8:function(t,e){Qc(this,t,e<<24>>24)}},{unsafe:!0})}else cc=(lc=function(t){Zo(this,cc);var e=Rl(t);Ac(this,{type:nc,bytes:gc(pc(e),0),byteLength:e}),A||(this.byteLength=e,this.detached=!1)})[ic],fc=(hc=function(t,e,n){Zo(this,fc),Zo(t,cc);var r=oc(t),i=r.byteLength,a=le(e);if(a<0||a>i)throw new vc("Wrong offset");if(a+(n=void 0===n?i-a:pe(n))>i)throw new vc("Wrong length");Ac(this,{type:rc,buffer:t,byteLength:n,byteOffset:a,bytes:r.bytes}),A||(this.buffer=t,this.byteLength=n,this.byteOffset=a)})[ic],A&&(Fc(lc,"byteLength",oc),Fc(hc,"buffer",sc),Fc(hc,"byteLength",sc),Fc(hc,"byteOffset",sc)),Yo(fc,{getInt8:function(t){return Ec(this,1,t)[0]<<24>>24},getUint8:function(t){return Ec(this,1,t)[0]},getInt16:function(t){var e=Ec(this,2,t,arguments.length>1&&arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=Ec(this,2,t,arguments.length>1&&arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return Bc(Ec(this,4,t,arguments.length>1&&arguments[1]))},getUint32:function(t){return Bc(Ec(this,4,t,arguments.length>1&&arguments[1]))>>>0},getFloat32:function(t){return _c(Ec(this,4,t,arguments.length>1&&arguments[1]),23)},getFloat64:function(t){return _c(Ec(this,8,t,arguments.length>1&&arguments[1]),52)},setInt8:function(t,e){Ic(this,1,t,wc,e)},setUint8:function(t,e){Ic(this,1,t,wc,e)},setInt16:function(t,e){Ic(this,2,t,xc,e,arguments.length>2&&arguments[2])},setUint16:function(t,e){Ic(this,2,t,xc,e,arguments.length>2&&arguments[2])},setInt32:function(t,e){Ic(this,4,t,bc,e,arguments.length>2&&arguments[2])},setUint32:function(t,e){Ic(this,4,t,bc,e,arguments.length>2&&arguments[2])},setFloat32:function(t,e){Ic(this,4,t,kc,e,arguments.length>2&&arguments[2])},setFloat64:function(t,e){Ic(this,8,t,Cc,e,arguments.length>2&&arguments[2])}});gn(lc,nc),gn(hc,rc);var Tc={ArrayBuffer:lc,DataView:hc},Mc=Math.floor,Dc=Number.isInteger||function(t){return!D(t)&&isFinite(t)&&Mc(t)===t},Lc=RangeError,Pc=RangeError,Oc=function(t,e){var n=function(t){var e=le(t);if(e<0)throw new Lc("The argument can't be less than 0");return e}(t);if(n%e)throw new Pc("Wrong offset");return n},Rc=Math.round,zc=TypeError,Hc=function(t){var e=yt(t,"number");if("number"==typeof e)throw new zc("Can't convert number to bigint");return BigInt(e)},Vc=Tl.aTypedArrayConstructor,Nc=function(t){var e,n,r,i,a,o,s,A,u,l=Zr(this),h=ot(t),f=arguments.length,d=f>1?arguments[1]:void 0,p=void 0!==d,v=ca(h);if(v&&!ua(v))for(A=(s=fa(h,v)).next,h=[];!(o=c(A,s)).done;)h.push(o.value);for(p&&f>2&&(d=_n(d,arguments[2])),n=ve(h),r=new(Vc(l))(n),i="BigInt64Array"===(u=Ke(r))||"BigUint64Array"===u,e=0;n>e;e++)a=p?d(h[e],e):h[e],r[e]=i?Hc(a):+a;return r},Kc=function(t,e,n){for(var r=0,i=arguments.length>2?n:ve(e),a=new t(i);i>r;)a[r]=e[r++];return a},Gc=e((function(t){var e=Be.f,n=Dn.forEach,r=ie.get,i=ie.set,a=ie.enforce,s=Pt.f,u=Ct.f,l=o.RangeError,h=Tc.ArrayBuffer,f=h.prototype,d=Tc.DataView,p=Tl.NATIVE_ARRAY_BUFFER_VIEWS,g=Tl.TYPED_ARRAY_TAG,m=Tl.TypedArray,y=Tl.TypedArrayPrototype,_=Tl.isTypedArray,w="BYTES_PER_ELEMENT",x="Wrong length",b=function(t,e){ln(t,e,{configurable:!0,get:function(){return r(this)[e]}})},B=function(t){var e;return P(f,t)||"ArrayBuffer"===(e=Ke(t))||"SharedArrayBuffer"===e},k=function(t,e){return _(t)&&!W(e)&&e in t&&Dc(+e)&&e>=0},C=function(t,e){return e=_t(e),k(t,e)?v(2,t[e]):u(t,e)},F=function(t,e,n){return e=_t(e),!(k(t,e)&&D(n)&&At(n,"value"))||At(n,"get")||At(n,"set")||n.configurable||At(n,"writable")&&!n.writable||At(n,"enumerable")&&!n.enumerable?s(t,e,n):(t[e]=n.value,t)};A?(p||(Ct.f=C,Pt.f=F,b(y,"buffer"),b(y,"byteOffset"),b(y,"byteLength"),b(y,"length")),Pe({target:"Object",stat:!0,forced:!p},{getOwnPropertyDescriptor:C,defineProperty:F}),t.exports=function(t,A,u){var f=t.match(/\d+/)[0]/8,v=t+(u?"Clamped":"")+"Array",b="get"+t,k="set"+t,C=o[v],F=C,E=F&&F.prototype,I={},U=function(t,e,n){var i=r(t);i.view[k](e*f+i.byteOffset,u?function(t){var e=Rc(t);return e<0?0:e>255?255:255&e}(n):n,!0)},S=function(t,e){s(t,e,{get:function(){return function(t,e){var n=r(t);return n.view[b](e*f+n.byteOffset,!0)}(this,e)},set:function(t){return U(this,e,t)},enumerable:!0})};p?Pl&&(F=A((function(t,e,n,r){return Zo(t,E),qo(D(e)?B(e)?void 0!==r?new C(e,Oc(n,f),r):void 0!==n?new C(e,Oc(n,f)):new C(e):_(e)?Kc(F,e):c(Nc,F,e):new C(Rl(e)),t,F)})),za&&za(F,m),n(e(C),(function(t){t in F||Ot(F,t,C[t])})),F.prototype=E):(F=A((function(t,e,n,r){Zo(t,E);var a,o,s,A=0,u=0;if(D(e)){if(!B(e))return _(e)?Kc(F,e):c(Nc,F,e);a=e,u=Oc(n,f);var p=e.byteLength;if(void 0===r){if(p%f)throw new l(x);if((o=p-u)<0)throw new l(x)}else if((o=pe(r)*f)+u>p)throw new l(x);s=o/f}else s=Rl(e),a=new h(o=s*f);for(i(t,{buffer:a,byteOffset:u,byteLength:o,length:s,view:new d(a)});A<s;)S(t,A++)})),za&&za(F,m),E=F.prototype=an(y)),E.constructor!==F&&Ot(E,"constructor",F),a(E).TypedArrayConstructor=F,g&&Ot(E,g,v);var Q=F!==C;I[v]=F,Pe({global:!0,constructor:!0,forced:Q,sham:!p},I),w in F||Ot(F,w,f),w in E||Ot(E,w,f),ts(v)}):t.exports=function(){}}));Gc("Int32",(function(t){return function(e,n,r){return t(this,e,n,r)}}));var jc=Math.min,$c=[].copyWithin||function(t,e){var n=ot(this),r=ve(n),i=fe(t,r),a=fe(e,r),o=arguments.length>2?arguments[2]:void 0,s=jc((void 0===o?r:fe(o,r))-a,r-i),A=1;for(a<i&&i<a+s&&(A=-1,a+=s-1,i+=s-1);s-- >0;)a in n?n[i]=n[a]:co(n,i),i+=A,a+=A;return n},Wc=w($c),Zc=Tl.aTypedArray;(0,Tl.exportTypedArrayMethod)("copyWithin",(function(t,e){return Wc(Zc(this),t,e,arguments.length>2?arguments[2]:void 0)}));var qc=Dn.every,Xc=Tl.aTypedArray;(0,Tl.exportTypedArrayMethod)("every",(function(t){return qc(Xc(this),t,arguments.length>1?arguments[1]:void 0)}));var Yc=Tl.aTypedArray,Jc=Tl.exportTypedArrayMethod,th=w("".slice);Jc("fill",(function(t){var e=arguments.length;Yc(this);var n="Big"===th(Ke(this),0,3)?Hc(t):+t;return c(Ji,this,n,e>1?arguments[1]:void 0,e>2?arguments[2]:void 0)}),s((function(){var t=0;return new Int8Array(2).fill({valueOf:function(){return t++}}),1!==t})));var eh=Tl.aTypedArrayConstructor,nh=Tl.getTypedArrayConstructor,rh=function(t){return eh(ps(t,nh(t)))},ih=Dn.filter,ah=Tl.aTypedArray;(0,Tl.exportTypedArrayMethod)("filter",(function(t){return function(t,e){return Kc(rh(t),e)}(this,ih(ah(this),t,arguments.length>1?arguments[1]:void 0))}));var oh=Dn.find,sh=Tl.aTypedArray;(0,Tl.exportTypedArrayMethod)("find",(function(t){return oh(sh(this),t,arguments.length>1?arguments[1]:void 0)}));var Ah=Dn.findIndex,uh=Tl.aTypedArray;(0,Tl.exportTypedArrayMethod)("findIndex",(function(t){return Ah(uh(this),t,arguments.length>1?arguments[1]:void 0)}));var lh=Dn.forEach,ch=Tl.aTypedArray;(0,Tl.exportTypedArrayMethod)("forEach",(function(t){lh(ch(this),t,arguments.length>1?arguments[1]:void 0)}));var hh=me.includes,fh=Tl.aTypedArray;(0,Tl.exportTypedArrayMethod)("includes",(function(t){return hh(fh(this),t,arguments.length>1?arguments[1]:void 0)}));var dh=me.indexOf,ph=Tl.aTypedArray;(0,Tl.exportTypedArrayMethod)("indexOf",(function(t){return dh(ph(this),t,arguments.length>1?arguments[1]:void 0)}));var vh=vt("iterator"),gh=o.Uint8Array,mh=w(no.values),yh=w(no.keys),_h=w(no.entries),wh=Tl.aTypedArray,xh=Tl.exportTypedArrayMethod,bh=gh&&gh.prototype,Bh=!s((function(){bh[vh].call([1])})),kh=!!bh&&bh.values&&bh[vh]===bh.values&&"values"===bh.values.name,Ch=function(){return mh(wh(this))};xh("entries",(function(){return _h(wh(this))}),Bh),xh("keys",(function(){return yh(wh(this))}),Bh),xh("values",Ch,Bh||!kh,{name:"values"}),xh(vh,Ch,Bh||!kh,{name:"values"});var Fh=Tl.aTypedArray,Eh=Tl.exportTypedArrayMethod,Ih=w([].join);Eh("join",(function(t){return Ih(Fh(this),t)}));var Uh=Math.min,Sh=[].lastIndexOf,Qh=!!Sh&&1/[1].lastIndexOf(1,-0)<0,Th=Ci("lastIndexOf"),Mh=Qh||!Th?function(t){if(Qh)return yr(Sh,this,arguments)||0;var e=Q(this),n=ve(e);if(0===n)return-1;var r=n-1;for(arguments.length>1&&(r=Uh(r,le(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}:Sh,Dh=Tl.aTypedArray;(0,Tl.exportTypedArrayMethod)("lastIndexOf",(function(t){var e=arguments.length;return yr(Mh,Dh(this),e>1?[t,arguments[1]]:[t])}));var Lh=Dn.map,Ph=Tl.aTypedArray;(0,Tl.exportTypedArrayMethod)("map",(function(t){return Lh(Ph(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(rh(t))(e)}))}));var Oh=TypeError,Rh="Reduce of empty array with no initial value",zh=function(t){return function(e,n,r,i){var a=ot(e),o=E(a),s=ve(a);if(Y(n),0===s&&r<2)throw new Oh(Rh);var A=t?s-1:0,u=t?-1:1;if(r<2)for(;;){if(A in o){i=o[A],A+=u;break}if(A+=u,t?A<0:s<=A)throw new Oh(Rh)}for(;t?A>=0:s>A;A+=u)A in o&&(i=n(i,o[A],A,a));return i}},Hh={left:zh(!1),right:zh(!0)},Vh=Hh.left,Nh=Tl.aTypedArray;(0,Tl.exportTypedArrayMethod)("reduce",(function(t){var e=arguments.length;return Vh(Nh(this),t,e,e>1?arguments[1]:void 0)}));var Kh=Hh.right,Gh=Tl.aTypedArray;(0,Tl.exportTypedArrayMethod)("reduceRight",(function(t){var e=arguments.length;return Kh(Gh(this),t,e,e>1?arguments[1]:void 0)}));var jh=Tl.aTypedArray,$h=Tl.exportTypedArrayMethod,Wh=Math.floor;$h("reverse",(function(){for(var t,e=this,n=jh(e).length,r=Wh(n/2),i=0;i<r;)t=e[i],e[i++]=e[--n],e[n]=t;return e}));var Zh=o.RangeError,qh=o.Int8Array,Xh=qh&&qh.prototype,Yh=Xh&&Xh.set,Jh=Tl.aTypedArray,tf=Tl.exportTypedArrayMethod,ef=!s((function(){var t=new Uint8ClampedArray(2);return c(Yh,t,{length:1,0:3},1),3!==t[1]})),nf=ef&&Tl.NATIVE_ARRAY_BUFFER_VIEWS&&s((function(){var t=new qh(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));tf("set",(function(t){Jh(this);var e=Oc(arguments.length>1?arguments[1]:void 0,1),n=ot(t);if(ef)return c(Yh,this,n,e);var r=this.length,i=ve(n),a=0;if(i+e>r)throw new Zh("Wrong length");for(;a<i;)this[e+a]=n[a++]}),!ef||nf);var rf=Tl.aTypedArray;(0,Tl.exportTypedArrayMethod)("slice",(function(t,e){for(var n=on(rf(this),t,e),r=rh(this),i=0,a=n.length,o=new r(a);a>i;)o[i]=n[i++];return o}),s((function(){new Int8Array(1).slice()})));var af=Dn.some,of=Tl.aTypedArray;(0,Tl.exportTypedArrayMethod)("some",(function(t){return af(of(this),t,arguments.length>1?arguments[1]:void 0)}));var sf=Tl.aTypedArray,Af=Tl.exportTypedArrayMethod,uf=o.Uint16Array,lf=uf&&mn(uf.prototype.sort),cf=!(!lf||s((function(){lf(new uf(2),null)}))&&s((function(){lf(new uf(2),{})}))),hf=!!lf&&!s((function(){if(N)return N<74;if(go)return go<67;if(mo)return!0;if(_o)return _o<602;var t,e,n=new uf(516),r=Array(516);for(t=0;t<516;t++)e=t%4,n[t]=515-t,r[t]=t-2*e+3;for(lf(n,(function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(n[t]!==r[t])return!0}));Af("sort",(function(t){return void 0!==t&&Y(t),hf?lf(this,t):po(sf(this),function(t){return function(e,n){return void 0!==t?+t(e,n)||0:n!=n?-1:e!=e?1:0===e&&0===n?1/e>0&&1/n<0?1:-1:e>n}}(t))}),!hf||cf);var ff=Tl.aTypedArray;(0,Tl.exportTypedArrayMethod)("subarray",(function(t,e){var n=ff(this),r=n.length,i=fe(t,r);return new(rh(n))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,pe((void 0===e?r:fe(e,r))-i))}));var df=o.Int8Array,pf=Tl.aTypedArray,vf=Tl.exportTypedArrayMethod,gf=[].toLocaleString,mf=!!df&&s((function(){gf.call(new df(1))}));vf("toLocaleString",(function(){return yr(gf,mf?on(pf(this)):pf(this),on(arguments))}),s((function(){return[1,2].toLocaleString()!==new df([1,2]).toLocaleString()}))||!s((function(){df.prototype.toLocaleString.call([1,2])})));var yf=Tl.exportTypedArrayMethod,_f=o.Uint8Array,wf=_f&&_f.prototype||{},xf=[].toString,bf=w([].join);s((function(){xf.call({})}))&&(xf=function(){return bf(this)});var Bf=wf.toString!==xf;yf("toString",xf,Bf);var kf=No.getWeakData,Cf=ie.set,Ff=ie.getterFor,Ef=Dn.find,If=Dn.findIndex,Uf=w([].splice),Sf=0,Qf=function(t){return t.frozen||(t.frozen=new Tf)},Tf=function(){this.entries=[]},Mf=function(t,e){return Ef(t.entries,(function(t){return t[0]===e}))};Tf.prototype={get:function(t){var e=Mf(this,t);if(e)return e[1]},has:function(t){return!!Mf(this,t)},set:function(t,e){var n=Mf(this,t);n?n[1]=e:this.entries.push([t,e])},delete:function(t){var e=If(this.entries,(function(e){return e[0]===t}));return~e&&Uf(this.entries,e,1),!!~e}};var Df,Lf={getConstructor:function(t,e,n,r){var i=t((function(t,i){Zo(t,a),Cf(t,{type:e,id:Sf++,frozen:void 0}),I(i)||$o(i,t[r],{that:t,AS_ENTRIES:n})})),a=i.prototype,o=Ff(e),s=function(t,e,n){var r=o(t),i=kf(Ut(e),!0);return!0===i?Qf(r).set(e,n):i[r.id]=n,t};return Yo(a,{delete:function(t){var e=o(this);if(!D(t))return!1;var n=kf(t);return!0===n?Qf(e).delete(t):n&&At(n,e.id)&&delete n[e.id]},has:function(t){var e=o(this);if(!D(t))return!1;var n=kf(t);return!0===n?Qf(e).has(t):n&&At(n,e.id)}}),Yo(a,n?{get:function(t){var e=o(this);if(D(t)){var n=kf(t);return!0===n?Qf(e).get(t):n?n[e.id]:void 0}},set:function(t,e){return s(this,t,e)}}:{add:function(t){return s(this,t,!0)}}),i}},Pf=ie.enforce,Of=Object,Rf=Array.isArray,zf=Of.isExtensible,Hf=Of.isFrozen,Vf=Of.isSealed,Nf=Of.freeze,Kf=Of.seal,Gf=!o.ActiveXObject&&"ActiveXObject"in o,jf=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},$f=Xo("WeakMap",jf,Lf),Wf=$f.prototype,Zf=w(Wf.set);if(Zt)if(Gf){Df=Lf.getConstructor(jf,"WeakMap",!0),No.enable();var qf=w(Wf.delete),Xf=w(Wf.has),Yf=w(Wf.get);Yo(Wf,{delete:function(t){if(D(t)&&!zf(t)){var e=Pf(this);return e.frozen||(e.frozen=new Df),qf(this,t)||e.frozen.delete(t)}return qf(this,t)},has:function(t){if(D(t)&&!zf(t)){var e=Pf(this);return e.frozen||(e.frozen=new Df),Xf(this,t)||e.frozen.has(t)}return Xf(this,t)},get:function(t){if(D(t)&&!zf(t)){var e=Pf(this);return e.frozen||(e.frozen=new Df),Xf(this,t)?Yf(this,t):e.frozen.get(t)}return Yf(this,t)},set:function(t,e){if(D(t)&&!zf(t)){var n=Pf(this);n.frozen||(n.frozen=new Df),Xf(this,t)?Zf(this,t,e):n.frozen.set(t,e)}else Zf(this,t,e);return this}})}else Vo&&s((function(){var t=Nf([]);return Zf(new $f,t,1),!Hf(t)}))&&Yo(Wf,{set:function(t,e){var n;return Rf(t)&&(Hf(t)?n=Nf:Vf(t)&&(n=Kf)),Zf(this,t,e),n&&n(t),this}});Pe({global:!0,forced:o.globalThis!==o},{globalThis:o});var Jf=vt("iterator"),td=no.values,ed=function(t,e){if(t){if(t[Jf]!==td)try{Ot(t,Jf,td)}catch(e){t[Jf]=td}if(gn(t,e,!0),xi[e])for(var n in no)if(t[n]!==no[n])try{Ot(t,n,no[n])}catch(e){t[n]=no[n]}}};for(var nd in xi)ed(o[nd]&&o[nd].prototype,nd);function rd(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return id(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?id(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function id(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function ad(){}ed(ki,"DOMTokenList");var od,sd=function(t){return t};function Ad(t,e){for(var n in e)t[n]=e[n];return t}function ud(t){return t()}function ld(){return Object.create(null)}function cd(t){t.forEach(ud)}function hd(t){return"function"==typeof t}function fd(t,e){return t!=t?e==e:t!==e||t&&"object"===ni(t)||"function"==typeof t}function dd(t,e){return od||(od=document.createElement("a")),od.href=e,t===od.href}function pd(t){if(null==t)return ad;for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=t.subscribe.apply(t,n);return i.unsubscribe?function(){return i.unsubscribe()}:i}function vd(t,e,n){t.$$.on_destroy.push(pd(e,n))}function gd(t,e,n,r){if(t){var i=md(t,e,n,r);return t[0](i)}}function md(t,e,n,r){return t[1]&&r?Ad(n.ctx.slice(),t[1](r(e))):n.ctx}function yd(t,e,n,r){if(t[2]&&r){var i=t[2](r(n));if(void 0===e.dirty)return i;if("object"===ni(i)){for(var a=[],o=Math.max(e.dirty.length,i.length),s=0;s<o;s+=1)a[s]=e.dirty[s]|i[s];return a}return e.dirty|i}return e.dirty}function _d(t,e,n,r,i,a){if(i){var o=md(e,n,r,a);t.p(o,i)}}function wd(t){if(t.ctx.length>32){for(var e=[],n=t.ctx.length/32,r=0;r<n;r++)e[r]=-1;return e}return-1}function xd(t,e,n){return t.set(n),e}function bd(t){return t&&hd(t.destroy)?t.destroy:ad}var Bd="undefined"!=typeof window,kd=Bd?function(){return window.performance.now()}:function(){return Date.now()},Cd=Bd?function(t){return requestAnimationFrame(t)}:ad,Fd=new Set;function Ed(t){Fd.forEach((function(e){e.c(t)||(Fd.delete(e),e.f())})),0!==Fd.size&&Cd(Ed)}var Id,Ud,Sd="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global,Qd=function(){function t(e){oi(this,t),this.options=e,this._listeners="WeakMap"in Sd?new WeakMap:void 0}return ai(t,[{key:"observe",value:function(t,e){var n=this;return this._listeners.set(t,e),this._getObserver().observe(t,this.options),function(){n._listeners.delete(t),n._observer.unobserve(t)}}},{key:"_getObserver",value:function(){var e,n=this;return null!==(e=this._observer)&&void 0!==e?e:this._observer=new ResizeObserver((function(e){var r,i,a=rd(e);try{for(a.s();!(i=a.n()).done;){var o=i.value;t.entries.set(o.target,o),null===(r=n._listeners.get(o.target))||void 0===r||r(o)}}catch(t){a.e(t)}finally{a.f()}}))}}])}();function Td(t,e){t.appendChild(e)}function Md(t,e,n){var r=function(t){if(!t)return document;var e=t.getRootNode?t.getRootNode():t.ownerDocument;if(e&&e.host)return e;return t.ownerDocument}(t);if(!r.getElementById(e)){var i=Od("style");i.id=e,i.textContent=n,function(t,e){Td(t.head||t,e),e.sheet}(r,i)}}function Dd(t,e,n){t.insertBefore(e,n||null)}function Ld(t){t.parentNode&&t.parentNode.removeChild(t)}function Pd(t,e){for(var n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function Od(t){return document.createElement(t)}function Rd(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function zd(t){return document.createTextNode(t)}function Hd(){return zd(" ")}function Vd(){return zd("")}function Nd(t,e,n,r){return t.addEventListener(e,n,r),function(){return t.removeEventListener(e,n,r)}}function Kd(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Gd(t,e,n){e in t?t[e]="boolean"==typeof t[e]&&""===n||n:Kd(t,e,n)}function jd(t,e){e=""+e,t.data!==e&&(t.data=e)}function $d(t,e,n,r){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function Wd(){if(void 0===Id){Id=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){Id=!0}}return Id}function Zd(t,e,n){t.classList[n?"add":"remove"](e)}function qd(t){Ud=t}function Xd(){if(!Ud)throw new Error("Function called outside component initialization");return Ud}function Yd(t){Xd().$$.on_mount.push(t)}function Jd(){var t=Xd();return function(e,n){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).cancelable,i=void 0!==r&&r,a=t.$$.callbacks[e];if(a){var o=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.bubbles,i=void 0!==r&&r,a=n.cancelable,o=void 0!==a&&a,s=document.createEvent("CustomEvent");return s.initCustomEvent(t,i,o,e),s}(e,n,{cancelable:i});return a.slice().forEach((function(e){e.call(t,o)})),!o.defaultPrevented}return!0}}function tp(t,e){return Xd().$$.context.set(t,e),e}function ep(t){return Xd().$$.context.get(t)}function np(t,e){var n=this,r=t.$$.callbacks[e.type];r&&r.slice().forEach((function(t){return t.call(n,e)}))}Qd.entries="WeakMap"in Sd?new WeakMap:void 0;var rp=[],ip=[],ap=[],op=[],sp=Promise.resolve(),Ap=!1;function up(t){ap.push(t)}function lp(t){op.push(t)}var cp=new Set,hp=0;function fp(){if(0===hp){var t=Ud;do{try{for(;hp<rp.length;){var e=rp[hp];hp++,qd(e),dp(e.$$)}}catch(t){throw rp.length=0,hp=0,t}for(qd(null),rp.length=0,hp=0;ip.length;)ip.pop()();for(var n=0;n<ap.length;n+=1){var r=ap[n];cp.has(r)||(cp.add(r),r())}ap.length=0}while(rp.length);for(;op.length;)op.pop()();Ap=!1,cp.clear(),qd(t)}}function dp(t){if(null!==t.fragment){t.update(),cd(t.before_update);var e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(up)}}var pp,vp=new Set;function gp(){pp={r:0,c:[],p:pp}}function mp(){pp.r||cd(pp.c),pp=pp.p}function yp(t,e){t&&t.i&&(vp.delete(t),t.i(e))}function _p(t,e,n,r){if(t&&t.o){if(vp.has(t))return;vp.add(t),pp.c.push((function(){vp.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}else r&&r()}function wp(t,e,n){var r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function xp(t){t&&t.c()}function bp(t,e,n,r){var i=t.$$,a=i.fragment,o=i.after_update;a&&a.m(e,n),r||up((function(){var e,n=t.$$.on_mount.map(ud).filter(hd);t.$$.on_destroy?(e=t.$$.on_destroy).push.apply(e,Di(n)):cd(n);t.$$.on_mount=[]})),o.forEach(up)}function Bp(t,e){var n,r,i,a=t.$$;null!==a.fragment&&(n=a.after_update,r=[],i=[],ap.forEach((function(t){return-1===n.indexOf(t)?r.push(t):i.push(t)})),i.forEach((function(t){return t()})),ap=r,cd(a.on_destroy),a.fragment&&a.fragment.d(e),a.on_destroy=a.fragment=null,a.ctx=[])}function kp(t,e){-1===t.$$.dirty[0]&&(rp.push(t),Ap||(Ap=!0,sp.then(fp)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Cp(t,e,n,r,i,a,o){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[-1],A=Ud;qd(t);var u=t.$$={fragment:null,ctx:[],props:a,update:ad,not_equal:i,bound:ld(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(A?A.$$.context:[])),callbacks:ld(),dirty:s,skip_bound:!1,root:e.target||A.$$.root};o&&o(u.root);var l=!1;if(u.ctx=n?n(t,e.props||{},(function(e,n){var r=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:n;return u.ctx&&i(u.ctx[e],u.ctx[e]=r)&&(!u.skip_bound&&u.bound[e]&&u.bound[e](r),l&&kp(t,e)),n})):[],u.update(),l=!0,cd(u.before_update),u.fragment=!!r&&r(u.ctx),e.target){if(e.hydrate){var c=function(t){return Array.from(t.childNodes)}(e.target);u.fragment&&u.fragment.l(c),c.forEach(Ld)}else u.fragment&&u.fragment.c();e.intro&&yp(t.$$.fragment),bp(t,e.target,e.anchor,e.customElement),fp()}qd(A)}var Fp=function(){return ai((function t(){oi(this,t)}),[{key:"$destroy",value:function(){Bp(this,1),this.$destroy=ad}},{key:"$on",value:function(t,e){if(!hd(e))return ad;var n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}}},{key:"$set",value:function(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}])}();function Ep(t,e,n,r,i,a,o){try{var s=t[a](o),A=s.value}catch(t){return void n(t)}s.done?e(A):Promise.resolve(A).then(r,i)}var Ip=e((function(t){function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})),Up=e((function(t){var e=Ip.default;function n(){t.exports=n=function(){return i},t.exports.__esModule=!0,t.exports.default=t.exports;var r,i={},a=Object.prototype,o=a.hasOwnProperty,s=Object.defineProperty||function(t,e,n){t[e]=n.value},A="function"==typeof Symbol?Symbol:{},u=A.iterator||"@@iterator",l=A.asyncIterator||"@@asyncIterator",c=A.toStringTag||"@@toStringTag";function h(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(r){h=function(t,e,n){return t[e]=n}}function f(t,e,n,r){var i=e&&e.prototype instanceof _?e:_,a=Object.create(i.prototype),o=new T(r||[]);return s(a,"_invoke",{value:I(t,n,o)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}i.wrap=f;var p="suspendedStart",v="suspendedYield",g="executing",m="completed",y={};function _(){}function w(){}function x(){}var b={};h(b,u,(function(){return this}));var B=Object.getPrototypeOf,k=B&&B(B(M([])));k&&k!==a&&o.call(k,u)&&(b=k);var C=x.prototype=_.prototype=Object.create(b);function F(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,n){function r(i,a,s,A){var u=d(t[i],t,a);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==e(c)&&o.call(c,"__await")?n.resolve(c.__await).then((function(t){r("next",t,s,A)}),(function(t){r("throw",t,s,A)})):n.resolve(c).then((function(t){l.value=t,s(l)}),(function(t){return r("throw",t,s,A)}))}A(u.arg)}var i;s(this,"_invoke",{value:function(t,e){function a(){return new n((function(n,i){r(t,e,n,i)}))}return i=i?i.then(a,a):a()}})}function I(t,e,n){var i=p;return function(a,o){if(i===g)throw Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:r,done:!0}}for(n.method=a,n.arg=o;;){var s=n.delegate;if(s){var A=U(s,n);if(A){if(A===y)continue;return A}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===p)throw i=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=g;var u=d(t,e,n);if("normal"===u.type){if(i=n.done?m:v,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i=m,n.method="throw",n.arg=u.arg)}}}function U(t,e){var n=e.method,i=t.iterator[n];if(i===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=r,U(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=d(i,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,y;var o=a.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,y):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function Q(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function M(t){if(t||""===t){var n=t[u];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function e(){for(;++i<t.length;)if(o.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=r,e.done=!0,e};return a.next=a}}throw new TypeError(e(t)+" is not iterable")}return w.prototype=x,s(C,"constructor",{value:x,configurable:!0}),s(x,"constructor",{value:w,configurable:!0}),w.displayName=h(x,c,"GeneratorFunction"),i.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},i.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,h(t,c,"GeneratorFunction")),t.prototype=Object.create(C),t},i.awrap=function(t){return{__await:t}},F(E.prototype),h(E.prototype,l,(function(){return this})),i.AsyncIterator=E,i.async=function(t,e,n,r,a){void 0===a&&(a=Promise);var o=new E(f(t,e,n,r),a);return i.isGeneratorFunction(e)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},F(C),h(C,c,"Generator"),h(C,u,(function(){return this})),h(C,"toString",(function(){return"[object Generator]"})),i.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},i.values=M,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(Q),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,i){return s.type="throw",s.arg=t,e.next=n,i&&(e.method="next",e.arg=r),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var A=o.call(a,"catchLoc"),u=o.call(a,"finallyLoc");if(A&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(A){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),Q(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;Q(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:M(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),y}},i}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports})),Sp=Up(),Qp=Sp;try{regeneratorRuntime=Sp}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=Sp:Function("r","regeneratorRuntime = r")(Sp)}var Tp=Pt.f,Mp=function(t,e,n){n in t||Tp(t,n,{configurable:!0,get:function(){return e[n]},set:function(t){e[n]=t}})},Dp=Be.f,Lp=ie.enforce,Pp=vt("match"),Op=o.RegExp,Rp=Op.prototype,zp=o.SyntaxError,Hp=w(Rp.exec),Vp=w("".charAt),Np=w("".replace),Kp=w("".indexOf),Gp=w("".slice),jp=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,$p=/a/g,Wp=/a/g,Zp=new Op($p)!==$p,qp=YA.MISSED_STICKY,Xp=YA.UNSUPPORTED_Y,Yp=A&&(!Zp||qp||tu||nu||s((function(){return Wp[Pp]=!1,Op($p)!==$p||Op(Wp)===Wp||"/a/i"!==String(Op($p,"i"))})));if(De("RegExp",Yp)){for(var Jp=function(t,e){var n,r,i,a,o,s,A=P(Rp,this),u=Hu(t),l=void 0===e,c=[],h=t;if(!A&&u&&l&&t.constructor===Jp)return t;if((u||P(Rp,t))&&(t=t.source,l&&(e=vu(h))),t=void 0===t?"":je(t),e=void 0===e?"":je(e),h=t,tu&&"dotAll"in $p&&(r=!!e&&Kp(e,"s")>-1)&&(e=Np(e,/s/g,"")),n=e,qp&&"sticky"in $p&&(i=!!e&&Kp(e,"y")>-1)&&Xp&&(e=Np(e,/y/g,"")),nu&&(a=function(t){for(var e,n=t.length,r=0,i="",a=[],o=an(null),s=!1,A=!1,u=0,l="";r<=n;r++){if("\\"===(e=Vp(t,r)))e+=Vp(t,++r);else if("]"===e)s=!1;else if(!s)switch(!0){case"["===e:s=!0;break;case"("===e:Hp(jp,Gp(t,r+1))&&(r+=2,A=!0),i+=e,u++;continue;case">"===e&&A:if(""===l||At(o,l))throw new zp("Invalid capture group name");o[l]=!0,a[a.length]=[l,u],A=!1,l="";continue}A?l+=e:i+=e}return[i,a]}(t),t=a[0],c=a[1]),o=qo(Op(t,e),A?this:Rp,Jp),(r||i||c.length)&&(s=Lp(o),r&&(s.dotAll=!0,s.raw=Jp(function(t){for(var e,n=t.length,r=0,i="",a=!1;r<=n;r++)"\\"!==(e=Vp(t,r))?a||"."!==e?("["===e?a=!0:"]"===e&&(a=!1),i+=e):i+="[\\s\\S]":i+=e+Vp(t,++r);return i}(t),n)),i&&(s.sticky=!0),c.length&&(s.groups=c)),t!==h)try{Ot(o,"source",""===h?"(?:)":h)}catch(t){}return o},tv=Dp(Op),ev=0;tv.length>ev;)Mp(Jp,Op,tv[ev++]);Rp.constructor=Jp,Jp.prototype=Rp,oe(o,"RegExp",Jp,{constructor:!0})}ts("RegExp");var nv=Math.floor,rv=w("".charAt),iv=w("".replace),av=w("".slice),ov=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,sv=/\$([$&'`]|\d{1,2})/g,Av=function(t,e,n,r,i,a){var o=n+t.length,s=r.length,A=sv;return void 0!==i&&(i=ot(i),A=ov),iv(a,A,(function(a,A){var u;switch(rv(A,0)){case"$":return"$";case"&":return t;case"`":return av(e,0,n);case"'":return av(e,o);case"<":u=i[av(A,1,-1)];break;default:var l=+A;if(0===l)return a;if(l>s){var c=nv(l/10);return 0===c?a:c<=s?void 0===r[c-1]?rv(A,1):r[c-1]+rv(A,1):a}u=r[l-1]}return void 0===u?"":u}))},uv=vt("replace"),lv=Math.max,cv=Math.min,hv=w([].concat),fv=w([].push),dv=w("".indexOf),pv=w("".slice),vv="$0"==="a".replace(/./,"$0"),gv=!!/./[uv]&&""===/./[uv]("a","$0"),mv=!s((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}));Mu("replace",(function(t,e,n){var r=gv?"$":"$0";return[function(t,n){var r=S(this),i=I(t)?void 0:J(t,uv);return i?c(i,t,r,n):c(e,je(r),t,n)},function(t,i){var a=Ut(this),o=je(t);if("string"==typeof i&&-1===dv(i,r)&&-1===dv(i,"$<")){var s=n(e,a,o,i);if(s.done)return s.value}var A=M(i);A||(i=je(i));var u,l=a.global;l&&(u=a.unicode,a.lastIndex=0);for(var c,h=[];null!==(c=Ou(a,o))&&(fv(h,c),l);){""===je(c[0])&&(a.lastIndex=Lu(o,pe(a.lastIndex),u))}for(var f,d="",p=0,v=0;v<h.length;v++){for(var g,m=je((c=h[v])[0]),y=lv(cv(le(c.index),o.length),0),_=[],w=1;w<c.length;w++)fv(_,void 0===(f=c[w])?f:String(f));var x=c.groups;if(A){var b=hv([m],_,y,o);void 0!==x&&fv(b,x),g=je(yr(i,void 0,b))}else g=Av(m,o,y,_,x,i);y>=p&&(d+=pv(o,p,y)+g,p=y+m.length)}return d+pv(o,p)}]}),!mv||!vv||gv);var yv={},_v={};function wv(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function xv(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function bv(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function Bv(t){var e,n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),a=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+bv(-e,6):e>9999?"+"+bv(e,6):bv(e,4))+"-"+bv(t.getUTCMonth()+1,2)+"-"+bv(t.getUTCDate(),2)+(a?"T"+bv(n,2)+":"+bv(r,2)+":"+bv(i,2)+"."+bv(a,3)+"Z":i?"T"+bv(n,2)+":"+bv(r,2)+":"+bv(i,2)+"Z":r||n?"T"+bv(n,2)+":"+bv(r,2)+"Z":"")}var kv=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],a=t.length,o=0,s=0,A=a<=0,u=!1;function l(){if(A)return _v;if(u)return u=!1,yv;var e,r,i=o;if(34===t.charCodeAt(i)){for(;o++<a&&34!==t.charCodeAt(o)||34===t.charCodeAt(++o););return(e=o)>=a?A=!0:10===(r=t.charCodeAt(o++))?u=!0:13===r&&(u=!0,10===t.charCodeAt(o)&&++o),t.slice(i+1,e-1).replace(/""/g,'"')}for(;o<a;){if(10===(r=t.charCodeAt(e=o++)))u=!0;else if(13===r)u=!0,10===t.charCodeAt(o)&&++o;else if(r!==n)continue;return t.slice(i,e)}return A=!0,t.slice(i,a)}for(10===t.charCodeAt(a-1)&&--a,13===t.charCodeAt(a-1)&&--a;(r=l())!==_v;){for(var c=[];r!==yv&&r!==_v;)c.push(r),r=l();e&&null==(c=e(c,s++))||i.push(c)}return i}function i(e,n){return e.map((function(e){return n.map((function(t){return o(e[t])})).join(t)}))}function a(e){return e.map(o).join(t)}function o(t){return null==t?"":t instanceof Date?Bv(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,i,a=r(t,(function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=wv(t);return function(r,i){return e(n(r),i,t)}}(t,e):wv(t)}));return a.columns=i||[],a},parseRows:r,format:function(e,n){return null==n&&(n=xv(e)),[n.map(o).join(t)].concat(i(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=xv(t)),i(t,e).join("\n")},formatRows:function(t){return t.map(a).join("\n")},formatRow:a,formatValue:o}}(","),Cv=kv.parse;function Fv(t){for(var e in t){var n,r,i=t[e].trim();if(i)if("true"===i)i=!0;else if("false"===i)i=!1;else if("NaN"===i)i=NaN;else if(isNaN(n=+i)){if(!(r=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;Ev&&r[4]&&!r[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i)}else i=n;else i=null;t[e]=i}return t}var Ev=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function Iv(){var t;return t=Qp.mark((function t(e){var n,r,i;return Qp.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return n=t.sent,t.next=5,n.text();case 5:return r=t.sent,t.next=8,Cv(r,Fv);case 8:return i=t.sent,t.abrupt("return",i);case 10:case"end":return t.stop()}}),t)})),Iv=function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){Ep(a,r,i,o,s,"next",t)}function s(t){Ep(a,r,i,o,s,"throw",t)}o(void 0)}))},Iv.apply(this,arguments)}var Uv={light:{text:"#222",muted:"#777",pale:"#f0f0f0",background:"#fff"},dark:{text:"#fff",muted:"#bbb",pale:"#333",background:"#222"},lightblue:{text:"#206095",muted:"#707070",pale:"#f0f0f0",background:"rgb(188, 207, 222)"}};function Sv(t,e,n){return e=ui(e),Ai(t,Qv()?Reflect.construct(e,n||[],ui(t).constructor):e.apply(t,n))}function Qv(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Qv=function(){return!!t})()}function Tv(t){Md(t,"svelte-p21mkk",".short.svelte-p21mkk{min-height:100vh}.v-padded.svelte-p21mkk{box-sizing:border-box;padding:100px 0}")}function Mv(t){var e,n,r,i,a,o=t[8].default,s=gd(o,t,t[7],null);return{c:function(){e=Od("header"),n=Od("div"),r=Od("div"),s&&s.c(),Zd(r,"center",t[2]),Kd(n,"class","v-padded col-wide middle svelte-p21mkk"),$d(n,"position","relative"),Zd(n,"short",t[3]),Zd(n,"height-full",!t[3]),Kd(e,"style",i="color: "+Uv[t[0]].text+"; background-color: "+(t[1]?t[1]:Uv[t[0]].background)+"; "+t[4]),Kd(e,"class","svelte-p21mkk"),Zd(e,"short",t[3])},m:function(t,i){Dd(t,e,i),Td(e,n),Td(n,r),s&&s.m(r,null),a=!0},p:function(t,A){var u=gi(A,1)[0];s&&s.p&&(!a||128&u)&&_d(s,o,t,t[7],a?yd(o,t[7],u,null):wd(t[7]),null),(!a||4&u)&&Zd(r,"center",t[2]),(!a||8&u)&&Zd(n,"short",t[3]),(!a||8&u)&&Zd(n,"height-full",!t[3]),(!a||19&u&&i!==(i="color: "+Uv[t[0]].text+"; background-color: "+(t[1]?t[1]:Uv[t[0]].background)+"; "+t[4]))&&Kd(e,"style",i),(!a||8&u)&&Zd(e,"short",t[3])},i:function(t){a||(yp(s,t),a=!0)},o:function(t){_p(s,t),a=!1},d:function(t){t&&Ld(e),s&&s.d(t)}}}function Dv(t,e,n){var r=e.$$slots,i=void 0===r?{}:r,a=e.$$scope,o=e.theme,s=void 0===o?ep("theme"):o,A=e.bgimage,u=void 0===A?"./img/output.png":A,l=e.bgcolor,c=void 0===l?null:l,h=e.bgfixed,f=void 0!==h&&h,d=e.center,p=void 0===d||d,v=e.short,g=void 0!==v&&v,m="";return m+=u?"background-image: url(".concat(u,");"):"background-image: none;",f&&(m+=" background-attachment: fixed;"),t.$$set=function(t){"theme"in t&&n(0,s=t.theme),"bgimage"in t&&n(5,u=t.bgimage),"bgcolor"in t&&n(1,c=t.bgcolor),"bgfixed"in t&&n(6,f=t.bgfixed),"center"in t&&n(2,p=t.center),"short"in t&&n(3,g=t.short),"$$scope"in t&&n(7,a=t.$$scope)},[s,c,p,g,m,u,f,a,i]}var Lv=function(t){function e(t){var n;return oi(this,e),Cp(n=Sv(this,e),t,Dv,Mv,fd,{theme:0,bgimage:5,bgcolor:1,bgfixed:6,center:2,short:3},Tv),n}return ci(e,t),ai(e)}(Fp);function Pv(t,e,n){return e=ui(e),Ai(t,Ov()?Reflect.construct(e,n||[],ui(t).constructor):e.apply(t,n))}function Ov(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ov=function(){return!!t})()}function Rv(t){Md(t,"svelte-111grf7",".section-container.svelte-111grf7{display:flex;flex-direction:row;justify-content:center;align-items:center;width:100%;padding:.5rem;box-sizing:border-box;color:var(--text-color);background-color:var(--background-color)}.image-slot.svelte-111grf7{flex:0 0 auto;margin-right:2rem;margin-bottom:1rem}.spacer.svelte-111grf7{display:none}.text-slot.svelte-111grf7{flex:0 0 50%;text-align:left;max-width:600px}")}var zv=function(t){return{}},Hv=function(t){return{}};function Vv(t){var e,n,r,i,a,o,s,A=t[2].image,u=gd(A,t,t[1],Hv),l=t[2].default,c=gd(l,t,t[1],null);return{c:function(){e=Od("section"),n=Od("div"),u&&u.c(),r=Hd(),i=Od("div"),c&&c.c(),a=Hd(),o=Od("div"),Kd(n,"class","image-slot svelte-111grf7"),Kd(i,"class","text-slot col-medium svelte-111grf7"),Kd(o,"class","spacer svelte-111grf7"),Kd(e,"class","section-container svelte-111grf7"),$d(e,"--text-color",Uv[t[0]].text),$d(e,"--background-color",Uv[t[0]].background)},m:function(t,A){Dd(t,e,A),Td(e,n),u&&u.m(n,null),Td(e,r),Td(e,i),c&&c.m(i,null),Td(e,a),Td(e,o),s=!0},p:function(t,n){var r=gi(n,1)[0];u&&u.p&&(!s||2&r)&&_d(u,A,t,t[1],s?yd(A,t[1],r,zv):wd(t[1]),Hv),c&&c.p&&(!s||2&r)&&_d(c,l,t,t[1],s?yd(l,t[1],r,null):wd(t[1]),null),(!s||1&r)&&$d(e,"--text-color",Uv[t[0]].text),(!s||1&r)&&$d(e,"--background-color",Uv[t[0]].background)},i:function(t){s||(yp(u,t),yp(c,t),s=!0)},o:function(t){_p(u,t),_p(c,t),s=!1},d:function(t){t&&Ld(e),u&&u.d(t),c&&c.d(t)}}}function Nv(t,e,n){var r=e.$$slots,i=void 0===r?{}:r,a=e.$$scope,o=e.theme,s=void 0===o?ep("theme"):o;return t.$$set=function(t){"theme"in t&&n(0,s=t.theme),"$$scope"in t&&n(1,a=t.$$scope)},[s,a,i]}var Kv=function(t){function e(t){var n;return oi(this,e),Cp(n=Pv(this,e),t,Nv,Vv,fd,{theme:0},Rv),n}return ci(e,t),ai(e)}(Fp);function Gv(t,e,n){var r,i,a,o,s;function A(){var u=Date.now()-o;u<e&&u>=0?r=setTimeout(A,e-u):(r=null,n||(s=t.apply(a,i),a=i=null))}null==e&&(e=100);var u=function(){a=this,i=arguments,o=Date.now();var u=n&&!r;return r||(r=setTimeout(A,e)),u&&(s=t.apply(a,i),a=i=null),s};return u.clear=function(){r&&(clearTimeout(r),r=null)},u.flush=function(){r&&(s=t.apply(a,i),a=i=null,clearTimeout(r),r=null)},u}function jv(t,e,n){return e=ui(e),Ai(t,$v()?Reflect.construct(e,n||[],ui(t).constructor):e.apply(t,n))}function $v(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return($v=function(){return!!t})()}Pe({target:"Number",stat:!0},{isNaN:function(t){return t!=t}}),Gv.debounce=Gv;var Wv=Sd.window;function Zv(t){Md(t,"svelte-1j2rwje","svelte-scroller-outer.svelte-1j2rwje{display:block;position:relative;max-width:100%}svelte-scroller-background.svelte-1j2rwje{display:block;position:relative;width:100%}svelte-scroller-foreground.svelte-1j2rwje{display:block;position:relative;z-index:2}svelte-scroller-foreground.svelte-1j2rwje::after{content:' ';display:block;clear:both}svelte-scroller-background-container.svelte-1j2rwje{display:block;position:absolute;width:100%;max-width:100%;pointer-events:none;will-change:transform}")}var qv=function(t){return{}},Xv=function(t){return{}},Yv=function(t){return{}},Jv=function(t){return{}};function tg(t){var e,n,r,i,a,o,s,A;up(t[19]);var u=t[18].background,l=gd(u,t,t[17],Jv),c=t[18].foreground,h=gd(c,t,t[17],Xv);return{c:function(){e=Od("svelte-scroller-outer"),n=Od("svelte-scroller-background-container"),r=Od("svelte-scroller-background"),l&&l.c(),i=Hd(),a=Od("svelte-scroller-foreground"),h&&h.c(),Gd(r,"class","svelte-1j2rwje"),Gd(n,"class","background-container svelte-1j2rwje"),Gd(a,"class","svelte-1j2rwje"),Gd(e,"class","svelte-1j2rwje"),Zd(e,"splitscreen",t[0])},m:function(u,c){Dd(u,e,c),Td(e,n),Td(n,r),l&&l.m(r,null),t[20](r),t[21](n),Td(e,i),Td(e,a),h&&h.m(a,null),t[22](a),t[23](e),o=!0,s||(A=Nd(Wv,"resize",t[19]),s=!0)},p:function(t,n){l&&l.p&&(!o||131072&n[0])&&_d(l,u,t,t[17],o?yd(u,t[17],n,Yv):wd(t[17]),Jv),h&&h.p&&(!o||131072&n[0])&&_d(h,c,t,t[17],o?yd(c,t[17],n,qv):wd(t[17]),Xv),(!o||1&n[0])&&Zd(e,"splitscreen",t[0])},i:function(t){o||(yp(l,t),yp(h,t),o=!0)},o:function(t){_p(l,t),_p(h,t),o=!1},d:function(n){n&&Ld(e),l&&l.d(n),t[20](null),t[21](null),h&&h.d(n),t[22](null),t[23](null),s=!1,A()}}}var eg,ng=[];if("undefined"!=typeof window){var rg=function(){return ng.forEach((function(t){return t()}))};window.addEventListener("scroll",rg),window.addEventListener("resize",rg)}if("undefined"!=typeof IntersectionObserver){var ig=new Map,ag=new IntersectionObserver((function(t,e){t.forEach((function(t){var e=ig.get(t.target),n=ng.indexOf(e);t.isIntersecting?-1===n&&ng.push(e):(e(),-1!==n&&ng.splice(n,1))}))}),{rootMargin:"400px 0px"});eg={add:function(t){var e=t.outer,n=t.update,r=e.getBoundingClientRect(),i=r.top,a=r.bottom;i<window.innerHeight&&a>0&&ng.push(n),ig.set(e,n),ag.observe(e)},remove:function(t){var e=t.outer,n=t.update,r=ng.indexOf(n);-1!==r&&ng.splice(r,1),ig.delete(e),ag.unobserve(e)}}}else eg={add:function(t){var e=t.update;ng.push(e)},remove:function(t){var e=t.update,n=ng.indexOf(e);-1!==n&&ng.splice(n,1)}};function og(t,e,n){var r,i,a,o,s,A,u,l,c,h,f=e.$$slots,d=void 0===f?{}:f,p=e.$$scope,v=e.top,g=void 0===v?0:v,m=e.bottom,y=void 0===m?1:m,_=e.threshold,w=void 0===_?.5:_,x=e.query,b=void 0===x?"section":x,B=e.parallax,k=void 0!==B&&B,C=e.index,F=void 0===C?0:C,E=e.count,I=void 0===E?0:E,U=e.offset,S=void 0===U?0:U,Q=e.progress,T=void 0===Q?0:Q,M=e.visible,D=void 0!==M&&M,L=e.splitscreen,P=void 0!==L&&L,O=e.id,R=void 0===O?null:O,z=0,H=1;function V(){if(s){var t="position: ".concat(c?"fixed":"absolute","; top: 0; transform: translate(0, ").concat(h,"px); width: ").concat(H,"px; z-index: ").concat(1,";");n(3,s.style.cssText=t,s)}}function N(){if(A){var t=o.getBoundingClientRect();t.left,H=t.right-t.left;var e=A.getBoundingClientRect(),s=u.getBoundingClientRect();n(10,D=e.top<z&&e.bottom>0);var f=e.bottom-e.top,d=s.bottom-s.top,p=i-r;for(n(9,T=(r-e.top)/(f-p)),T<=0?(h=0,c&&(c=!1,V())):T>=1?(h=k?f-d:f-p,c&&(c=!1,V())):(h=k?Math.round(r-T*(d-p)):r,c||(c=!0,V())),n(6,F=0);F<l.length;n(6,F+=1)){var v=l[F],g=v.getBoundingClientRect().top,m=l[F+1],y=m?m.getBoundingClientRect().top:e.bottom;if(n(8,S=(a-g)/(y-g)),n(11,R=v.dataset.id?v.dataset.id:null),y>=a)break}}}return Yd((function(){l=A.querySelectorAll(b),n(7,I=l.length),N();var t={outer:o,update:N};return eg.add(t),function(){return eg.remove(t)}})),t.$$set=function(t){"top"in t&&n(12,g=t.top),"bottom"in t&&n(13,y=t.bottom),"threshold"in t&&n(14,w=t.threshold),"query"in t&&n(15,b=t.query),"parallax"in t&&n(16,k=t.parallax),"index"in t&&n(6,F=t.index),"count"in t&&n(7,I=t.count),"offset"in t&&n(8,S=t.offset),"progress"in t&&n(9,T=t.progress),"visible"in t&&n(10,D=t.visible),"splitscreen"in t&&n(0,P=t.splitscreen),"id"in t&&n(11,R=t.id),"$$scope"in t&&n(17,p=t.$$scope)},t.$$.update=function(){4098&t.$$.dirty[0]&&(r=Math.round(g*z)),8194&t.$$.dirty[0]&&(i=Math.round(y*z)),16386&t.$$.dirty[0]&&(a=Math.round(w*z)),94208&t.$$.dirty[0]&&N()},[P,z,o,s,A,u,F,I,S,T,D,R,g,y,w,b,k,p,d,function(){n(1,z=Wv.innerHeight)},function(t){ip[t?"unshift":"push"]((function(){n(5,u=t)}))},function(t){ip[t?"unshift":"push"]((function(){n(3,s=t)}))},function(t){ip[t?"unshift":"push"]((function(){n(4,A=t)}))},function(t){ip[t?"unshift":"push"]((function(){n(2,o=t)}))}]}var sg=function(t){function e(t){var n;return oi(this,e),Cp(n=jv(this,e),t,og,tg,fd,{top:12,bottom:13,threshold:14,query:15,parallax:16,index:6,count:7,offset:8,progress:9,visible:10,splitscreen:0,id:11},Zv,[-1,-1]),n}return ci(e,t),ai(e)}(Fp);function Ag(t,e,n){return e=ui(e),Ai(t,ug()?Reflect.construct(e,n||[],ui(t).constructor):e.apply(t,n))}function ug(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ug=function(){return!!t})()}function lg(t){Md(t,"svelte-1syiuv9","section.svelte-1syiuv9{padding:36px 0}.short.svelte-1syiuv9{min-height:30vh}")}function cg(t){var e,n,r,i,a=t[8].default,o=gd(a,t,t[7],null);return{c:function(){e=Od("section"),n=Od("div"),o&&o.c(),Kd(n,"class","middle svelte-1syiuv9"),Zd(n,"center",t[1]),Zd(n,"col-medium",!t[2]),Zd(n,"col-wide",t[2]),Zd(n,"height-full",!t[3]),Zd(n,"short",t[3]),Kd(e,"style",r="color: "+Uv[t[0]].text+"; background-color: "+Uv[t[0]].background+"; "+t[4]),Kd(e,"class","svelte-1syiuv9")},m:function(t,r){Dd(t,e,r),Td(e,n),o&&o.m(n,null),i=!0},p:function(t,s){var A=gi(s,1)[0];o&&o.p&&(!i||128&A)&&_d(o,a,t,t[7],i?yd(a,t[7],A,null):wd(t[7]),null),(!i||2&A)&&Zd(n,"center",t[1]),(!i||4&A)&&Zd(n,"col-medium",!t[2]),(!i||4&A)&&Zd(n,"col-wide",t[2]),(!i||8&A)&&Zd(n,"height-full",!t[3]),(!i||8&A)&&Zd(n,"short",t[3]),(!i||17&A&&r!==(r="color: "+Uv[t[0]].text+"; background-color: "+Uv[t[0]].background+"; "+t[4]))&&Kd(e,"style",r)},i:function(t){i||(yp(o,t),i=!0)},o:function(t){_p(o,t),i=!1},d:function(t){t&&Ld(e),o&&o.d(t)}}}function hg(t,e,n){var r=e.$$slots,i=void 0===r?{}:r,a=e.$$scope,o=e.theme,s=void 0===o?ep("theme"):o,A=e.center,u=void 0===A||A,l=e.wide,c=void 0!==l&&l,h=e.short,f=void 0!==h&&h,d=e.bgimage,p=void 0===d?null:d,v=e.bgfixed,g=void 0!==v&&v,m="";return m+=p?"background-image: url(".concat(p,");"):"background-image: none;",g&&(m+=" background-attachment: fixed;"),t.$$set=function(t){"theme"in t&&n(0,s=t.theme),"center"in t&&n(1,u=t.center),"wide"in t&&n(2,c=t.wide),"short"in t&&n(3,f=t.short),"bgimage"in t&&n(5,p=t.bgimage),"bgfixed"in t&&n(6,g=t.bgfixed),"$$scope"in t&&n(7,a=t.$$scope)},[s,u,c,f,m,p,g,a,i]}var fg=function(t){function e(t){var n;return oi(this,e),Cp(n=Ag(this,e),t,hg,cg,fd,{theme:0,center:1,wide:2,short:3,bgimage:5,bgfixed:6},lg),n}return ci(e,t),ai(e)}(Fp);function dg(t,e,n){return e=ui(e),Ai(t,pg()?Reflect.construct(e,n||[],ui(t).constructor):e.apply(t,n))}function pg(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(pg=function(){return!!t})()}function vg(t){Md(t,"svelte-1l2to1w","hr.svelte-1l2to1w{width:75px;border:none;border-top:2px solid;margin:40px auto -10px auto}")}function gg(t){var e;return{c:function(){$d(e=Od("hr"),"color",Uv[t[0]].muted),$d(e,"border","none"),Kd(e,"class","svelte-1l2to1w")},m:function(t,n){Dd(t,e,n)},p:function(t,n){1&n&&$d(e,"color",Uv[t[0]].muted)},d:function(t){t&&Ld(e)}}}function mg(t){var e;return{c:function(){$d(e=Od("hr"),"color",Uv[t[0]].muted),Kd(e,"class","svelte-1l2to1w")},m:function(t,n){Dd(t,e,n)},p:function(t,n){1&n&&$d(e,"color",Uv[t[0]].muted)},d:function(t){t&&Ld(e)}}}function yg(t){var e,n;function r(t,e){return t[1]?mg:gg}var i=r(t),a=i(t);return{c:function(){e=Od("section"),n=Od("div"),a.c(),Kd(n,"class","col-medium"),$d(e,"color",Uv[t[0]].text),$d(e,"background-color",Uv[t[0]].background)},m:function(t,r){Dd(t,e,r),Td(e,n),a.m(n,null)},p:function(t,o){var s=gi(o,1)[0];i===(i=r(t))&&a?a.p(t,s):(a.d(1),(a=i(t))&&(a.c(),a.m(n,null))),1&s&&$d(e,"color",Uv[t[0]].text),1&s&&$d(e,"background-color",Uv[t[0]].background)},i:ad,o:ad,d:function(t){t&&Ld(e),a.d()}}}function _g(t,e,n){var r=e.theme,i=void 0===r?ep("theme"):r,a=e.hr,o=void 0===a||a;return t.$$set=function(t){"theme"in t&&n(0,i=t.theme),"hr"in t&&n(1,o=t.hr)},[i,o]}var wg=function(t){function e(t){var n;return oi(this,e),Cp(n=dg(this,e),t,_g,yg,fd,{theme:0,hr:1},vg),n}return ci(e,t),ai(e)}(Fp),xg=me.includes,bg=s((function(){return!Array(1).includes()}));function Bg(t,e,n){return e=ui(e),Ai(t,kg()?Reflect.construct(e,n||[],ui(t).constructor):e.apply(t,n))}function kg(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(kg=function(){return!!t})()}function Cg(t){Md(t,"svelte-1prdo3z",".arrow.svelte-1prdo3z{width:48px;height:48px}.left.svelte-1prdo3z{margin-right:10px}.bounce.svelte-1prdo3z{-webkit-animation-duration:2s;animation-duration:2s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-name:svelte-1prdo3z-bounce;animation-name:svelte-1prdo3z-bounce;-webkit-animation-timing-function:ease;animation-timing-function:ease}@-webkit-keyframes svelte-1prdo3z-bounce{0%{-webkit-transform:translateY(10px);transform:translateY(10px)}30%{-webkit-transform:translateY(-10px);transform:translateY(-10px)}50%{-webkit-transform:translateY(10px);transform:translateY(10px)}100%{-webkit-transform:translateY(10px);transform:translateY(10px)}}@keyframes svelte-1prdo3z-bounce{0%{-webkit-transform:translateY(10px);transform:translateY(10px)}30%{-webkit-transform:translateY(-10px);transform:translateY(-10px)}50%{-webkit-transform:translateY(10px);transform:translateY(10px)}100%{-webkit-transform:translateY(10px);transform:translateY(10px)}}")}function Fg(t){var e,n,r,i=t[4].default,a=gd(i,t,t[3],null);return{c:function(){e=Od("img"),a&&a.c(),dd(e.src,n="./img/scroll-down-"+t[0]+".svg")||Kd(e,"src",n),Kd(e,"class","arrow left svelte-1prdo3z"),Kd(e,"alt",""),Kd(e,"aria-hidden","true"),Zd(e,"bounce",t[1])},m:function(t,n){Dd(t,e,n),a&&a.m(t,n),r=!0},p:function(t,o){(!r||1&o&&!dd(e.src,n="./img/scroll-down-"+t[0]+".svg"))&&Kd(e,"src",n),(!r||2&o)&&Zd(e,"bounce",t[1]),a&&a.p&&(!r||8&o)&&_d(a,i,t,t[3],r?yd(i,t[3],o,null):wd(t[3]),null)},i:function(t){r||(yp(a,t),r=!0)},o:function(t){_p(a,t),r=!1},d:function(t){t&&Ld(e),a&&a.d(t)}}}function Eg(t){var e,n,r,i,a,o=t[4].default,s=gd(o,t,t[3],null);return{c:function(){s&&s.c(),e=Od("br"),n=Hd(),dd((r=Od("img")).src,i="./img/scroll-down-"+t[0]+".svg")||Kd(r,"src",i),Kd(r,"class","arrow svelte-1prdo3z"),Kd(r,"alt",""),Kd(r,"aria-hidden","true"),Zd(r,"bounce",t[1])},m:function(t,i){s&&s.m(t,i),Dd(t,e,i),Dd(t,n,i),Dd(t,r,i),a=!0},p:function(t,e){s&&s.p&&(!a||8&e)&&_d(s,o,t,t[3],a?yd(o,t[3],e,null):wd(t[3]),null),(!a||1&e&&!dd(r.src,i="./img/scroll-down-"+t[0]+".svg"))&&Kd(r,"src",i),(!a||2&e)&&Zd(r,"bounce",t[1])},i:function(t){a||(yp(s,t),a=!0)},o:function(t){_p(s,t),a=!1},d:function(t){s&&s.d(t),t&&Ld(e),t&&Ld(n),t&&Ld(r)}}}function Ig(t){var e,n,r,i,a=[Eg,Fg],o=[];function s(t,e){return t[2]?0:1}return e=s(t),n=o[e]=a[e](t),{c:function(){n.c(),r=Vd()},m:function(t,n){o[e].m(t,n),Dd(t,r,n),i=!0},p:function(t,i){var A=gi(i,1)[0],u=e;(e=s(t))===u?o[e].p(t,A):(gp(),_p(o[u],1,1,(function(){o[u]=null})),mp(),(n=o[e])?n.p(t,A):(n=o[e]=a[e](t)).c(),yp(n,1),n.m(r.parentNode,r))},i:function(t){i||(yp(n),i=!0)},o:function(t){_p(n),i=!1},d:function(t){o[e].d(t),t&&Ld(r)}}}function Ug(t,e,n){var r=e.$$slots,i=void 0===r?{}:r,a=e.$$scope,o=e.color,s=void 0===o?"black":o,A=e.animation,u=void 0===A||A,l=e.center,c=void 0===l||l;return s=["black","white"].includes(s)?s:"black",t.$$set=function(t){"color"in t&&n(0,s=t.color),"animation"in t&&n(1,u=t.animation),"center"in t&&n(2,c=t.center),"$$scope"in t&&n(3,a=t.$$scope)},[s,u,c,a,i]}Pe({target:"Array",proto:!0,forced:bg},{includes:function(t){return xg(this,t,arguments.length>1?arguments[1]:void 0)}}),ra("includes");var Sg=function(t){function e(t){var n;return oi(this,e),Cp(n=Bg(this,e),t,Ug,Ig,fd,{color:0,animation:1,center:2},Cg),n}return ci(e,t),ai(e)}(Fp),Qg=YA.UNSUPPORTED_Y,Tg=Math.min,Mg=w([].push),Dg=w("".slice),Lg=!s((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),Pg="c"==="abbc".split(/(b)*/)[1]||4!=="test".split(/(?:)/,-1).length||2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length;Mu("split",(function(t,e,n){var r="0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:c(e,this,t,n)}:e;return[function(e,n){var i=S(this),a=I(e)?void 0:J(e,t);return a?c(a,e,i,n):c(r,je(i),e,n)},function(t,i){var a=Ut(this),o=je(t);if(!Pg){var s=n(r,a,o,i,r!==e);if(s.done)return s.value}var A=ps(a,RegExp),u=a.unicode,l=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(Qg?"g":"y"),c=new A(Qg?"^(?:"+a.source+")":a,l),h=void 0===i?4294967295:i>>>0;if(0===h)return[];if(0===o.length)return null===Ou(c,o)?[o]:[];for(var f=0,d=0,p=[];d<o.length;){c.lastIndex=Qg?0:d;var v,g=Ou(c,Qg?Dg(o,d):o);if(null===g||(v=Tg(pe(c.lastIndex+(Qg?d:0)),o.length))===f)d=Lu(o,d,u);else{if(Mg(p,Dg(o,f,d)),p.length===h)return p;for(var m=1;m<=g.length-1;m++)if(Mg(p,g[m]),p.length===h)return p;d=f=v}}return Mg(p,Dg(o,f)),p}]}),Pg||!Lg,Qg);var Og={rgb2hsl:Rg,rgb2hsv:zg,rgb2hwb:Hg,rgb2cmyk:Vg,rgb2keyword:Ng,rgb2xyz:Kg,rgb2lab:Gg,rgb2lch:function(t){return Jg(Gg(t))},hsl2rgb:jg,hsl2hsv:function(t){var e=t[0],n=t[1]/100,r=t[2]/100;if(0===r)return[0,0,0];return[e,100*(2*(n*=(r*=2)<=1?r:2-r)/(r+n)),100*((r+n)/2)]},hsl2hwb:function(t){return Hg(jg(t))},hsl2cmyk:function(t){return Vg(jg(t))},hsl2keyword:function(t){return Ng(jg(t))},hsv2rgb:$g,hsv2hsl:function(t){var e,n,r=t[0],i=t[1]/100,a=t[2]/100;return e=i*a,[r,100*(e=(e/=(n=(2-i)*a)<=1?n:2-n)||0),100*(n/=2)]},hsv2hwb:function(t){return Hg($g(t))},hsv2cmyk:function(t){return Vg($g(t))},hsv2keyword:function(t){return Ng($g(t))},hwb2rgb:Wg,hwb2hsl:function(t){return Rg(Wg(t))},hwb2hsv:function(t){return zg(Wg(t))},hwb2cmyk:function(t){return Vg(Wg(t))},hwb2keyword:function(t){return Ng(Wg(t))},cmyk2rgb:Zg,cmyk2hsl:function(t){return Rg(Zg(t))},cmyk2hsv:function(t){return zg(Zg(t))},cmyk2hwb:function(t){return Hg(Zg(t))},cmyk2keyword:function(t){return Ng(Zg(t))},keyword2rgb:nm,keyword2hsl:function(t){return Rg(nm(t))},keyword2hsv:function(t){return zg(nm(t))},keyword2hwb:function(t){return Hg(nm(t))},keyword2cmyk:function(t){return Vg(nm(t))},keyword2lab:function(t){return Gg(nm(t))},keyword2xyz:function(t){return Kg(nm(t))},xyz2rgb:qg,xyz2lab:Xg,xyz2lch:function(t){return Jg(Xg(t))},lab2xyz:Yg,lab2rgb:tm,lab2lch:Jg,lch2lab:em,lch2xyz:function(t){return Yg(em(t))},lch2rgb:function(t){return tm(em(t))}};function Rg(t){var e,n,r=t[0]/255,i=t[1]/255,a=t[2]/255,o=Math.min(r,i,a),s=Math.max(r,i,a),A=s-o;return s==o?e=0:r==s?e=(i-a)/A:i==s?e=2+(a-r)/A:a==s&&(e=4+(r-i)/A),(e=Math.min(60*e,360))<0&&(e+=360),n=(o+s)/2,[e,100*(s==o?0:n<=.5?A/(s+o):A/(2-s-o)),100*n]}function zg(t){var e,n,r=t[0],i=t[1],a=t[2],o=Math.min(r,i,a),s=Math.max(r,i,a),A=s-o;return n=0==s?0:A/s*1e3/10,s==o?e=0:r==s?e=(i-a)/A:i==s?e=2+(a-r)/A:a==s&&(e=4+(r-i)/A),(e=Math.min(60*e,360))<0&&(e+=360),[e,n,s/255*1e3/10]}function Hg(t){var e=t[0],n=t[1],r=t[2];return[Rg(t)[0],100*(1/255*Math.min(e,Math.min(n,r))),100*(r=1-1/255*Math.max(e,Math.max(n,r)))]}function Vg(t){var e,n=t[0]/255,r=t[1]/255,i=t[2]/255;return[100*((1-n-(e=Math.min(1-n,1-r,1-i)))/(1-e)||0),100*((1-r-e)/(1-e)||0),100*((1-i-e)/(1-e)||0),100*e]}function Ng(t){return im[JSON.stringify(t)]}function Kg(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*e+.7152*n+.0722*r),100*(.0193*e+.1192*n+.9505*r)]}function Gg(t){var e=Kg(t),n=e[0],r=e[1],i=e[2];return r/=100,i/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(n-r),200*(r-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))]}function jg(t){var e,n,r,i,a,o=t[0]/360,s=t[1]/100,A=t[2]/100;if(0==s)return[a=255*A,a,a];e=2*A-(n=A<.5?A*(1+s):A+s-A*s),i=[0,0,0];for(var u=0;u<3;u++)(r=o+1/3*-(u-1))<0&&r++,r>1&&r--,a=6*r<1?e+6*(n-e)*r:2*r<1?n:3*r<2?e+(n-e)*(2/3-r)*6:e,i[u]=255*a;return i}function $g(t){var e=t[0]/60,n=t[1]/100,r=t[2]/100,i=Math.floor(e)%6,a=e-Math.floor(e),o=255*r*(1-n),s=255*r*(1-n*a),A=255*r*(1-n*(1-a));r*=255;switch(i){case 0:return[r,A,o];case 1:return[s,r,o];case 2:return[o,r,A];case 3:return[o,s,r];case 4:return[A,o,r];case 5:return[r,o,s]}}function Wg(t){var e,n,i,a,o=t[0]/360,s=t[1]/100,A=t[2]/100,u=s+A;switch(u>1&&(s/=u,A/=u),i=6*o-(e=Math.floor(6*o)),1&e&&(i=1-i),a=s+i*((n=1-A)-s),e){default:case 6:case 0:r=n,g=a,b=s;break;case 1:r=a,g=n,b=s;break;case 2:r=s,g=n,b=a;break;case 3:r=s,g=a,b=n;break;case 4:r=a,g=s,b=n;break;case 5:r=n,g=s,b=a}return[255*r,255*g,255*b]}function Zg(t){var e=t[0]/100,n=t[1]/100,r=t[2]/100,i=t[3]/100;return[255*(1-Math.min(1,e*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i))]}function qg(t){var e,n,r,i=t[0]/100,a=t[1]/100,o=t[2]/100;return n=-.9689*i+1.8758*a+.0415*o,r=.0557*i+-.204*a+1.057*o,e=(e=3.2406*i+-1.5372*a+-.4986*o)>.0031308?1.055*Math.pow(e,1/2.4)-.055:e*=12.92,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r*=12.92,[255*(e=Math.min(Math.max(0,e),1)),255*(n=Math.min(Math.max(0,n),1)),255*(r=Math.min(Math.max(0,r),1))]}function Xg(t){var e=t[0],n=t[1],r=t[2];return n/=100,r/=108.883,e=(e/=95.047)>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(e-n),200*(n-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]}function Yg(t){var e,n,r,i,a=t[0],o=t[1],s=t[2];return a<=8?i=(n=100*a/903.3)/100*7.787+16/116:(n=100*Math.pow((a+16)/116,3),i=Math.pow(n/100,1/3)),[e=e/95.047<=.008856?e=95.047*(o/500+i-16/116)/7.787:95.047*Math.pow(o/500+i,3),n,r=r/108.883<=.008859?r=108.883*(i-s/200-16/116)/7.787:108.883*Math.pow(i-s/200,3)]}function Jg(t){var e,n=t[0],r=t[1],i=t[2];return(e=360*Math.atan2(i,r)/2/Math.PI)<0&&(e+=360),[n,Math.sqrt(r*r+i*i),e]}function tm(t){return qg(Yg(t))}function em(t){var e,n=t[0],r=t[1];return e=t[2]/360*2*Math.PI,[n,r*Math.cos(e),r*Math.sin(e)]}function nm(t){return rm[t]}var rm={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},im={};for(var am in rm)im[JSON.stringify(rm[am])]=am;var om=function(){return new cm};for(var sm in Og){om[sm+"Raw"]=function(t){return function(e){return"number"==typeof e&&(e=Array.prototype.slice.call(arguments)),Og[t](e)}}(sm);var Am=/(\w+)2(\w+)/.exec(sm),um=Am[1],lm=Am[2];(om[um]=om[um]||{})[lm]=om[sm]=function(t){return function(e){"number"==typeof e&&(e=Array.prototype.slice.call(arguments));var n=Og[t](e);if("string"==typeof n||void 0===n)return n;for(var r=0;r<n.length;r++)n[r]=Math.round(n[r]);return n}}(sm)}var cm=function(){this.convs={}};cm.prototype.routeSpace=function(t,e){var n=e[0];return void 0===n?this.getValues(t):("number"==typeof n&&(n=Array.prototype.slice.call(e)),this.setValues(t,n))},cm.prototype.setValues=function(t,e){return this.space=t,this.convs={},this.convs[t]=e,this},cm.prototype.getValues=function(t){var e=this.convs[t];if(!e){var n=this.space,r=this.convs[n];e=om[n][t](r),this.convs[t]=e}return e},["rgb","hsl","hsv","cmyk","keyword"].forEach((function(t){cm.prototype[t]=function(e){return this.routeSpace(t,arguments)}}));var hm=om;function fm(t,e,n){return e=ui(e),Ai(t,dm()?Reflect.construct(e,n||[],ui(t).constructor):e.apply(t,n))}function dm(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(dm=function(){return!!t})()}function pm(t){Md(t,"svelte-s1t2y4",".em.svelte-s1t2y4{padding:1px 4px 1px 4px;font-weight:bold}.nowrap.svelte-s1t2y4{white-space:nowrap}")}function vm(t){var e,n,r=t[5].default,i=gd(r,t,t[4],null);return{c:function(){e=Od("span"),i&&i.c(),Kd(e,"class","em svelte-s1t2y4"),$d(e,"background-color",t[0]),$d(e,"color",t[2]),Kd(e,"role","presentation"),Zd(e,"nowrap",t[1])},m:function(t,r){Dd(t,e,r),i&&i.m(e,null),n=!0},p:function(t,a){var o=gi(a,1)[0];i&&i.p&&(!n||16&o)&&_d(i,r,t,t[4],n?yd(r,t[4],o,null):wd(t[4]),null),(!n||1&o)&&$d(e,"background-color",t[0]),(!n||4&o)&&$d(e,"color",t[2]),(!n||2&o)&&Zd(e,"nowrap",t[1])},i:function(t){n||(yp(i,t),n=!0)},o:function(t){_p(i,t),n=!1},d:function(t){t&&Ld(e),i&&i.d(t)}}}function gm(t,e,n){var r,i=e.$$slots,a=void 0===i?{}:i,o=e.$$scope,s=e.color,A=void 0===s?"lightgrey":s,u=e.nowrap,l=void 0===u||u;var c="black";return t.$$set=function(t){"color"in t&&n(0,A=t.color),"nowrap"in t&&n(1,l=t.nowrap),"$$scope"in t&&n(4,o=t.$$scope)},t.$$.update=function(){1&t.$$.dirty&&n(3,r=function(t){var e,n,r,i;if(e=/^((?:rgb|hs[lv]|cmyk|xyz|lab)a?)\s*\(([^\)]*)\)/.exec(t)){var a=e[1],o="cmyk"===(s=a.replace(/a$/,""))?4:3;n=hm[s],r=e[2].replace(/^\s+|\s+$/g,"").split(/\s*,\s*/).map((function(t,e){return/%$/.test(t)&&e===o?parseFloat(t)/100:(/%$/.test(t),parseFloat(t))})),a===s&&r.push(1),i=void 0===r[o]?1:r[o],r=r.slice(0,o),n[s]=function(){return r}}else if(/^#[A-Fa-f0-9]+$/.test(t)){var s;o=(s=t.replace(/^#/,"")).length,n=hm.rgb,r=(r=s.split(3===o?/(.)/:/(..)/)).filter(Boolean).map((function(t){return 3===o?parseInt(t+t,16):parseInt(t,16)})),i=1,n.rgb=function(){return r},r[0]||(r[0]=0),r[1]||(r[1]=0),r[2]||(r[2]=0)}else(n=hm.keyword).keyword=function(){return t},r=t,i=1;var A={rgb:void 0,hsl:void 0,hsv:void 0,cmyk:void 0,keyword:void 0,hex:void 0};try{A.rgb=n.rgb(r)}catch(t){}try{A.hsl=n.hsl(r)}catch(t){}try{A.hsv=n.hsv(r)}catch(t){}try{A.cmyk=n.cmyk(r)}catch(t){}try{A.keyword=n.keyword(r)}catch(t){}return A.rgb&&(A.hex="#"+A.rgb.map((function(t){var e=t.toString(16);return 1===e.length?"0"+e:e})).join("")),A.rgb&&(A.rgba=A.rgb.concat(i)),A.hsl&&(A.hsla=A.hsl.concat(i)),A.hsv&&(A.hsva=A.hsv.concat(i)),A.cmyk&&(A.cmyka=A.cmyk.concat(i)),A}(A).rgb),8&t.$$.dirty&&r&&n(2,c=function(t){return(299*t[0]+587*t[1]+114*t[2])/1e3>125?"black":"white"}(r))},[A,l,c,r,o,a]}var mm=function(t){function e(t){var n;return oi(this,e),Cp(n=fm(this,e),t,gm,vm,fd,{color:0,nowrap:1},pm),n}return ci(e,t),ai(e)}(Fp);function ym(t,e,n){return e=ui(e),Ai(t,_m()?Reflect.construct(e,n||[],ui(t).constructor):e.apply(t,n))}function _m(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_m=function(){return!!t})()}function wm(t){Md(t,"svelte-14vekpz",'.orientation-prompt.svelte-14vekpz{position:fixed;top:0;left:0;right:0;bottom:0;display:flex;justify-content:center;align-items:center;background-color:rgba(0, 0, 0, 0.7);color:white;font-size:1.5em;font-family:"Open Sans", "Helvetica Neue", "Arial", sans-serif;text-align:center;z-index:1000}')}function xm(t){var e;return{c:function(){(e=Od("div")).textContent="Please rotate your device horizontally for the best viewing experience.",Kd(e,"class","orientation-prompt svelte-14vekpz")},m:function(t,n){Dd(t,e,n)},d:function(t){t&&Ld(e)}}}function bm(t){var e,n=t[0]&&xm();return{c:function(){n&&n.c(),e=Vd()},m:function(t,r){n&&n.m(t,r),Dd(t,e,r)},p:function(t,r){gi(r,1)[0],t[0]?n||((n=xm()).c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ad,o:ad,d:function(t){n&&n.d(t),t&&Ld(e)}}}function Bm(t,e,n){var r=!1,i=function(){n(0,r=window.matchMedia("(orientation: portrait)").matches)};return Yd((function(){return i(),window.addEventListener("orientationchange",i),window.addEventListener("resize",i),function(){window.removeEventListener("orientationchange",i),window.removeEventListener("resize",i)}})),[r]}var km=function(t){function e(t){var n;return oi(this,e),Cp(n=ym(this,e),t,Bm,bm,fd,{},wm),n}return ci(e,t),ai(e)}(Fp),Cm=w(1..valueOf),Fm=Be.f,Em=Ct.f,Im=Pt.f,Um=rl.trim,Sm="Number",Qm=o[Sm];hn[Sm];var Tm=Qm.prototype,Mm=o.TypeError,Dm=w("".slice),Lm=w("".charCodeAt),Pm=function(t){var e,n,r,i,a,o,s,A,u=yt(t,"number");if(W(u))throw new Mm("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=Um(u),43===(e=Lm(u,0))||45===e){if(88===(n=Lm(u,2))||120===n)return NaN}else if(48===e){switch(Lm(u,1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+u}for(o=(a=Dm(u,2)).length,s=0;s<o;s++)if((A=Lm(a,s))<48||A>i)return NaN;return parseInt(a,r)}return+u},Om=De(Sm,!Qm(" 0o1")||!Qm("0b1")||Qm("+0x1")),Rm=function(t){var e,n=arguments.length<1?0:Qm(function(t){var e=yt(t,"number");return"bigint"==typeof e?e:Pm(e)}(t));return P(Tm,e=this)&&s((function(){Cm(e)}))?qo(Object(n),this,Rm):n};Rm.prototype=Tm,Om&&(Tm.constructor=Rm),Pe({global:!0,constructor:!0,wrap:!0,forced:Om},{Number:Rm});Om&&function(t,e){for(var n,r=A?Fm(e):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),i=0;r.length>i;i++)At(e,n=r[i])&&!At(t,n)&&Im(t,n,Em(e,n))}(hn[Sm],Qm);var zm=Dn.findIndex,Hm="findIndex",Vm=!0;Hm in[]&&Array(1)[Hm]((function(){Vm=!1})),Pe({target:"Array",proto:!0,forced:Vm},{findIndex:function(t){return zm(this,t,arguments.length>1?arguments[1]:void 0)}}),ra(Hm);var Nm=Hh.left,Km=!fs&&N>79&&N<83||!Ci("reduce");Pe({target:"Array",proto:!0,forced:Km},{reduce:function(t){var e=arguments.length;return Nm(this,t,e,e>1?arguments[1]:void 0)}}),Pe({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991});var Gm=No.onFreeze,jm=Object.freeze,$m=s((function(){jm(1)}));Pe({target:"Object",stat:!0,forced:$m,sham:!Vo},{freeze:function(t){return jm&&D(t)?jm(Gm(t)):t}});var Wm=un.f,Zm=s((function(){return!Object.getOwnPropertyNames(1)}));Pe({target:"Object",stat:!0,forced:Zm},{getOwnPropertyNames:Wm});var qm=s((function(){Ia(1)}));Pe({target:"Object",stat:!0,forced:qm,sham:!ka},{getPrototypeOf:function(t){return Ia(ot(t))}}),Pe({target:"Object",stat:!0,forced:Object.isExtensible!==Ho},{isExtensible:Ho});var Xm=p.f,Ym=w(Xm),Jm=w([].push),ty=A&&s((function(){var t=Object.create(null);return t[2]=2,!Ym(t,2)})),ey=function(t){return function(e){for(var n,r=Q(e),i=$e(r),a=ty&&null===Ia(r),o=i.length,s=0,u=[];o>s;)n=i[s++],A&&!(a?n in r:Ym(r,n))||Jm(u,t?[n,r[n]]:r[n]);return u}},ny={entries:ey(!0),values:ey(!1)},ry=ny.values;Pe({target:"Object",stat:!0},{values:function(t){return ry(t)}});var iy=w("".indexOf);Pe({target:"String",proto:!0,forced:!Gu("includes")},{includes:function(t){return!!~iy(je(S(this)),je(Nu(t)),arguments.length>1?arguments[1]:void 0)}}),dn("toStringTag"),gn(L("Symbol"),"Symbol"),gn(o.JSON,"JSON",!0);var ay=Math.log,oy=Math.LOG10E,sy=Math.log10||function(t){return ay(t)*oy};Pe({target:"Math",stat:!0},{log10:sy}),Pe({target:"Math",stat:!0},{sign:zl}),gn(Math,"Math",!0),Pe({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{EPSILON:Math.pow(2,-52)}),Pe({target:"Reflect",stat:!0,sham:!A},{getOwnPropertyDescriptor:function(t,e){return Ct.f(Ut(t),e)}}),Pe({target:"Reflect",stat:!0,sham:!ka},{getPrototypeOf:function(t){return Ia(Ut(t))}}),Pe({target:"Reflect",stat:!0},{has:function(t,e){return e in t}}),Pe({target:"Reflect",stat:!0},{ownKeys:Fe});var Ay=Ct.f,uy=mn("".slice),ly=Math.min,cy=Gu("endsWith"),hy=!cy&&!!function(){var t=Ay(String.prototype,"endsWith");return t&&!t.writable}();
/*!
	 * @kurkle/color v0.3.2
	 * https://github.com/kurkle/color#readme
	 * (c) 2023 Jukka Kurkela
	 * Released under the MIT License
	 */
function fy(t){return t+.5|0}Pe({target:"String",proto:!0,forced:!hy&&!cy},{endsWith:function(t){var e=je(S(this));Nu(t);var n=arguments.length>1?arguments[1]:void 0,r=e.length,i=void 0===n?r:ly(pe(n),r),a=je(t);return uy(e,i-a.length,i)===a}});var dy=function(t,e,n){return Math.max(Math.min(t,n),e)};function py(t){return dy(fy(2.55*t),0,255)}function vy(t){return dy(fy(255*t),0,255)}function gy(t){return dy(fy(t/2.55)/100,0,1)}function my(t){return dy(fy(100*t),0,100)}var yy={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},_y=Di("0123456789ABCDEF"),wy=function(t){return _y[15&t]},xy=function(t){return _y[(240&t)>>4]+_y[15&t]},by=function(t){return(240&t)>>4==(15&t)};function By(t){var e=function(t){return by(t.r)&&by(t.g)&&by(t.b)&&by(t.a)}(t)?wy:xy;return t?"#"+e(t.r)+e(t.g)+e(t.b)+function(t,e){return t<255?e(t):""}(t.a,e):void 0}var ky=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Cy(t,e,n){var r=e*Math.min(n,1-n),i=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+t/30)%12;return n-r*Math.max(Math.min(i-3,9-i,1),-1)};return[i(0),i(8),i(4)]}function Fy(t,e,n){var r=function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(r+t/60)%6;return n-n*e*Math.max(Math.min(i,4-i,1),0)};return[r(5),r(3),r(1)]}function Ey(t,e,n){var r,i=Cy(t,1,.5);for(e+n>1&&(e*=r=1/(e+n),n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function Iy(t){var e,n,r,i=t.r/255,a=t.g/255,o=t.b/255,s=Math.max(i,a,o),A=Math.min(i,a,o),u=(s+A)/2;return s!==A&&(r=s-A,n=u>.5?r/(2-s-A):r/(s+A),e=function(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}(i,a,o,r,s),e=60*e+.5),[0|e,n||0,u]}function Uy(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(vy)}function Sy(t,e,n){return Uy(Cy,t,e,n)}function Qy(t){return(t%360+360)%360}function Ty(t){var e,n=ky.exec(t),r=255;if(n){n[5]!==e&&(r=n[6]?py(+n[5]):vy(+n[5]));var i=Qy(+n[2]),a=+n[3]/100,o=+n[4]/100;return{r:(e="hwb"===n[1]?function(t,e,n){return Uy(Ey,t,e,n)}(i,a,o):"hsv"===n[1]?function(t,e,n){return Uy(Fy,t,e,n)}(i,a,o):Sy(i,a,o))[0],g:e[1],b:e[2],a:r}}}var My,Dy={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Ly={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Py(t){My||(My=function(){var t,e,n,r,i,a={},o=Object.keys(Ly),s=Object.keys(Dy);for(t=0;t<o.length;t++){for(r=i=o[t],e=0;e<s.length;e++)n=s[e],i=i.replace(n,Dy[n]);n=parseInt(Ly[r],16),a[i]=[n>>16&255,n>>8&255,255&n]}return a}(),My.transparent=[0,0,0,0]);var e=My[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}var Oy=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;var Ry=function(t){return t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055},zy=function(t){return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)};function Hy(t,e,n){if(t){var r=Iy(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,0===e?360:1)),r=Sy(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function Vy(t,e){return t?Object.assign(e||{},t):t}function Ny(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=vy(t[3]))):(e=Vy(t,{r:0,g:0,b:0,a:1})).a=vy(e.a),e}function Ky(t){return"r"===t.charAt(0)?function(t){var e,n,r,i=Oy.exec(t),a=255;if(i){if(i[7]!==e){var o=+i[7];a=i[8]?py(o):dy(255*o,0,255)}return e=+i[1],n=+i[3],r=+i[5],{r:e=255&(i[2]?py(e):dy(e,0,255)),g:n=255&(i[4]?py(n):dy(n,0,255)),b:r=255&(i[6]?py(r):dy(r,0,255)),a:a}}}(t):Ty(t)}var Gy=function(){function t(e){if(oi(this,t),e instanceof t)return e;var n,r,i,a,o=ni(e);"object"===o?n=Ny(e):"string"===o&&(a=(r=e).length,"#"===r[0]&&(4===a||5===a?i={r:255&17*yy[r[1]],g:255&17*yy[r[2]],b:255&17*yy[r[3]],a:5===a?17*yy[r[4]]:255}:7!==a&&9!==a||(i={r:yy[r[1]]<<4|yy[r[2]],g:yy[r[3]]<<4|yy[r[4]],b:yy[r[5]]<<4|yy[r[6]],a:9===a?yy[r[7]]<<4|yy[r[8]]:255})),n=i||Py(e)||Ky(e)),this._rgb=n,this._valid=!!n}return ai(t,[{key:"valid",get:function(){return this._valid}},{key:"rgb",get:function(){var t=Vy(this._rgb);return t&&(t.a=gy(t.a)),t},set:function(t){this._rgb=Ny(t)}},{key:"rgbString",value:function(){return this._valid?(t=this._rgb)&&(t.a<255?"rgba(".concat(t.r,", ").concat(t.g,", ").concat(t.b,", ").concat(gy(t.a),")"):"rgb(".concat(t.r,", ").concat(t.g,", ").concat(t.b,")")):void 0;var t}},{key:"hexString",value:function(){return this._valid?By(this._rgb):void 0}},{key:"hslString",value:function(){return this._valid?function(t){if(t){var e=Iy(t),n=e[0],r=my(e[1]),i=my(e[2]);return t.a<255?"hsla(".concat(n,", ").concat(r,"%, ").concat(i,"%, ").concat(gy(t.a),")"):"hsl(".concat(n,", ").concat(r,"%, ").concat(i,"%)")}}(this._rgb):void 0}},{key:"mix",value:function(t,e){if(t){var n,r=this.rgb,i=t.rgb,a=e===n?.5:e,o=2*a-1,s=r.a-i.a,A=((o*s==-1?o:(o+s)/(1+o*s))+1)/2;n=1-A,r.r=255&A*r.r+n*i.r+.5,r.g=255&A*r.g+n*i.g+.5,r.b=255&A*r.b+n*i.b+.5,r.a=a*r.a+(1-a)*i.a,this.rgb=r}return this}},{key:"interpolate",value:function(t,e){return t&&(this._rgb=function(t,e,n){var r=zy(gy(t.r)),i=zy(gy(t.g)),a=zy(gy(t.b));return{r:vy(Ry(r+n*(zy(gy(e.r))-r))),g:vy(Ry(i+n*(zy(gy(e.g))-i))),b:vy(Ry(a+n*(zy(gy(e.b))-a))),a:t.a+n*(e.a-t.a)}}(this._rgb,t._rgb,e)),this}},{key:"clone",value:function(){return new t(this.rgb)}},{key:"alpha",value:function(t){return this._rgb.a=vy(t),this}},{key:"clearer",value:function(t){return this._rgb.a*=1-t,this}},{key:"greyscale",value:function(){var t=this._rgb,e=fy(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}},{key:"opaquer",value:function(t){return this._rgb.a*=1+t,this}},{key:"negate",value:function(){var t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}},{key:"lighten",value:function(t){return Hy(this._rgb,2,t),this}},{key:"darken",value:function(t){return Hy(this._rgb,2,-t),this}},{key:"saturate",value:function(t){return Hy(this._rgb,1,t),this}},{key:"desaturate",value:function(t){return Hy(this._rgb,1,-t),this}},{key:"rotate",value:function(t){return function(t,e){var n=Iy(t);n[0]=Qy(n[0]+e),n=Sy(n),t.r=n[0],t.g=n[1],t.b=n[2]}(this._rgb,t),this}}])}();function jy(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return $y(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$y(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function $y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Wy(){}var Zy=function(){var t=0;return function(){return t++}}();function qy(t){return null==t}function Xy(t){if(Array.isArray&&Array.isArray(t))return!0;var e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function Yy(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function Jy(t){return("number"==typeof t||t instanceof Number)&&isFinite(+t)}function t_(t,e){return Jy(t)?t:e}function e_(t,e){return void 0===t?e:t}var n_=function(t,e){return"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t};function r_(t,e,n){if(t&&"function"==typeof t.call)return t.apply(n,e)}function i_(t,e,n,r){var i,a,o;if(Xy(t))if(a=t.length,r)for(i=a-1;i>=0;i--)e.call(n,t[i],i);else for(i=0;i<a;i++)e.call(n,t[i],i);else if(Yy(t))for(a=(o=Object.keys(t)).length,i=0;i<a;i++)e.call(n,t[o[i]],o[i])}function a_(t,e){var n,r,i,a;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],a=e[n],i.datasetIndex!==a.datasetIndex||i.index!==a.index)return!1;return!0}function o_(t){if(Xy(t))return t.map(o_);if(Yy(t)){for(var e=Object.create(null),n=Object.keys(t),r=n.length,i=0;i<r;++i)e[n[i]]=o_(t[n[i]]);return e}return t}function s_(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function A_(t,e,n,r){if(s_(t)){var i=e[t],a=n[t];Yy(i)&&Yy(a)?u_(i,a,r):e[t]=o_(a)}}function u_(t,e,n){var r=Xy(e)?e:[e],i=r.length;if(!Yy(t))return t;for(var a,o=(n=n||{}).merger||A_,s=0;s<i;++s)if(Yy(a=r[s]))for(var A=Object.keys(a),u=0,l=A.length;u<l;++u)o(A[u],t,a,n);return t}function l_(t,e){return u_(t,e,{merger:c_})}function c_(t,e,n){if(s_(t)){var r=e[t],i=n[t];Yy(r)&&Yy(i)?l_(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=o_(i))}}var h_={"":function(t){return t},x:function(t){return t.x},y:function(t){return t.y}};function f_(t){var e=function(t){var e,n=[],r="",i=jy(t.split("."));try{for(i.s();!(e=i.n()).done;)(r+=e.value).endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="")}catch(t){i.e(t)}finally{i.f()}return n}(t);return function(t){var n,r=jy(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(""===i)break;t=t&&t[i]}}catch(t){r.e(t)}finally{r.f()}return t}}function d_(t,e){return(h_[e]||(h_[e]=f_(e)))(t)}function p_(t){return t.charAt(0).toUpperCase()+t.slice(1)}var v_=function(t){return void 0!==t},g_=function(t){return"function"==typeof t},m_=function(t,e){if(t.size!==e.size)return!1;var n,r=jy(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!e.has(i))return!1}}catch(t){r.e(t)}finally{r.f()}return!0};var y_=Math.PI,__=2*y_,w_=__+y_,x_=Number.POSITIVE_INFINITY,b_=y_/180,B_=y_/2,k_=y_/4,C_=2*y_/3,F_=Math.log10,E_=Math.sign;function I_(t,e,n){return Math.abs(t-e)<n}function U_(t){var e=Math.round(t);t=I_(t,e,t/1e3)?e:t;var n=Math.pow(10,Math.floor(F_(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function S_(t){return!isNaN(parseFloat(t))&&isFinite(t)}function Q_(t,e,n){var r,i,a;for(r=0,i=t.length;r<i;r++)a=t[r][n],isNaN(a)||(e.min=Math.min(e.min,a),e.max=Math.max(e.max,a))}function T_(t){return t*(y_/180)}function M_(t){return t*(180/y_)}function D_(t){if(Jy(t)){for(var e=1,n=0;Math.round(t*e)/e!==t;)e*=10,n++;return n}}function L_(t,e){var n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r),a=Math.atan2(r,n);return a<-.5*y_&&(a+=__),{angle:a,distance:i}}function P_(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function O_(t,e){return(t-e+w_)%__-y_}function R_(t){return(t%__+__)%__}function z_(t,e,n,r){var i=R_(t),a=R_(e),o=R_(n),s=R_(a-i),A=R_(o-i),u=R_(i-a),l=R_(i-o);return i===a||i===o||r&&a===o||s>A&&u<l}function H_(t,e,n){return Math.max(e,Math.min(n,t))}function V_(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function N_(t,e,n){n=n||function(n){return t[n]<e};for(var r,i=t.length-1,a=0;i-a>1;)n(r=a+i>>1)?a=r:i=r;return{lo:a,hi:i}}var K_=function(t,e,n,r){return N_(t,n,r?function(r){var i=t[r][e];return i<n||i===n&&t[r+1][e]===n}:function(r){return t[r][e]<n})},G_=function(t,e,n){return N_(t,n,(function(r){return t[r][e]>=n}))};var j_=["push","pop","shift","splice","unshift"];function $_(t,e){var n=t._chartjs;if(n){var r=n.listeners,i=r.indexOf(e);-1!==i&&r.splice(i,1),r.length>0||(j_.forEach((function(e){delete t[e]})),delete t._chartjs)}}function W_(t){var e=new Set(t);return e.size===t.length?t:Array.from(e)}var Z_="undefined"==typeof window?function(t){return t()}:window.requestAnimationFrame;function q_(t,e){var n=[],r=!1;return function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];n=a,r||(r=!0,Z_.call(window,(function(){r=!1,t.apply(e,n)})))}}var X_=function(t){return"start"===t?"left":"end"===t?"right":"center"},Y_=function(t,e,n){return"start"===t?e:"end"===t?n:(e+n)/2};function J_(t,e,n){var r=e.length,i=0,a=r;if(t._sorted){var o=t.iScale,s=t._parsed,A=o.axis,u=o.getUserBounds(),l=u.min,c=u.max,h=u.minDefined,f=u.maxDefined;h&&(i=H_(Math.min(K_(s,A,l).lo,n?r:K_(e,A,o.getPixelForValue(l)).lo),0,r-1)),a=f?H_(Math.max(K_(s,o.axis,c,!0).hi+1,n?0:K_(e,A,o.getPixelForValue(c),!0).hi+1),i,r)-i:r-i}return{start:i,count:a}}function tw(t){var e=t.xScale,n=t.yScale,r=t._scaleRanges,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;var a=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),a}var ew=function(t){return 0===t||1===t},nw=function(t,e,n){return-Math.pow(2,10*(t-=1))*Math.sin((t-e)*__/n)},rw=function(t,e,n){return Math.pow(2,-10*t)*Math.sin((t-e)*__/n)+1},iw={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return(t-=1)*t*t+1},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-((t-=1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return(t-=1)*t*t*t*t+1},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return 1-Math.cos(t*B_)},easeOutSine:function(t){return Math.sin(t*B_)},easeInOutSine:function(t){return-.5*(Math.cos(y_*t)-1)},easeInExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1===t?1:1-Math.pow(2,-10*t)},easeInOutExpo:function(t){return ew(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1)))},easeInCirc:function(t){return t>=1?t:-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-(t-=1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){return ew(t)?t:nw(t,.075,.3)},easeOutElastic:function(t){return ew(t)?t:rw(t,.075,.3)},easeInOutElastic:function(t){var e=.1125;return ew(t)?t:t<.5?.5*nw(2*t,e,.45):.5+.5*rw(2*t-1,e,.45)},easeInBack:function(t){var e=1.70158;return t*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:function(t){return 1-iw.easeOutBounce(1-t)},easeOutBounce:function(t){var e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375},easeInOutBounce:function(t){return t<.5?.5*iw.easeInBounce(2*t):.5*iw.easeOutBounce(2*t-1)+.5}};function aw(t){if(t&&"object"===ni(t)){var e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function ow(t){return aw(t)?t:new Gy(t)}function sw(t){return aw(t)?t:new Gy(t).saturate(.5).darken(.1).hexString()}var Aw=["x","y","borderWidth","radius","tension"],uw=["color","borderColor","backgroundColor"];var lw=new Map;function cw(t,e,n){return function(t,e){e=e||{};var n=t+JSON.stringify(e),r=lw.get(n);return r||(r=new Intl.NumberFormat(t,e),lw.set(n,r)),r}(e,n).format(t)}var hw={values:function(t){return Xy(t)?t:""+t},numeric:function(t,e,n){if(0===t)return"0";var r,i=this.chart.options.locale,a=t;if(n.length>1){var o=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(o<1e-4||o>1e15)&&(r="scientific"),a=function(t,e){var n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t));return n}(t,n)}var s=F_(Math.abs(a)),A=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),u={notation:r,minimumFractionDigits:A,maximumFractionDigits:A};return Object.assign(u,this.options.ticks.format),cw(t,i,u)},logarithmic:function(t,e,n){if(0===t)return"0";var r=n[e].significand||t/Math.pow(10,Math.floor(F_(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?hw.numeric.call(this,t,e,n):""}};var fw={formatters:hw};var dw=Object.create(null),pw=Object.create(null);function vw(t,e){if(!e)return t;for(var n=e.split("."),r=0,i=n.length;r<i;++r){var a=n[r];t=t[a]||(t[a]=Object.create(null))}return t}function gw(t,e,n){return"string"==typeof e?u_(vw(t,e),n):u_(vw(t,""),e)}var mw=function(){return ai((function t(e,n){oi(this,t),this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=function(t){return t.chart.platform.getDevicePixelRatio()},this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=function(t,e){return sw(e.backgroundColor)},this.hoverBorderColor=function(t,e){return sw(e.borderColor)},this.hoverColor=function(t,e){return sw(e.color)},this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}),[{key:"set",value:function(t,e){return gw(this,t,e)}},{key:"get",value:function(t){return vw(this,t)}},{key:"describe",value:function(t,e){return gw(pw,t,e)}},{key:"override",value:function(t,e){return gw(dw,t,e)}},{key:"route",value:function(t,e,n,r){var i=vw(this,t),a=vw(this,n),o="_"+e;Object.defineProperties(i,hi(hi({},o,{value:i[e],writable:!0}),e,{enumerable:!0,get:function(){var t=this[o],e=a[r];return Yy(t)?Object.assign({},e,t):e_(t,e)},set:function(t){this[o]=t}}))}},{key:"apply",value:function(t){var e=this;t.forEach((function(t){return t(e)}))}}])}(),yw=new mw({_scriptable:function(t){return!t.startsWith("on")},_indexable:function(t){return"events"!==t},hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:function(t){return"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}}),t.set("animations",{colors:{type:"color",properties:uw},numbers:{type:"number",properties:Aw}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:function(t){return 0|t}}}}})},function(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:function(t,e){return e.lineWidth},tickColor:function(t,e){return e.color},offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:fw.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:function(t){return!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t},_indexable:function(t){return"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:function(t){return"backdropPadding"!==t&&"callback"!==t},_indexable:function(t){return"backdropPadding"!==t}})}]);function _w(t,e,n,r,i){var a=e[i];return a||(a=e[i]=t.measureText(i).width,n.push(i)),a>r&&(r=a),r}function ww(t,e,n,r){var i=(r=r||{}).data=r.data||{},a=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},a=r.garbageCollect=[],r.font=e),t.save(),t.font=e;var o,s,A,u,l,c=0,h=n.length;for(o=0;o<h;o++)if(null==(u=n[o])||Xy(u)){if(Xy(u))for(s=0,A=u.length;s<A;s++)null==(l=u[s])||Xy(l)||(c=_w(t,i,a,c,l))}else c=_w(t,i,a,c,u);t.restore();var f=a.length/2;if(f>n.length){for(o=0;o<f;o++)delete i[a[o]];a.splice(0,f)}return c}function xw(t,e,n){var r=t.currentDevicePixelRatio,i=0!==n?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function bw(t,e){(e||t)&&((e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Bw(t,e,n,r){kw(t,e,n,r,null)}function kw(t,e,n,r,i){var a,o,s,A,u,l,c,h,f=e.pointStyle,d=e.rotation,p=e.radius,v=(d||0)*b_;if(f&&"object"===ni(f)&&("[object HTMLImageElement]"===(a=f.toString())||"[object HTMLCanvasElement]"===a))return t.save(),t.translate(n,r),t.rotate(v),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void t.restore();if(!(isNaN(p)||p<=0)){switch(t.beginPath(),f){default:i?t.ellipse(n,r,i/2,p,0,0,__):t.arc(n,r,p,0,__),t.closePath();break;case"triangle":l=i?i/2:p,t.moveTo(n+Math.sin(v)*l,r-Math.cos(v)*p),v+=C_,t.lineTo(n+Math.sin(v)*l,r-Math.cos(v)*p),v+=C_,t.lineTo(n+Math.sin(v)*l,r-Math.cos(v)*p),t.closePath();break;case"rectRounded":A=p-(u=.516*p),o=Math.cos(v+k_)*A,c=Math.cos(v+k_)*(i?i/2-u:A),s=Math.sin(v+k_)*A,h=Math.sin(v+k_)*(i?i/2-u:A),t.arc(n-c,r-s,u,v-y_,v-B_),t.arc(n+h,r-o,u,v-B_,v),t.arc(n+c,r+s,u,v,v+B_),t.arc(n-h,r+o,u,v+B_,v+y_),t.closePath();break;case"rect":if(!d){A=Math.SQRT1_2*p,l=i?i/2:A,t.rect(n-l,r-A,2*l,2*A);break}v+=k_;case"rectRot":c=Math.cos(v)*(i?i/2:p),o=Math.cos(v)*p,s=Math.sin(v)*p,h=Math.sin(v)*(i?i/2:p),t.moveTo(n-c,r-s),t.lineTo(n+h,r-o),t.lineTo(n+c,r+s),t.lineTo(n-h,r+o),t.closePath();break;case"crossRot":v+=k_;case"cross":c=Math.cos(v)*(i?i/2:p),o=Math.cos(v)*p,s=Math.sin(v)*p,h=Math.sin(v)*(i?i/2:p),t.moveTo(n-c,r-s),t.lineTo(n+c,r+s),t.moveTo(n+h,r-o),t.lineTo(n-h,r+o);break;case"star":c=Math.cos(v)*(i?i/2:p),o=Math.cos(v)*p,s=Math.sin(v)*p,h=Math.sin(v)*(i?i/2:p),t.moveTo(n-c,r-s),t.lineTo(n+c,r+s),t.moveTo(n+h,r-o),t.lineTo(n-h,r+o),v+=k_,c=Math.cos(v)*(i?i/2:p),o=Math.cos(v)*p,s=Math.sin(v)*p,h=Math.sin(v)*(i?i/2:p),t.moveTo(n-c,r-s),t.lineTo(n+c,r+s),t.moveTo(n+h,r-o),t.lineTo(n-h,r+o);break;case"line":o=i?i/2:Math.cos(v)*p,s=Math.sin(v)*p,t.moveTo(n-o,r-s),t.lineTo(n+o,r+s);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(v)*(i?i/2:p),r+Math.sin(v)*p);break;case!1:t.closePath()}t.fill(),e.borderWidth>0&&t.stroke()}}function Cw(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Fw(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Ew(t){t.restore()}function Iw(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if("middle"===i){var a=(e.x+n.x)/2;t.lineTo(a,e.y),t.lineTo(a,n.y)}else"after"===i!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Uw(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function Sw(t,e,n,r,i){if(i.strikethrough||i.underline){var a=t.measureText(r),o=e-a.actualBoundingBoxLeft,s=e+a.actualBoundingBoxRight,A=n-a.actualBoundingBoxAscent,u=n+a.actualBoundingBoxDescent,l=i.strikethrough?(A+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,l),t.lineTo(s,l),t.stroke()}}function Qw(t,e){var n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Tw(t,e,n,r,i){var a,o,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},A=Xy(e)?e:[e],u=s.strokeWidth>0&&""!==s.strokeColor;for(t.save(),t.font=i.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),qy(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,s),a=0;a<A.length;++a)o=A[a],s.backdrop&&Qw(t,s.backdrop),u&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),qy(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(o,n,r,s.maxWidth)),t.fillText(o,n,r,s.maxWidth),Sw(t,n,r,o,s),r+=Number(i.lineHeight);t.restore()}function Mw(t,e){var n=e.x,r=e.y,i=e.w,a=e.h,o=e.radius;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*y_,y_,!0),t.lineTo(n,r+a-o.bottomLeft),t.arc(n+o.bottomLeft,r+a-o.bottomLeft,o.bottomLeft,y_,B_,!0),t.lineTo(n+i-o.bottomRight,r+a),t.arc(n+i-o.bottomRight,r+a-o.bottomRight,o.bottomRight,B_,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-B_,!0),t.lineTo(n+o.topLeft,r)}var Dw=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Lw=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Pw(t,e){var n=(""+t).match(Dw);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100}return e*t}var Ow=function(t){return+t||0};function Rw(t,e){var n,r={},i=Yy(e),a=i?Object.keys(e):e,o=Yy(t)?i?function(n){return e_(t[n],t[e[n]])}:function(e){return t[e]}:function(){return t},s=jy(a);try{for(s.s();!(n=s.n()).done;){var A=n.value;r[A]=Ow(o(A))}}catch(t){s.e(t)}finally{s.f()}return r}function zw(t){return Rw(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Hw(t){return Rw(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Vw(t){var e=zw(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Nw(t,e){t=t||{},e=e||yw.font;var n=e_(t.size,e.size);"string"==typeof n&&(n=parseInt(n,10));var r=e_(t.style,e.style);r&&!(""+r).match(Lw)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);var i={family:e_(t.family,e.family),lineHeight:Pw(e_(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:e_(t.weight,e.weight),string:""};return i.string=function(t){return!t||qy(t.size)||qy(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(i),i}function Kw(t,e,n,r){var i,a,o,s=!0;for(i=0,a=t.length;i<a;++i)if(void 0!==(o=t[i])&&(void 0!==e&&"function"==typeof o&&(o=o(e),s=!1),void 0!==n&&Xy(o)&&(o=o[n%o.length],s=!1),void 0!==o))return r&&!s&&(r.cacheable=!1),o}function Gw(t,e){return Object.assign(Object.create(t),e)}function jw(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return t[0]},i=(arguments.length>2?arguments[2]:void 0)||t;void 0===n&&(n=rx("_fallback",t));var a=hi(hi(hi(hi(hi(hi(hi({},Symbol.toStringTag,"Object"),"_cacheable",!0),"_scopes",t),"_rootScopes",i),"_fallback",n),"_getTarget",r),"override",(function(r){return jw([r].concat(Di(t)),e,i,n)}));return new Proxy(a,{deleteProperty:function(e,n){return delete e[n],delete e._keys,delete t[0][n],!0},get:function(n,r){return Xw(n,r,(function(){return function(t,e,n,r){var i,a,o=jy(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(void 0!==(i=rx(Zw(s,t),n)))return qw(t,i)?ex(n,r,t,i):i}}catch(t){o.e(t)}finally{o.f()}}(r,e,t,n)}))},getOwnPropertyDescriptor:function(t,e){return Reflect.getOwnPropertyDescriptor(t._scopes[0],e)},getPrototypeOf:function(){return Reflect.getPrototypeOf(t[0])},has:function(t,e){return ix(t).includes(e)},ownKeys:function(t){return ix(t)},set:function(t,e,n){var i=t._storage||(t._storage=r());return t[e]=i[e]=n,delete t._keys,!0}})}function $w(t,e,n,r){var i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Ww(t,r),setContext:function(e){return $w(t,e,n,r)},override:function(i){return $w(t.override(i),e,n,r)}};return new Proxy(i,{deleteProperty:function(e,n){return delete e[n],delete t[n],!0},get:function(t,e,n){return Xw(t,e,(function(){return function(t,e,n){var r=t._proxy,i=t._context,a=t._subProxy,o=t._descriptors,s=r[e];g_(s)&&o.isScriptable(e)&&(s=function(t,e,n,r){var i=n._proxy,a=n._context,o=n._subProxy,s=n._stack;if(s.has(t))throw new Error("Recursion detected: "+Array.from(s).join("->")+"->"+t);s.add(t);var A=e(a,o||r);s.delete(t),qw(t,A)&&(A=ex(i._scopes,i,t,A));return A}(e,s,t,n));Xy(s)&&s.length&&(s=function(t,e,n,r){var i=n._proxy,a=n._context,o=n._subProxy,s=n._descriptors;if(void 0!==a.index&&r(t))return e[a.index%e.length];if(Yy(e[0])){var A=e,u=i._scopes.filter((function(t){return t!==A}));e=[];var l,c=jy(A);try{for(c.s();!(l=c.n()).done;){var h=ex(u,i,t,l.value);e.push($w(h,a,o&&o[t],s))}}catch(t){c.e(t)}finally{c.f()}}return e}(e,s,t,o.isIndexable));qw(e,s)&&(s=$w(s,i,a&&a[e],o));return s}(t,e,n)}))},getOwnPropertyDescriptor:function(e,n){return e._descriptors.allKeys?Reflect.has(t,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,n)},getPrototypeOf:function(){return Reflect.getPrototypeOf(t)},has:function(e,n){return Reflect.has(t,n)},ownKeys:function(){return Reflect.ownKeys(t)},set:function(e,n,r){return t[n]=r,delete e[n],!0}})}function Ww(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0},n=t._scriptable,r=void 0===n?e.scriptable:n,i=t._indexable,a=void 0===i?e.indexable:i,o=t._allKeys;return{allKeys:void 0===o?e.allKeys:o,scriptable:r,indexable:a,isScriptable:g_(r)?r:function(){return r},isIndexable:g_(a)?a:function(){return a}}}var Zw=function(t,e){return t?t+p_(e):e},qw=function(t,e){return Yy(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object)};function Xw(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||"constructor"===e)return t[e];var r=n();return t[e]=r,r}function Yw(t,e,n){return g_(t)?t(e,n):t}var Jw=function(t,e){return!0===t?e:"string"==typeof t?d_(e,t):void 0};function tx(t,e,n,r,i){var a,o=jy(e);try{for(o.s();!(a=o.n()).done;){var s=a.value,A=Jw(n,s);if(A){t.add(A);var u=Yw(A._fallback,n,i);if(void 0!==u&&u!==n&&u!==r)return u}else if(!1===A&&void 0!==r&&n!==r)return null}}catch(t){o.e(t)}finally{o.f()}return!1}function ex(t,e,n,r){var i=e._rootScopes,a=Yw(e._fallback,n,r),o=[].concat(Di(t),Di(i)),s=new Set;s.add(r);var A=nx(s,o,n,a||n,r);return null!==A&&((void 0===a||a===n||null!==(A=nx(s,o,a,A,r)))&&jw(Array.from(s),[""],i,a,(function(){return function(t,e,n){var r=t._getTarget();e in r||(r[e]={});var i=r[e];if(Xy(i)&&Yy(n))return n;return i||{}}(e,n,r)})))}function nx(t,e,n,r,i){for(;n;)n=tx(t,e,n,r,i);return n}function rx(t,e){var n,r=jy(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i){var a=i[t];if(void 0!==a)return a}}}catch(t){r.e(t)}finally{r.f()}}function ix(t){var e=t._keys;return e||(e=t._keys=function(t){var e,n=new Set,r=jy(t);try{for(r.s();!(e=r.n()).done;){var i,a=e.value,o=jy(Object.keys(a).filter((function(t){return!t.startsWith("_")})));try{for(o.s();!(i=o.n()).done;){var s=i.value;n.add(s)}}catch(t){o.e(t)}finally{o.f()}}}catch(t){r.e(t)}finally{r.f()}return Array.from(n)}(t._scopes)),e}function ax(t,e,n,r){var i,a,o,s,A=t.iScale,u=this._parsing.key,l=void 0===u?"r":u,c=new Array(r);for(i=0,a=r;i<a;++i)s=e[o=i+n],c[i]={r:A.parse(d_(s,l),o)};return c}var ox=Number.EPSILON||1e-14,sx=function(t,e){return e<t.length&&!t[e].skip&&t[e]},Ax=function(t){return"x"===t?"y":"x"};function ux(t){var e,n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",a=Ax(i),o=t.length,s=Array(o).fill(0),A=Array(o),u=sx(t,0);for(e=0;e<o;++e)if(n=r,r=u,u=sx(t,e+1),r){if(u){var l=u[i]-r[i];s[e]=0!==l?(u[a]-r[a])/l:0}A[e]=n?u?E_(s[e-1])!==E_(s[e])?0:(s[e-1]+s[e])/2:s[e-1]:s[e]}!function(t,e,n){for(var r,i,a,o,s,A=t.length,u=sx(t,0),l=0;l<A-1;++l)s=u,u=sx(t,l+1),s&&u&&(I_(e[l],0,ox)?n[l]=n[l+1]=0:(r=n[l]/e[l],i=n[l+1]/e[l],(o=Math.pow(r,2)+Math.pow(i,2))<=9||(a=3/Math.sqrt(o),n[l]=r*a*e[l],n[l+1]=i*a*e[l])))}(t,s,A),function(t,e){for(var n,r,i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x",o=Ax(a),s=t.length,A=sx(t,0),u=0;u<s;++u)if(r=i,i=A,A=sx(t,u+1),i){var l=i[a],c=i[o];r&&(n=(l-r[a])/3,i["cp1".concat(a)]=l-n,i["cp1".concat(o)]=c-n*e[u]),A&&(n=(A[a]-l)/3,i["cp2".concat(a)]=l+n,i["cp2".concat(o)]=c+n*e[u])}}(t,A,i)}function lx(t,e,n){return Math.max(Math.min(t,n),e)}function cx(t,e,n,r,i){var a,o,s,A,u,l,c,h,f,d,p,v,g,m,y,_,w;if(e.spanGaps&&(t=t.filter((function(t){return!t.skip}))),"monotone"===e.cubicInterpolationMode)ux(t,i);else{var x=r?t[t.length-1]:t[0];for(a=0,o=t.length;a<o;++a)s=t[a],u=x,l=s,c=t[Math.min(a+1,o-(r?0:1))%o],h=e.tension,f=void 0,d=void 0,p=void 0,v=void 0,g=void 0,m=void 0,y=void 0,_=void 0,w=void 0,f=u.skip?l:u,d=l,p=c.skip?l:c,v=P_(d,f),g=P_(p,d),m=v/(v+g),y=g/(v+g),_=h*(m=isNaN(m)?0:m),w=h*(y=isNaN(y)?0:y),A={previous:{x:d.x-_*(p.x-f.x),y:d.y-_*(p.y-f.y)},next:{x:d.x+w*(p.x-f.x),y:d.y+w*(p.y-f.y)}},s.cp1x=A.previous.x,s.cp1y=A.previous.y,s.cp2x=A.next.x,s.cp2y=A.next.y,x=s}e.capBezierPoints&&function(t,e){var n,r,i,a,o,s=Cw(t[0],e);for(n=0,r=t.length;n<r;++n)o=a,a=s,s=n<r-1&&Cw(t[n+1],e),a&&(i=t[n],o&&(i.cp1x=lx(i.cp1x,e.left,e.right),i.cp1y=lx(i.cp1y,e.top,e.bottom)),s&&(i.cp2x=lx(i.cp2x,e.left,e.right),i.cp2y=lx(i.cp2y,e.top,e.bottom)))}(t,n)}function hx(){return"undefined"!=typeof window&&"undefined"!=typeof document}function fx(t){var e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function dx(t,e,n){var r;return"string"==typeof t?(r=parseInt(t,10),-1!==t.indexOf("%")&&(r=r/100*e.parentNode[n])):r=t,r}var px=function(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)};var vx=["top","right","bottom","left"];function gx(t,e,n){var r={};n=n?"-"+n:"";for(var i=0;i<4;i++){var a=vx[i];r[a]=parseFloat(t[e+"-"+a+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}var mx=function(t,e,n){return(t>0||e>0)&&(!n||!n.shadowRoot)};function yx(t,e){if("native"in t)return t;var n=e.canvas,r=e.currentDevicePixelRatio,i=px(n),a="border-box"===i.boxSizing,o=gx(i,"padding"),s=gx(i,"border","width"),A=function(t,e){var n,r,i=t.touches,a=i&&i.length?i[0]:t,o=a.offsetX,s=a.offsetY,A=!1;if(mx(o,s,t.target))n=o,r=s;else{var u=e.getBoundingClientRect();n=a.clientX-u.left,r=a.clientY-u.top,A=!0}return{x:n,y:r,box:A}}(t,n),u=A.x,l=A.y,c=A.box,h=o.left+(c&&s.left),f=o.top+(c&&s.top),d=e.width,p=e.height;return a&&(d-=o.width+s.width,p-=o.height+s.height),{x:Math.round((u-h)/d*n.width/r),y:Math.round((l-f)/p*n.height/r)}}var _x=function(t){return Math.round(10*t)/10};function wx(t,e,n,r){var i=px(t),a=gx(i,"margin"),o=dx(i.maxWidth,t,"clientWidth")||x_,s=dx(i.maxHeight,t,"clientHeight")||x_,A=function(t,e,n){var r,i;if(void 0===e||void 0===n){var a=t&&fx(t);if(a){var o=a.getBoundingClientRect(),s=px(a),A=gx(s,"border","width"),u=gx(s,"padding");e=o.width-u.width-A.width,n=o.height-u.height-A.height,r=dx(s.maxWidth,a,"clientWidth"),i=dx(s.maxHeight,a,"clientHeight")}else e=t.clientWidth,n=t.clientHeight}return{width:e,height:n,maxWidth:r||x_,maxHeight:i||x_}}(t,e,n),u=A.width,l=A.height;if("content-box"===i.boxSizing){var c=gx(i,"border","width"),h=gx(i,"padding");u-=h.width+c.width,l-=h.height+c.height}return u=Math.max(0,u-a.width),l=Math.max(0,r?u/r:l-a.height),u=_x(Math.min(u,o,A.maxWidth)),l=_x(Math.min(l,s,A.maxHeight)),u&&!l&&(l=_x(u/2)),(void 0!==e||void 0!==n)&&r&&A.height&&l>A.height&&(l=A.height,u=_x(Math.floor(l*r))),{width:u,height:l}}function xx(t,e,n){var r=e||1,i=Math.floor(t.height*r),a=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);var o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height="".concat(t.height,"px"),o.style.width="".concat(t.width,"px")),(t.currentDevicePixelRatio!==r||o.height!==i||o.width!==a)&&(t.currentDevicePixelRatio=r,o.height=i,o.width=a,t.ctx.setTransform(r,0,0,r,0,0),!0)}var bx=function(){var t=!1;try{var e={get passive(){return t=!0,!1}};hx()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch(t){}return t}();function Bx(t,e){var n=function(t,e){return px(t).getPropertyValue(e)}(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function kx(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function Cx(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:"middle"===r?n<.5?t.y:e.y:"after"===r?n<1?t.y:e.y:n>0?e.y:t.y}}function Fx(t,e,n,r){var i={x:t.cp2x,y:t.cp2y},a={x:e.cp1x,y:e.cp1y},o=kx(t,i,n),s=kx(i,a,n),A=kx(a,e,n),u=kx(o,s,n),l=kx(s,A,n);return kx(u,l,n)}function Ex(t,e,n){return t?function(t,e){return{x:function(n){return t+t+e-n},setWidth:function(t){e=t},textAlign:function(t){return"center"===t?t:"right"===t?"left":"right"},xPlus:function(t,e){return t-e},leftForLtr:function(t,e){return t-e}}}(e,n):{x:function(t){return t},setWidth:function(t){},textAlign:function(t){return t},xPlus:function(t,e){return t+e},leftForLtr:function(t,e){return t}}}function Ix(t,e){var n,r;"ltr"!==e&&"rtl"!==e||(r=[(n=t.canvas.style).getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function Ux(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Sx(t){return"angle"===t?{between:z_,compare:O_,normalize:R_}:{between:V_,compare:function(t,e){return t-e},normalize:function(t){return t}}}function Qx(t){var e=t.start,n=t.end,r=t.count;return{start:e%r,end:n%r,loop:t.loop&&(n-e+1)%r==0,style:t.style}}function Tx(t,e,n){if(!n)return[t];for(var r,i,a,o=n.property,s=n.start,A=n.end,u=e.length,l=Sx(o),c=l.compare,h=l.between,f=l.normalize,d=function(t,e,n){var r,i,a=n.property,o=n.start,s=n.end,A=Sx(a),u=A.between,l=A.normalize,c=e.length,h=t.start,f=t.end,d=t.loop;if(d){for(h+=c,f+=c,r=0,i=c;r<i&&u(l(e[h%c][a]),o,s);++r)h--,f--;h%=c,f%=c}return f<h&&(f+=c),{start:h,end:f,loop:d,style:t.style}}(t,e,n),p=d.start,v=d.end,g=d.loop,m=d.style,y=[],_=!1,w=null,x=function(){return _||h(s,a,r)&&0!==c(s,a)},b=function(){return!_||0===c(A,r)||h(A,a,r)},B=p,k=p;B<=v;++B)(i=e[B%u]).skip||(r=f(i[o]))!==a&&(_=h(r,s,A),null===w&&x()&&(w=0===c(r,s)?B:k),null!==w&&b()&&(y.push(Qx({start:w,end:B,loop:g,count:u,style:m})),w=null),k=B,a=r);return null!==w&&y.push(Qx({start:w,end:v,loop:g,count:u,style:m})),y}function Mx(t,e){for(var n=[],r=t.segments,i=0;i<r.length;i++){var a=Tx(r[i],t.points,e);a.length&&n.push.apply(n,Di(a))}return n}function Dx(t,e,n,r){return r&&r.setContext&&n?function(t,e,n,r){var i=t._chart.getContext(),a=Lx(t.options),o=t._datasetIndex,s=t.options.spanGaps,A=n.length,u=[],l=a,c=e[0].start,h=c;function f(t,e,r,i){var a=s?-1:1;if(t!==e){for(t+=A;n[t%A].skip;)t-=a;for(;n[e%A].skip;)e+=a;t%A!=e%A&&(u.push({start:t%A,end:e%A,loop:r,style:i}),l=i,c=e%A)}}var d,p=jy(e);try{for(p.s();!(d=p.n()).done;){var v=d.value;c=s?c:v.start;var g=n[c%A],m=void 0;for(h=c+1;h<=v.end;h++){var y=n[h%A];Px(m=Lx(r.setContext(Gw(i,{type:"segment",p0:g,p1:y,p0DataIndex:(h-1)%A,p1DataIndex:h%A,datasetIndex:o}))),l)&&f(c,h-1,v.loop,l),g=y,l=m}c<h-1&&f(c,h-1,v.loop,l)}}catch(t){p.e(t)}finally{p.f()}return u}(t,e,n,r):e}function Lx(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Px(t,e){if(!e)return!1;var n=[],r=function(t,e){return aw(e)?(n.includes(e)||n.push(e),n.indexOf(e)):e};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function Ox(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Rx(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ox(Object(n),!0).forEach((function(e){hi(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ox(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function zx(t,e,n){return e=ui(e),Ai(t,Hx()?Reflect.construct(e,n||[],ui(t).constructor):e.apply(t,n))}function Hx(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Hx=function(){return!!t})()}function Vx(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Nx(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nx(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Nx(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var Kx=function(){return ai((function t(){oi(this,t),this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}),[{key:"_notify",value:function(t,e,n,r){var i=e.listeners[r],a=e.duration;i.forEach((function(r){return r({chart:t,initial:e.initial,numSteps:a,currentStep:Math.min(n-e.start,a)})}))}},{key:"_refresh",value:function(){var t=this;this._request||(this._running=!0,this._request=Z_.call(window,(function(){t._update(),t._request=null,t._running&&t._refresh()})))}},{key:"_update",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),n=0;this._charts.forEach((function(r,i){if(r.running&&r.items.length){for(var a,o=r.items,s=o.length-1,A=!1;s>=0;--s)(a=o[s])._active?(a._total>r.duration&&(r.duration=a._total),a.tick(e),A=!0):(o[s]=o[o.length-1],o.pop());A&&(i.draw(),t._notify(i,r,e,"progress")),o.length||(r.running=!1,t._notify(i,r,e,"complete"),r.initial=!1),n+=o.length}})),this._lastDate=e,0===n&&(this._running=!1)}},{key:"_getAnims",value:function(t){var e=this._charts,n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}},{key:"listen",value:function(t,e,n){this._getAnims(t).listeners[e].push(n)}},{key:"add",value:function(t,e){var n;e&&e.length&&(n=this._getAnims(t).items).push.apply(n,Di(e))}},{key:"has",value:function(t){return this._getAnims(t).items.length>0}},{key:"start",value:function(t){var e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((function(t,e){return Math.max(t,e._duration)}),0),this._refresh())}},{key:"running",value:function(t){if(!this._running)return!1;var e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}},{key:"stop",value:function(t){var e=this._charts.get(t);if(e&&e.items.length){for(var n=e.items,r=n.length-1;r>=0;--r)n[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}}},{key:"remove",value:function(t){return this._charts.delete(t)}}])}(),Gx=new Kx,jx="transparent",$x={boolean:function(t,e,n){return n>.5?e:t},color:function(t,e,n){var r=ow(t||jx),i=r.valid&&ow(e||jx);return i&&i.valid?i.mix(r,n).hexString():e},number:function(t,e,n){return t+(e-t)*n}},Wx=function(){return ai((function t(e,n,r,i){oi(this,t);var a=n[r];i=Kw([e.to,i,a,e.from]);var o=Kw([e.from,a,i]);this._active=!0,this._fn=e.fn||$x[e.type||ni(o)],this._easing=iw[e.easing]||iw.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}),[{key:"active",value:function(){return this._active}},{key:"update",value:function(t,e,n){if(this._active){this._notify(!1);var r=this._target[this._prop],i=n-this._start,a=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(a,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=Kw([t.to,e,r,t.from]),this._from=Kw([t.from,r,e])}}},{key:"cancel",value:function(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}},{key:"tick",value:function(t){var e,n=t-this._start,r=this._duration,i=this._prop,a=this._from,o=this._loop,s=this._to;if(this._active=a!==s&&(o||n<r),!this._active)return this._target[i]=s,void this._notify(!0);n<0?this._target[i]=a:(e=n/r%2,e=o&&e>1?2-e:e,e=this._easing(Math.min(1,Math.max(0,e))),this._target[i]=this._fn(a,s,e))}},{key:"wait",value:function(){var t=this._promises||(this._promises=[]);return new Promise((function(e,n){t.push({res:e,rej:n})}))}},{key:"_notify",value:function(t){for(var e=t?"res":"rej",n=this._promises||[],r=0;r<n.length;r++)n[r][e]()}}])}(),Zx=function(){return ai((function t(e,n){oi(this,t),this._chart=e,this._properties=new Map,this.configure(n)}),[{key:"configure",value:function(t){if(Yy(t)){var e=Object.keys(yw.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach((function(r){var i=t[r];if(Yy(i)){for(var a={},o=0,s=e;o<s.length;o++){var A=s[o];a[A]=i[A]}(Xy(i.properties)&&i.properties||[r]).forEach((function(t){t!==r&&n.has(t)||n.set(t,a)}))}}))}}},{key:"_animateOptions",value:function(t,e){var n=e.options,r=function(t,e){if(!e)return;var n=t.options;if(!n)return void(t.options=e);n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(t,n);if(!r)return[];var i=this._createAnimations(r,n);return n.$shared&&function(t,e){for(var n=[],r=Object.keys(e),i=0;i<r.length;i++){var a=t[r[i]];a&&a.active()&&n.push(a.wait())}return Promise.all(n)}(t.options.$animations,n).then((function(){t.options=n}),(function(){})),i}},{key:"_createAnimations",value:function(t,e){var n,r=this._properties,i=[],a=t.$animations||(t.$animations={}),o=Object.keys(e),s=Date.now();for(n=o.length-1;n>=0;--n){var A=o[n];if("$"!==A.charAt(0))if("options"!==A){var u=e[A],l=a[A],c=r.get(A);if(l){if(c&&l.active()){l.update(c,u,s);continue}l.cancel()}c&&c.duration?(a[A]=l=new Wx(c,t,A,u),i.push(l)):t[A]=u}else i.push.apply(i,Di(this._animateOptions(t,e)))}return i}},{key:"update",value:function(t,e){if(0!==this._properties.size){var n=this._createAnimations(t,e);return n.length?(Gx.add(this._chart,n),!0):void 0}Object.assign(t,e)}}])}();function qx(t,e){var n=t&&t.options||{},r=n.reverse,i=void 0===n.min?e:0,a=void 0===n.max?e:0;return{start:r?a:i,end:r?i:a}}function Xx(t,e){var n,r,i=[],a=t._getSortedDatasetMetas(e);for(n=0,r=a.length;n<r;++n)i.push(a[n].index);return i}function Yx(t,e,n){var r,i,a,o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},A=t.keys,u="single"===s.mode;if(null!==e){for(r=0,i=A.length;r<i;++r){if((a=+A[r])===n){if(s.all)continue;break}Jy(o=t.values[a])&&(u||0===e||E_(e)===E_(o))&&(e+=o)}return e}}function Jx(t,e){var n=t&&t.options.stacked;return n||void 0===n&&void 0!==e.stack}function tb(t,e,n){var r=t[e]||(t[e]={});return r[n]||(r[n]={})}function eb(t,e,n,r){var i,a=Vx(e.getMatchingVisibleMetas(r).reverse());try{for(a.s();!(i=a.n()).done;){var o=i.value,s=t[o.index];if(n&&s>0||!n&&s<0)return o.index}}catch(t){a.e(t)}finally{a.f()}return null}function nb(t,e){for(var n,r=t.chart,i=t._cachedMeta,a=r._stacks||(r._stacks={}),o=i.iScale,s=i.vScale,A=i.index,u=o.axis,l=s.axis,c=function(t,e,n){return"".concat(t.id,".").concat(e.id,".").concat(n.stack||n.type)}(o,s,i),h=e.length,f=0;f<h;++f){var d=e[f],p=d[u],v=d[l];(n=(d._stacks||(d._stacks={}))[l]=tb(a,c,p))[A]=v,n._top=eb(n,s,!0,i.type),n._bottom=eb(n,s,!1,i.type),(n._visualValues||(n._visualValues={}))[A]=v}}function rb(t,e){var n=t.scales;return Object.keys(n).filter((function(t){return n[t].axis===e})).shift()}function ib(t,e){var n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){var i,a=Vx(e=e||t._parsed);try{for(a.s();!(i=a.n()).done;){var o=i.value._stacks;if(!o||void 0===o[r]||void 0===o[r][n])return;delete o[r][n],void 0!==o[r]._visualValues&&void 0!==o[r]._visualValues[n]&&delete o[r]._visualValues[n]}}catch(t){a.e(t)}finally{a.f()}}}var ab=function(t){return"reset"===t||"none"===t},ob=function(t,e){return e?t:Object.assign({},t)},sb=function(){return ai((function t(e,n){oi(this,t),this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=(this instanceof t?this.constructor:void 0).datasetElementType,this.dataElementType=(this instanceof t?this.constructor:void 0).dataElementType,this.initialize()}),[{key:"initialize",value:function(){var t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Jx(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}},{key:"updateIndex",value:function(t){this.index!==t&&ib(this._cachedMeta),this.index=t}},{key:"linkScales",value:function(){var t=this.chart,e=this._cachedMeta,n=this.getDataset(),r=function(t,e,n,r){return"x"===t?e:"r"===t?r:n},i=e.xAxisID=e_(n.xAxisID,rb(t,"x")),a=e.yAxisID=e_(n.yAxisID,rb(t,"y")),o=e.rAxisID=e_(n.rAxisID,rb(t,"r")),s=e.indexAxis,A=e.iAxisID=r(s,i,a,o),u=e.vAxisID=r(s,a,i,o);e.xScale=this.getScaleForId(i),e.yScale=this.getScaleForId(a),e.rScale=this.getScaleForId(o),e.iScale=this.getScaleForId(A),e.vScale=this.getScaleForId(u)}},{key:"getDataset",value:function(){return this.chart.data.datasets[this.index]}},{key:"getMeta",value:function(){return this.chart.getDatasetMeta(this.index)}},{key:"getScaleForId",value:function(t){return this.chart.scales[t]}},{key:"_getOtherScale",value:function(t){var e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}},{key:"reset",value:function(){this._update("reset")}},{key:"_destroy",value:function(){var t=this._cachedMeta;this._data&&$_(this._data,this),t._stacked&&ib(t)}},{key:"_dataCheck",value:function(){var t,e,n=this.getDataset(),r=n.data||(n.data=[]),i=this._data;if(Yy(r)){var a=this._cachedMeta;this._data=function(t,e){var n,r,i,a=e.iScale,o=e.vScale,s="x"===a.axis?"x":"y",A="x"===o.axis?"x":"y",u=Object.keys(t),l=new Array(u.length);for(n=0,r=u.length;n<r;++n)i=u[n],l[n]=hi(hi({},s,i),A,t[i]);return l}(r,a)}else if(i!==r){if(i){$_(i,this);var o=this._cachedMeta;ib(o),o._parsed=[]}r&&Object.isExtensible(r)&&(e=this,(t=r)._chartjs?t._chartjs.listeners.push(e):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),j_.forEach((function(e){var n="_onData"+p_(e),r=t[e];Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:function(){for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];var o=r.apply(this,i);return t._chartjs.listeners.forEach((function(t){"function"==typeof t[n]&&t[n].apply(t,i)})),o}})})))),this._syncList=[],this._data=r}}},{key:"addElements",value:function(){var t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}},{key:"buildOrUpdateElements",value:function(t){var e=this._cachedMeta,n=this.getDataset(),r=!1;this._dataCheck();var i=e._stacked;e._stacked=Jx(e.vScale,e),e.stack!==n.stack&&(r=!0,ib(e),e.stack=n.stack),this._resyncElements(t),(r||i!==e._stacked)&&nb(this,e._parsed)}},{key:"configure",value:function(){var t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}},{key:"parse",value:function(t,e){var n,r,i,a=this._cachedMeta,o=this._data,s=a.iScale,A=a._stacked,u=s.axis,l=0===t&&e===o.length||a._sorted,c=t>0&&a._parsed[t-1];if(!1===this._parsing)a._parsed=o,a._sorted=!0,i=o;else{i=Xy(o[t])?this.parseArrayData(a,o,t,e):Yy(o[t])?this.parseObjectData(a,o,t,e):this.parsePrimitiveData(a,o,t,e);for(n=0;n<e;++n)a._parsed[n+t]=r=i[n],l&&((null===r[u]||c&&r[u]<c[u])&&(l=!1),c=r);a._sorted=l}A&&nb(this,i)}},{key:"parsePrimitiveData",value:function(t,e,n,r){var i,a,o,s=t.iScale,A=t.vScale,u=s.axis,l=A.axis,c=s.getLabels(),h=s===A,f=new Array(r);for(i=0,a=r;i<a;++i)o=i+n,f[i]=hi(hi({},u,h||s.parse(c[o],o)),l,A.parse(e[o],o));return f}},{key:"parseArrayData",value:function(t,e,n,r){var i,a,o,s,A=t.xScale,u=t.yScale,l=new Array(r);for(i=0,a=r;i<a;++i)s=e[o=i+n],l[i]={x:A.parse(s[0],o),y:u.parse(s[1],o)};return l}},{key:"parseObjectData",value:function(t,e,n,r){var i,a,o,s,A=t.xScale,u=t.yScale,l=this._parsing,c=l.xAxisKey,h=void 0===c?"x":c,f=l.yAxisKey,d=void 0===f?"y":f,p=new Array(r);for(i=0,a=r;i<a;++i)s=e[o=i+n],p[i]={x:A.parse(d_(s,h),o),y:u.parse(d_(s,d),o)};return p}},{key:"getParsed",value:function(t){return this._cachedMeta._parsed[t]}},{key:"getDataElement",value:function(t){return this._cachedMeta.data[t]}},{key:"applyStack",value:function(t,e,n){var r=this.chart,i=this._cachedMeta,a=e[t.axis];return Yx({keys:Xx(r,!0),values:e._stacks[t.axis]._visualValues},a,i.index,{mode:n})}},{key:"updateRangeFromParsed",value:function(t,e,n,r){var i=n[e.axis],a=null===i?NaN:i,o=r&&n._stacks[e.axis];r&&o&&(r.values=o,a=Yx(r,i,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}},{key:"getMinMax",value:function(t,e){var n,r,i=this._cachedMeta,a=i._parsed,o=i._sorted&&t===i.iScale,s=a.length,A=this._getOtherScale(t),u=function(t,e,n){return t&&!e.hidden&&e._stacked&&{keys:Xx(n,!0),values:null}}(e,i,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},c=function(t){var e=t.getUserBounds(),n=e.min,r=e.max,i=e.minDefined,a=e.maxDefined;return{min:i?n:Number.NEGATIVE_INFINITY,max:a?r:Number.POSITIVE_INFINITY}}(A),h=c.min,f=c.max;function d(){var e=(r=a[n])[A.axis];return!Jy(r[t.axis])||h>e||f<e}for(n=0;n<s&&(d()||(this.updateRangeFromParsed(l,t,r,u),!o));++n);if(o)for(n=s-1;n>=0;--n)if(!d()){this.updateRangeFromParsed(l,t,r,u);break}return l}},{key:"getAllParsedValues",value:function(t){var e,n,r,i=this._cachedMeta._parsed,a=[];for(e=0,n=i.length;e<n;++e)Jy(r=i[e][t.axis])&&a.push(r);return a}},{key:"getMaxOverflow",value:function(){return!1}},{key:"getLabelAndValue",value:function(t){var e=this._cachedMeta,n=e.iScale,r=e.vScale,i=this.getParsed(t);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}},{key:"_update",value:function(t){var e=this._cachedMeta;this.update(t||"default"),e._clip=function(t){var e,n,r,i;return Yy(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:!1===t}}(e_(this.options.clip,function(t,e,n){if(!1===n)return!1;var r=qx(t,n),i=qx(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}},{key:"update",value:function(t){}},{key:"draw",value:function(){var t,e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],a=n.chartArea,o=[],s=this._drawStart||0,A=this._drawCount||i.length-s,u=this.options.drawActiveElementsOnTop;for(r.dataset&&r.dataset.draw(e,a,s,A),t=s;t<s+A;++t){var l=i[t];l.hidden||(l.active&&u?o.push(l):l.draw(e,a))}for(t=0;t<o.length;++t)o[t].draw(e,a)}},{key:"getStyle",value:function(t,e){var n=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}},{key:"getContext",value:function(t,e,n){var r,i=this.getDataset();if(t>=0&&t<this._cachedMeta.data.length){var a=this._cachedMeta.data[t];r=a.$context||(a.$context=function(t,e,n){return Gw(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}(this.getContext(),t,a)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=function(t,e){return Gw(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=n,r}},{key:"resolveDatasetElementOptions",value:function(t){return this._resolveElementOptions(this.datasetElementType.id,t)}},{key:"resolveDataElementOptions",value:function(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}},{key:"_resolveElementOptions",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",r=arguments.length>2?arguments[2]:void 0,i="active"===n,a=this._cachedDataOpts,o=t+"-"+n,s=a[o],A=this.enableOptionSharing&&v_(r);if(s)return ob(s,A);var u=this.chart.config,l=u.datasetElementScopeKeys(this._type,t),c=i?["".concat(t,"Hover"),"hover",t,""]:[t,""],h=u.getOptionScopes(this.getDataset(),l),f=Object.keys(yw.elements[t]),d=u.resolveNamedOptions(h,f,(function(){return e.getContext(r,i,n)}),c);return d.$shared&&(d.$shared=A,a[o]=Object.freeze(ob(d,A))),d}},{key:"_resolveAnimations",value:function(t,e,n){var r,i=this.chart,a=this._cachedDataOpts,o="animation-".concat(e),s=a[o];if(s)return s;if(!1!==i.options.animation){var A=this.chart.config,u=A.datasetAnimationScopeKeys(this._type,e),l=A.getOptionScopes(this.getDataset(),u);r=A.createResolver(l,this.getContext(t,n,e))}var c=new Zx(i,r&&r.animations);return r&&r._cacheable&&(a[o]=Object.freeze(c)),c}},{key:"getSharedOptions",value:function(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}},{key:"includeOptions",value:function(t,e){return!e||ab(t)||this.chart._animationsDisabled}},{key:"_getSharedOptions",value:function(t,e){var n=this.resolveDataElementOptions(t,e),r=this._sharedOptions,i=this.getSharedOptions(n),a=this.includeOptions(e,i)||i!==r;return this.updateSharedOptions(i,e,n),{sharedOptions:i,includeOptions:a}}},{key:"updateElement",value:function(t,e,n,r){ab(r)?Object.assign(t,n):this._resolveAnimations(e,r).update(t,n)}},{key:"updateSharedOptions",value:function(t,e,n){t&&!ab(e)&&this._resolveAnimations(void 0,e).update(t,n)}},{key:"_setStyle",value:function(t,e,n,r){t.active=r;var i=this.getStyle(e,r);this._resolveAnimations(e,n,r).update(t,{options:!r&&this.getSharedOptions(i)||i})}},{key:"removeHoverStyle",value:function(t,e,n){this._setStyle(t,n,"active",!1)}},{key:"setHoverStyle",value:function(t,e,n){this._setStyle(t,n,"active",!0)}},{key:"_removeDatasetHoverStyle",value:function(){var t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}},{key:"_setDatasetHoverStyle",value:function(){var t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}},{key:"_resyncElements",value:function(t){var e,n=this._data,r=this._cachedMeta.data,i=Vx(this._syncList);try{for(i.s();!(e=i.n()).done;){var a=gi(e.value,3),o=a[0],s=a[1],A=a[2];this[o](s,A)}}catch(t){i.e(t)}finally{i.f()}this._syncList=[];var u=r.length,l=n.length,c=Math.min(l,u);c&&this.parse(0,c),l>u?this._insertElements(u,l-u,t):l<u&&this._removeElements(l,u-l)}},{key:"_insertElements",value:function(t,e){var n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this._cachedMeta,a=i.data,o=t+e,s=function(t){for(t.length+=e,n=t.length-1;n>=o;n--)t[n]=t[n-e]};for(s(a),n=t;n<o;++n)a[n]=new this.dataElementType;this._parsing&&s(i._parsed),this.parse(t,e),r&&this.updateElements(a,t,e,"reset")}},{key:"updateElements",value:function(t,e,n,r){}},{key:"_removeElements",value:function(t,e){var n=this._cachedMeta;if(this._parsing){var r=n._parsed.splice(t,e);n._stacked&&ib(n,r)}n.data.splice(t,e)}},{key:"_sync",value:function(t){if(this._parsing)this._syncList.push(t);else{var e=gi(t,3),n=e[0],r=e[1],i=e[2];this[n](r,i)}this.chart._dataChanges.push([this.index].concat(Di(t)))}},{key:"_onDataPush",value:function(){var t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}},{key:"_onDataPop",value:function(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}},{key:"_onDataShift",value:function(){this._sync(["_removeElements",0,1])}},{key:"_onDataSplice",value:function(t,e){e&&this._sync(["_removeElements",t,e]);var n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}},{key:"_onDataUnshift",value:function(){this._sync(["_insertElements",0,arguments.length])}}])}();function Ab(t){var e,n,r,i,a=t.iScale,o=function(t,e){if(!t._cache.$bar){for(var n=t.getMatchingVisibleMetas(e),r=[],i=0,a=n.length;i<a;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=W_(r.sort((function(t,e){return t-e})))}return t._cache.$bar}(a,t.type),s=a._length,A=function(){32767!==r&&-32768!==r&&(v_(i)&&(s=Math.min(s,Math.abs(r-i)||s)),i=r)};for(e=0,n=o.length;e<n;++e)r=a.getPixelForValue(o[e]),A();for(i=void 0,e=0,n=a.ticks.length;e<n;++e)r=a.getPixelForTick(e),A();return s}function ub(t,e,n,r){return Xy(t)?function(t,e,n,r){var i=n.parse(t[0],r),a=n.parse(t[1],r),o=Math.min(i,a),s=Math.max(i,a),A=o,u=s;Math.abs(o)>Math.abs(s)&&(A=s,u=o),e[n.axis]=u,e._custom={barStart:A,barEnd:u,start:i,end:a,min:o,max:s}}(t,e,n,r):e[n.axis]=n.parse(t,r),e}function lb(t,e,n,r){var i,a,o,s,A=t.iScale,u=t.vScale,l=A.getLabels(),c=A===u,h=[];for(i=n,a=n+r;i<a;++i)s=e[i],(o={})[A.axis]=c||A.parse(l[i],i),h.push(ub(s,o,u,i));return h}function cb(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function hb(t,e,n,r){var i=e.borderSkipped,a={};if(i)if(!0!==i){var o=function(t){var e,n,r,i,a;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",a="start"):(i="start",a="end"),{start:n,end:r,reverse:e,top:i,bottom:a}}(t),s=o.start,A=o.end,u=o.reverse,l=o.top,c=o.bottom;"middle"===i&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=l:(n._bottom||0)===r?i=c:(a[fb(c,s,A,u)]=!0,i=l)),a[fb(i,s,A,u)]=!0,t.borderSkipped=a}else t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};else t.borderSkipped=a}function fb(t,e,n,r){var i,a,o;return r?(o=n,t=db(t=(i=t)===(a=e)?o:i===o?a:i,n,e)):t=db(t,e,n),t}function db(t,e,n){return"start"===t?e:"end"===t?n:t}function pb(t,e,n){var r=e.inflateAmount;t.inflateAmount="auto"===r?1===n?.33:0:r}hi(sb,"defaults",{}),hi(sb,"datasetElementType",null),hi(sb,"dataElementType",null);var vb=function(t){function e(){return oi(this,e),zx(this,e,arguments)}return ci(e,t),ai(e,[{key:"parsePrimitiveData",value:function(t,e,n,r){return lb(t,e,n,r)}},{key:"parseArrayData",value:function(t,e,n,r){return lb(t,e,n,r)}},{key:"parseObjectData",value:function(t,e,n,r){var i,a,o,s,A=t.iScale,u=t.vScale,l=this._parsing,c=l.xAxisKey,h=void 0===c?"x":c,f=l.yAxisKey,d=void 0===f?"y":f,p="x"===A.axis?h:d,v="x"===u.axis?h:d,g=[];for(i=n,a=n+r;i<a;++i)s=e[i],(o={})[A.axis]=A.parse(d_(s,p),i),g.push(ub(d_(s,v),o,u,i));return g}},{key:"updateRangeFromParsed",value:function(t,n,r,i){Li(ui(e.prototype),"updateRangeFromParsed",this).call(this,t,n,r,i);var a=r._custom;a&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,a.min),t.max=Math.max(t.max,a.max))}},{key:"getMaxOverflow",value:function(){return 0}},{key:"getLabelAndValue",value:function(t){var e=this._cachedMeta,n=e.iScale,r=e.vScale,i=this.getParsed(t),a=i._custom,o=cb(a)?"["+a.start+", "+a.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:o}}},{key:"initialize",value:function(){this.enableOptionSharing=!0,Li(ui(e.prototype),"initialize",this).call(this),this._cachedMeta.stack=this.getDataset().stack}},{key:"update",value:function(t){var e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}},{key:"updateElements",value:function(t,e,n,r){for(var i="reset"===r,a=this.index,o=this._cachedMeta.vScale,s=o.getBasePixel(),A=o.isHorizontal(),u=this._getRuler(),l=this._getSharedOptions(e,r),c=l.sharedOptions,h=l.includeOptions,f=e;f<e+n;f++){var d=this.getParsed(f),p=i||qy(d[o.axis])?{base:s,head:s}:this._calculateBarValuePixels(f),v=this._calculateBarIndexPixels(f,u),g=(d._stacks||{})[o.axis],m={horizontal:A,base:p.base,enableBorderRadius:!g||cb(d._custom)||a===g._top||a===g._bottom,x:A?p.head:v.center,y:A?v.center:p.head,height:A?v.size:Math.abs(p.size),width:A?Math.abs(p.size):v.size};h&&(m.options=c||this.resolveDataElementOptions(f,t[f].active?"active":r));var y=m.options||t[f].options;hb(m,y,g,a),pb(m,y,u.ratio),this.updateElement(t[f],f,m,r)}}},{key:"_getStacks",value:function(t,e){var n,r=this._cachedMeta.iScale,i=r.getMatchingVisibleMetas(this._type).filter((function(t){return t.controller.options.grouped})),a=r.options.stacked,o=[],s=function(t){var n=t.controller.getParsed(e),r=n&&n[t.vScale.axis];if(qy(r)||isNaN(r))return!0},A=Vx(i);try{for(A.s();!(n=A.n()).done;){var u=n.value;if((void 0===e||!s(u))&&((!1===a||-1===o.indexOf(u.stack)||void 0===a&&void 0===u.stack)&&o.push(u.stack),u.index===t))break}}catch(t){A.e(t)}finally{A.f()}return o.length||o.push(void 0),o}},{key:"_getStackCount",value:function(t){return this._getStacks(void 0,t).length}},{key:"_getStackIndex",value:function(t,e,n){var r=this._getStacks(t,n),i=void 0!==e?r.indexOf(e):-1;return-1===i?r.length-1:i}},{key:"_getRuler",value:function(){var t,e,n=this.options,r=this._cachedMeta,i=r.iScale,a=[];for(t=0,e=r.data.length;t<e;++t)a.push(i.getPixelForValue(this.getParsed(t)[i.axis],t));var o=n.barThickness;return{min:o||Ab(r),pixels:a,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:n.grouped,ratio:o?1:n.categoryPercentage*n.barPercentage}}},{key:"_calculateBarValuePixels",value:function(t){var e,n,r=this._cachedMeta,i=r.vScale,a=r._stacked,o=r.index,s=this.options,A=s.base,u=s.minBarLength,l=A||0,c=this.getParsed(t),h=c._custom,f=cb(h),d=c[i.axis],p=0,v=a?this.applyStack(i,c,a):d;v!==d&&(p=v-d,v=d),f&&(d=h.barStart,v=h.barEnd-h.barStart,0!==d&&E_(d)!==E_(h.barEnd)&&(p=0),p+=d);var g=qy(A)||f?p:A,m=i.getPixelForValue(g);if(n=(e=this.chart.getDataVisibility(t)?i.getPixelForValue(p+v):m)-m,Math.abs(n)<u){n=function(t,e,n){return 0!==t?E_(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}(n,i,l)*u,d===l&&(m-=n/2);var y=i.getPixelForDecimal(0),_=i.getPixelForDecimal(1),w=Math.min(y,_),x=Math.max(y,_);e=(m=Math.max(Math.min(m,x),w))+n,a&&!f&&(c._stacks[i.axis]._visualValues[o]=i.getValueForPixel(e)-i.getValueForPixel(m))}if(m===i.getPixelForValue(l)){var b=E_(n)*i.getLineWidthForValue(l)/2;m+=b,n-=b}return{size:n,base:m,head:e,center:e+n/2}}},{key:"_calculateBarIndexPixels",value:function(t,e){var n,r,i=e.scale,a=this.options,o=a.skipNull,s=e_(a.maxBarThickness,1/0);if(e.grouped){var A=o?this._getStackCount(t):e.stackCount,u="flex"===a.barThickness?function(t,e,n,r){var i=e.pixels,a=i[t],o=t>0?i[t-1]:null,s=t<i.length-1?i[t+1]:null,A=n.categoryPercentage;null===o&&(o=a-(null===s?e.end-e.start:s-a)),null===s&&(s=a+a-o);var u=a-(a-Math.min(o,s))/2*A;return{chunk:Math.abs(s-o)/2*A/r,ratio:n.barPercentage,start:u}}(t,e,a,A):function(t,e,n,r){var i,a,o=n.barThickness;return qy(o)?(i=e.min*n.categoryPercentage,a=n.barPercentage):(i=o*r,a=1),{chunk:i/r,ratio:a,start:e.pixels[t]-i/2}}(t,e,a,A),l=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0);n=u.start+u.chunk*l+u.chunk/2,r=Math.min(s,u.chunk*u.ratio)}else n=i.getPixelForValue(this.getParsed(t)[i.axis],t),r=Math.min(s,e.min*e.ratio);return{base:n-r/2,head:n+r/2,center:n,size:r}}},{key:"draw",value:function(){for(var t=this._cachedMeta,e=t.vScale,n=t.data,r=n.length,i=0;i<r;++i)null===this.getParsed(i)[e.axis]||n[i].hidden||n[i].draw(this._ctx)}}])}(sb);hi(vb,"id","bar"),hi(vb,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),hi(vb,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});var gb=function(t){function e(){return oi(this,e),zx(this,e,arguments)}return ci(e,t),ai(e,[{key:"initialize",value:function(){this.enableOptionSharing=!0,Li(ui(e.prototype),"initialize",this).call(this)}},{key:"parsePrimitiveData",value:function(t,n,r,i){for(var a=Li(ui(e.prototype),"parsePrimitiveData",this).call(this,t,n,r,i),o=0;o<a.length;o++)a[o]._custom=this.resolveDataElementOptions(o+r).radius;return a}},{key:"parseArrayData",value:function(t,n,r,i){for(var a=Li(ui(e.prototype),"parseArrayData",this).call(this,t,n,r,i),o=0;o<a.length;o++){var s=n[r+o];a[o]._custom=e_(s[2],this.resolveDataElementOptions(o+r).radius)}return a}},{key:"parseObjectData",value:function(t,n,r,i){for(var a=Li(ui(e.prototype),"parseObjectData",this).call(this,t,n,r,i),o=0;o<a.length;o++){var s=n[r+o];a[o]._custom=e_(s&&s.r&&+s.r,this.resolveDataElementOptions(o+r).radius)}return a}},{key:"getMaxOverflow",value:function(){for(var t=this._cachedMeta.data,e=0,n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}},{key:"getLabelAndValue",value:function(t){var e=this._cachedMeta,n=this.chart.data.labels||[],r=e.xScale,i=e.yScale,a=this.getParsed(t),o=r.getLabelForValue(a.x),s=i.getLabelForValue(a.y),A=a._custom;return{label:n[t]||"",value:"("+o+", "+s+(A?", "+A:"")+")"}}},{key:"update",value:function(t){var e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}},{key:"updateElements",value:function(t,e,n,r){for(var i="reset"===r,a=this._cachedMeta,o=a.iScale,s=a.vScale,A=this._getSharedOptions(e,r),u=A.sharedOptions,l=A.includeOptions,c=o.axis,h=s.axis,f=e;f<e+n;f++){var d=t[f],p=!i&&this.getParsed(f),v={},g=v[c]=i?o.getPixelForDecimal(.5):o.getPixelForValue(p[c]),m=v[h]=i?s.getBasePixel():s.getPixelForValue(p[h]);v.skip=isNaN(g)||isNaN(m),l&&(v.options=u||this.resolveDataElementOptions(f,d.active?"active":r),i&&(v.options.radius=0)),this.updateElement(d,f,v,r)}}},{key:"resolveDataElementOptions",value:function(t,n){var r=this.getParsed(t),i=Li(ui(e.prototype),"resolveDataElementOptions",this).call(this,t,n);i.$shared&&(i=Object.assign({},i,{$shared:!1}));var a=i.radius;return"active"!==n&&(i.radius=0),i.radius+=e_(r&&r._custom,a),i}}])}(sb);hi(gb,"id","bubble"),hi(gb,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),hi(gb,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});var mb=function(t){function e(t,n){var r;return oi(this,e),(r=zx(this,e,[t,n])).enableOptionSharing=!0,r.innerRadius=void 0,r.outerRadius=void 0,r.offsetX=void 0,r.offsetY=void 0,r}return ci(e,t),ai(e,[{key:"linkScales",value:function(){}},{key:"parse",value:function(t,e){var n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{var i,a,o=function(t){return+n[t]};if(Yy(n[t])){var s=this._parsing.key,A=void 0===s?"value":s;o=function(t){return+d_(n[t],A)}}for(i=t,a=t+e;i<a;++i)r._parsed[i]=o(i)}}},{key:"_getRotation",value:function(){return T_(this.options.rotation-90)}},{key:"_getCircumference",value:function(){return T_(this.options.circumference)}},{key:"_getRotationExtents",value:function(){for(var t=__,e=-__,n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){var r=this.chart.getDatasetMeta(n).controller,i=r._getRotation(),a=r._getCircumference();t=Math.min(t,i),e=Math.max(e,i+a)}return{rotation:t,circumference:e-t}}},{key:"update",value:function(t){var e,n,r=this.chart.chartArea,i=this._cachedMeta,a=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,s=Math.max((Math.min(r.width,r.height)-o)/2,0),A=Math.min((e=this.options.cutout,n=s,"string"==typeof e&&e.endsWith("%")?parseFloat(e)/100:+e/n),1),u=this._getRingWeight(this.index),l=this._getRotationExtents(),c=l.circumference,h=function(t,e,n){var r=1,i=1,a=0,o=0;if(e<__){var s=t,A=s+e,u=Math.cos(s),l=Math.sin(s),c=Math.cos(A),h=Math.sin(A),f=function(t,e,r){return z_(t,s,A,!0)?1:Math.max(e,e*n,r,r*n)},d=function(t,e,r){return z_(t,s,A,!0)?-1:Math.min(e,e*n,r,r*n)},p=f(0,u,c),v=f(B_,l,h),g=d(y_,u,c),m=d(y_+B_,l,h);r=(p-g)/2,i=(v-m)/2,a=-(p+g)/2,o=-(v+m)/2}return{ratioX:r,ratioY:i,offsetX:a,offsetY:o}}(l.rotation,c,A),f=h.ratioX,d=h.ratioY,p=h.offsetX,v=h.offsetY,g=(r.width-o)/f,m=(r.height-o)/d,y=Math.max(Math.min(g,m)/2,0),_=n_(this.options.radius,y),w=(_-Math.max(_*A,0))/this._getVisibleDatasetWeightTotal();this.offsetX=p*_,this.offsetY=v*_,i.total=this.calculateTotal(),this.outerRadius=_-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*u,0),this.updateElements(a,0,a.length,t)}},{key:"_circumference",value:function(t,e){var n=this.options,r=this._cachedMeta,i=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||null===r._parsed[t]||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*i/__)}},{key:"updateElements",value:function(t,e,n,r){var i,a="reset"===r,o=this.chart,s=o.chartArea,A=o.options.animation,u=(s.left+s.right)/2,l=(s.top+s.bottom)/2,c=a&&A.animateScale,h=c?0:this.innerRadius,f=c?0:this.outerRadius,d=this._getSharedOptions(e,r),p=d.sharedOptions,v=d.includeOptions,g=this._getRotation();for(i=0;i<e;++i)g+=this._circumference(i,a);for(i=e;i<e+n;++i){var m=this._circumference(i,a),y=t[i],_={x:u+this.offsetX,y:l+this.offsetY,startAngle:g,endAngle:g+m,circumference:m,outerRadius:f,innerRadius:h};v&&(_.options=p||this.resolveDataElementOptions(i,y.active?"active":r)),g+=m,this.updateElement(y,i,_,r)}}},{key:"calculateTotal",value:function(){var t,e=this._cachedMeta,n=e.data,r=0;for(t=0;t<n.length;t++){var i=e._parsed[t];null===i||isNaN(i)||!this.chart.getDataVisibility(t)||n[t].hidden||(r+=Math.abs(i))}return r}},{key:"calculateCircumference",value:function(t){var e=this._cachedMeta.total;return e>0&&!isNaN(t)?__*(Math.abs(t)/e):0}},{key:"getLabelAndValue",value:function(t){var e=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=cw(e._parsed[t],n.options.locale);return{label:r[t]||"",value:i}}},{key:"getMaxBorderWidth",value:function(t){var e,n,r,i,a,o=0,s=this.chart;if(!t)for(e=0,n=s.data.datasets.length;e<n;++e)if(s.isDatasetVisible(e)){t=(r=s.getDatasetMeta(e)).data,i=r.controller;break}if(!t)return 0;for(e=0,n=t.length;e<n;++e)"inner"!==(a=i.resolveDataElementOptions(e)).borderAlign&&(o=Math.max(o,a.borderWidth||0,a.hoverBorderWidth||0));return o}},{key:"getMaxOffset",value:function(t){for(var e=0,n=0,r=t.length;n<r;++n){var i=this.resolveDataElementOptions(n);e=Math.max(e,i.offset||0,i.hoverOffset||0)}return e}},{key:"_getRingWeightOffset",value:function(t){for(var e=0,n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}},{key:"_getRingWeight",value:function(t){return Math.max(e_(this.chart.data.datasets[t].weight,1),0)}},{key:"_getVisibleDatasetWeightTotal",value:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}])}(sb);hi(mb,"id","doughnut"),hi(mb,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),hi(mb,"descriptors",{_scriptable:function(t){return"spacing"!==t},_indexable:function(t){return"spacing"!==t&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}}),hi(mb,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels:function(t){var e=t.data;if(e.labels.length&&e.datasets.length){var n=t.legend.options.labels,r=n.pointStyle,i=n.color;return e.labels.map((function(e,n){var a=t.getDatasetMeta(0).controller.getStyle(n);return{text:e,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:i,lineWidth:a.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(n),index:n}}))}return[]}},onClick:function(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}}});var yb=function(t){function e(){return oi(this,e),zx(this,e,arguments)}return ci(e,t),ai(e,[{key:"initialize",value:function(){this.enableOptionSharing=!0,this.supportsDecimation=!0,Li(ui(e.prototype),"initialize",this).call(this)}},{key:"update",value:function(t){var e=this._cachedMeta,n=e.dataset,r=e.data,i=void 0===r?[]:r,a=e._dataset,o=this.chart._animationsDisabled,s=J_(e,i,o),A=s.start,u=s.count;this._drawStart=A,this._drawCount=u,tw(e)&&(A=0,u=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!a._decimated,n.points=i;var l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:l},t),this.updateElements(i,A,u,t)}},{key:"updateElements",value:function(t,e,n,r){for(var i="reset"===r,a=this._cachedMeta,o=a.iScale,s=a.vScale,A=a._stacked,u=a._dataset,l=this._getSharedOptions(e,r),c=l.sharedOptions,h=l.includeOptions,f=o.axis,d=s.axis,p=this.options,v=p.spanGaps,g=p.segment,m=S_(v)?v:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||i||"none"===r,_=e+n,w=t.length,x=e>0&&this.getParsed(e-1),b=0;b<w;++b){var B=t[b],k=y?B:{};if(b<e||b>=_)k.skip=!0;else{var C=this.getParsed(b),F=qy(C[d]),E=k[f]=o.getPixelForValue(C[f],b),I=k[d]=i||F?s.getBasePixel():s.getPixelForValue(A?this.applyStack(s,C,A):C[d],b);k.skip=isNaN(E)||isNaN(I)||F,k.stop=b>0&&Math.abs(C[f]-x[f])>m,g&&(k.parsed=C,k.raw=u.data[b]),h&&(k.options=c||this.resolveDataElementOptions(b,B.active?"active":r)),y||this.updateElement(B,b,k,r),x=C}}}},{key:"getMaxOverflow",value:function(){var t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,r=t.data||[];if(!r.length)return n;var i=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,a)/2}},{key:"draw",value:function(){var t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),Li(ui(e.prototype),"draw",this).call(this)}}])}(sb);hi(yb,"id","line"),hi(yb,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),hi(yb,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});var _b=function(t){function e(t,n){var r;return oi(this,e),(r=zx(this,e,[t,n])).innerRadius=void 0,r.outerRadius=void 0,r}return ci(e,t),ai(e,[{key:"getLabelAndValue",value:function(t){var e=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=cw(e._parsed[t].r,n.options.locale);return{label:r[t]||"",value:i}}},{key:"parseObjectData",value:function(t,e,n,r){return ax.bind(this)(t,e,n,r)}},{key:"update",value:function(t){var e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}},{key:"getMinMax",value:function(){var t=this,e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((function(e,r){var i=t.getParsed(r).r;!isNaN(i)&&t.chart.getDataVisibility(r)&&(i<n.min&&(n.min=i),i>n.max&&(n.max=i))})),n}},{key:"_updateRadius",value:function(){var t=this.chart,e=t.chartArea,n=t.options,r=Math.min(e.right-e.left,e.bottom-e.top),i=Math.max(r/2,0),a=(i-Math.max(n.cutoutPercentage?i/100*n.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=i-a*this.index,this.innerRadius=this.outerRadius-a}},{key:"updateElements",value:function(t,e,n,r){var i,a="reset"===r,o=this.chart,s=o.options.animation,A=this._cachedMeta.rScale,u=A.xCenter,l=A.yCenter,c=A.getIndexAngle(0)-.5*y_,h=c,f=360/this.countVisibleElements();for(i=0;i<e;++i)h+=this._computeAngle(i,r,f);for(i=e;i<e+n;i++){var d=t[i],p=h,v=h+this._computeAngle(i,r,f),g=o.getDataVisibility(i)?A.getDistanceFromCenterForValue(this.getParsed(i).r):0;h=v,a&&(s.animateScale&&(g=0),s.animateRotate&&(p=v=c));var m={x:u,y:l,innerRadius:0,outerRadius:g,startAngle:p,endAngle:v,options:this.resolveDataElementOptions(i,d.active?"active":r)};this.updateElement(d,i,m,r)}}},{key:"countVisibleElements",value:function(){var t=this,e=this._cachedMeta,n=0;return e.data.forEach((function(e,r){!isNaN(t.getParsed(r).r)&&t.chart.getDataVisibility(r)&&n++})),n}},{key:"_computeAngle",value:function(t,e,n){return this.chart.getDataVisibility(t)?T_(this.resolveDataElementOptions(t,e).angle||n):0}}])}(sb);hi(_b,"id","polarArea"),hi(_b,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),hi(_b,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels:function(t){var e=t.data;if(e.labels.length&&e.datasets.length){var n=t.legend.options.labels,r=n.pointStyle,i=n.color;return e.labels.map((function(e,n){var a=t.getDatasetMeta(0).controller.getStyle(n);return{text:e,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:i,lineWidth:a.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(n),index:n}}))}return[]}},onClick:function(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});var wb=function(t){function e(){return oi(this,e),zx(this,e,arguments)}return ci(e,t),ai(e)}(mb);hi(wb,"id","pie"),hi(wb,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});var xb=function(t){function e(){return oi(this,e),zx(this,e,arguments)}return ci(e,t),ai(e,[{key:"getLabelAndValue",value:function(t){var e=this._cachedMeta.vScale,n=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(n[e.axis])}}},{key:"parseObjectData",value:function(t,e,n,r){return ax.bind(this)(t,e,n,r)}},{key:"update",value:function(t){var e=this._cachedMeta,n=e.dataset,r=e.data||[],i=e.iScale.getLabels();if(n.points=r,"resize"!==t){var a=this.resolveDatasetElementOptions(t);this.options.showLine||(a.borderWidth=0);var o={_loop:!0,_fullLoop:i.length===r.length,options:a};this.updateElement(n,void 0,o,t)}this.updateElements(r,0,r.length,t)}},{key:"updateElements",value:function(t,e,n,r){for(var i=this._cachedMeta.rScale,a="reset"===r,o=e;o<e+n;o++){var s=t[o],A=this.resolveDataElementOptions(o,s.active?"active":r),u=i.getPointPositionForValue(o,this.getParsed(o).r),l=a?i.xCenter:u.x,c=a?i.yCenter:u.y,h={x:l,y:c,angle:u.angle,skip:isNaN(l)||isNaN(c),options:A};this.updateElement(s,o,h,r)}}}])}(sb);hi(xb,"id","radar"),hi(xb,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),hi(xb,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});var bb=function(t){function e(){return oi(this,e),zx(this,e,arguments)}return ci(e,t),ai(e,[{key:"getLabelAndValue",value:function(t){var e=this._cachedMeta,n=this.chart.data.labels||[],r=e.xScale,i=e.yScale,a=this.getParsed(t),o=r.getLabelForValue(a.x),s=i.getLabelForValue(a.y);return{label:n[t]||"",value:"("+o+", "+s+")"}}},{key:"update",value:function(t){var e=this._cachedMeta,n=e.data,r=void 0===n?[]:n,i=this.chart._animationsDisabled,a=J_(e,r,i),o=a.start,s=a.count;if(this._drawStart=o,this._drawCount=s,tw(e)&&(o=0,s=r.length),this.options.showLine){this.datasetElementType||this.addElements();var A=e.dataset,u=e._dataset;A._chart=this.chart,A._datasetIndex=this.index,A._decimated=!!u._decimated,A.points=r;var l=this.resolveDatasetElementOptions(t);l.segment=this.options.segment,this.updateElement(A,void 0,{animated:!i,options:l},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(r,o,s,t)}},{key:"addElements",value:function(){var t=this.options.showLine;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),Li(ui(e.prototype),"addElements",this).call(this)}},{key:"updateElements",value:function(t,e,n,r){for(var i="reset"===r,a=this._cachedMeta,o=a.iScale,s=a.vScale,A=a._stacked,u=a._dataset,l=this.resolveDataElementOptions(e,r),c=this.getSharedOptions(l),h=this.includeOptions(r,c),f=o.axis,d=s.axis,p=this.options,v=p.spanGaps,g=p.segment,m=S_(v)?v:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||i||"none"===r,_=e>0&&this.getParsed(e-1),w=e;w<e+n;++w){var x=t[w],b=this.getParsed(w),B=y?x:{},k=qy(b[d]),C=B[f]=o.getPixelForValue(b[f],w),F=B[d]=i||k?s.getBasePixel():s.getPixelForValue(A?this.applyStack(s,b,A):b[d],w);B.skip=isNaN(C)||isNaN(F)||k,B.stop=w>0&&Math.abs(b[f]-_[f])>m,g&&(B.parsed=b,B.raw=u.data[w]),h&&(B.options=c||this.resolveDataElementOptions(w,x.active?"active":r)),y||this.updateElement(x,w,B,r),_=b}this.updateSharedOptions(c,r,l)}},{key:"getMaxOverflow",value:function(){var t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){for(var n=0,r=e.length-1;r>=0;--r)n=Math.max(n,e[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}var i=t.dataset,a=i.options&&i.options.borderWidth||0;if(!e.length)return a;var o=e[0].size(this.resolveDataElementOptions(0)),s=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(a,o,s)/2}}])}(sb);hi(bb,"id","scatter"),hi(bb,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),hi(bb,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var Bb=Object.freeze({__proto__:null,BarController:vb,BubbleController:gb,DoughnutController:mb,LineController:yb,PieController:wb,PolarAreaController:_b,RadarController:xb,ScatterController:bb});function kb(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var Cb={_date:function(){function t(e){oi(this,t),hi(this,"options",void 0),this.options=e||{}}return ai(t,[{key:"init",value:function(){}},{key:"formats",value:function(){return kb()}},{key:"parse",value:function(){return kb()}},{key:"format",value:function(){return kb()}},{key:"add",value:function(){return kb()}},{key:"diff",value:function(){return kb()}},{key:"startOf",value:function(){return kb()}},{key:"endOf",value:function(){return kb()}}],[{key:"override",value:function(e){Object.assign(t.prototype,e)}}])}()};function Fb(t,e,n,r){var i=t.controller,a=t.data,o=t._sorted,s=i._cachedMeta.iScale;if(s&&e===s.axis&&"r"!==e&&o&&a.length){var A=s._reversePixels?G_:K_;if(!r)return A(a,e,n);if(i._sharedOptions){var u=a[0],l="function"==typeof u.getRange&&u.getRange(e);if(l){var c=A(a,e,n-l),h=A(a,e,n+l);return{lo:c.lo,hi:h.hi}}}}return{lo:0,hi:a.length-1}}function Eb(t,e,n,r,i){for(var a=t.getSortedVisibleDatasetMetas(),o=n[e],s=0,A=a.length;s<A;++s)for(var u=a[s],l=u.index,c=u.data,h=Fb(a[s],e,o,i),f=h.lo,d=h.hi,p=f;p<=d;++p){var v=c[p];v.skip||r(v,l,p)}}function Ib(t,e,n,r,i){var a=[];if(!i&&!t.isPointInArea(e))return a;return Eb(t,n,e,(function(n,o,s){(i||Cw(n,t.chartArea,0))&&n.inRange(e.x,e.y,r)&&a.push({element:n,datasetIndex:o,index:s})}),!0),a}function Ub(t,e,n,r,i,a){var o=[],s=function(t){var e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(t,r){var i=e?Math.abs(t.x-r.x):0,a=n?Math.abs(t.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(a,2))}}(n),A=Number.POSITIVE_INFINITY;return Eb(t,n,e,(function(n,u,l){var c=n.inRange(e.x,e.y,i);if(!r||c){var h=n.getCenterPoint(i);if(!!a||t.isPointInArea(h)||c){var f=s(e,h);f<A?(o=[{element:n,datasetIndex:u,index:l}],A=f):f===A&&o.push({element:n,datasetIndex:u,index:l})}}})),o}function Sb(t,e,n,r,i,a){return a||t.isPointInArea(e)?"r"!==n||r?Ub(t,e,n,r,i,a):function(t,e,n,r){var i=[];return Eb(t,n,e,(function(t,n,a){var o=t.getProps(["startAngle","endAngle"],r),s=o.startAngle,A=o.endAngle;z_(L_(t,{x:e.x,y:e.y}).angle,s,A)&&i.push({element:t,datasetIndex:n,index:a})})),i}(t,e,n,i):[]}function Qb(t,e,n,r,i){var a=[],o="x"===n?"inXRange":"inYRange",s=!1;return Eb(t,n,e,(function(t,r,A){t[o](e[n],i)&&(a.push({element:t,datasetIndex:r,index:A}),s=s||t.inRange(e.x,e.y,i))})),r&&!s?[]:a}var Tb={evaluateInteractionItems:Eb,modes:{index:function(t,e,n,r){var i=yx(e,t),a=n.axis||"x",o=n.includeInvisible||!1,s=n.intersect?Ib(t,i,a,r,o):Sb(t,i,a,!1,r,o),A=[];return s.length?(t.getSortedVisibleDatasetMetas().forEach((function(t){var e=s[0].index,n=t.data[e];n&&!n.skip&&A.push({element:n,datasetIndex:t.index,index:e})})),A):[]},dataset:function(t,e,n,r){var i=yx(e,t),a=n.axis||"xy",o=n.includeInvisible||!1,s=n.intersect?Ib(t,i,a,r,o):Sb(t,i,a,!1,r,o);if(s.length>0){var A=s[0].datasetIndex,u=t.getDatasetMeta(A).data;s=[];for(var l=0;l<u.length;++l)s.push({element:u[l],datasetIndex:A,index:l})}return s},point:function(t,e,n,r){return Ib(t,yx(e,t),n.axis||"xy",r,n.includeInvisible||!1)},nearest:function(t,e,n,r){var i=yx(e,t),a=n.axis||"xy",o=n.includeInvisible||!1;return Sb(t,i,a,n.intersect,r,o)},x:function(t,e,n,r){return Qb(t,yx(e,t),"x",n.intersect,r)},y:function(t,e,n,r){return Qb(t,yx(e,t),"y",n.intersect,r)}}},Mb=["left","top","right","bottom"];function Db(t,e){return t.filter((function(t){return t.pos===e}))}function Lb(t,e){return t.filter((function(t){return-1===Mb.indexOf(t.pos)&&t.box.axis===e}))}function Pb(t,e){return t.sort((function(t,n){var r=e?n:t,i=e?t:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight}))}function Ob(t,e){var n,r,i,a=function(t){var e,n={},r=Vx(t);try{for(r.s();!(e=r.n()).done;){var i=e.value,a=i.stack,o=i.pos,s=i.stackWeight;if(a&&Mb.includes(o)){var A=n[a]||(n[a]={count:0,placed:0,weight:0,size:0});A.count++,A.weight+=s}}}catch(t){r.e(t)}finally{r.f()}return n}(t),o=e.vBoxMaxWidth,s=e.hBoxMaxHeight;for(n=0,r=t.length;n<r;++n){var A=(i=t[n]).box.fullSize,u=a[i.stack],l=u&&i.stackWeight/u.weight;i.horizontal?(i.width=l?l*o:A&&e.availableWidth,i.height=s):(i.width=o,i.height=l?l*s:A&&e.availableHeight)}return a}function Rb(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function zb(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Hb(t,e,n,r){var i=n.pos,a=n.box,o=t.maxPadding;if(!Yy(i)){n.size&&(t[i]-=n.size);var s=r[n.stack]||{size:0,count:1};s.size=Math.max(s.size,n.horizontal?a.height:a.width),n.size=s.size/s.count,t[i]+=n.size}a.getPadding&&zb(o,a.getPadding());var A=Math.max(0,e.outerWidth-Rb(o,t,"left","right")),u=Math.max(0,e.outerHeight-Rb(o,t,"top","bottom")),l=A!==t.w,c=u!==t.h;return t.w=A,t.h=u,n.horizontal?{same:l,other:c}:{same:c,other:l}}function Vb(t,e){var n=e.maxPadding;function r(t){var r={left:0,top:0,right:0,bottom:0};return t.forEach((function(t){r[t]=Math.max(e[t],n[t])})),r}return r(t?["left","right"]:["top","bottom"])}function Nb(t,e,n,r){var i,a,o,s,A,u,l=[];for(i=0,a=t.length,A=0;i<a;++i){(s=(o=t[i]).box).update(o.width||e.w,o.height||e.h,Vb(o.horizontal,e));var c=Hb(e,n,o,r),h=c.same,f=c.other;A|=h&&l.length,u=u||f,s.fullSize||l.push(o)}return A&&Nb(l,e,n,r)||u}function Kb(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function Gb(t,e,n,r){var i,a=n.padding,o=e.x,s=e.y,A=Vx(t);try{for(A.s();!(i=A.n()).done;){var u=i.value,l=u.box,c=r[u.stack]||{count:1,placed:0,weight:1},h=u.stackWeight/c.weight||1;if(u.horizontal){var f=e.w*h,d=c.size||l.height;v_(c.start)&&(s=c.start),l.fullSize?Kb(l,a.left,s,n.outerWidth-a.right-a.left,d):Kb(l,e.left+c.placed,s,f,d),c.start=s,c.placed+=f,s=l.bottom}else{var p=e.h*h,v=c.size||l.width;v_(c.start)&&(o=c.start),l.fullSize?Kb(l,o,a.top,v,n.outerHeight-a.bottom-a.top):Kb(l,o,e.top+c.placed,v,p),c.start=o,c.placed+=p,o=l.right}}}catch(t){A.e(t)}finally{A.f()}e.x=o,e.y=s}var jb=function(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw:function(t){e.draw(t)}}]},t.boxes.push(e)},$b=function(t,e){var n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},Wb=function(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},Zb=function(t,e,n,r){if(t){var i=Vw(t.options.layout.padding),a=Math.max(e-i.width,0),o=Math.max(n-i.height,0),s=function(t){var e=function(t){var e,n,r,i,a,o,s=[];for(e=0,n=(t||[]).length;e<n;++e){var A=r=t[e];i=A.position;var u=A.options;a=u.stack;var l=u.stackWeight;o=void 0===l?1:l,s.push({index:e,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:a&&i+a,stackWeight:o})}return s}(t),n=Pb(e.filter((function(t){return t.box.fullSize})),!0),r=Pb(Db(e,"left"),!0),i=Pb(Db(e,"right")),a=Pb(Db(e,"top"),!0),o=Pb(Db(e,"bottom")),s=Lb(e,"x"),A=Lb(e,"y");return{fullSize:n,leftAndTop:r.concat(a),rightAndBottom:i.concat(A).concat(o).concat(s),chartArea:Db(e,"chartArea"),vertical:r.concat(i).concat(A),horizontal:a.concat(o).concat(s)}}(t.boxes),A=s.vertical,u=s.horizontal;i_(t.boxes,(function(t){"function"==typeof t.beforeLayout&&t.beforeLayout()}));var l=A.reduce((function(t,e){return e.box.options&&!1===e.box.options.display?t:t+1}),0)||1,c=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:a,availableHeight:o,vBoxMaxWidth:a/2/l,hBoxMaxHeight:o/2}),h=Object.assign({},i);zb(h,Vw(r));var f=Object.assign({maxPadding:h,w:a,h:o,x:i.left,y:i.top},i),d=Ob(A.concat(u),c);Nb(s.fullSize,f,c,d),Nb(A,f,c,d),Nb(u,f,c,d)&&Nb(A,f,c,d),function(t){var e=t.maxPadding;function n(n){var r=Math.max(e[n]-t[n],0);return t[n]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}(f),Gb(s.leftAndTop,f,c,d),f.x+=f.w,f.y+=f.h,Gb(s.rightAndBottom,f,c,d),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},i_(s.chartArea,(function(e){var n=e.box;Object.assign(n,t.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})}))}},qb=function(){return ai((function t(){oi(this,t)}),[{key:"acquireContext",value:function(t,e){}},{key:"releaseContext",value:function(t){return!1}},{key:"addEventListener",value:function(t,e,n){}},{key:"removeEventListener",value:function(t,e,n){}},{key:"getDevicePixelRatio",value:function(){return 1}},{key:"getMaximumSize",value:function(t,e,n,r){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):n)}}},{key:"isAttached",value:function(t){return!0}},{key:"updateConfig",value:function(t){}}])}(),Xb=function(t){function e(){return oi(this,e),zx(this,e,arguments)}return ci(e,t),ai(e,[{key:"acquireContext",value:function(t){return t&&t.getContext&&t.getContext("2d")||null}},{key:"updateConfig",value:function(t){t.options.animation=!1}}])}(qb),Yb="$chartjs",Jb={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},tB=function(t){return null===t||""===t};var eB=!!bx&&{passive:!0};function nB(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,eB)}function rB(t,e){var n,r=Vx(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i===e||i.contains(e))return!0}}catch(t){r.e(t)}finally{r.f()}}function iB(t,e,n){var r=t.canvas,i=new MutationObserver((function(t){var e,i=!1,a=Vx(t);try{for(a.s();!(e=a.n()).done;){var o=e.value;i=(i=i||rB(o.addedNodes,r))&&!rB(o.removedNodes,r)}}catch(t){a.e(t)}finally{a.f()}i&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}function aB(t,e,n){var r=t.canvas,i=new MutationObserver((function(t){var e,i=!1,a=Vx(t);try{for(a.s();!(e=a.n()).done;){var o=e.value;i=(i=i||rB(o.removedNodes,r))&&!rB(o.addedNodes,r)}}catch(t){a.e(t)}finally{a.f()}i&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}var oB=new Map,sB=0;function AB(){var t=window.devicePixelRatio;t!==sB&&(sB=t,oB.forEach((function(e,n){n.currentDevicePixelRatio!==t&&e()})))}function uB(t,e,n){var r=t.canvas,i=r&&fx(r);if(i){var a=q_((function(t,e){var r=i.clientWidth;n(t,e),r<i.clientWidth&&n()}),window),o=new ResizeObserver((function(t){var e=t[0],n=e.contentRect.width,r=e.contentRect.height;0===n&&0===r||a(n,r)}));return o.observe(i),function(t,e){oB.size||window.addEventListener("resize",AB),oB.set(t,e)}(t,a),o}}function lB(t,e,n){n&&n.disconnect(),"resize"===e&&function(t){oB.delete(t),oB.size||window.removeEventListener("resize",AB)}(t)}function cB(t,e,n){var r=t.canvas,i=q_((function(e){null!==t.ctx&&n(function(t,e){var n=Jb[t.type]||t.type,r=yx(t,e),i=r.x,a=r.y;return{type:n,chart:e,native:t,x:void 0!==i?i:null,y:void 0!==a?a:null}}(e,t))}),t);return function(t,e,n){t&&t.addEventListener(e,n,eB)}(r,e,i),i}var hB=function(t){function e(){return oi(this,e),zx(this,e,arguments)}return ci(e,t),ai(e,[{key:"acquireContext",value:function(t,e){var n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(function(t,e){var n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[Yb]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",tB(i)){var a=Bx(t,"width");void 0!==a&&(t.width=a)}if(tB(r))if(""===t.style.height)t.height=t.width/(e||2);else{var o=Bx(t,"height");void 0!==o&&(t.height=o)}}(t,e),n):null}},{key:"releaseContext",value:function(t){var e=t.canvas;if(!e[Yb])return!1;var n=e[Yb].initial;["height","width"].forEach((function(t){var r=n[t];qy(r)?e.removeAttribute(t):e.setAttribute(t,r)}));var r=n.style||{};return Object.keys(r).forEach((function(t){e.style[t]=r[t]})),e.width=e.width,delete e[Yb],!0}},{key:"addEventListener",value:function(t,e,n){this.removeEventListener(t,e);var r=t.$proxies||(t.$proxies={}),i={attach:iB,detach:aB,resize:uB}[e]||cB;r[e]=i(t,e,n)}},{key:"removeEventListener",value:function(t,e){var n=t.$proxies||(t.$proxies={}),r=n[e];r&&(({attach:lB,detach:lB,resize:lB}[e]||nB)(t,e,r),n[e]=void 0)}},{key:"getDevicePixelRatio",value:function(){return window.devicePixelRatio}},{key:"getMaximumSize",value:function(t,e,n,r){return wx(t,e,n,r)}},{key:"isAttached",value:function(t){var e=t&&fx(t);return!(!e||!e.isConnected)}}])}(qb);var fB=function(){return ai((function t(){oi(this,t),hi(this,"x",void 0),hi(this,"y",void 0),hi(this,"active",!1),hi(this,"options",void 0),hi(this,"$animations",void 0)}),[{key:"tooltipPosition",value:function(t){var e=this.getProps(["x","y"],t);return{x:e.x,y:e.y}}},{key:"hasValue",value:function(){return S_(this.x)&&S_(this.y)}},{key:"getProps",value:function(t,e){var n=this,r=this.$animations;if(!e||!r)return this;var i={};return t.forEach((function(t){i[t]=r[t]&&r[t].active()?r[t]._to:n[t]})),i}}])}();function dB(t,e){var n=t.options.ticks,r=function(t){var e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}(t),i=Math.min(n.maxTicksLimit||r,r),a=n.major.enabled?function(t){var e,n,r=[];for(e=0,n=t.length;e<n;e++)t[e].major&&r.push(e);return r}(e):[],o=a.length,s=a[0],A=a[o-1],u=[];if(o>i)return function(t,e,n,r){var i,a=0,o=n[0];for(r=Math.ceil(r),i=0;i<t.length;i++)i===o&&(e.push(t[i]),o=n[++a*r])}(e,u,a,o/i),u;var l=function(t,e,n){var r=function(t){var e,n,r=t.length;if(r<2)return!1;for(n=t[0],e=1;e<r;++e)if(t[e]-t[e-1]!==n)return!1;return n}(t),i=e.length/n;if(!r)return Math.max(i,1);for(var a=function(t){var e,n=[],r=Math.sqrt(t);for(e=1;e<r;e++)t%e==0&&(n.push(e),n.push(t/e));return r===(0|r)&&n.push(r),n.sort((function(t,e){return t-e})).pop(),n}(r),o=0,s=a.length-1;o<s;o++){var A=a[o];if(A>i)return A}return Math.max(i,1)}(a,e,i);if(o>0){var c,h,f=o>1?Math.round((A-s)/(o-1)):null;for(pB(e,u,l,qy(f)?0:s-f,s),c=0,h=o-1;c<h;c++)pB(e,u,l,a[c],a[c+1]);return pB(e,u,l,A,qy(f)?e.length:A+f),u}return pB(e,u,l),u}function pB(t,e,n,r,i){var a,o,s,A=e_(r,0),u=Math.min(e_(i,t.length),t.length),l=0;for(n=Math.ceil(n),i&&(n=(a=i-r)/Math.floor(a/n)),s=A;s<0;)l++,s=Math.round(A+l*n);for(o=Math.max(A,0);o<u;o++)o===s&&(e.push(t[o]),l++,s=Math.round(A+l*n))}hi(fB,"defaults",{}),hi(fB,"defaultRoutes",void 0);var vB=function(t,e,n){return"top"===e||"left"===e?t[e]+n:t[e]-n},gB=function(t,e){return Math.min(e||t,t)};function mB(t,e){for(var n=[],r=t.length/e,i=t.length,a=0;a<i;a+=r)n.push(t[Math.floor(a)]);return n}function yB(t,e,n){var r,i=t.ticks.length,a=Math.min(e,i-1),o=t._startPixel,s=t._endPixel,A=1e-6,u=t.getPixelForTick(a);if(!(n&&(r=1===i?Math.max(u-o,s-u):0===e?(t.getPixelForTick(1)-u)/2:(u-t.getPixelForTick(a-1))/2,(u+=a<e?r:-r)<o-A||u>s+A)))return u}function _B(t){return t.drawTicks?t.tickLength:0}function wB(t,e){if(!t.display)return 0;var n=Nw(t.font,e),r=Vw(t.padding);return(Xy(t.text)?t.text.length:1)*n.lineHeight+r.height}function xB(t,e,n){var r=X_(t);return(n&&"right"!==e||!n&&"right"===e)&&(r=function(t){return"left"===t?"right":"right"===t?"left":t}(r)),r}var bB=function(t){function e(t){var n;return oi(this,e),(n=zx(this,e)).id=t.id,n.type=t.type,n.options=void 0,n.ctx=t.ctx,n.chart=t.chart,n.top=void 0,n.bottom=void 0,n.left=void 0,n.right=void 0,n.width=void 0,n.height=void 0,n._margins={left:0,right:0,top:0,bottom:0},n.maxWidth=void 0,n.maxHeight=void 0,n.paddingTop=void 0,n.paddingBottom=void 0,n.paddingLeft=void 0,n.paddingRight=void 0,n.axis=void 0,n.labelRotation=void 0,n.min=void 0,n.max=void 0,n._range=void 0,n.ticks=[],n._gridLineItems=null,n._labelItems=null,n._labelSizes=null,n._length=0,n._maxLength=0,n._longestTextCache={},n._startPixel=void 0,n._endPixel=void 0,n._reversePixels=!1,n._userMax=void 0,n._userMin=void 0,n._suggestedMax=void 0,n._suggestedMin=void 0,n._ticksLength=0,n._borderValue=0,n._cache={},n._dataLimitsCached=!1,n.$context=void 0,n}return ci(e,t),ai(e,[{key:"init",value:function(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}},{key:"parse",value:function(t,e){return t}},{key:"getUserBounds",value:function(){var t=this._userMin,e=this._userMax,n=this._suggestedMin,r=this._suggestedMax;return t=t_(t,Number.POSITIVE_INFINITY),e=t_(e,Number.NEGATIVE_INFINITY),n=t_(n,Number.POSITIVE_INFINITY),r=t_(r,Number.NEGATIVE_INFINITY),{min:t_(t,n),max:t_(e,r),minDefined:Jy(t),maxDefined:Jy(e)}}},{key:"getMinMax",value:function(t){var e,n=this.getUserBounds(),r=n.min,i=n.max,a=n.minDefined,o=n.maxDefined;if(a&&o)return{min:r,max:i};for(var s=this.getMatchingVisibleMetas(),A=0,u=s.length;A<u;++A)e=s[A].controller.getMinMax(this,t),a||(r=Math.min(r,e.min)),o||(i=Math.max(i,e.max));return{min:t_(r=o&&r>i?i:r,t_(i=a&&r>i?r:i,r)),max:t_(i,t_(r,i))}}},{key:"getPadding",value:function(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}},{key:"getTicks",value:function(){return this.ticks}},{key:"getLabels",value:function(){var t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}},{key:"getLabelItems",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(t))}},{key:"beforeLayout",value:function(){this._cache={},this._dataLimitsCached=!1}},{key:"beforeUpdate",value:function(){r_(this.options.beforeUpdate,[this])}},{key:"update",value:function(t,e,n){var r=this.options,i=r.beginAtZero,a=r.grace,o=r.ticks,s=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(t,e,n){var r=t.min,i=t.max,a=n_(e,(i-r)/2),o=function(t,e){return n&&0===t?0:t+e};return{min:o(r,-Math.abs(a)),max:o(i,a)}}(this,a,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();var A=s<this.ticks.length;this._convertTicksToLabels(A?mB(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=dB(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),A&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}},{key:"configure",value:function(){var t,e,n=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,n=!n),this._startPixel=t,this._endPixel=e,this._reversePixels=n,this._length=e-t,this._alignToPixels=this.options.alignToPixels}},{key:"afterUpdate",value:function(){r_(this.options.afterUpdate,[this])}},{key:"beforeSetDimensions",value:function(){r_(this.options.beforeSetDimensions,[this])}},{key:"setDimensions",value:function(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}},{key:"afterSetDimensions",value:function(){r_(this.options.afterSetDimensions,[this])}},{key:"_callHooks",value:function(t){this.chart.notifyPlugins(t,this.getContext()),r_(this.options[t],[this])}},{key:"beforeDataLimits",value:function(){this._callHooks("beforeDataLimits")}},{key:"determineDataLimits",value:function(){}},{key:"afterDataLimits",value:function(){this._callHooks("afterDataLimits")}},{key:"beforeBuildTicks",value:function(){this._callHooks("beforeBuildTicks")}},{key:"buildTicks",value:function(){return[]}},{key:"afterBuildTicks",value:function(){this._callHooks("afterBuildTicks")}},{key:"beforeTickToLabelConversion",value:function(){r_(this.options.beforeTickToLabelConversion,[this])}},{key:"generateTickLabels",value:function(t){var e,n,r,i=this.options.ticks;for(e=0,n=t.length;e<n;e++)(r=t[e]).label=r_(i.callback,[r.value,e,t],this)}},{key:"afterTickToLabelConversion",value:function(){r_(this.options.afterTickToLabelConversion,[this])}},{key:"beforeCalculateLabelRotation",value:function(){r_(this.options.beforeCalculateLabelRotation,[this])}},{key:"calculateLabelRotation",value:function(){var t,e,n,r=this.options,i=r.ticks,a=gB(this.ticks.length,r.ticks.maxTicksLimit),o=i.minRotation||0,s=i.maxRotation,A=o;if(!this._isVisible()||!i.display||o>=s||a<=1||!this.isHorizontal())this.labelRotation=o;else{var u=this._getLabelSizes(),l=u.widest.width,c=u.highest.height,h=H_(this.chart.width-l,0,this.maxWidth);l+6>(t=r.offset?this.maxWidth/a:h/(a-1))&&(t=h/(a-(r.offset?.5:1)),e=this.maxHeight-_B(r.grid)-i.padding-wB(r.title,this.chart.options.font),n=Math.sqrt(l*l+c*c),A=M_(Math.min(Math.asin(H_((u.highest.height+6)/t,-1,1)),Math.asin(H_(e/n,-1,1))-Math.asin(H_(c/n,-1,1)))),A=Math.max(o,Math.min(s,A))),this.labelRotation=A}}},{key:"afterCalculateLabelRotation",value:function(){r_(this.options.afterCalculateLabelRotation,[this])}},{key:"afterAutoSkip",value:function(){}},{key:"beforeFit",value:function(){r_(this.options.beforeFit,[this])}},{key:"fit",value:function(){var t={width:0,height:0},e=this.chart,n=this.options,r=n.ticks,i=n.title,a=n.grid,o=this._isVisible(),s=this.isHorizontal();if(o){var A=wB(i,e.options.font);if(s?(t.width=this.maxWidth,t.height=_B(a)+A):(t.height=this.maxHeight,t.width=_B(a)+A),r.display&&this.ticks.length){var u=this._getLabelSizes(),l=u.first,c=u.last,h=u.widest,f=u.highest,d=2*r.padding,p=T_(this.labelRotation),v=Math.cos(p),g=Math.sin(p);if(s){var m=r.mirror?0:g*h.width+v*f.height;t.height=Math.min(this.maxHeight,t.height+m+d)}else{var y=r.mirror?0:v*h.width+g*f.height;t.width=Math.min(this.maxWidth,t.width+y+d)}this._calculatePadding(l,c,g,v)}}this._handleMargins(),s?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}},{key:"_calculatePadding",value:function(t,e,n,r){var i=this.options,a=i.ticks,o=a.align,s=a.padding,A=i.position,u=0!==this.labelRotation,l="top"!==A&&"x"===this.axis;if(this.isHorizontal()){var c=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1),f=0,d=0;u?l?(f=r*t.width,d=n*e.height):(f=n*t.height,d=r*e.width):"start"===o?d=e.width:"end"===o?f=t.width:"inner"!==o&&(f=t.width/2,d=e.width/2),this.paddingLeft=Math.max((f-c+s)*this.width/(this.width-c),0),this.paddingRight=Math.max((d-h+s)*this.width/(this.width-h),0)}else{var p=e.height/2,v=t.height/2;"start"===o?(p=0,v=t.height):"end"===o&&(p=e.height,v=0),this.paddingTop=p+s,this.paddingBottom=v+s}}},{key:"_handleMargins",value:function(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}},{key:"afterFit",value:function(){r_(this.options.afterFit,[this])}},{key:"isHorizontal",value:function(){var t=this.options,e=t.axis,n=t.position;return"top"===n||"bottom"===n||"x"===e}},{key:"isFullSize",value:function(){return this.options.fullSize}},{key:"_convertTicksToLabels",value:function(t){var e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)qy(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}},{key:"_getLabelSizes",value:function(){var t=this._labelSizes;if(!t){var e=this.options.ticks.sampleSize,n=this.ticks;e<n.length&&(n=mB(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}},{key:"_computeLabelSizes",value:function(t,e,n){var r,i,a,o,s,A,u,l,c,h,f,d=this.ctx,p=this._longestTextCache,v=[],g=[],m=Math.floor(e/gB(e,n)),y=0,_=0;for(r=0;r<e;r+=m){if(o=t[r].label,s=this._resolveTickFontOptions(r),d.font=A=s.string,u=p[A]=p[A]||{data:{},gc:[]},l=s.lineHeight,c=h=0,qy(o)||Xy(o)){if(Xy(o))for(i=0,a=o.length;i<a;++i)qy(f=o[i])||Xy(f)||(c=_w(d,u.data,u.gc,c,f),h+=l)}else c=_w(d,u.data,u.gc,c,o),h=l;v.push(c),g.push(h),y=Math.max(c,y),_=Math.max(h,_)}!function(t,e){i_(t,(function(t){var n,r=t.gc,i=r.length/2;if(i>e){for(n=0;n<i;++n)delete t.data[r[n]];r.splice(0,i)}}))}(p,e);var w=v.indexOf(y),x=g.indexOf(_),b=function(t){return{width:v[t]||0,height:g[t]||0}};return{first:b(0),last:b(e-1),widest:b(w),highest:b(x),widths:v,heights:g}}},{key:"getLabelForValue",value:function(t){return t}},{key:"getPixelForValue",value:function(t,e){return NaN}},{key:"getValueForPixel",value:function(t){}},{key:"getPixelForTick",value:function(t){var e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}},{key:"getPixelForDecimal",value:function(t){this._reversePixels&&(t=1-t);var e=this._startPixel+t*this._length;return H_(this._alignToPixels?xw(this.chart,e,0):e,-32768,32767)}},{key:"getDecimalForPixel",value:function(t){var e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}},{key:"getBasePixel",value:function(){return this.getPixelForValue(this.getBaseValue())}},{key:"getBaseValue",value:function(){var t=this.min,e=this.max;return t<0&&e<0?e:t>0&&e>0?t:0}},{key:"getContext",value:function(t){var e=this.ticks||[];if(t>=0&&t<e.length){var n=e[t];return n.$context||(n.$context=function(t,e,n){return Gw(t,{tick:n,index:e,type:"tick"})}(this.getContext(),t,n))}return this.$context||(this.$context=Gw(this.chart.getContext(),{scale:this,type:"scale"}))}},{key:"_tickSize",value:function(){var t=this.options.ticks,e=T_(this.labelRotation),n=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),i=this._getLabelSizes(),a=t.autoSkipPadding||0,o=i?i.widest.width+a:0,s=i?i.highest.height+a:0;return this.isHorizontal()?s*n>o*r?o/n:s/r:s*r<o*n?s/n:o/r}},{key:"_isVisible",value:function(){var t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}},{key:"_computeGridLineItems",value:function(t){var e,n,r,i,a,o,s,A,u,l,c,h,f=this.axis,d=this.chart,p=this.options,v=p.grid,g=p.position,m=p.border,y=v.offset,_=this.isHorizontal(),w=this.ticks.length+(y?1:0),x=_B(v),b=[],B=m.setContext(this.getContext()),k=B.display?B.width:0,C=k/2,F=function(t){return xw(d,t,k)};if("top"===g)e=F(this.bottom),o=this.bottom-x,A=e-C,l=F(t.top)+C,h=t.bottom;else if("bottom"===g)e=F(this.top),l=t.top,h=F(t.bottom)-C,o=e+C,A=this.top+x;else if("left"===g)e=F(this.right),a=this.right-x,s=e-C,u=F(t.left)+C,c=t.right;else if("right"===g)e=F(this.left),u=t.left,c=F(t.right)-C,a=e+C,s=this.left+x;else if("x"===f){if("center"===g)e=F((t.top+t.bottom)/2+.5);else if(Yy(g)){var E=Object.keys(g)[0],I=g[E];e=F(this.chart.scales[E].getPixelForValue(I))}l=t.top,h=t.bottom,A=(o=e+C)+x}else if("y"===f){if("center"===g)e=F((t.left+t.right)/2);else if(Yy(g)){var U=Object.keys(g)[0],S=g[U];e=F(this.chart.scales[U].getPixelForValue(S))}s=(a=e-C)-x,u=t.left,c=t.right}var Q=e_(p.ticks.maxTicksLimit,w),T=Math.max(1,Math.ceil(w/Q));for(n=0;n<w;n+=T){var M=this.getContext(n),D=v.setContext(M),L=m.setContext(M),P=D.lineWidth,O=D.color,R=L.dash||[],z=L.dashOffset,H=D.tickWidth,V=D.tickColor,N=D.tickBorderDash||[],K=D.tickBorderDashOffset;void 0!==(r=yB(this,n,y))&&(i=xw(d,r,P),_?a=s=u=c=i:o=A=l=h=i,b.push({tx1:a,ty1:o,tx2:s,ty2:A,x1:u,y1:l,x2:c,y2:h,width:P,color:O,borderDash:R,borderDashOffset:z,tickWidth:H,tickColor:V,tickBorderDash:N,tickBorderDashOffset:K}))}return this._ticksLength=w,this._borderValue=e,b}},{key:"_computeLabelItems",value:function(t){var e,n,r,i,a,o,s,A,u,l,c,h=this.axis,f=this.options,d=f.position,p=f.ticks,v=this.isHorizontal(),g=this.ticks,m=p.align,y=p.crossAlign,_=p.padding,w=p.mirror,x=_B(f.grid),b=x+_,B=w?-_:b,k=-T_(this.labelRotation),C=[],F="middle";if("top"===d)a=this.bottom-B,o=this._getXAxisLabelAlignment();else if("bottom"===d)a=this.top+B,o=this._getXAxisLabelAlignment();else if("left"===d){var E=this._getYAxisLabelAlignment(x);o=E.textAlign,i=E.x}else if("right"===d){var I=this._getYAxisLabelAlignment(x);o=I.textAlign,i=I.x}else if("x"===h){if("center"===d)a=(t.top+t.bottom)/2+b;else if(Yy(d)){var U=Object.keys(d)[0],S=d[U];a=this.chart.scales[U].getPixelForValue(S)+b}o=this._getXAxisLabelAlignment()}else if("y"===h){if("center"===d)i=(t.left+t.right)/2-b;else if(Yy(d)){var Q=Object.keys(d)[0],T=d[Q];i=this.chart.scales[Q].getPixelForValue(T)}o=this._getYAxisLabelAlignment(x).textAlign}"y"===h&&("start"===m?F="top":"end"===m&&(F="bottom"));var M=this._getLabelSizes();for(e=0,n=g.length;e<n;++e){r=g[e].label;var D=p.setContext(this.getContext(e));s=this.getPixelForTick(e)+p.labelOffset,u=(A=this._resolveTickFontOptions(e)).lineHeight;var L=(l=Xy(r)?r.length:1)/2,P=D.color,O=D.textStrokeColor,R=D.textStrokeWidth,z=o;v?(i=s,"inner"===o&&(z=e===n-1?this.options.reverse?"left":"right":0===e?this.options.reverse?"right":"left":"center"),c="top"===d?"near"===y||0!==k?-l*u+u/2:"center"===y?-M.highest.height/2-L*u+u:-M.highest.height+u/2:"near"===y||0!==k?u/2:"center"===y?M.highest.height/2-L*u:M.highest.height-l*u,w&&(c*=-1),0===k||D.showLabelBackdrop||(i+=u/2*Math.sin(k))):(a=s,c=(1-l)*u/2);var H=void 0;if(D.showLabelBackdrop){var V=Vw(D.backdropPadding),N=M.heights[e],K=M.widths[e],G=c-V.top,j=0-V.left;switch(F){case"middle":G-=N/2;break;case"bottom":G-=N}switch(o){case"center":j-=K/2;break;case"right":j-=K;break;case"inner":e===n-1?j-=K:e>0&&(j-=K/2)}H={left:j,top:G,width:K+V.width,height:N+V.height,color:D.backdropColor}}C.push({label:r,font:A,textOffset:c,options:{rotation:k,color:P,strokeColor:O,strokeWidth:R,textAlign:z,textBaseline:F,translation:[i,a],backdrop:H}})}return C}},{key:"_getXAxisLabelAlignment",value:function(){var t=this.options,e=t.position,n=t.ticks;if(-T_(this.labelRotation))return"top"===e?"left":"right";var r="center";return"start"===n.align?r="left":"end"===n.align?r="right":"inner"===n.align&&(r="inner"),r}},{key:"_getYAxisLabelAlignment",value:function(t){var e,n,r=this.options,i=r.position,a=r.ticks,o=a.crossAlign,s=a.mirror,A=a.padding,u=t+A,l=this._getLabelSizes().widest.width;return"left"===i?s?(n=this.right+A,"near"===o?e="left":"center"===o?(e="center",n+=l/2):(e="right",n+=l)):(n=this.right-u,"near"===o?e="right":"center"===o?(e="center",n-=l/2):(e="left",n=this.left)):"right"===i?s?(n=this.left+A,"near"===o?e="right":"center"===o?(e="center",n-=l/2):(e="left",n-=l)):(n=this.left+u,"near"===o?e="left":"center"===o?(e="center",n+=l/2):(e="right",n=this.right)):e="right",{textAlign:e,x:n}}},{key:"_computeLabelArea",value:function(){if(!this.options.ticks.mirror){var t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}}},{key:"drawBackground",value:function(){var t=this.ctx,e=this.options.backgroundColor,n=this.left,r=this.top,i=this.width,a=this.height;e&&(t.save(),t.fillStyle=e,t.fillRect(n,r,i,a),t.restore())}},{key:"getLineWidthForValue",value:function(t){var e=this.options.grid;if(!this._isVisible()||!e.display)return 0;var n=this.ticks.findIndex((function(e){return e.value===t}));return n>=0?e.setContext(this.getContext(n)).lineWidth:0}},{key:"drawGrid",value:function(t){var e,n,r=this.options.grid,i=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t)),o=function(t,e,n){n.width&&n.color&&(i.save(),i.lineWidth=n.width,i.strokeStyle=n.color,i.setLineDash(n.borderDash||[]),i.lineDashOffset=n.borderDashOffset,i.beginPath(),i.moveTo(t.x,t.y),i.lineTo(e.x,e.y),i.stroke(),i.restore())};if(r.display)for(e=0,n=a.length;e<n;++e){var s=a[e];r.drawOnChartArea&&o({x:s.x1,y:s.y1},{x:s.x2,y:s.y2},s),r.drawTicks&&o({x:s.tx1,y:s.ty1},{x:s.tx2,y:s.ty2},{color:s.tickColor,width:s.tickWidth,borderDash:s.tickBorderDash,borderDashOffset:s.tickBorderDashOffset})}}},{key:"drawBorder",value:function(){var t=this.chart,e=this.ctx,n=this.options,r=n.border,i=n.grid,a=r.setContext(this.getContext()),o=r.display?a.width:0;if(o){var s,A,u,l,c=i.setContext(this.getContext(0)).lineWidth,h=this._borderValue;this.isHorizontal()?(s=xw(t,this.left,o)-o/2,A=xw(t,this.right,c)+c/2,u=l=h):(u=xw(t,this.top,o)-o/2,l=xw(t,this.bottom,c)+c/2,s=A=h),e.save(),e.lineWidth=a.width,e.strokeStyle=a.color,e.beginPath(),e.moveTo(s,u),e.lineTo(A,l),e.stroke(),e.restore()}}},{key:"drawLabels",value:function(t){if(this.options.ticks.display){var e=this.ctx,n=this._computeLabelArea();n&&Fw(e,n);var r,i=Vx(this.getLabelItems(t));try{for(i.s();!(r=i.n()).done;){var a=r.value,o=a.options,s=a.font;Tw(e,a.label,0,a.textOffset,s,o)}}catch(t){i.e(t)}finally{i.f()}n&&Ew(e)}}},{key:"drawTitle",value:function(){var t=this.ctx,e=this.options,n=e.position,r=e.title,i=e.reverse;if(r.display){var a=Nw(r.font),o=Vw(r.padding),s=r.align,A=a.lineHeight/2;"bottom"===n||"center"===n||Yy(n)?(A+=o.bottom,Xy(r.text)&&(A+=a.lineHeight*(r.text.length-1))):A+=o.top;var u=function(t,e,n,r){var i,a,o,s=t.top,A=t.left,u=t.bottom,l=t.right,c=t.chart,h=c.chartArea,f=c.scales,d=0,p=u-s,v=l-A;if(t.isHorizontal()){if(a=Y_(r,A,l),Yy(n)){var g=Object.keys(n)[0],m=n[g];o=f[g].getPixelForValue(m)+p-e}else o="center"===n?(h.bottom+h.top)/2+p-e:vB(t,n,e);i=l-A}else{if(Yy(n)){var y=Object.keys(n)[0],_=n[y];a=f[y].getPixelForValue(_)-v+e}else a="center"===n?(h.left+h.right)/2-v+e:vB(t,n,e);o=Y_(r,u,s),d="left"===n?-B_:B_}return{titleX:a,titleY:o,maxWidth:i,rotation:d}}(this,A,n,s),l=u.titleX,c=u.titleY,h=u.maxWidth,f=u.rotation;Tw(t,r.text,0,0,a,{color:r.color,maxWidth:h,rotation:f,textAlign:xB(s,n,i),textBaseline:"middle",translation:[l,c]})}}},{key:"draw",value:function(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}},{key:"_layers",value:function(){var t=this,n=this.options,r=n.ticks&&n.ticks.z||0,i=e_(n.grid&&n.grid.z,-1),a=e_(n.border&&n.border.z,0);return this._isVisible()&&this.draw===e.prototype.draw?[{z:i,draw:function(e){t.drawBackground(),t.drawGrid(e),t.drawTitle()}},{z:a,draw:function(){t.drawBorder()}},{z:r,draw:function(e){t.drawLabels(e)}}]:[{z:r,draw:function(e){t.draw(e)}}]}},{key:"getMatchingVisibleMetas",value:function(t){var e,n,r=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",a=[];for(e=0,n=r.length;e<n;++e){var o=r[e];o[i]!==this.id||t&&o.type!==t||a.push(o)}return a}},{key:"_resolveTickFontOptions",value:function(t){return Nw(this.options.ticks.setContext(this.getContext(t)).font)}},{key:"_maxDigits",value:function(){var t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}])}(fB),BB=function(){return ai((function t(e,n,r){oi(this,t),this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}),[{key:"isForType",value:function(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}},{key:"register",value:function(t){var e,n=Object.getPrototypeOf(t);(function(t){return"id"in t&&"defaults"in t})(n)&&(e=this.register(n));var r=this.items,i=t.id,a=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in r||(r[i]=t,function(t,e,n){var r=u_(Object.create(null),[n?yw.get(n):{},yw.get(e),t.defaults]);yw.set(e,r),t.defaultRoutes&&function(t,e){Object.keys(e).forEach((function(n){var r=n.split("."),i=r.pop(),a=[t].concat(r).join("."),o=e[n].split("."),s=o.pop(),A=o.join(".");yw.route(a,i,A,s)}))}(e,t.defaultRoutes);t.descriptors&&yw.describe(e,t.descriptors)}(t,a,e),this.override&&yw.override(t.id,t.overrides)),a}},{key:"get",value:function(t){return this.items[t]}},{key:"unregister",value:function(t){var e=this.items,n=t.id,r=this.scope;n in e&&delete e[n],r&&n in yw[r]&&(delete yw[r][n],this.override&&delete dw[n])}}])}();var kB=function(){return ai((function t(){oi(this,t),this.controllers=new BB(sb,"datasets",!0),this.elements=new BB(fB,"elements"),this.plugins=new BB(Object,"plugins"),this.scales=new BB(bB,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}),[{key:"add",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e)}},{key:"remove",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e)}},{key:"addControllers",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.controllers)}},{key:"addElements",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.elements)}},{key:"addPlugins",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.plugins)}},{key:"addScales",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.scales)}},{key:"getController",value:function(t){return this._get(t,this.controllers,"controller")}},{key:"getElement",value:function(t){return this._get(t,this.elements,"element")}},{key:"getPlugin",value:function(t){return this._get(t,this.plugins,"plugin")}},{key:"getScale",value:function(t){return this._get(t,this.scales,"scale")}},{key:"removeControllers",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.controllers)}},{key:"removeElements",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.elements)}},{key:"removePlugins",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.plugins)}},{key:"removeScales",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.scales)}},{key:"_each",value:function(t,e,n){var r=this;Di(e).forEach((function(e){var i=n||r._getRegistryForType(e);n||i.isForType(e)||i===r.plugins&&e.id?r._exec(t,i,e):i_(e,(function(e){var i=n||r._getRegistryForType(e);r._exec(t,i,e)}))}))}},{key:"_exec",value:function(t,e,n){var r=p_(t);r_(n["before"+r],[],n),e[t](n),r_(n["after"+r],[],n)}},{key:"_getRegistryForType",value:function(t){for(var e=0;e<this._typedRegistries.length;e++){var n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}},{key:"_get",value:function(t,e,n){var r=e.get(t);if(void 0===r)throw new Error('"'+t+'" is not a registered '+n+".");return r}}])}(),CB=new kB,FB=function(){return ai((function t(){oi(this,t),this._init=[]}),[{key:"notify",value:function(t,e,n,r){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));var i=r?this._descriptors(t).filter(r):this._descriptors(t),a=this._notify(i,t,e,n);return"afterDestroy"===e&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall")),a}},{key:"_notify",value:function(t,e,n,r){r=r||{};var i,a=Vx(t);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=o.plugin;if(!1===r_(s[n],[e,r,o.options],s)&&r.cancelable)return!1}}catch(t){a.e(t)}finally{a.f()}return!0}},{key:"invalidate",value:function(){qy(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}},{key:"_descriptors",value:function(t){if(this._cache)return this._cache;var e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}},{key:"_createDescriptors",value:function(t,e){var n=t&&t.config,r=e_(n.options&&n.options.plugins,{}),i=function(t){for(var e={},n=[],r=Object.keys(CB.plugins.items),i=0;i<r.length;i++)n.push(CB.getPlugin(r[i]));for(var a=t.plugins||[],o=0;o<a.length;o++){var s=a[o];-1===n.indexOf(s)&&(n.push(s),e[s.id]=!0)}return{plugins:n,localIds:e}}(n);return!1!==r||e?function(t,e,n,r){var i,a=e.plugins,o=e.localIds,s=[],A=t.getContext(),u=Vx(a);try{for(u.s();!(i=u.n()).done;){var l=i.value,c=l.id,h=EB(n[c],r);null!==h&&s.push({plugin:l,options:IB(t.config,{plugin:l,local:o[c]},h,A)})}}catch(t){u.e(t)}finally{u.f()}return s}(t,i,r,e):[]}},{key:"_notifyStateChanges",value:function(t){var e=this._oldCache||[],n=this._cache,r=function(t,e){return t.filter((function(t){return!e.some((function(e){return t.plugin.id===e.plugin.id}))}))};this._notify(r(e,n),t,"stop"),this._notify(r(n,e),t,"start")}}])}();function EB(t,e){return e||!1!==t?!0===t?{}:t:null}function IB(t,e,n,r){var i=e.plugin,a=e.local,o=t.pluginScopeKeys(i),s=t.getOptionScopes(n,o);return a&&i.defaults&&s.push(i.defaults),t.createResolver(s,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function UB(t,e){var n=yw.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function SB(t){if("x"===t||"y"===t||"r"===t)return t}function QB(t){if(SB(t))return t;for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i],s=o.axis||("top"===(A=o.position)||"bottom"===A?"x":"left"===A||"right"===A?"y":void 0)||t.length>1&&SB(t[0].toLowerCase());if(s)return s}var A;throw new Error("Cannot determine type of '".concat(t,"' axis. Please provide 'axis' or 'position' option."))}function TB(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function MB(t,e){var n=dw[t.type]||{scales:{}},r=e.scales||{},i=UB(t.type,e),a=Object.create(null);return Object.keys(r).forEach((function(e){var o=r[e];if(!Yy(o))return console.error("Invalid scale configuration for scale: ".concat(e));if(o._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(e));var s=QB(e,o,function(t,e){if(e.data&&e.data.datasets){var n=e.data.datasets.filter((function(e){return e.xAxisID===t||e.yAxisID===t}));if(n.length)return TB(t,"x",n[0])||TB(t,"y",n[0])}return{}}(e,t),yw.scales[o.type]),A=function(t,e){return t===e?"_index_":"_value_"}(s,i),u=n.scales||{};a[e]=l_(Object.create(null),[{axis:s},o,u[s],u[A]])})),t.data.datasets.forEach((function(n){var i=n.type||t.type,o=n.indexAxis||UB(i,e),s=(dw[i]||{}).scales||{};Object.keys(s).forEach((function(t){var e=function(t,e){var n=t;return"_index_"===t?n=e:"_value_"===t&&(n="x"===e?"y":"x"),n}(t,o),i=n[e+"AxisID"]||e;a[i]=a[i]||Object.create(null),l_(a[i],[{axis:e},r[i],s[t]])}))})),Object.keys(a).forEach((function(t){var e=a[t];l_(e,[yw.scales[e.type],yw.scale])})),a}function DB(t){var e=t.options||(t.options={});e.plugins=e_(e.plugins,{}),e.scales=MB(t,e)}function LB(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}var PB=new Map,OB=new Set;function RB(t,e){var n=PB.get(t);return n||(n=e(),PB.set(t,n),OB.add(n)),n}var zB=function(t,e,n){var r=d_(e,n);void 0!==r&&t.add(r)},HB=function(){return ai((function t(e){oi(this,t),this._config=function(t){return(t=t||{}).data=LB(t.data),DB(t),t}(e),this._scopeCache=new Map,this._resolverCache=new Map}),[{key:"platform",get:function(){return this._config.platform}},{key:"type",get:function(){return this._config.type},set:function(t){this._config.type=t}},{key:"data",get:function(){return this._config.data},set:function(t){this._config.data=LB(t)}},{key:"options",get:function(){return this._config.options},set:function(t){this._config.options=t}},{key:"plugins",get:function(){return this._config.plugins}},{key:"update",value:function(){var t=this._config;this.clearCache(),DB(t)}},{key:"clearCache",value:function(){this._scopeCache.clear(),this._resolverCache.clear()}},{key:"datasetScopeKeys",value:function(t){return RB(t,(function(){return[["datasets.".concat(t),""]]}))}},{key:"datasetAnimationScopeKeys",value:function(t,e){return RB("".concat(t,".transition.").concat(e),(function(){return[["datasets.".concat(t,".transitions.").concat(e),"transitions.".concat(e)],["datasets.".concat(t),""]]}))}},{key:"datasetElementScopeKeys",value:function(t,e){return RB("".concat(t,"-").concat(e),(function(){return[["datasets.".concat(t,".elements.").concat(e),"datasets.".concat(t),"elements.".concat(e),""]]}))}},{key:"pluginScopeKeys",value:function(t){var e=t.id,n=this.type;return RB("".concat(n,"-plugin-").concat(e),(function(){return[["plugins.".concat(e)].concat(Di(t.additionalOptionScopes||[]))]}))}},{key:"_cachedScopes",value:function(t,e){var n=this._scopeCache,r=n.get(t);return r&&!e||(r=new Map,n.set(t,r)),r}},{key:"getOptionScopes",value:function(t,e,n){var r=this.options,i=this.type,a=this._cachedScopes(t,n),o=a.get(e);if(o)return o;var s=new Set;e.forEach((function(e){t&&(s.add(t),e.forEach((function(e){return zB(s,t,e)}))),e.forEach((function(t){return zB(s,r,t)})),e.forEach((function(t){return zB(s,dw[i]||{},t)})),e.forEach((function(t){return zB(s,yw,t)})),e.forEach((function(t){return zB(s,pw,t)}))}));var A=Array.from(s);return 0===A.length&&A.push(Object.create(null)),OB.has(e)&&a.set(e,A),A}},{key:"chartOptionScopes",value:function(){var t=this.options,e=this.type;return[t,dw[e]||{},yw.datasets[e]||{},{type:e},yw,pw]}},{key:"resolveNamedOptions",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""],i={$shared:!0},a=VB(this._resolverCache,t,r),o=a.resolver,s=a.subPrefixes,A=o;(function(t,e){var n,r=Ww(t),i=r.isScriptable,a=r.isIndexable,o=Vx(e);try{for(o.s();!(n=o.n()).done;){var s=n.value,A=i(s),u=a(s),l=(u||A)&&t[s];if(A&&(g_(l)||NB(l))||u&&Xy(l))return!0}}catch(t){o.e(t)}finally{o.f()}return!1})(o,e)&&(i.$shared=!1,A=$w(o,n=g_(n)?n():n,this.createResolver(t,n,s)));var u,l=Vx(e);try{for(l.s();!(u=l.n()).done;){var c=u.value;i[c]=A[c]}}catch(t){l.e(t)}finally{l.f()}return i}},{key:"createResolver",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],r=arguments.length>3?arguments[3]:void 0,i=VB(this._resolverCache,t,n).resolver;return Yy(e)?$w(i,e,void 0,r):i}}])}();function VB(t,e,n){var r=t.get(e);r||(r=new Map,t.set(e,r));var i=n.join(),a=r.get(i);a||(a={resolver:jw(e,n),subPrefixes:n.filter((function(t){return!t.toLowerCase().includes("hover")}))},r.set(i,a));return a}var NB=function(t){return Yy(t)&&Object.getOwnPropertyNames(t).some((function(e){return g_(t[e])}))};var KB=["top","bottom","left","right","chartArea"];function GB(t,e){return"top"===t||"bottom"===t||-1===KB.indexOf(t)&&"x"===e}function jB(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function $B(t){var e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),r_(n&&n.onComplete,[t],e)}function WB(t){var e=t.chart,n=e.options.animation;r_(n&&n.onProgress,[t],e)}function ZB(t){return hx()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}var qB={},XB=function(t){var e=ZB(t);return Object.values(qB).filter((function(t){return t.canvas===e})).pop()};function YB(t,e,n){for(var r=0,i=Object.keys(t);r<i.length;r++){var a=i[r],o=+a;if(o>=e){var s=t[a];delete t[a],(n>0||o>e)&&(t[o+n]=s)}}}function JB(t,e,n){return t.options.clip?t[n]:e[n]}var tk=function(){return ai((function t(e,n){var r=this;oi(this,t);var i=this.config=new HB(n),a=ZB(e),o=XB(a);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");var s=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||function(t){return!hx()||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas?Xb:hB}(a)),this.platform.updateConfig(i);var A,u,l,c=this.platform.acquireContext(a,s.aspectRatio),h=c&&c.canvas,f=h&&h.height,d=h&&h.width;this.id=Zy(),this.ctx=c,this.canvas=h,this.width=d,this.height=f,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new FB,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=(A=function(t){return r.update(t)},u=s.resizeDelay||0,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return u?(clearTimeout(l),l=setTimeout(A,u,e)):A.apply(this,e),u}),this._dataChanges=[],qB[this.id]=this,c&&h?(Gx.listen(this,"complete",$B),Gx.listen(this,"progress",WB),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}),[{key:"aspectRatio",get:function(){var t=this.options,e=t.aspectRatio,n=t.maintainAspectRatio,r=this.width,i=this.height,a=this._aspectRatio;return qy(e)?n&&a?a:i?r/i:null:e}},{key:"data",get:function(){return this.config.data},set:function(t){this.config.data=t}},{key:"options",get:function(){return this._options},set:function(t){this.config.options=t}},{key:"registry",get:function(){return CB}},{key:"_initialize",value:function(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():xx(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}},{key:"clear",value:function(){return bw(this.canvas,this.ctx),this}},{key:"stop",value:function(){return Gx.stop(this),this}},{key:"resize",value:function(t,e){Gx.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}},{key:"_resize",value:function(t,e){var n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(r,t,e,i),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),s=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,xx(this,o,!0)&&(this.notifyPlugins("resize",{size:a}),r_(n.onResize,[this,a],this),this.attached&&this._doResize(s)&&this.render())}},{key:"ensureScalesHaveIDs",value:function(){i_(this.options.scales||{},(function(t,e){t.id=e}))}},{key:"buildOrUpdateScales",value:function(){var t=this,e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((function(t,e){return t[e]=!1,t}),{}),a=[];n&&(a=a.concat(Object.keys(n).map((function(t){var e=n[t],r=QB(t,e),i="r"===r,a="x"===r;return{options:e,dposition:i?"chartArea":a?"bottom":"left",dtype:i?"radialLinear":a?"category":"linear"}})))),i_(a,(function(n){var a=n.options,o=a.id,s=QB(o,a),A=e_(a.type,n.dtype);void 0!==a.position&&GB(a.position,s)===GB(n.dposition)||(a.position=n.dposition),i[o]=!0;var u=null;o in r&&r[o].type===A?u=r[o]:(u=new(CB.getScale(A))({id:o,type:A,ctx:t.ctx,chart:t}),r[u.id]=u);u.init(a,e)})),i_(i,(function(t,e){t||delete r[e]})),i_(r,(function(e){Wb(t,e,e.options),jb(t,e)}))}},{key:"_updateMetasets",value:function(){var t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort((function(t,e){return t.index-e.index})),n>e){for(var r=e;r<n;++r)this._destroyDatasetMeta(r);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(jB("order","index"))}},{key:"_removeUnreferencedMetasets",value:function(){var t=this,e=this._metasets,n=this.data.datasets;e.length>n.length&&delete this._stacks,e.forEach((function(e,r){0===n.filter((function(t){return t===e._dataset})).length&&t._destroyDatasetMeta(r)}))}},{key:"buildOrUpdateControllers",value:function(){var t,e,n=[],r=this.data.datasets;for(this._removeUnreferencedMetasets(),t=0,e=r.length;t<e;t++){var i=r[t],a=this.getDatasetMeta(t),o=i.type||this.config.type;if(a.type&&a.type!==o&&(this._destroyDatasetMeta(t),a=this.getDatasetMeta(t)),a.type=o,a.indexAxis=i.indexAxis||UB(o,this.options),a.order=i.order||0,a.index=t,a.label=""+i.label,a.visible=this.isDatasetVisible(t),a.controller)a.controller.updateIndex(t),a.controller.linkScales();else{var s=CB.getController(o),A=yw.datasets[o],u=A.datasetElementType,l=A.dataElementType;Object.assign(s,{dataElementType:CB.getElement(l),datasetElementType:u&&CB.getElement(u)}),a.controller=new s(this,t),n.push(a.controller)}}return this._updateMetasets(),n}},{key:"_resetElements",value:function(){var t=this;i_(this.data.datasets,(function(e,n){t.getDatasetMeta(n).controller.reset()}),this)}},{key:"reset",value:function(){this._resetElements(),this.notifyPlugins("reset")}},{key:"update",value:function(t){var e=this.config;e.update();var n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1!==this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})){var i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");for(var a=0,o=0,s=this.data.datasets.length;o<s;o++){var A=this.getDatasetMeta(o).controller,u=!r&&-1===i.indexOf(A);A.buildOrUpdateElements(u),a=Math.max(+A.getMaxOverflow(),a)}a=this._minPadding=n.layout.autoPadding?a:0,this._updateLayout(a),r||i_(i,(function(t){t.reset()})),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(jB("z","_idx"));var l=this._active,c=this._lastEvent;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}}},{key:"_updateScales",value:function(){var t=this;i_(this.scales,(function(e){$b(t,e)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}},{key:"_checkEventBindings",value:function(){var t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);m_(e,n)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}},{key:"_updateHiddenIndices",value:function(){var t,e=this._hiddenIndices,n=Vx(this._getUniformDataChanges()||[]);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.method,a=r.start,o=r.count;YB(e,a,"_removeElements"===i?-o:o)}}catch(t){n.e(t)}finally{n.f()}}},{key:"_getUniformDataChanges",value:function(){var t=this._dataChanges;if(t&&t.length){this._dataChanges=[];for(var e=this.data.datasets.length,n=function(e){return new Set(t.filter((function(t){return t[0]===e})).map((function(t,e){return e+","+t.splice(1).join(",")})))},r=n(0),i=1;i<e;i++)if(!m_(r,n(i)))return;return Array.from(r).map((function(t){return t.split(",")})).map((function(t){return{method:t[1],start:+t[2],count:+t[3]}}))}}},{key:"_updateLayout",value:function(t){var e=this;if(!1!==this.notifyPlugins("beforeLayout",{cancelable:!0})){Zb(this,this.width,this.height,t);var n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],i_(this.boxes,(function(t){var n;r&&"chartArea"===t.position||(t.configure&&t.configure(),(n=e._layers).push.apply(n,Di(t._layers())))}),this),this._layers.forEach((function(t,e){t._idx=e})),this.notifyPlugins("afterLayout")}}},{key:"_updateDatasets",value:function(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(var e=0,n=this.data.datasets.length;e<n;++e)this.getDatasetMeta(e).controller.configure();for(var r=0,i=this.data.datasets.length;r<i;++r)this._updateDataset(r,g_(t)?t({datasetIndex:r}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}},{key:"_updateDataset",value:function(t,e){var n=this.getDatasetMeta(t),r={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}},{key:"render",value:function(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Gx.has(this)?this.attached&&!Gx.running(this)&&Gx.start(this):(this.draw(),$B({chart:this})))}},{key:"draw",value:function(){var t;if(this._resizeBeforeDraw){var e=this._resizeBeforeDraw,n=e.width,r=e.height;this._resize(n,r),this._resizeBeforeDraw=null}if(this.clear(),!(this.width<=0||this.height<=0)&&!1!==this.notifyPlugins("beforeDraw",{cancelable:!0})){var i=this._layers;for(t=0;t<i.length&&i[t].z<=0;++t)i[t].draw(this.chartArea);for(this._drawDatasets();t<i.length;++t)i[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}}},{key:"_getSortedDatasetMetas",value:function(t){var e,n,r=this._sortedMetasets,i=[];for(e=0,n=r.length;e<n;++e){var a=r[e];t&&!a.visible||i.push(a)}return i}},{key:"getSortedVisibleDatasetMetas",value:function(){return this._getSortedDatasetMetas(!0)}},{key:"_drawDatasets",value:function(){if(!1!==this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})){for(var t=this.getSortedVisibleDatasetMetas(),e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}}},{key:"_drawDataset",value:function(t){var e=this.ctx,n=t._clip,r=!n.disabled,i=function(t,e){var n=t.xScale,r=t.yScale;return n&&r?{left:JB(n,e,"left"),right:JB(n,e,"right"),top:JB(r,e,"top"),bottom:JB(r,e,"bottom")}:e}(t,this.chartArea),a={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",a)&&(r&&Fw(e,{left:!1===n.left?0:i.left-n.left,right:!1===n.right?this.width:i.right+n.right,top:!1===n.top?0:i.top-n.top,bottom:!1===n.bottom?this.height:i.bottom+n.bottom}),t.controller.draw(),r&&Ew(e),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}},{key:"isPointInArea",value:function(t){return Cw(t,this.chartArea,this._minPadding)}},{key:"getElementsAtEventForMode",value:function(t,e,n,r){var i=Tb.modes[e];return"function"==typeof i?i(this,t,n,r):[]}},{key:"getDatasetMeta",value:function(t){var e=this.data.datasets[t],n=this._metasets,r=n.filter((function(t){return t&&t._dataset===e})).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(r)),r}},{key:"getContext",value:function(){return this.$context||(this.$context=Gw(null,{chart:this,type:"chart"}))}},{key:"getVisibleDatasetCount",value:function(){return this.getSortedVisibleDatasetMetas().length}},{key:"isDatasetVisible",value:function(t){var e=this.data.datasets[t];if(!e)return!1;var n=this.getDatasetMeta(t);return"boolean"==typeof n.hidden?!n.hidden:!e.hidden}},{key:"setDatasetVisibility",value:function(t,e){this.getDatasetMeta(t).hidden=!e}},{key:"toggleDataVisibility",value:function(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}},{key:"getDataVisibility",value:function(t){return!this._hiddenIndices[t]}},{key:"_updateVisibility",value:function(t,e,n){var r=n?"show":"hide",i=this.getDatasetMeta(t),a=i.controller._resolveAnimations(void 0,r);v_(e)?(i.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),a.update(i,{visible:n}),this.update((function(e){return e.datasetIndex===t?r:void 0})))}},{key:"hide",value:function(t,e){this._updateVisibility(t,e,!1)}},{key:"show",value:function(t,e){this._updateVisibility(t,e,!0)}},{key:"_destroyDatasetMeta",value:function(t){var e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}},{key:"_stop",value:function(){var t,e;for(this.stop(),Gx.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}},{key:"destroy",value:function(){this.notifyPlugins("beforeDestroy");var t=this.canvas,e=this.ctx;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),bw(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete qB[this.id],this.notifyPlugins("afterDestroy")}},{key:"toBase64Image",value:function(){var t;return(t=this.canvas).toDataURL.apply(t,arguments)}},{key:"bindEvents",value:function(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}},{key:"bindUserEvents",value:function(){var t=this,e=this._listeners,n=this.platform,r=function(e,n,r){e.offsetX=n,e.offsetY=r,t._eventHandler(e)};i_(this.options.events,(function(i){return function(r,i){n.addEventListener(t,r,i),e[r]=i}(i,r)}))}},{key:"bindResponsiveEvents",value:function(){var t=this;this._responsiveListeners||(this._responsiveListeners={});var e,n=this._responsiveListeners,r=this.platform,i=function(e,i){r.addEventListener(t,e,i),n[e]=i},a=function(e,i){n[e]&&(r.removeEventListener(t,e,i),delete n[e])},o=function(e,n){t.canvas&&t.resize(e,n)},s=function n(){a("attach",n),t.attached=!0,t.resize(),i("resize",o),i("detach",e)};e=function(){t.attached=!1,a("resize",o),t._stop(),t._resize(0,0),i("attach",s)},r.isAttached(this.canvas)?s():e()}},{key:"unbindEvents",value:function(){var t=this;i_(this._listeners,(function(e,n){t.platform.removeEventListener(t,n,e)})),this._listeners={},i_(this._responsiveListeners,(function(e,n){t.platform.removeEventListener(t,n,e)})),this._responsiveListeners=void 0}},{key:"updateHoverStyle",value:function(t,e,n){var r,i,a,o=n?"set":"remove";for("dataset"===e&&this.getDatasetMeta(t[0].datasetIndex).controller["_"+o+"DatasetHoverStyle"](),i=0,a=t.length;i<a;++i){var s=(r=t[i])&&this.getDatasetMeta(r.datasetIndex).controller;s&&s[o+"HoverStyle"](r.element,r.datasetIndex,r.index)}}},{key:"getActiveElements",value:function(){return this._active||[]}},{key:"setActiveElements",value:function(t){var e=this,n=this._active||[],r=t.map((function(t){var n=t.datasetIndex,r=t.index,i=e.getDatasetMeta(n);if(!i)throw new Error("No dataset found at index "+n);return{datasetIndex:n,element:i.data[r],index:r}}));!a_(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}},{key:"notifyPlugins",value:function(t,e,n){return this._plugins.notify(this,t,e,n)}},{key:"isPluginEnabled",value:function(t){return 1===this._plugins._cache.filter((function(e){return e.plugin.id===t})).length}},{key:"_updateHoverStyles",value:function(t,e,n){var r=this.options.hover,i=function(t,e){return t.filter((function(t){return!e.some((function(e){return t.datasetIndex===e.datasetIndex&&t.index===e.index}))}))},a=i(e,t),o=n?t:i(t,e);a.length&&this.updateHoverStyle(a,r.mode,!1),o.length&&r.mode&&this.updateHoverStyle(o,r.mode,!0)}},{key:"_eventHandler",value:function(t,e){var n=this,r={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},i=function(e){return(e.options.events||n.options.events).includes(t.native.type)};if(!1!==this.notifyPlugins("beforeEvent",r,i)){var a=this._handleEvent(t,e,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(a||r.changed)&&this.render(),this}}},{key:"_handleEvent",value:function(t,e,n){var r=this._active,i=void 0===r?[]:r,a=this.options,o=e,s=this._getActiveElements(t,i,n,o),A=function(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}(t),u=function(t,e,n,r){return n&&"mouseout"!==t.type?r?e:t:null}(t,this._lastEvent,n,A);n&&(this._lastEvent=null,r_(a.onHover,[t,s,this],this),A&&r_(a.onClick,[t,s,this],this));var l=!a_(s,i);return(l||e)&&(this._active=s,this._updateHoverStyles(s,i,e)),this._lastEvent=u,l}},{key:"_getActiveElements",value:function(t,e,n,r){if("mouseout"===t.type)return[];if(!n)return e;var i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,r)}}],[{key:"register",value:function(){CB.add.apply(CB,arguments),ek()}},{key:"unregister",value:function(){CB.remove.apply(CB,arguments),ek()}}])}();function ek(){return i_(tk.instances,(function(t){return t._plugins.invalidate()}))}function nk(t,e,n,r){var i=Rw(t.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]),a=(n-e)/2,o=Math.min(a,r*e/2),s=function(t){var e=(n-Math.min(a,t))*r/2;return H_(t,0,Math.min(a,e))};return{outerStart:s(i.outerStart),outerEnd:s(i.outerEnd),innerStart:H_(i.innerStart,0,o),innerEnd:H_(i.innerEnd,0,o)}}function rk(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function ik(t,e,n,r,i,a){var o=e.x,s=e.y,A=e.startAngle,u=e.pixelMargin,l=e.innerRadius,c=Math.max(e.outerRadius+r+n-u,0),h=l>0?l+r+n+u:0,f=0,d=i-A;if(r){var p=((l>0?l-r:0)+(c>0?c-r:0))/2;f=(d-(0!==p?d*p/(p+r):d))/2}var v=(d-Math.max(.001,d*c-n/y_)/c)/2,g=A+v+f,m=i-v-f,y=nk(e,h,c,m-g),_=y.outerStart,w=y.outerEnd,x=y.innerStart,b=y.innerEnd,B=c-_,k=c-w,C=g+_/B,F=m-w/k,E=h+x,I=h+b,U=g+x/E,S=m-b/I;if(t.beginPath(),a){var Q=(C+F)/2;if(t.arc(o,s,c,C,Q),t.arc(o,s,c,Q,F),w>0){var T=rk(k,F,o,s);t.arc(T.x,T.y,w,F,m+B_)}var M=rk(I,m,o,s);if(t.lineTo(M.x,M.y),b>0){var D=rk(I,S,o,s);t.arc(D.x,D.y,b,m+B_,S+Math.PI)}var L=(m-b/h+(g+x/h))/2;if(t.arc(o,s,h,m-b/h,L,!0),t.arc(o,s,h,L,g+x/h,!0),x>0){var P=rk(E,U,o,s);t.arc(P.x,P.y,x,U+Math.PI,g-B_)}var O=rk(B,g,o,s);if(t.lineTo(O.x,O.y),_>0){var R=rk(B,C,o,s);t.arc(R.x,R.y,_,g-B_,C)}}else{t.moveTo(o,s);var z=Math.cos(C)*c+o,H=Math.sin(C)*c+s;t.lineTo(z,H);var V=Math.cos(F)*c+o,N=Math.sin(F)*c+s;t.lineTo(V,N)}t.closePath()}function ak(t,e,n,r,i){var a=e.fullCircles,o=e.startAngle,s=e.circumference,A=e.options,u=A.borderWidth,l=A.borderJoinStyle,c=A.borderDash,h=A.borderDashOffset,f="inner"===A.borderAlign;if(u){t.setLineDash(c||[]),t.lineDashOffset=h,f?(t.lineWidth=2*u,t.lineJoin=l||"round"):(t.lineWidth=u,t.lineJoin=l||"bevel");var d=e.endAngle;if(a){ik(t,e,n,r,d,i);for(var p=0;p<a;++p)t.stroke();isNaN(s)||(d=o+(s%__||__))}f&&function(t,e,n){var r=e.startAngle,i=e.pixelMargin,a=e.x,o=e.y,s=e.outerRadius,A=e.innerRadius,u=i/s;t.beginPath(),t.arc(a,o,s,r-u,n+u),A>i?(u=i/A,t.arc(a,o,A,n+u,r-u,!0)):t.arc(a,o,i,n+B_,r-B_),t.closePath(),t.clip()}(t,e,d),a||(ik(t,e,n,r,d,i),t.stroke())}}hi(tk,"defaults",yw),hi(tk,"instances",qB),hi(tk,"overrides",dw),hi(tk,"registry",CB),hi(tk,"version","4.4.3"),hi(tk,"getChart",XB);var ok=function(t){function e(t){var n;return oi(this,e),hi(n=zx(this,e),"circumference",void 0),hi(n,"endAngle",void 0),hi(n,"fullCircles",void 0),hi(n,"innerRadius",void 0),hi(n,"outerRadius",void 0),hi(n,"pixelMargin",void 0),hi(n,"startAngle",void 0),n.options=void 0,n.circumference=void 0,n.startAngle=void 0,n.endAngle=void 0,n.innerRadius=void 0,n.outerRadius=void 0,n.pixelMargin=0,n.fullCircles=0,t&&Object.assign(n,t),n}return ci(e,t),ai(e,[{key:"inRange",value:function(t,e,n){var r=L_(this.getProps(["x","y"],n),{x:t,y:e}),i=r.angle,a=r.distance,o=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),s=o.startAngle,A=o.endAngle,u=o.innerRadius,l=o.outerRadius,c=o.circumference,h=(this.options.spacing+this.options.borderWidth)/2,f=e_(c,A-s)>=__||z_(i,s,A),d=V_(a,u+h,l+h);return f&&d}},{key:"getCenterPoint",value:function(t){var e=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),n=e.x,r=e.y,i=e.startAngle,a=e.endAngle,o=e.innerRadius,s=e.outerRadius,A=this.options,u=A.offset,l=(i+a)/2,c=(o+s+A.spacing+u)/2;return{x:n+Math.cos(l)*c,y:r+Math.sin(l)*c}}},{key:"tooltipPosition",value:function(t){return this.getCenterPoint(t)}},{key:"draw",value:function(t){var e=this.options,n=this.circumference,r=(e.offset||0)/4,i=(e.spacing||0)/2,a=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>__?Math.floor(n/__):0,!(0===n||this.innerRadius<0||this.outerRadius<0)){t.save();var o=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(o)*r,Math.sin(o)*r);var s=r*(1-Math.sin(Math.min(y_,n||0)));t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function(t,e,n,r,i){var a=e.fullCircles,o=e.startAngle,s=e.circumference,A=e.endAngle;if(a){ik(t,e,n,r,A,i);for(var u=0;u<a;++u)t.fill();isNaN(s)||(A=o+(s%__||__))}ik(t,e,n,r,A,i),t.fill()}(t,this,s,i,a),ak(t,this,s,i,a),t.restore()}}}])}(fB);function sk(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;t.lineCap=e_(n.borderCapStyle,e.borderCapStyle),t.setLineDash(e_(n.borderDash,e.borderDash)),t.lineDashOffset=e_(n.borderDashOffset,e.borderDashOffset),t.lineJoin=e_(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=e_(n.borderWidth,e.borderWidth),t.strokeStyle=e_(n.borderColor,e.borderColor)}function Ak(t,e,n){t.lineTo(n.x,n.y)}function uk(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.length,i=n.start,a=void 0===i?0:i,o=n.end,s=void 0===o?r-1:o,A=e.start,u=e.end,l=Math.max(a,A),c=Math.min(s,u),h=a<A&&s<A||a>u&&s>u;return{count:r,start:l,loop:e.loop,ilen:c<l&&!h?r+c-l:c-l}}function lk(t,e,n,r){var i,a,o,s=e.points,A=e.options,u=uk(s,n,r),l=u.count,c=u.start,h=u.loop,f=u.ilen,d=function(t){return t.stepped?Iw:t.tension||"monotone"===t.cubicInterpolationMode?Uw:Ak}(A),p=r||{},v=p.move,g=void 0===v||v,m=p.reverse;for(i=0;i<=f;++i)(a=s[(c+(m?f-i:i))%l]).skip||(g?(t.moveTo(a.x,a.y),g=!1):d(t,o,a,m,A.stepped),o=a);return h&&d(t,o,a=s[(c+(m?f:0))%l],m,A.stepped),!!h}function ck(t,e,n,r){var i,a,o,s,A,u,l=e.points,c=uk(l,n,r),h=c.count,f=c.start,d=c.ilen,p=r||{},v=p.move,g=void 0===v||v,m=p.reverse,y=0,_=0,w=function(t){return(f+(m?d-t:t))%h},x=function(){s!==A&&(t.lineTo(y,A),t.lineTo(y,s),t.lineTo(y,u))};for(g&&(a=l[w(0)],t.moveTo(a.x,a.y)),i=0;i<=d;++i)if(!(a=l[w(i)]).skip){var b=a.x,B=a.y,k=0|b;k===o?(B<s?s=B:B>A&&(A=B),y=(_*y+b)/++_):(x(),t.lineTo(b,B),o=k,_=0,s=A=B),u=B}x()}function hk(t){var e=t.options,n=e.borderDash&&e.borderDash.length;return!(t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||n)?ck:lk}hi(ok,"id","arc"),hi(ok,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),hi(ok,"defaultRoutes",{backgroundColor:"backgroundColor"}),hi(ok,"descriptors",{_scriptable:!0,_indexable:function(t){return"borderDash"!==t}});var fk="function"==typeof Path2D;function dk(t,e,n,r){fk&&!e.options.segment?function(t,e,n,r){var i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),sk(t,e.options),t.stroke(i)}(t,e,n,r):function(t,e,n,r){var i,a=e.segments,o=e.options,s=hk(e),A=Vx(a);try{for(A.s();!(i=A.n()).done;){var u=i.value;sk(t,o,u.style),t.beginPath(),s(t,e,u,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}}catch(t){A.e(t)}finally{A.f()}}(t,e,n,r)}var pk=function(t){function e(t){var n;return oi(this,e),(n=zx(this,e)).animated=!0,n.options=void 0,n._chart=void 0,n._loop=void 0,n._fullLoop=void 0,n._path=void 0,n._points=void 0,n._segments=void 0,n._decimated=!1,n._pointsUpdated=!1,n._datasetIndex=void 0,t&&Object.assign(n,t),n}return ci(e,t),ai(e,[{key:"updateControlPoints",value:function(t,e){var n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){var r=n.spanGaps?this._loop:this._fullLoop;cx(this._points,n,t,r,e),this._pointsUpdated=!0}}},{key:"points",get:function(){return this._points},set:function(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}},{key:"segments",get:function(){return this._segments||(this._segments=function(t,e){var n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];var a=!!t._loop,o=function(t,e,n,r){var i=0,a=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(a+=i);a>i&&t[a%e].skip;)a--;return{start:i,end:a%=e}}(n,i,a,r),s=o.start,A=o.end;return Dx(t,!0===r?[{start:s,end:A,loop:a}]:function(t,e,n,r){var i,a=t.length,o=[],s=e,A=t[e];for(i=e+1;i<=n;++i){var u=t[i%a];u.skip||u.stop?A.skip||(r=!1,o.push({start:e%a,end:(i-1)%a,loop:r}),e=s=u.stop?i:null):(s=i,A.skip&&(e=i)),A=u}return null!==s&&o.push({start:e%a,end:s%a,loop:r}),o}(n,s,A<s?A+i:A,!!t._fullLoop&&0===s&&A===i-1),n,e)}(this,this.options.segment))}},{key:"first",value:function(){var t=this.segments,e=this.points;return t.length&&e[t[0].start]}},{key:"last",value:function(){var t=this.segments,e=this.points,n=t.length;return n&&e[t[n-1].end]}},{key:"interpolate",value:function(t,e){var n=this.options,r=t[e],i=this.points,a=Mx(this,{property:e,start:r,end:r});if(a.length){var o,s,A=[],u=function(t){return t.stepped?Cx:t.tension||"monotone"===t.cubicInterpolationMode?Fx:kx}(n);for(o=0,s=a.length;o<s;++o){var l=a[o],c=l.start,h=l.end,f=i[c],d=i[h];if(f!==d){var p=u(f,d,Math.abs((r-f[e])/(d[e]-f[e])),n.stepped);p[e]=t[e],A.push(p)}else A.push(f)}return 1===A.length?A[0]:A}}},{key:"pathSegment",value:function(t,e,n){return hk(this)(t,this,e,n)}},{key:"path",value:function(t,e,n){var r=this.segments,i=hk(this),a=this._loop;e=e||0,n=n||this.points.length-e;var o,s=Vx(r);try{for(s.s();!(o=s.n()).done;){a&=i(t,this,o.value,{start:e,end:e+n-1})}}catch(t){s.e(t)}finally{s.f()}return!!a}},{key:"draw",value:function(t,e,n,r){var i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),dk(t,this,n,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}])}(fB);function vk(t,e,n,r){var i=t.options,a=t.getProps([n],r)[n];return Math.abs(e-a)<i.radius+i.hitRadius}hi(pk,"id","line"),hi(pk,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),hi(pk,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),hi(pk,"descriptors",{_scriptable:!0,_indexable:function(t){return"borderDash"!==t&&"fill"!==t}});var gk=function(t){function e(t){var n;return oi(this,e),hi(n=zx(this,e),"parsed",void 0),hi(n,"skip",void 0),hi(n,"stop",void 0),n.options=void 0,n.parsed=void 0,n.skip=void 0,n.stop=void 0,t&&Object.assign(n,t),n}return ci(e,t),ai(e,[{key:"inRange",value:function(t,e,n){var r=this.options,i=this.getProps(["x","y"],n),a=i.x,o=i.y;return Math.pow(t-a,2)+Math.pow(e-o,2)<Math.pow(r.hitRadius+r.radius,2)}},{key:"inXRange",value:function(t,e){return vk(this,t,"x",e)}},{key:"inYRange",value:function(t,e){return vk(this,t,"y",e)}},{key:"getCenterPoint",value:function(t){var e=this.getProps(["x","y"],t);return{x:e.x,y:e.y}}},{key:"size",value:function(t){var e=(t=t||this.options||{}).radius||0;return 2*((e=Math.max(e,e&&t.hoverRadius||0))+(e&&t.borderWidth||0))}},{key:"draw",value:function(t,e){var n=this.options;this.skip||n.radius<.1||!Cw(this,e,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,Bw(t,n,this.x,this.y))}},{key:"getRange",value:function(){var t=this.options||{};return t.radius+t.hitRadius}}])}(fB);function mk(t,e){var n,r,i,a,o,s=t.getProps(["x","y","base","width","height"],e),A=s.x,u=s.y,l=s.base,c=s.width,h=s.height;return t.horizontal?(o=h/2,n=Math.min(A,l),r=Math.max(A,l),i=u-o,a=u+o):(n=A-(o=c/2),r=A+o,i=Math.min(u,l),a=Math.max(u,l)),{left:n,top:i,right:r,bottom:a}}function yk(t,e,n,r){return t?0:H_(e,n,r)}function _k(t){var e=mk(t),n=e.right-e.left,r=e.bottom-e.top,i=function(t,e,n){var r=t.options.borderWidth,i=t.borderSkipped,a=zw(r);return{t:yk(i.top,a.top,0,n),r:yk(i.right,a.right,0,e),b:yk(i.bottom,a.bottom,0,n),l:yk(i.left,a.left,0,e)}}(t,n/2,r/2),a=function(t,e,n){var r=t.getProps(["enableBorderRadius"]).enableBorderRadius,i=t.options.borderRadius,a=Hw(i),o=Math.min(e,n),s=t.borderSkipped,A=r||Yy(i);return{topLeft:yk(!A||s.top||s.left,a.topLeft,0,o),topRight:yk(!A||s.top||s.right,a.topRight,0,o),bottomLeft:yk(!A||s.bottom||s.left,a.bottomLeft,0,o),bottomRight:yk(!A||s.bottom||s.right,a.bottomRight,0,o)}}(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:a},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,a.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(i.b,i.r))}}}}function wk(t,e,n,r){var i=null===e,a=null===n,o=t&&!(i&&a)&&mk(t,r);return o&&(i||V_(e,o.left,o.right))&&(a||V_(n,o.top,o.bottom))}function xk(t,e){t.rect(e.x,e.y,e.w,e.h)}function bk(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,a=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+a,h:t.h+o,radius:t.radius}}hi(gk,"id","point"),hi(gk,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),hi(gk,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var Bk=function(t){function e(t){var n;return oi(this,e),(n=zx(this,e)).options=void 0,n.horizontal=void 0,n.base=void 0,n.width=void 0,n.height=void 0,n.inflateAmount=void 0,t&&Object.assign(n,t),n}return ci(e,t),ai(e,[{key:"draw",value:function(t){var e,n=this.inflateAmount,r=this.options,i=r.borderColor,a=r.backgroundColor,o=_k(this),s=o.inner,A=o.outer,u=(e=A.radius).topLeft||e.topRight||e.bottomLeft||e.bottomRight?Mw:xk;t.save(),A.w===s.w&&A.h===s.h||(t.beginPath(),u(t,bk(A,n,s)),t.clip(),u(t,bk(s,-n,A)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),u(t,bk(s,n)),t.fillStyle=a,t.fill(),t.restore()}},{key:"inRange",value:function(t,e,n){return wk(this,t,e,n)}},{key:"inXRange",value:function(t,e){return wk(this,t,null,e)}},{key:"inYRange",value:function(t,e){return wk(this,null,t,e)}},{key:"getCenterPoint",value:function(t){var e=this.getProps(["x","y","base","horizontal"],t),n=e.x,r=e.y,i=e.base,a=e.horizontal;return{x:a?(n+i)/2:n,y:a?r:(r+i)/2}}},{key:"getRange",value:function(t){return"x"===t?this.width/2:this.height/2}}])}(fB);hi(Bk,"id","bar"),hi(Bk,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),hi(Bk,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var kk=Object.freeze({__proto__:null,ArcElement:ok,BarElement:Bk,LineElement:pk,PointElement:gk}),Ck=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Fk=Ck.map((function(t){return t.replace("rgb(","rgba(").replace(")",", 0.5)")}));function Ek(t){return Ck[t%Ck.length]}function Ik(t){return Fk[t%Fk.length]}function Uk(t){var e=0;return function(n,r){var i=t.getDatasetMeta(r).controller;i instanceof mb?e=function(t,e){return t.backgroundColor=t.data.map((function(){return Ek(e++)})),e}(n,e):i instanceof _b?e=function(t,e){return t.backgroundColor=t.data.map((function(){return Ik(e++)})),e}(n,e):i&&(e=function(t,e){return t.borderColor=Ek(e),t.backgroundColor=Ik(e),++e}(n,e))}}function Sk(t){var e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}var Qk={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout:function(t,e,n){if(n.enabled){var r=t.config,i=r.data.datasets,a=r.options,o=a.elements;if(n.forceOverride||!(Sk(i)||function(t){return t&&(t.borderColor||t.backgroundColor)}(a)||o&&Sk(o))){var s=Uk(t);i.forEach(s)}}}};function Tk(t){if(t._decimated){var e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function Mk(t){t.data.datasets.forEach((function(t){Tk(t)}))}var Dk={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:function(t,e,n){if(n.enabled){var r=t.width;t.data.datasets.forEach((function(e,i){var a=e._data,o=e.indexAxis,s=t.getDatasetMeta(i),A=a||e.data;if("y"!==Kw([o,t.options.indexAxis])&&s.controller.supportsDecimation){var u=t.scales[s.xAxisID];if(("linear"===u.type||"time"===u.type)&&!t.options.parsing){var l=function(t,e){var n=e.length,r=0,i=t.iScale,a=i.getUserBounds(),o=a.min,s=a.max,A=a.minDefined,u=a.maxDefined;return A&&(r=H_(K_(e,i.axis,o).lo,0,n-1)),{start:r,count:u?H_(K_(e,i.axis,s).hi+1,r,n)-r:n-r}}(s,A),c=l.start,h=l.count;if(h<=(n.threshold||4*r))Tk(e);else{var f;switch(qy(a)&&(e._data=A,delete e.data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(t){this._data=t}})),n.algorithm){case"lttb":f=function(t,e,n,r,i){var a=i.samples||r;if(a>=n)return t.slice(e,e+n);var o,s,A,u,l,c=[],h=(n-2)/(a-2),f=0,d=e+n-1,p=e;for(c[f++]=t[p],o=0;o<a-2;o++){var v=0,g=0,m=void 0,y=Math.floor((o+1)*h)+1+e,_=Math.min(Math.floor((o+2)*h)+1,n)+e,w=_-y;for(m=y;m<_;m++)v+=t[m].x,g+=t[m].y;v/=w,g/=w;var x=Math.floor(o*h)+1+e,b=Math.min(Math.floor((o+1)*h)+1,n)+e,B=t[p],k=B.x,C=B.y;for(A=u=-1,m=x;m<b;m++)(u=.5*Math.abs((k-v)*(t[m].y-C)-(k-t[m].x)*(g-C)))>A&&(A=u,s=t[m],l=m);c[f++]=s,p=l}return c[f++]=t[d],c}(A,c,h,r,n);break;case"min-max":f=function(t,e,n,r){var i,a,o,s,A,u,l,c,h,f,d=0,p=0,v=[],g=e+n-1,m=t[e].x,y=t[g].x-m;for(i=e;i<e+n;++i){o=((a=t[i]).x-m)/y*r,s=a.y;var _=0|o;if(_===A)s<h?(h=s,u=i):s>f&&(f=s,l=i),d=(p*d+a.x)/++p;else{var w=i-1;if(!qy(u)&&!qy(l)){var x=Math.min(u,l),b=Math.max(u,l);x!==c&&x!==w&&v.push(Rx(Rx({},t[x]),{},{x:d})),b!==c&&b!==w&&v.push(Rx(Rx({},t[b]),{},{x:d}))}i>0&&w!==c&&v.push(t[w]),v.push(a),A=_,p=0,h=f=s,u=l=c=i}}return v}(A,c,h,r);break;default:throw new Error("Unsupported decimation algorithm '".concat(n.algorithm,"'"))}e._decimated=f}}}}))}else Mk(t)},destroy:function(t){Mk(t)}};function Lk(t,e,n,r){if(!r){var i=e[t],a=n[t];return"angle"===t&&(i=R_(i),a=R_(a)),{property:t,start:i,end:a}}}function Pk(t,e,n){for(;e>t;e--){var r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function Ok(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function Rk(t,e){var n=[],r=!1;return Xy(t)?(r=!0,n=t):n=function(t,e){var n=t||{},r=n.x,i=void 0===r?null:r,a=n.y,o=void 0===a?null:a,s=e.points,A=[];return e.segments.forEach((function(t){var e=t.start,n=t.end;n=Pk(e,n,s);var r=s[e],a=s[n];null!==o?(A.push({x:r.x,y:o}),A.push({x:a.x,y:o})):null!==i&&(A.push({x:i,y:r.y}),A.push({x:i,y:a.y}))})),A}(t,e),n.length?new pk({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function zk(t){return t&&!1!==t.fill}function Hk(t,e,n){var r,i=t[e].fill,a=[e];if(!n)return i;for(;!1!==i&&-1===a.indexOf(i);){if(!Jy(i))return i;if(!(r=t[i]))return!1;if(r.visible)return i;a.push(i),i=r.fill}return!1}function Vk(t,e,n){var r=function(t){var e=t.options,n=e.fill,r=e_(n&&n.target,n);void 0===r&&(r=!!e.backgroundColor);if(!1===r||null===r)return!1;if(!0===r)return"origin";return r}(t);if(Yy(r))return!isNaN(r.value)&&r;var i=parseFloat(r);return Jy(i)&&Math.floor(i)===i?function(t,e,n,r){"-"!==t&&"+"!==t||(n=e+n);if(n===e||n<0||n>=r)return!1;return n}(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function Nk(t,e,n){for(var r=[],i=0;i<n.length;i++){var a=Kk(n[i],e,"x"),o=a.first,s=a.last,A=a.point;if(!(!A||o&&s))if(o)r.unshift(A);else if(t.push(A),!s)break}t.push.apply(t,r)}function Kk(t,e,n){var r=t.interpolate(e,n);if(!r)return{};for(var i=r[n],a=t.segments,o=t.points,s=!1,A=!1,u=0;u<a.length;u++){var l=a[u],c=o[l.start][n],h=o[l.end][n];if(V_(i,c,h)){s=i===c,A=i===h;break}}return{first:s,last:A,point:r}}var Gk=function(){return ai((function t(e){oi(this,t),this.x=e.x,this.y=e.y,this.radius=e.radius}),[{key:"pathSegment",value:function(t,e,n){var r=this.x,i=this.y,a=this.radius;return e=e||{start:0,end:__},t.arc(r,i,a,e.end,e.start,!0),!n.bounds}},{key:"interpolate",value:function(t){var e=this.x,n=this.y,r=this.radius,i=t.angle;return{x:e+Math.cos(i)*r,y:n+Math.sin(i)*r,angle:i}}}])}();function jk(t){var e=t.chart,n=t.fill,r=t.line;if(Jy(n))return function(t,e){var n=t.getDatasetMeta(e),r=n&&t.isDatasetVisible(e);return r?n.dataset:null}(e,n);if("stack"===n)return function(t){var e=t.scale,n=t.index,r=t.line,i=[],a=r.segments,o=r.points,s=function(t,e){for(var n=[],r=t.getMatchingVisibleMetas("line"),i=0;i<r.length;i++){var a=r[i];if(a.index===e)break;a.hidden||n.unshift(a.dataset)}return n}(e,n);s.push(Rk({x:null,y:e.bottom},r));for(var A=0;A<a.length;A++)for(var u=a[A],l=u.start;l<=u.end;l++)Nk(i,o[l],s);return new pk({points:i,options:{}})}(t);if("shape"===n)return!0;var i=function(t){var e=t.scale||{};if(e.getPointPositionForValue)return function(t){var e=t.scale,n=t.fill,r=e.options,i=e.getLabels().length,a=r.reverse?e.max:e.min,o=function(t,e,n){return"start"===t?n:"end"===t?e.options.reverse?e.min:e.max:Yy(t)?t.value:e.getBaseValue()}(n,e,a),s=[];if(r.grid.circular){var A=e.getPointPositionForValue(0,a);return new Gk({x:A.x,y:A.y,radius:e.getDistanceFromCenterForValue(o)})}for(var u=0;u<i;++u)s.push(e.getPointPositionForValue(u,o));return s}(t);return function(t){var e=t.scale,n=void 0===e?{}:e,r=t.fill,i=function(t,e){var n=null;return"start"===t?n=e.bottom:"end"===t?n=e.top:Yy(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}(r,n);if(Jy(i)){var a=n.isHorizontal();return{x:a?i:null,y:a?null:i}}return null}(t)}(t);return i instanceof Gk?i:Rk(i,r)}function $k(t,e,n){var r=jk(e),i=e.line,a=e.scale,o=e.axis,s=i.options,A=s.fill,u=s.backgroundColor,l=A||{},c=l.above,h=void 0===c?u:c,f=l.below,d=void 0===f?u:f;r&&i.points.length&&(Fw(t,n),function(t,e){var n=e.line,r=e.target,i=e.above,a=e.below,o=e.area,s=e.scale,A=n._loop?"angle":e.axis;t.save(),"x"===A&&a!==i&&(Wk(t,r,o.top),Zk(t,{line:n,target:r,color:i,scale:s,property:A}),t.restore(),t.save(),Wk(t,r,o.bottom));Zk(t,{line:n,target:r,color:a,scale:s,property:A}),t.restore()}(t,{line:i,target:r,above:h,below:d,area:n,scale:a,axis:o}),Ew(t))}function Wk(t,e,n){var r=e.segments,i=e.points,a=!0,o=!1;t.beginPath();var s,A=Vx(r);try{for(A.s();!(s=A.n()).done;){var u=s.value,l=u.start,c=u.end,h=i[l],f=i[Pk(l,c,i)];a?(t.moveTo(h.x,h.y),a=!1):(t.lineTo(h.x,n),t.lineTo(h.x,h.y)),(o=!!e.pathSegment(t,u,{move:o}))?t.closePath():t.lineTo(f.x,n)}}catch(t){A.e(t)}finally{A.f()}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function Zk(t,e){var n,r=e.line,i=e.target,a=e.property,o=e.color,s=e.scale,A=function(t,e,n){var r,i=t.segments,a=t.points,o=e.points,s=[],A=Vx(i);try{for(A.s();!(r=A.n()).done;){var u=r.value,l=u.start,c=u.end;c=Pk(l,c,a);var h=Lk(n,a[l],a[c],u.loop);if(e.segments){var f,d=Vx(Mx(e,h));try{for(d.s();!(f=d.n()).done;){var p,v=f.value,g=Lk(n,o[v.start],o[v.end],v.loop),m=Vx(Tx(u,a,g));try{for(m.s();!(p=m.n()).done;){var y=p.value;s.push({source:y,target:v,start:hi({},n,Ok(h,g,"start",Math.max)),end:hi({},n,Ok(h,g,"end",Math.min))})}}catch(t){m.e(t)}finally{m.f()}}}catch(t){d.e(t)}finally{d.f()}}else s.push({source:u,target:h,start:a[l],end:a[c]})}}catch(t){A.e(t)}finally{A.f()}return s}(r,i,a),u=Vx(A);try{for(u.s();!(n=u.n()).done;){var l=n.value,c=l.source,h=l.target,f=l.start,d=l.end,p=c.style,v=(void 0===p?{}:p).backgroundColor,g=void 0===v?o:v,m=!0!==i;t.save(),t.fillStyle=g,qk(t,s,m&&Lk(a,f,d)),t.beginPath();var y=!!r.pathSegment(t,c),_=void 0;if(m){y?t.closePath():Xk(t,i,d,a);var w=!!i.pathSegment(t,h,{move:y,reverse:!0});(_=y&&w)||Xk(t,i,f,a)}t.closePath(),t.fill(_?"evenodd":"nonzero"),t.restore()}}catch(t){u.e(t)}finally{u.f()}}function qk(t,e,n){var r=e.chart.chartArea,i=r.top,a=r.bottom,o=n||{},s=o.property,A=o.start,u=o.end;"x"===s&&(t.beginPath(),t.rect(A,i,u-A,a-i),t.clip())}function Xk(t,e,n,r){var i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var Yk={id:"filler",afterDatasetsUpdate:function(t,e,n){var r,i,a,o,s=(t.data.datasets||[]).length,A=[];for(i=0;i<s;++i)o=null,(a=(r=t.getDatasetMeta(i)).dataset)&&a.options&&a instanceof pk&&(o={visible:t.isDatasetVisible(i),index:i,fill:Vk(a,i,s),chart:t,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=o,A.push(o);for(i=0;i<s;++i)(o=A[i])&&!1!==o.fill&&(o.fill=Hk(A,i,n.propagate))},beforeDraw:function(t,e,n){for(var r="beforeDraw"===n.drawTime,i=t.getSortedVisibleDatasetMetas(),a=t.chartArea,o=i.length-1;o>=0;--o){var s=i[o].$filler;s&&(s.line.updateControlPoints(a,s.axis),r&&s.fill&&$k(t.ctx,s,a))}},beforeDatasetsDraw:function(t,e,n){if("beforeDatasetsDraw"===n.drawTime)for(var r=t.getSortedVisibleDatasetMetas(),i=r.length-1;i>=0;--i){var a=r[i].$filler;zk(a)&&$k(t.ctx,a,t.chartArea)}},beforeDatasetDraw:function(t,e,n){var r=e.meta.$filler;zk(r)&&"beforeDatasetDraw"===n.drawTime&&$k(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},Jk=function(t,e){var n=t.boxHeight,r=void 0===n?e:n,i=t.boxWidth,a=void 0===i?e:i;return t.usePointStyle&&(r=Math.min(r,e),a=t.pointStyleWidth||Math.min(a,e)),{boxWidth:a,boxHeight:r,itemHeight:Math.max(e,r)}},tC=function(t){function e(t){var n;return oi(this,e),(n=zx(this,e))._added=!1,n.legendHitBoxes=[],n._hoveredItem=null,n.doughnutMode=!1,n.chart=t.chart,n.options=t.options,n.ctx=t.ctx,n.legendItems=void 0,n.columnSizes=void 0,n.lineWidths=void 0,n.maxHeight=void 0,n.maxWidth=void 0,n.top=void 0,n.bottom=void 0,n.left=void 0,n.right=void 0,n.height=void 0,n.width=void 0,n._margins=void 0,n.position=void 0,n.weight=void 0,n.fullSize=void 0,n}return ci(e,t),ai(e,[{key:"update",value:function(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}},{key:"setDimensions",value:function(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}},{key:"buildLabels",value:function(){var t=this,e=this.options.labels||{},n=r_(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter((function(n){return e.filter(n,t.chart.data)}))),e.sort&&(n=n.sort((function(n,r){return e.sort(n,r,t.chart.data)}))),this.options.reverse&&n.reverse(),this.legendItems=n}},{key:"fit",value:function(){var t=this.options,e=this.ctx;if(t.display){var n,r,i=t.labels,a=Nw(i.font),o=a.size,s=this._computeTitleHeight(),A=Jk(i,o),u=A.boxWidth,l=A.itemHeight;e.font=a.string,this.isHorizontal()?(n=this.maxWidth,r=this._fitRows(s,o,u,l)+10):(r=this.maxHeight,n=this._fitCols(s,a,u,l)+10),this.width=Math.min(n,t.maxWidth||this.maxWidth),this.height=Math.min(r,t.maxHeight||this.maxHeight)}else this.width=this.height=0}},{key:"_fitRows",value:function(t,e,n,r){var i=this.ctx,a=this.maxWidth,o=this.options.labels.padding,s=this.legendHitBoxes=[],A=this.lineWidths=[0],u=r+o,l=t;i.textAlign="left",i.textBaseline="middle";var c=-1,h=-u;return this.legendItems.forEach((function(t,f){var d=n+e/2+i.measureText(t.text).width;(0===f||A[A.length-1]+d+2*o>a)&&(l+=u,A[A.length-(f>0?0:1)]=0,h+=u,c++),s[f]={left:0,top:h,row:c,width:d,height:r},A[A.length-1]+=d+o})),l}},{key:"_fitCols",value:function(t,e,n,r){var i=this.ctx,a=this.maxHeight,o=this.options.labels.padding,s=this.legendHitBoxes=[],A=this.columnSizes=[],u=a-t,l=o,c=0,h=0,f=0,d=0;return this.legendItems.forEach((function(t,a){var p=function(t,e,n,r,i){var a=function(t,e,n,r){var i=t.text;i&&"string"!=typeof i&&(i=i.reduce((function(t,e){return t.length>e.length?t:e})));return e+n.size/2+r.measureText(i).width}(r,t,e,n),o=function(t,e,n){var r=t;"string"!=typeof e.text&&(r=eC(e,n));return r}(i,r,e.lineHeight);return{itemWidth:a,itemHeight:o}}(n,e,i,t,r),v=p.itemWidth,g=p.itemHeight;a>0&&h+g+2*o>u&&(l+=c+o,A.push({width:c,height:h}),f+=c+o,d++,c=h=0),s[a]={left:f,top:h,col:d,width:v,height:g},c=Math.max(c,v),h+=g+o})),l+=c,A.push({width:c,height:h}),l}},{key:"adjustHitBoxes",value:function(){if(this.options.display){var t=this._computeTitleHeight(),e=this.legendHitBoxes,n=this.options,r=n.align,i=n.labels.padding,a=Ex(n.rtl,this.left,this.width);if(this.isHorizontal()){var o,s=0,A=Y_(r,this.left+i,this.right-this.lineWidths[s]),u=Vx(e);try{for(u.s();!(o=u.n()).done;){var l=o.value;s!==l.row&&(s=l.row,A=Y_(r,this.left+i,this.right-this.lineWidths[s])),l.top+=this.top+t+i,l.left=a.leftForLtr(a.x(A),l.width),A+=l.width+i}}catch(t){u.e(t)}finally{u.f()}}else{var c,h=0,f=Y_(r,this.top+t+i,this.bottom-this.columnSizes[h].height),d=Vx(e);try{for(d.s();!(c=d.n()).done;){var p=c.value;p.col!==h&&(h=p.col,f=Y_(r,this.top+t+i,this.bottom-this.columnSizes[h].height)),p.top=f,p.left+=this.left+i,p.left=a.leftForLtr(a.x(p.left),p.width),f+=p.height+i}}catch(t){d.e(t)}finally{d.f()}}}}},{key:"isHorizontal",value:function(){return"top"===this.options.position||"bottom"===this.options.position}},{key:"draw",value:function(){if(this.options.display){var t=this.ctx;Fw(t,this),this._draw(),Ew(t)}}},{key:"_draw",value:function(){var t,e=this,n=this.options,r=this.columnSizes,i=this.lineWidths,a=this.ctx,o=n.align,s=n.labels,A=yw.color,u=Ex(n.rtl,this.left,this.width),l=Nw(s.font),c=s.padding,h=l.size,f=h/2;this.drawTitle(),a.textAlign=u.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=l.string;var d=Jk(s,h),p=d.boxWidth,v=d.boxHeight,g=d.itemHeight,m=this.isHorizontal(),y=this._computeTitleHeight();t=m?{x:Y_(o,this.left+c,this.right-i[0]),y:this.top+c+y,line:0}:{x:this.left+c,y:Y_(o,this.top+y+c,this.bottom-r[0].height),line:0},Ix(this.ctx,n.textDirection);var _=g+c;this.legendItems.forEach((function(d,w){a.strokeStyle=d.fontColor,a.fillStyle=d.fontColor;var x=a.measureText(d.text).width,b=u.textAlign(d.textAlign||(d.textAlign=s.textAlign)),B=p+f+x,k=t.x,C=t.y;if(u.setWidth(e.width),m?w>0&&k+B+c>e.right&&(C=t.y+=_,t.line++,k=t.x=Y_(o,e.left+c,e.right-i[t.line])):w>0&&C+_>e.bottom&&(k=t.x=k+r[t.line].width+c,t.line++,C=t.y=Y_(o,e.top+y+c,e.bottom-r[t.line].height)),function(t,e,n){if(!(isNaN(p)||p<=0||isNaN(v)||v<0)){a.save();var r=e_(n.lineWidth,1);if(a.fillStyle=e_(n.fillStyle,A),a.lineCap=e_(n.lineCap,"butt"),a.lineDashOffset=e_(n.lineDashOffset,0),a.lineJoin=e_(n.lineJoin,"miter"),a.lineWidth=r,a.strokeStyle=e_(n.strokeStyle,A),a.setLineDash(e_(n.lineDash,[])),s.usePointStyle){var i={radius:v*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},o=u.xPlus(t,p/2);kw(a,i,o,e+f,s.pointStyleWidth&&p)}else{var l=e+Math.max((h-v)/2,0),c=u.leftForLtr(t,p),d=Hw(n.borderRadius);a.beginPath(),Object.values(d).some((function(t){return 0!==t}))?Mw(a,{x:c,y:l,w:p,h:v,radius:d}):a.rect(c,l,p,v),a.fill(),0!==r&&a.stroke()}a.restore()}}(u.x(k),C,d),k=function(t,e,n,r){return t===(r?"left":"right")?n:"center"===t?(e+n)/2:e}(b,k+p+f,m?k+B:e.right,n.rtl),function(t,e,n){Tw(a,n.text,t,e+g/2,l,{strikethrough:n.hidden,textAlign:u.textAlign(n.textAlign)})}(u.x(k),C,d),m)t.x+=B+c;else if("string"!=typeof d.text){var F=l.lineHeight;t.y+=eC(d,F)+c}else t.y+=_})),Ux(this.ctx,n.textDirection)}},{key:"drawTitle",value:function(){var t=this.options,e=t.title,n=Nw(e.font),r=Vw(e.padding);if(e.display){var i,a=Ex(t.rtl,this.left,this.width),o=this.ctx,s=e.position,A=n.size/2,u=r.top+A,l=this.left,c=this.width;if(this.isHorizontal())c=Math.max.apply(Math,Di(this.lineWidths)),i=this.top+u,l=Y_(t.align,l,this.right-c);else{var h=this.columnSizes.reduce((function(t,e){return Math.max(t,e.height)}),0);i=u+Y_(t.align,this.top,this.bottom-h-t.labels.padding-this._computeTitleHeight())}var f=Y_(s,l,l+c);o.textAlign=a.textAlign(X_(s)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=n.string,Tw(o,e.text,f,i,n)}}},{key:"_computeTitleHeight",value:function(){var t=this.options.title,e=Nw(t.font),n=Vw(t.padding);return t.display?e.lineHeight+n.height:0}},{key:"_getLegendItemAt",value:function(t,e){var n,r,i;if(V_(t,this.left,this.right)&&V_(e,this.top,this.bottom))for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(V_(t,(r=i[n]).left,r.left+r.width)&&V_(e,r.top,r.top+r.height))return this.legendItems[n];return null}},{key:"handleEvent",value:function(t){var e=this.options;if(function(t,e){if(("mousemove"===t||"mouseout"===t)&&(e.onHover||e.onLeave))return!0;if(e.onClick&&("click"===t||"mouseup"===t))return!0;return!1}(t.type,e)){var n=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){var r=this._hoveredItem,i=function(t,e){return null!==t&&null!==e&&t.datasetIndex===e.datasetIndex&&t.index===e.index}(r,n);r&&!i&&r_(e.onLeave,[t,r,this],this),this._hoveredItem=n,n&&!i&&r_(e.onHover,[t,n,this],this)}else n&&r_(e.onClick,[t,n,this],this)}}}])}(fB);function eC(t,e){return e*(t.text?t.text.length:0)}var nC={id:"legend",_element:tC,start:function(t,e,n){var r=t.legend=new tC({ctx:t.ctx,options:n,chart:t});Wb(t,r,n),jb(t,r)},stop:function(t){$b(t,t.legend),delete t.legend},beforeUpdate:function(t,e,n){var r=t.legend;Wb(t,r,n),r.options=n},afterUpdate:function(t){var e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent:function(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick:function(t,e,n){var r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:function(t){return t.chart.options.color},boxWidth:40,padding:10,generateLabels:function(t){var e=t.data.datasets,n=t.legend.options.labels,r=n.usePointStyle,i=n.pointStyle,a=n.textAlign,o=n.color,s=n.useBorderRadius,A=n.borderRadius;return t._getSortedDatasetMetas().map((function(t){var n=t.controller.getStyle(r?0:void 0),u=Vw(n.borderWidth);return{text:e[t.index].label,fillStyle:n.backgroundColor,fontColor:o,hidden:!t.visible,lineCap:n.borderCapStyle,lineDash:n.borderDash,lineDashOffset:n.borderDashOffset,lineJoin:n.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:n.borderColor,pointStyle:i||n.pointStyle,rotation:n.rotation,textAlign:a||n.textAlign,borderRadius:s&&(A||n.borderRadius),datasetIndex:t.index}}),this)}},title:{color:function(t){return t.chart.options.color},display:!1,position:"center",text:""}},descriptors:{_scriptable:function(t){return!t.startsWith("on")},labels:{_scriptable:function(t){return!["generateLabels","filter","sort"].includes(t)}}}},rC=function(t){function e(t){var n;return oi(this,e),(n=zx(this,e)).chart=t.chart,n.options=t.options,n.ctx=t.ctx,n._padding=void 0,n.top=void 0,n.bottom=void 0,n.left=void 0,n.right=void 0,n.width=void 0,n.height=void 0,n.position=void 0,n.weight=void 0,n.fullSize=void 0,n}return ci(e,t),ai(e,[{key:"update",value:function(t,e){var n=this.options;if(this.left=0,this.top=0,n.display){this.width=this.right=t,this.height=this.bottom=e;var r=Xy(n.text)?n.text.length:1;this._padding=Vw(n.padding);var i=r*Nw(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}else this.width=this.height=this.right=this.bottom=0}},{key:"isHorizontal",value:function(){var t=this.options.position;return"top"===t||"bottom"===t}},{key:"_drawArgs",value:function(t){var e,n,r,i=this.top,a=this.left,o=this.bottom,s=this.right,A=this.options,u=A.align,l=0;return this.isHorizontal()?(n=Y_(u,a,s),r=i+t,e=s-a):("left"===A.position?(n=a+t,r=Y_(u,o,i),l=-.5*y_):(n=s-t,r=Y_(u,i,o),l=.5*y_),e=o-i),{titleX:n,titleY:r,maxWidth:e,rotation:l}}},{key:"draw",value:function(){var t=this.ctx,e=this.options;if(e.display){var n=Nw(e.font),r=n.lineHeight/2+this._padding.top,i=this._drawArgs(r),a=i.titleX,o=i.titleY,s=i.maxWidth,A=i.rotation;Tw(t,e.text,0,0,n,{color:e.color,maxWidth:s,rotation:A,textAlign:X_(e.align),textBaseline:"middle",translation:[a,o]})}}}])}(fB);var iC={id:"title",_element:rC,start:function(t,e,n){!function(t,e){var n=new rC({ctx:t.ctx,options:e,chart:t});Wb(t,n,e),jb(t,n),t.titleBlock=n}(t,n)},stop:function(t){var e=t.titleBlock;$b(t,e),delete t.titleBlock},beforeUpdate:function(t,e,n){var r=t.titleBlock;Wb(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},aC=new WeakMap,oC={id:"subtitle",start:function(t,e,n){var r=new rC({ctx:t.ctx,options:n,chart:t});Wb(t,r,n),jb(t,r),aC.set(t,r)},stop:function(t){$b(t,aC.get(t)),aC.delete(t)},beforeUpdate:function(t,e,n){var r=aC.get(t);Wb(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},sC={average:function(t){if(!t.length)return!1;var e,n,r=new Set,i=0,a=0;for(e=0,n=t.length;e<n;++e){var o=t[e].element;if(o&&o.hasValue()){var s=o.tooltipPosition();r.add(s.x),i+=s.y,++a}}return{x:Di(r).reduce((function(t,e){return t+e}))/r.size,y:i/a}},nearest:function(t,e){if(!t.length)return!1;var n,r,i,a=e.x,o=e.y,s=Number.POSITIVE_INFINITY;for(n=0,r=t.length;n<r;++n){var A=t[n].element;if(A&&A.hasValue()){var u=P_(e,A.getCenterPoint());u<s&&(s=u,i=A)}}if(i){var l=i.tooltipPosition();a=l.x,o=l.y}return{x:a,y:o}}};function AC(t,e){return e&&(Xy(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function uC(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function lC(t,e){var n=e.element,r=e.datasetIndex,i=e.index,a=t.getDatasetMeta(r).controller,o=a.getLabelAndValue(i),s=o.label,A=o.value;return{chart:t,label:s,parsed:a.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:A,dataset:a.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function cC(t,e){var n=t.chart.ctx,r=t.body,i=t.footer,a=t.title,o=e.boxWidth,s=e.boxHeight,A=Nw(e.bodyFont),u=Nw(e.titleFont),l=Nw(e.footerFont),c=a.length,h=i.length,f=r.length,d=Vw(e.padding),p=d.height,v=0,g=r.reduce((function(t,e){return t+e.before.length+e.lines.length+e.after.length}),0);(g+=t.beforeBody.length+t.afterBody.length,c&&(p+=c*u.lineHeight+(c-1)*e.titleSpacing+e.titleMarginBottom),g)&&(p+=f*(e.displayColors?Math.max(s,A.lineHeight):A.lineHeight)+(g-f)*A.lineHeight+(g-1)*e.bodySpacing);h&&(p+=e.footerMarginTop+h*l.lineHeight+(h-1)*e.footerSpacing);var m=0,y=function(t){v=Math.max(v,n.measureText(t).width+m)};return n.save(),n.font=u.string,i_(t.title,y),n.font=A.string,i_(t.beforeBody.concat(t.afterBody),y),m=e.displayColors?o+2+e.boxPadding:0,i_(r,(function(t){i_(t.before,y),i_(t.lines,y),i_(t.after,y)})),m=0,n.font=l.string,i_(t.footer,y),n.restore(),{width:v+=d.width,height:p}}function hC(t,e,n,r){var i=n.x,a=n.width,o=t.width,s=t.chartArea,A=s.left,u=s.right,l="center";return"center"===r?l=i<=(A+u)/2?"left":"right":i<=a/2?l="left":i>=o-a/2&&(l="right"),function(t,e,n,r){var i=r.x,a=r.width,o=n.caretSize+n.caretPadding;return"left"===t&&i+a+o>e.width||"right"===t&&i-a-o<0||void 0}(l,t,e,n)&&(l="center"),l}function fC(t,e,n){var r=n.yAlign||e.yAlign||function(t,e){var n=e.y,r=e.height;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}(t,n);return{xAlign:n.xAlign||e.xAlign||hC(t,e,n,r),yAlign:r}}function dC(t,e,n,r){var i=t.caretSize,a=t.caretPadding,o=t.cornerRadius,s=n.xAlign,A=n.yAlign,u=i+a,l=Hw(o),c=l.topLeft,h=l.topRight,f=l.bottomLeft,d=l.bottomRight,p=function(t,e){var n=t.x,r=t.width;return"right"===e?n-=r:"center"===e&&(n-=r/2),n}(e,s),v=function(t,e,n){var r=t.y,i=t.height;return"top"===e?r+=n:r-="bottom"===e?i+n:i/2,r}(e,A,u);return"center"===A?"left"===s?p+=u:"right"===s&&(p-=u):"left"===s?p-=Math.max(c,f)+i:"right"===s&&(p+=Math.max(h,d)+i),{x:H_(p,0,r.width-e.width),y:H_(v,0,r.height-e.height)}}function pC(t,e,n){var r=Vw(n.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-r.right:t.x+r.left}function vC(t){return AC([],uC(t))}function gC(t,e){var n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}var mC={beforeTitle:Wy,title:function(t){if(t.length>0){var e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Wy,beforeBody:Wy,beforeLabel:Wy,label:function(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;var e=t.dataset.label||"";e&&(e+=": ");var n=t.formattedValue;return qy(n)||(e+=n),e},labelColor:function(t){var e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor:function(){return this.options.bodyColor},labelPointStyle:function(t){var e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Wy,afterBody:Wy,beforeFooter:Wy,footer:Wy,afterFooter:Wy};function yC(t,e,n,r){var i=t[e].call(n,r);return void 0===i?mC[e].call(n,r):i}var _C=function(t){function e(t){var n;return oi(this,e),(n=zx(this,e)).opacity=0,n._active=[],n._eventPosition=void 0,n._size=void 0,n._cachedAnimations=void 0,n._tooltipItems=[],n.$animations=void 0,n.$context=void 0,n.chart=t.chart,n.options=t.options,n.dataPoints=void 0,n.title=void 0,n.beforeBody=void 0,n.body=void 0,n.afterBody=void 0,n.footer=void 0,n.xAlign=void 0,n.yAlign=void 0,n.x=void 0,n.y=void 0,n.height=void 0,n.width=void 0,n.caretX=void 0,n.caretY=void 0,n.labelColors=void 0,n.labelPointStyles=void 0,n.labelTextColors=void 0,n}return ci(e,t),ai(e,[{key:"initialize",value:function(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}},{key:"_resolveAnimations",value:function(){var t=this._cachedAnimations;if(t)return t;var e=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&e.options.animation&&n.animations,i=new Zx(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}},{key:"getContext",value:function(){return this.$context||(this.$context=(t=this.chart.getContext(),e=this,n=this._tooltipItems,Gw(t,{tooltip:e,tooltipItems:n,type:"tooltip"})));var t,e,n}},{key:"getTitle",value:function(t,e){var n=e.callbacks,r=yC(n,"beforeTitle",this,t),i=yC(n,"title",this,t),a=yC(n,"afterTitle",this,t),o=[];return o=AC(o,uC(r)),o=AC(o,uC(i)),o=AC(o,uC(a))}},{key:"getBeforeBody",value:function(t,e){return vC(yC(e.callbacks,"beforeBody",this,t))}},{key:"getBody",value:function(t,e){var n=this,r=e.callbacks,i=[];return i_(t,(function(t){var e={before:[],lines:[],after:[]},a=gC(r,t);AC(e.before,uC(yC(a,"beforeLabel",n,t))),AC(e.lines,yC(a,"label",n,t)),AC(e.after,uC(yC(a,"afterLabel",n,t))),i.push(e)})),i}},{key:"getAfterBody",value:function(t,e){return vC(yC(e.callbacks,"afterBody",this,t))}},{key:"getFooter",value:function(t,e){var n=e.callbacks,r=yC(n,"beforeFooter",this,t),i=yC(n,"footer",this,t),a=yC(n,"afterFooter",this,t),o=[];return o=AC(o,uC(r)),o=AC(o,uC(i)),o=AC(o,uC(a))}},{key:"_createItems",value:function(t){var e,n,r=this,i=this._active,a=this.chart.data,o=[],s=[],A=[],u=[];for(e=0,n=i.length;e<n;++e)u.push(lC(this.chart,i[e]));return t.filter&&(u=u.filter((function(e,n,r){return t.filter(e,n,r,a)}))),t.itemSort&&(u=u.sort((function(e,n){return t.itemSort(e,n,a)}))),i_(u,(function(e){var n=gC(t.callbacks,e);o.push(yC(n,"labelColor",r,e)),s.push(yC(n,"labelPointStyle",r,e)),A.push(yC(n,"labelTextColor",r,e))})),this.labelColors=o,this.labelPointStyles=s,this.labelTextColors=A,this.dataPoints=u,u}},{key:"update",value:function(t,e){var n,r=this.options.setContext(this.getContext()),i=this._active,a=[];if(i.length){var o=sC[r.position].call(this,i,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);var s=this._size=cC(this,r),A=Object.assign({},o,s),u=fC(this.chart,r,A),l=dC(r,A,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,n={opacity:1,x:l.x,y:l.y,width:s.width,height:s.height,caretX:o.x,caretY:o.y}}else 0!==this.opacity&&(n={opacity:0});this._tooltipItems=a,this.$context=void 0,n&&this._resolveAnimations().update(this,n),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:e})}},{key:"drawCaret",value:function(t,e,n,r){var i=this.getCaretPosition(t,n,r);e.lineTo(i.x1,i.y1),e.lineTo(i.x2,i.y2),e.lineTo(i.x3,i.y3)}},{key:"getCaretPosition",value:function(t,e,n){var r,i,a,o,s,A,u=this.xAlign,l=this.yAlign,c=n.caretSize,h=Hw(n.cornerRadius),f=h.topLeft,d=h.topRight,p=h.bottomLeft,v=h.bottomRight,g=t.x,m=t.y,y=e.width,_=e.height;return"center"===l?(s=m+_/2,"left"===u?(i=(r=g)-c,o=s+c,A=s-c):(i=(r=g+y)+c,o=s-c,A=s+c),a=r):(i="left"===u?g+Math.max(f,p)+c:"right"===u?g+y-Math.max(d,v)-c:this.caretX,"top"===l?(s=(o=m)-c,r=i-c,a=i+c):(s=(o=m+_)+c,r=i+c,a=i-c),A=o),{x1:r,x2:i,x3:a,y1:o,y2:s,y3:A}}},{key:"drawTitle",value:function(t,e,n){var r,i,a,o=this.title,s=o.length;if(s){var A=Ex(n.rtl,this.x,this.width);for(t.x=pC(this,n.titleAlign,n),e.textAlign=A.textAlign(n.titleAlign),e.textBaseline="middle",r=Nw(n.titleFont),i=n.titleSpacing,e.fillStyle=n.titleColor,e.font=r.string,a=0;a<s;++a)e.fillText(o[a],A.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+i,a+1===s&&(t.y+=n.titleMarginBottom-i)}}},{key:"_drawColorBox",value:function(t,e,n,r,i){var a=this.labelColors[n],o=this.labelPointStyles[n],s=i.boxHeight,A=i.boxWidth,u=Nw(i.bodyFont),l=pC(this,"left",i),c=r.x(l),h=s<u.lineHeight?(u.lineHeight-s)/2:0,f=e.y+h;if(i.usePointStyle){var d={radius:Math.min(A,s)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},p=r.leftForLtr(c,A)+A/2,v=f+s/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,Bw(t,d,p,v),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,Bw(t,d,p,v)}else{t.lineWidth=Yy(a.borderWidth)?Math.max.apply(Math,Di(Object.values(a.borderWidth))):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;var g=r.leftForLtr(c,A),m=r.leftForLtr(r.xPlus(c,1),A-2),y=Hw(a.borderRadius);Object.values(y).some((function(t){return 0!==t}))?(t.beginPath(),t.fillStyle=i.multiKeyBackground,Mw(t,{x:g,y:f,w:A,h:s,radius:y}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),Mw(t,{x:m,y:f+1,w:A-2,h:s-2,radius:y}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(g,f,A,s),t.strokeRect(g,f,A,s),t.fillStyle=a.backgroundColor,t.fillRect(m,f+1,A-2,s-2))}t.fillStyle=this.labelTextColors[n]}},{key:"drawBody",value:function(t,e,n){var r,i,a,o,s,A,u,l=this.body,c=n.bodySpacing,h=n.bodyAlign,f=n.displayColors,d=n.boxHeight,p=n.boxWidth,v=n.boxPadding,g=Nw(n.bodyFont),m=g.lineHeight,y=0,_=Ex(n.rtl,this.x,this.width),w=function(n){e.fillText(n,_.x(t.x+y),t.y+m/2),t.y+=m+c},x=_.textAlign(h);for(e.textAlign=h,e.textBaseline="middle",e.font=g.string,t.x=pC(this,x,n),e.fillStyle=n.bodyColor,i_(this.beforeBody,w),y=f&&"right"!==x?"center"===h?p/2+v:p+2+v:0,o=0,A=l.length;o<A;++o){for(r=l[o],i=this.labelTextColors[o],e.fillStyle=i,i_(r.before,w),a=r.lines,f&&a.length&&(this._drawColorBox(e,t,o,_,n),m=Math.max(g.lineHeight,d)),s=0,u=a.length;s<u;++s)w(a[s]),m=g.lineHeight;i_(r.after,w)}y=0,m=g.lineHeight,i_(this.afterBody,w),t.y-=c}},{key:"drawFooter",value:function(t,e,n){var r,i,a=this.footer,o=a.length;if(o){var s=Ex(n.rtl,this.x,this.width);for(t.x=pC(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=s.textAlign(n.footerAlign),e.textBaseline="middle",r=Nw(n.footerFont),e.fillStyle=n.footerColor,e.font=r.string,i=0;i<o;++i)e.fillText(a[i],s.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+n.footerSpacing}}},{key:"drawBackground",value:function(t,e,n,r){var i=this.xAlign,a=this.yAlign,o=t.x,s=t.y,A=n.width,u=n.height,l=Hw(r.cornerRadius),c=l.topLeft,h=l.topRight,f=l.bottomLeft,d=l.bottomRight;e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.beginPath(),e.moveTo(o+c,s),"top"===a&&this.drawCaret(t,e,n,r),e.lineTo(o+A-h,s),e.quadraticCurveTo(o+A,s,o+A,s+h),"center"===a&&"right"===i&&this.drawCaret(t,e,n,r),e.lineTo(o+A,s+u-d),e.quadraticCurveTo(o+A,s+u,o+A-d,s+u),"bottom"===a&&this.drawCaret(t,e,n,r),e.lineTo(o+f,s+u),e.quadraticCurveTo(o,s+u,o,s+u-f),"center"===a&&"left"===i&&this.drawCaret(t,e,n,r),e.lineTo(o,s+c),e.quadraticCurveTo(o,s,o+c,s),e.closePath(),e.fill(),r.borderWidth>0&&e.stroke()}},{key:"_updateAnimationTarget",value:function(t){var e=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){var a=sC[t.position].call(this,this._active,this._eventPosition);if(!a)return;var o=this._size=cC(this,t),s=Object.assign({},a,this._size),A=fC(e,t,s),u=dC(t,s,A,e);r._to===u.x&&i._to===u.y||(this.xAlign=A.xAlign,this.yAlign=A.yAlign,this.width=o.width,this.height=o.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,u))}}},{key:"_willRender",value:function(){return!!this.opacity}},{key:"draw",value:function(t){var e=this.options.setContext(this.getContext()),n=this.opacity;if(n){this._updateAnimationTarget(e);var r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;var a=Vw(e.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&o&&(t.save(),t.globalAlpha=n,this.drawBackground(i,t,r,e),Ix(t,e.textDirection),i.y+=a.top,this.drawTitle(i,t,e),this.drawBody(i,t,e),this.drawFooter(i,t,e),Ux(t,e.textDirection),t.restore())}}},{key:"getActiveElements",value:function(){return this._active||[]}},{key:"setActiveElements",value:function(t,e){var n=this,r=this._active,i=t.map((function(t){var e=t.datasetIndex,r=t.index,i=n.chart.getDatasetMeta(e);if(!i)throw new Error("Cannot find a dataset at index "+e);return{datasetIndex:e,element:i.data[r],index:r}})),a=!a_(r,i),o=this._positionChanged(i,e);(a||o)&&(this._active=i,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}},{key:"handleEvent",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;var r=this.options,i=this._active||[],a=this._getActiveElements(t,i,e,n),o=this._positionChanged(a,t),s=e||!a_(a,i)||o;return s&&(this._active=a,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),s}},{key:"_getActiveElements",value:function(t,e,n,r){var i=this,a=this.options;if("mouseout"===t.type)return[];if(!r)return e.filter((function(t){return i.chart.data.datasets[t.datasetIndex]&&void 0!==i.chart.getDatasetMeta(t.datasetIndex).controller.getParsed(t.index)}));var o=this.chart.getElementsAtEventForMode(t,a.mode,a,n);return a.reverse&&o.reverse(),o}},{key:"_positionChanged",value:function(t,e){var n=this.caretX,r=this.caretY,i=this.options,a=sC[i.position].call(this,t,e);return!1!==a&&(n!==a.x||r!==a.y)}}])}(fB);hi(_C,"positioners",sC);var wC={id:"tooltip",_element:_C,positioners:sC,afterInit:function(t,e,n){n&&(t.tooltip=new _C({chart:t,options:n}))},beforeUpdate:function(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset:function(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw:function(t){var e=t.tooltip;if(e&&e._willRender()){var n={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",Rx(Rx({},n),{},{cancelable:!0})))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent:function(t,e){if(t.tooltip){var n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:function(t,e){return e.bodyFont.size},boxWidth:function(t,e){return e.bodyFont.size},multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:mC},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:function(t){return"filter"!==t&&"itemSort"!==t&&"external"!==t},_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},xC=Object.freeze({__proto__:null,Colors:Qk,Decimation:Dk,Filler:Yk,Legend:nC,SubTitle:oC,Title:iC,Tooltip:wC});function bC(t,e,n,r){var i=t.indexOf(e);return-1===i?function(t,e,n,r){return"string"==typeof e?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n}(t,e,n,r):i!==t.lastIndexOf(e)?n:i}function BC(t){var e=this.getLabels();return t>=0&&t<e.length?e[t]:t}var kC=function(t){function e(t){var n;return oi(this,e),(n=zx(this,e,[t]))._startValue=void 0,n._valueRange=0,n._addedLabels=[],n}return ci(e,t),ai(e,[{key:"init",value:function(t){var n=this._addedLabels;if(n.length){var r,i=this.getLabels(),a=Vx(n);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.index,A=o.label;i[s]===A&&i.splice(s,1)}}catch(t){a.e(t)}finally{a.f()}this._addedLabels=[]}Li(ui(e.prototype),"init",this).call(this,t)}},{key:"parse",value:function(t,e){if(qy(t))return null;var n=this.getLabels();return function(t,e){return null===t?null:H_(Math.round(t),0,e)}(e=isFinite(e)&&n[e]===t?e:bC(n,t,e_(e,t),this._addedLabels),n.length-1)}},{key:"determineDataLimits",value:function(){var t=this.getUserBounds(),e=t.minDefined,n=t.maxDefined,r=this.getMinMax(!0),i=r.min,a=r.max;"ticks"===this.options.bounds&&(e||(i=0),n||(a=this.getLabels().length-1)),this.min=i,this.max=a}},{key:"buildTicks",value:function(){var t=this.min,e=this.max,n=this.options.offset,r=[],i=this.getLabels();i=0===t&&e===i.length-1?i:i.slice(t,e+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(var a=t;a<=e;a++)r.push({value:a});return r}},{key:"getLabelForValue",value:function(t){return BC.call(this,t)}},{key:"configure",value:function(){Li(ui(e.prototype),"configure",this).call(this),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}},{key:"getPixelForValue",value:function(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}},{key:"getPixelForTick",value:function(t){var e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}},{key:"getValueForPixel",value:function(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}},{key:"getBasePixel",value:function(){return this.bottom}}])}(bB);function CC(t,e){var n,r,i,a,o,s,A,u=[],l=t.bounds,c=t.step,h=t.min,f=t.max,d=t.precision,p=t.count,v=t.maxTicks,g=t.maxDigits,m=t.includeBounds,y=c||1,_=v-1,w=e.min,x=e.max,b=!qy(h),B=!qy(f),k=!qy(p),C=(x-w)/(g+1),F=U_((x-w)/_/y)*y;if(F<1e-14&&!b&&!B)return[{value:w},{value:x}];(a=Math.ceil(x/F)-Math.floor(w/F))>_&&(F=U_(a*F/_/y)*y),qy(d)||(n=Math.pow(10,d),F=Math.ceil(F*n)/n),"ticks"===l?(r=Math.floor(w/F)*F,i=Math.ceil(x/F)*F):(r=w,i=x),b&&B&&c&&(o=(f-h)/c,s=F/1e3,(A=Math.round(o))-s<=o&&A+s>=o)?(F=(f-h)/(a=Math.round(Math.min((f-h)/F,v))),r=h,i=f):k?F=((i=B?f:i)-(r=b?h:r))/(a=p-1):a=I_(a=(i-r)/F,Math.round(a),F/1e3)?Math.round(a):Math.ceil(a);var E=Math.max(D_(F),D_(r));n=Math.pow(10,qy(d)?E:d),r=Math.round(r*n)/n,i=Math.round(i*n)/n;var I=0;for(b&&(m&&r!==h?(u.push({value:h}),r<h&&I++,I_(Math.round((r+I*F)*n)/n,h,FC(h,C,t))&&I++):r<h&&I++);I<a;++I){var U=Math.round((r+I*F)*n)/n;if(B&&U>f)break;u.push({value:U})}return B&&m&&i!==f?u.length&&I_(u[u.length-1].value,f,FC(f,C,t))?u[u.length-1].value=f:u.push({value:f}):B&&i!==f||u.push({value:i}),u}function FC(t,e,n){var r=n.horizontal,i=T_(n.minRotation),a=(r?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/a,o)}hi(kC,"id","category"),hi(kC,"defaults",{ticks:{callback:BC}});var EC=function(t){function e(t){var n;return oi(this,e),(n=zx(this,e,[t])).start=void 0,n.end=void 0,n._startValue=void 0,n._endValue=void 0,n._valueRange=0,n}return ci(e,t),ai(e,[{key:"parse",value:function(t,e){return qy(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}},{key:"handleTickRangeOptions",value:function(){var t=this.options.beginAtZero,e=this.getUserBounds(),n=e.minDefined,r=e.maxDefined,i=this.min,a=this.max,o=function(t){return i=n?i:t},s=function(t){return a=r?a:t};if(t){var A=E_(i),u=E_(a);A<0&&u<0?s(0):A>0&&u>0&&o(0)}if(i===a){var l=0===a?1:Math.abs(.05*a);s(a+l),t||o(i-l)}this.min=i,this.max=a}},{key:"getTickLimit",value:function(){var t,e=this.options.ticks,n=e.maxTicksLimit,r=e.stepSize;return r?(t=Math.ceil(this.max/r)-Math.floor(this.min/r)+1)>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(r," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}},{key:"computeTickLimit",value:function(){return Number.POSITIVE_INFINITY}},{key:"buildTicks",value:function(){var t=this.options,e=t.ticks,n=this.getTickLimit(),r=CC({maxTicks:n=Math.max(2,n),bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&Q_(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}},{key:"configure",value:function(){var t=this.ticks,n=this.min,r=this.max;if(Li(ui(e.prototype),"configure",this).call(this),this.options.offset&&t.length){var i=(r-n)/Math.max(t.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}},{key:"getLabelForValue",value:function(t){return cw(t,this.chart.options.locale,this.options.ticks.format)}}])}(bB),IC=function(t){function e(){return oi(this,e),zx(this,e,arguments)}return ci(e,t),ai(e,[{key:"determineDataLimits",value:function(){var t=this.getMinMax(!0),e=t.min,n=t.max;this.min=Jy(e)?e:0,this.max=Jy(n)?n:1,this.handleTickRangeOptions()}},{key:"computeTickLimit",value:function(){var t=this.isHorizontal(),e=t?this.width:this.height,n=T_(this.options.ticks.minRotation),r=(t?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,i.lineHeight/r))}},{key:"getPixelForValue",value:function(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}},{key:"getValueForPixel",value:function(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}])}(EC);hi(IC,"id","linear"),hi(IC,"defaults",{ticks:{callback:fw.formatters.numeric}});var UC=function(t){return Math.floor(F_(t))},SC=function(t,e){return Math.pow(10,UC(t)+e)};function QC(t){return 1===t/Math.pow(10,UC(t))}function TC(t,e,n){var r=Math.pow(10,n),i=Math.floor(t/r);return Math.ceil(e/r)-i}function MC(t,e){var n=e.min,r=e.max;n=t_(t.min,n);for(var i=[],a=UC(n),o=function(t,e){for(var n=UC(e-t);TC(t,e,n)>10;)n++;for(;TC(t,e,n)<10;)n--;return Math.min(n,UC(t))}(n,r),s=o<0?Math.pow(10,Math.abs(o)):1,A=Math.pow(10,o),u=a>o?Math.pow(10,a):0,l=Math.round((n-u)*s)/s,c=Math.floor((n-u)/A/10)*A*10,h=Math.floor((l-c)/Math.pow(10,o)),f=t_(t.min,Math.round((u+c+h*Math.pow(10,o))*s)/s);f<r;)i.push({value:f,major:QC(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(h=2,s=++o>=0?1:s),f=Math.round((u+c+h*Math.pow(10,o))*s)/s;var d=t_(t.max,f);return i.push({value:d,major:QC(d),significand:h}),i}var DC=function(t){function e(t){var n;return oi(this,e),(n=zx(this,e,[t])).start=void 0,n.end=void 0,n._startValue=void 0,n._valueRange=0,n}return ci(e,t),ai(e,[{key:"parse",value:function(t,e){var n=EC.prototype.parse.apply(this,[t,e]);if(0!==n)return Jy(n)&&n>0?n:null;this._zero=!0}},{key:"determineDataLimits",value:function(){var t=this.getMinMax(!0),e=t.min,n=t.max;this.min=Jy(e)?Math.max(0,e):null,this.max=Jy(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Jy(this._userMin)&&(this.min=e===SC(this.min,0)?SC(this.min,-1):SC(this.min,0)),this.handleTickRangeOptions()}},{key:"handleTickRangeOptions",value:function(){var t=this.getUserBounds(),e=t.minDefined,n=t.maxDefined,r=this.min,i=this.max,a=function(t){return r=e?r:t},o=function(t){return i=n?i:t};r===i&&(r<=0?(a(1),o(10)):(a(SC(r,-1)),o(SC(i,1)))),r<=0&&a(SC(i,-1)),i<=0&&o(SC(r,1)),this.min=r,this.max=i}},{key:"buildTicks",value:function(){var t=this.options,e=MC({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&Q_(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}},{key:"getLabelForValue",value:function(t){return void 0===t?"0":cw(t,this.chart.options.locale,this.options.ticks.format)}},{key:"configure",value:function(){var t=this.min;Li(ui(e.prototype),"configure",this).call(this),this._startValue=F_(t),this._valueRange=F_(this.max)-F_(t)}},{key:"getPixelForValue",value:function(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(F_(t)-this._startValue)/this._valueRange)}},{key:"getValueForPixel",value:function(t){var e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}])}(bB);function LC(t){var e=t.ticks;if(e.display&&t.display){var n=Vw(e.backdropPadding);return e_(e.font&&e.font.size,yw.font.size)+n.height}return 0}function PC(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function OC(t){for(var e,n,r,i={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},a=Object.assign({},i),o=[],s=[],A=t._pointLabels.length,u=t.options.pointLabels,l=u.centerPointLabels?y_/A:0,c=0;c<A;c++){var h=u.setContext(t.getPointLabelContext(c));s[c]=h.padding;var f=t.getPointPosition(c,t.drawingArea+s[c],l),d=Nw(h.font),p=(e=t.ctx,n=d,r=Xy(r=t._pointLabels[c])?r:[r],{w:ww(e,n.string,r),h:r.length*n.lineHeight});o[c]=p;var v=R_(t.getIndexAngle(c)+l),g=Math.round(M_(v));RC(a,i,v,PC(g,f.x,p.w,0,180),PC(g,f.y,p.h,90,270))}t.setCenterPoint(i.l-a.l,a.r-i.r,i.t-a.t,a.b-i.b),t._pointLabelItems=function(t,e,n){for(var r,i=[],a=t._pointLabels.length,o=t.options,s=o.pointLabels,A=s.centerPointLabels,u=s.display,l={extra:LC(o)/2,additionalAngle:A?y_/a:0},c=0;c<a;c++){l.padding=n[c],l.size=e[c];var h=zC(t,c,l);i.push(h),"auto"===u&&(h.visible=HC(h,r),h.visible&&(r=h))}return i}(t,o,s)}function RC(t,e,n,r,i){var a=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n)),s=0,A=0;r.start<e.l?(s=(e.l-r.start)/a,t.l=Math.min(t.l,e.l-s)):r.end>e.r&&(s=(r.end-e.r)/a,t.r=Math.max(t.r,e.r+s)),i.start<e.t?(A=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-A)):i.end>e.b&&(A=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+A))}function zC(t,e,n){var r=t.drawingArea,i=n.extra,a=n.additionalAngle,o=n.padding,s=n.size,A=t.getPointPosition(e,r+i+o,a),u=Math.round(M_(R_(A.angle+B_))),l=function(t,e,n){90===n||270===n?t-=e/2:(n>270||n<90)&&(t-=e);return t}(A.y,s.h,u),c=function(t){if(0===t||180===t)return"center";if(t<180)return"left";return"right"}(u),h=function(t,e,n){"right"===n?t-=e:"center"===n&&(t-=e/2);return t}(A.x,s.w,c);return{visible:!0,x:A.x,y:l,textAlign:c,left:h,top:l,right:h+s.w,bottom:l+s.h}}function HC(t,e){if(!e)return!0;var n=t.left,r=t.top,i=t.right,a=t.bottom;return!(Cw({x:n,y:r},e)||Cw({x:n,y:a},e)||Cw({x:i,y:r},e)||Cw({x:i,y:a},e))}function VC(t,e,n){var r=n.left,i=n.top,a=n.right,o=n.bottom,s=e.backdropColor;if(!qy(s)){var A=Hw(e.borderRadius),u=Vw(e.backdropPadding);t.fillStyle=s;var l=r-u.left,c=i-u.top,h=a-r+u.width,f=o-i+u.height;Object.values(A).some((function(t){return 0!==t}))?(t.beginPath(),Mw(t,{x:l,y:c,w:h,h:f,radius:A}),t.fill()):t.fillRect(l,c,h,f)}}function NC(t,e,n,r){var i=t.ctx;if(n)i.arc(t.xCenter,t.yCenter,e,0,__);else{var a=t.getPointPosition(0,e);i.moveTo(a.x,a.y);for(var o=1;o<r;o++)a=t.getPointPosition(o,e),i.lineTo(a.x,a.y)}}hi(DC,"id","logarithmic"),hi(DC,"defaults",{ticks:{callback:fw.formatters.logarithmic,major:{enabled:!0}}});var KC=function(t){function e(t){var n;return oi(this,e),(n=zx(this,e,[t])).xCenter=void 0,n.yCenter=void 0,n.drawingArea=void 0,n._pointLabels=[],n._pointLabelItems=[],n}return ci(e,t),ai(e,[{key:"setDimensions",value:function(){var t=this._padding=Vw(LC(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}},{key:"determineDataLimits",value:function(){var t=this.getMinMax(!1),e=t.min,n=t.max;this.min=Jy(e)&&!isNaN(e)?e:0,this.max=Jy(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}},{key:"computeTickLimit",value:function(){return Math.ceil(this.drawingArea/LC(this.options))}},{key:"generateTickLabels",value:function(t){var e=this;EC.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((function(t,n){var r=r_(e.options.pointLabels.callback,[t,n],e);return r||0===r?r:""})).filter((function(t,n){return e.chart.getDataVisibility(n)}))}},{key:"fit",value:function(){var t=this.options;t.display&&t.pointLabels.display?OC(this):this.setCenterPoint(0,0,0,0)}},{key:"setCenterPoint",value:function(t,e,n,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,r))}},{key:"getIndexAngle",value:function(t){return R_(t*(__/(this._pointLabels.length||1))+T_(this.options.startAngle||0))}},{key:"getDistanceFromCenterForValue",value:function(t){if(qy(t))return NaN;var e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}},{key:"getValueForDistanceFromCenter",value:function(t){if(qy(t))return NaN;var e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}},{key:"getPointLabelContext",value:function(t){var e=this._pointLabels||[];if(t>=0&&t<e.length){var n=e[t];return function(t,e,n){return Gw(t,{label:n,index:e,type:"pointLabel"})}(this.getContext(),t,n)}}},{key:"getPointPosition",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.getIndexAngle(t)-B_+n;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}},{key:"getPointPositionForValue",value:function(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}},{key:"getBasePosition",value:function(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}},{key:"getPointLabelPosition",value:function(t){var e=this._pointLabelItems[t];return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}},{key:"drawBackground",value:function(){var t=this.options,e=t.backgroundColor,n=t.grid.circular;if(e){var r=this.ctx;r.save(),r.beginPath(),NC(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}},{key:"drawGrid",value:function(){var t,e,n,r=this,i=this.ctx,a=this.options,o=a.angleLines,s=a.grid,A=a.border,u=this._pointLabels.length;if(a.pointLabels.display&&function(t,e){for(var n=t.ctx,r=t.options.pointLabels,i=e-1;i>=0;i--){var a=t._pointLabelItems[i];if(a.visible){var o=r.setContext(t.getPointLabelContext(i));VC(n,o,a);var s=Nw(o.font),A=a.x,u=a.y,l=a.textAlign;Tw(n,t._pointLabels[i],A,u+s.lineHeight/2,s,{color:o.color,textAlign:l,textBaseline:"middle"})}}}(this,u),s.display&&this.ticks.forEach((function(t,n){if(0!==n||0===n&&r.min<0){e=r.getDistanceFromCenterForValue(t.value);var i=r.getContext(n),a=s.setContext(i),o=A.setContext(i);!function(t,e,n,r,i){var a=t.ctx,o=e.circular,s=e.color,A=e.lineWidth;!o&&!r||!s||!A||n<0||(a.save(),a.strokeStyle=s,a.lineWidth=A,a.setLineDash(i.dash),a.lineDashOffset=i.dashOffset,a.beginPath(),NC(t,n,o,r),a.closePath(),a.stroke(),a.restore())}(r,a,e,u,o)}})),o.display){for(i.save(),t=u-1;t>=0;t--){var l=o.setContext(this.getPointLabelContext(t)),c=l.color,h=l.lineWidth;h&&c&&(i.lineWidth=h,i.strokeStyle=c,i.setLineDash(l.borderDash),i.lineDashOffset=l.borderDashOffset,e=this.getDistanceFromCenterForValue(a.ticks.reverse?this.min:this.max),n=this.getPointPosition(t,e),i.beginPath(),i.moveTo(this.xCenter,this.yCenter),i.lineTo(n.x,n.y),i.stroke())}i.restore()}}},{key:"drawBorder",value:function(){}},{key:"drawLabels",value:function(){var t=this,e=this.ctx,n=this.options,r=n.ticks;if(r.display){var i,a,o=this.getIndexAngle(0);e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(o),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((function(o,s){if(!(0===s&&t.min>=0)||n.reverse){var A=r.setContext(t.getContext(s)),u=Nw(A.font);if(i=t.getDistanceFromCenterForValue(t.ticks[s].value),A.showLabelBackdrop){e.font=u.string,a=e.measureText(o.label).width,e.fillStyle=A.backdropColor;var l=Vw(A.backdropPadding);e.fillRect(-a/2-l.left,-i-u.size/2-l.top,a+l.width,u.size+l.height)}Tw(e,o.label,0,-i,u,{color:A.color,strokeColor:A.textStrokeColor,strokeWidth:A.textStrokeWidth})}})),e.restore()}}},{key:"drawTitle",value:function(){}}])}(EC);hi(KC,"id","radialLinear"),hi(KC,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:fw.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:function(t){return t},padding:5,centerPointLabels:!1}}),hi(KC,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),hi(KC,"descriptors",{angleLines:{_fallback:"grid"}});var GC={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},jC=Object.keys(GC);function $C(t,e){return t-e}function WC(t,e){if(qy(e))return null;var n=t._adapter,r=t._parseOpts,i=r.parser,a=r.round,o=r.isoWeekday,s=e;return"function"==typeof i&&(s=i(s)),Jy(s)||(s="string"==typeof i?n.parse(s,i):n.parse(s)),null===s?null:(a&&(s="week"!==a||!S_(o)&&!0!==o?n.startOf(s,a):n.startOf(s,"isoWeek",o)),+s)}function ZC(t,e,n,r){for(var i=jC.length,a=jC.indexOf(t);a<i-1;++a){var o=GC[jC[a]],s=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(s*o.size))<=r)return jC[a]}return jC[i-1]}function qC(t,e,n){if(n){if(n.length){var r=N_(n,e),i=r.lo,a=r.hi;t[n[i]>=e?n[i]:n[a]]=!0}}else t[e]=!0}function XC(t,e,n){var r,i,a=[],o={},s=e.length;for(r=0;r<s;++r)o[i=e[r]]=r,a.push({value:i,major:!1});return 0!==s&&n?function(t,e,n,r){var i,a,o=t._adapter,s=+o.startOf(e[0].value,r),A=e[e.length-1].value;for(i=s;i<=A;i=+o.add(i,1,r))(a=n[i])>=0&&(e[a].major=!0);return e}(t,a,o,n):a}var YC=function(t){function e(t){var n;return oi(this,e),(n=zx(this,e,[t]))._cache={data:[],labels:[],all:[]},n._unit="day",n._majorUnit=void 0,n._offsets={},n._normalized=!1,n._parseOpts=void 0,n}return ci(e,t),ai(e,[{key:"init",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.time||(t.time={}),i=this._adapter=new Cb._date(t.adapters.date);i.init(n),l_(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},Li(ui(e.prototype),"init",this).call(this,t),this._normalized=n.normalized}},{key:"parse",value:function(t,e){return void 0===t?null:WC(this,t)}},{key:"beforeLayout",value:function(){Li(ui(e.prototype),"beforeLayout",this).call(this),this._cache={data:[],labels:[],all:[]}}},{key:"determineDataLimits",value:function(){var t=this.options,e=this._adapter,n=t.time.unit||"day",r=this.getUserBounds(),i=r.min,a=r.max,o=r.minDefined,s=r.maxDefined;function A(t){o||isNaN(t.min)||(i=Math.min(i,t.min)),s||isNaN(t.max)||(a=Math.max(a,t.max))}o&&s||(A(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||A(this.getMinMax(!1))),i=Jy(i)&&!isNaN(i)?i:+e.startOf(Date.now(),n),a=Jy(a)&&!isNaN(a)?a:+e.endOf(Date.now(),n)+1,this.min=Math.min(i,a-1),this.max=Math.max(i+1,a)}},{key:"_getLabelBounds",value:function(){var t=this.getLabelTimestamps(),e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}},{key:"buildTicks",value:function(){var t=this.options,e=t.time,n=t.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);var i=this.min,a=function(t,e,n){for(var r=0,i=t.length;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}(r,i,this.max);return this._unit=e.unit||(n.autoSkip?ZC(e.minUnit,this.min,this.max,this._getLabelCapacity(i)):function(t,e,n,r,i){for(var a=jC.length-1;a>=jC.indexOf(n);a--){var o=jC[a];if(GC[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return jC[n?jC.indexOf(n):0]}(this,a.length,e.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(t){for(var e=jC.indexOf(t)+1,n=jC.length;e<n;++e)if(GC[jC[e]].common)return jC[e]}(this._unit):void 0,this.initOffsets(r),t.reverse&&a.reverse(),XC(this,a,this._majorUnit)}},{key:"afterAutoSkip",value:function(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((function(t){return+t.value})))}},{key:"initOffsets",value:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0,i=0;this.options.offset&&n.length&&(t=this.getDecimalForValue(n[0]),r=1===n.length?1-t:(this.getDecimalForValue(n[1])-t)/2,e=this.getDecimalForValue(n[n.length-1]),i=1===n.length?e:(e-this.getDecimalForValue(n[n.length-2]))/2);var a=n.length<3?.5:.25;r=H_(r,0,a),i=H_(i,0,a),this._offsets={start:r,end:i,factor:1/(r+1+i)}}},{key:"_generate",value:function(){var t,e,n=this._adapter,r=this.min,i=this.max,a=this.options,o=a.time,s=o.unit||ZC(o.minUnit,r,i,this._getLabelCapacity(r)),A=e_(a.ticks.stepSize,1),u="week"===s&&o.isoWeekday,l=S_(u)||!0===u,c={},h=r;if(l&&(h=+n.startOf(h,"isoWeek",u)),h=+n.startOf(h,l?"day":s),n.diff(i,r,s)>1e5*A)throw new Error(r+" and "+i+" are too far apart with stepSize of "+A+" "+s);var f="data"===a.ticks.source&&this.getDataTimestamps();for(t=h,e=0;t<i;t=+n.add(t,A,s),e++)qC(c,t,f);return t!==i&&"ticks"!==a.bounds&&1!==e||qC(c,t,f),Object.keys(c).sort($C).map((function(t){return+t}))}},{key:"getLabelForValue",value:function(t){var e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}},{key:"format",value:function(t,e){var n=this.options.time.displayFormats,r=this._unit,i=e||n[r];return this._adapter.format(t,i)}},{key:"_tickFormatFunction",value:function(t,e,n,r){var i=this.options,a=i.ticks.callback;if(a)return r_(a,[t,e,n],this);var o=i.time.displayFormats,s=this._unit,A=this._majorUnit,u=s&&o[s],l=A&&o[A],c=n[e],h=A&&l&&c&&c.major;return this._adapter.format(t,r||(h?l:u))}},{key:"generateTickLabels",value:function(t){var e,n,r;for(e=0,n=t.length;e<n;++e)(r=t[e]).label=this._tickFormatFunction(r.value,e,t)}},{key:"getDecimalForValue",value:function(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}},{key:"getPixelForValue",value:function(t){var e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}},{key:"getValueForPixel",value:function(t){var e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}},{key:"_getLabelSize",value:function(t){var e=this.options.ticks,n=this.ctx.measureText(t).width,r=T_(this.isHorizontal()?e.maxRotation:e.minRotation),i=Math.cos(r),a=Math.sin(r),o=this._resolveTickFontOptions(0).size;return{w:n*i+o*a,h:n*a+o*i}}},{key:"_getLabelCapacity",value:function(t){var e=this.options.time,n=e.displayFormats,r=n[e.unit]||n.millisecond,i=this._tickFormatFunction(t,0,XC(this,[t],this._majorUnit),r),a=this._getLabelSize(i),o=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return o>0?o:1}},{key:"getDataTimestamps",value:function(){var t,e,n=this._cache.data||[];if(n.length)return n;var r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(t=0,e=r.length;t<e;++t)n=n.concat(r[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}},{key:"getLabelTimestamps",value:function(){var t,e,n=this._cache.labels||[];if(n.length)return n;var r=this.getLabels();for(t=0,e=r.length;t<e;++t)n.push(WC(this,r[t]));return this._cache.labels=this._normalized?n:this.normalize(n)}},{key:"normalize",value:function(t){return W_(t.sort($C))}}])}(bB);function JC(t,e,n){var r,i,a,o,s=0,A=t.length-1;if(n){if(e>=t[s].pos&&e<=t[A].pos){var u=K_(t,"pos",e);s=u.lo,A=u.hi}var l=t[s];r=l.pos,a=l.time;var c=t[A];i=c.pos,o=c.time}else{if(e>=t[s].time&&e<=t[A].time){var h=K_(t,"time",e);s=h.lo,A=h.hi}var f=t[s];r=f.time,a=f.pos;var d=t[A];i=d.time,o=d.pos}var p=i-r;return p?a+(o-a)*(e-r)/p:a}hi(YC,"id","time"),hi(YC,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});var tF=function(t){function e(t){var n;return oi(this,e),(n=zx(this,e,[t]))._table=[],n._minPos=void 0,n._tableRange=void 0,n}return ci(e,t),ai(e,[{key:"initOffsets",value:function(){var t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=JC(n,this.min),this._tableRange=JC(n,this.max)-this._minPos,Li(ui(e.prototype),"initOffsets",this).call(this,t)}},{key:"buildLookupTable",value:function(t){var e,n,r,i,a,o=this.min,s=this.max,A=[],u=[];for(e=0,n=t.length;e<n;++e)(i=t[e])>=o&&i<=s&&A.push(i);if(A.length<2)return[{time:o,pos:0},{time:s,pos:1}];for(e=0,n=A.length;e<n;++e)a=A[e+1],r=A[e-1],i=A[e],Math.round((a+r)/2)!==i&&u.push({time:i,pos:e/(n-1)});return u}},{key:"_generate",value:function(){var t=this.min,n=this.max,r=Li(ui(e.prototype),"getDataTimestamps",this).call(this);return r.includes(t)&&r.length||r.splice(0,0,t),r.includes(n)&&1!==r.length||r.push(n),r.sort((function(t,e){return t-e}))}},{key:"_getTimestampsForTable",value:function(){var t=this._cache.all||[];if(t.length)return t;var e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t}},{key:"getDecimalForValue",value:function(t){return(JC(this._table,t)-this._minPos)/this._tableRange}},{key:"getValueForPixel",value:function(t){var e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return JC(this._table,n*this._tableRange+this._minPos,!0)}}])}(YC);hi(tF,"id","timeseries"),hi(tF,"defaults",YC.defaults);var eF=[Bb,kk,xC,Object.freeze({__proto__:null,CategoryScale:kC,LinearScale:IC,LogarithmicScale:DC,RadialLinearScale:KC,TimeScale:YC,TimeSeriesScale:tF})];function nF(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function rF(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function iF(t){var e,n,r;function i(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length;if(i<a){if(0!==e(r,r))return a;do{var o=i+a>>>1;n(t[o],r)<0?i=o+1:a=o}while(i<a)}return i}return 2!==t.length?(e=nF,n=function(e,n){return nF(t(e),n)},r=function(e,n){return t(e)-n}):(e=t===nF||t===rF?t:aF,n=t,r=t),{left:i,center:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=i(t,e,n,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length)-1);return a>n&&r(t[a-1],e)>-r(t[a],e)?a-1:a},right:function(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length;if(i<a){if(0!==e(r,r))return a;do{var o=i+a>>>1;n(t[o],r)<=0?i=o+1:a=o}while(i<a)}return i}}}function aF(){return 0}tk.register.apply(tk,Di(eF));var oF=iF(nF).right;iF((function(t){return null===t?NaN:+t})).center;var sF=oF;Gc("Float64",(function(t){return function(e,n,r){return t(this,e,n,r)}}));var AF=function(t,e,n,r,i,a,o,s){for(var A,u,l=i,c=0,h=!!o&&_n(o,s);c<r;)c in n&&(A=h?h(n[c],c,e):n[c],a>0&&wn(A)?(u=ve(A),l=AF(t,e,A,u,l,a-1)-1):(Wi(l+1),t[l]=A),l++),c++;return l},uF=AF;function lF(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return cF(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cF(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function cF(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function hF(t,e,n){return e=ui(e),Ai(t,fF()?Reflect.construct(e,n||[],ui(t).constructor):e.apply(t,n))}function fF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(fF=function(){return!!t})()}Pe({target:"Array",proto:!0},{flatMap:function(t){var e,n=ot(this),r=ve(n);return Y(t),(e=Qn(n,0)).length=uF(e,n,n,r,0,1,t,arguments.length>1?arguments[1]:void 0),e}}),ra("flatMap");var dF=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vF;if(oi(this,e),n=hF(this,e),Object.defineProperties(n,{_intern:{value:new Map},_key:{value:r}}),null!=t){var i,a=lF(t);try{for(a.s();!(i=a.n()).done;){var o=gi(i.value,2),s=o[0],A=o[1];n.set(s,A)}}catch(t){a.e(t)}finally{a.f()}}return n}return ci(e,t),ai(e,[{key:"get",value:function(t){return Li(ui(e.prototype),"get",this).call(this,pF(this,t))}},{key:"has",value:function(t){return Li(ui(e.prototype),"has",this).call(this,pF(this,t))}},{key:"set",value:function(t,n){return Li(ui(e.prototype),"set",this).call(this,function(t,e){var n=t._intern,r=(0,t._key)(e);return n.has(r)?n.get(r):(n.set(r,e),e)}(this,t),n)}},{key:"delete",value:function(t){return Li(ui(e.prototype),"delete",this).call(this,function(t,e){var n=t._intern,r=(0,t._key)(e);n.has(r)&&(e=n.get(r),n.delete(r));return e}(this,t))}}])}(Ti(Map));function pF(t,e){var n=t._intern,r=(0,t._key)(e);return n.has(r)?n.get(r):e}function vF(t){return null!==t&&"object"===ni(t)?t.valueOf():t}Gc("Uint32",(function(t){return function(e,n,r){return t(this,e,n,r)}}));var gF=Math.sqrt(50),mF=Math.sqrt(10),yF=Math.sqrt(2);function _F(t,e,n){var r,i,a,o=(e-t)/Math.max(0,n),s=Math.floor(Math.log10(o)),A=o/Math.pow(10,s),u=A>=gF?10:A>=mF?5:A>=yF?2:1;return s<0?(a=Math.pow(10,-s)/u,(r=Math.round(t*a))/a<t&&++r,(i=Math.round(e*a))/a>e&&--i,a=-a):(a=Math.pow(10,s)*u,(r=Math.round(t/a))*a<t&&++r,(i=Math.round(e/a))*a>e&&--i),i<r&&.5<=n&&n<2?_F(t,e,2*n):[r,i,a]}function wF(t,e,n){return _F(t=+t,e=+e,n=+n)[2]}var xF=Dn.find,bF="find",BF=!0;function kF(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function CF(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function FF(){}bF in[]&&Array(1)[bF]((function(){BF=!1})),Pe({target:"Array",proto:!0,forced:BF},{find:function(t){return xF(this,t,arguments.length>1?arguments[1]:void 0)}}),ra(bF);var EF=.7,IF=1/EF,UF="\\s*([+-]?\\d+)\\s*",SF="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",QF="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",TF=/^#([0-9a-f]{3,8})$/,MF=new RegExp("^rgb\\(".concat(UF,",").concat(UF,",").concat(UF,"\\)$")),DF=new RegExp("^rgb\\(".concat(QF,",").concat(QF,",").concat(QF,"\\)$")),LF=new RegExp("^rgba\\(".concat(UF,",").concat(UF,",").concat(UF,",").concat(SF,"\\)$")),PF=new RegExp("^rgba\\(".concat(QF,",").concat(QF,",").concat(QF,",").concat(SF,"\\)$")),OF=new RegExp("^hsl\\(".concat(SF,",").concat(QF,",").concat(QF,"\\)$")),RF=new RegExp("^hsla\\(".concat(SF,",").concat(QF,",").concat(QF,",").concat(SF,"\\)$")),zF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function HF(){return this.rgb().formatHex()}function VF(){return this.rgb().formatRgb()}function NF(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=TF.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?KF(e):3===n?new $F(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?GF(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?GF(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=MF.exec(t))?new $F(e[1],e[2],e[3],1):(e=DF.exec(t))?new $F(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=LF.exec(t))?GF(e[1],e[2],e[3],e[4]):(e=PF.exec(t))?GF(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=OF.exec(t))?JF(e[1],e[2]/100,e[3]/100,1):(e=RF.exec(t))?JF(e[1],e[2]/100,e[3]/100,e[4]):zF.hasOwnProperty(t)?KF(zF[t]):"transparent"===t?new $F(NaN,NaN,NaN,0):null}function KF(t){return new $F(t>>16&255,t>>8&255,255&t,1)}function GF(t,e,n,r){return r<=0&&(t=e=n=NaN),new $F(t,e,n,r)}function jF(t,e,n,r){return 1===arguments.length?((i=t)instanceof FF||(i=NF(i)),i?new $F((i=i.rgb()).r,i.g,i.b,i.opacity):new $F):new $F(t,e,n,null==r?1:r);var i}function $F(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function WF(){return"#".concat(YF(this.r)).concat(YF(this.g)).concat(YF(this.b))}function ZF(){var t=qF(this.opacity);return"".concat(1===t?"rgb(":"rgba(").concat(XF(this.r),", ").concat(XF(this.g),", ").concat(XF(this.b)).concat(1===t?")":", ".concat(t,")"))}function qF(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function XF(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function YF(t){return((t=XF(t))<16?"0":"")+t.toString(16)}function JF(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new eE(t,e,n,r)}function tE(t){if(t instanceof eE)return new eE(t.h,t.s,t.l,t.opacity);if(t instanceof FF||(t=NF(t)),!t)return new eE;if(t instanceof eE)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,A=(a+i)/2;return s?(o=e===a?(n-r)/s+6*(n<r):n===a?(r-e)/s+2:(e-n)/s+4,s/=A<.5?a+i:2-a-i,o*=60):s=A>0&&A<1?0:o,new eE(o,s,A,t.opacity)}function eE(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function nE(t){return(t=(t||0)%360)<0?t+360:t}function rE(t){return Math.max(0,Math.min(1,t||0))}function iE(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}kF(FF,NF,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:HF,formatHex:HF,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return tE(this).formatHsl()},formatRgb:VF,toString:VF}),kF($F,jF,CF(FF,{brighter:function(t){return t=null==t?IF:Math.pow(IF,t),new $F(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?EF:Math.pow(EF,t),new $F(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},clamp:function(){return new $F(XF(this.r),XF(this.g),XF(this.b),qF(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:WF,formatHex:WF,formatHex8:function(){return"#".concat(YF(this.r)).concat(YF(this.g)).concat(YF(this.b)).concat(YF(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:ZF,toString:ZF})),kF(eE,(function(t,e,n,r){return 1===arguments.length?tE(t):new eE(t,e,n,null==r?1:r)}),CF(FF,{brighter:function(t){return t=null==t?IF:Math.pow(IF,t),new eE(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?EF:Math.pow(EF,t),new eE(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new $F(iE(t>=240?t-240:t+120,i,r),iE(t,i,r),iE(t<120?t+240:t-120,i,r),this.opacity)},clamp:function(){return new eE(nE(this.h),rE(this.s),rE(this.l),qF(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=qF(this.opacity);return"".concat(1===t?"hsl(":"hsla(").concat(nE(this.h),", ").concat(100*rE(this.s),"%, ").concat(100*rE(this.l),"%").concat(1===t?")":", ".concat(t,")"))}}));var aE=function(t){return function(){return t}};function oE(t){return 1==(t=+t)?sE:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):aE(isNaN(e)?n:e)}}function sE(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):aE(isNaN(t)?e:t)}var AE=function t(e){var n=oE(e);function r(t,e){var r=n((t=jF(t)).r,(e=jF(e)).r),i=n(t.g,e.g),a=n(t.b,e.b),o=sE(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=a(e),t.opacity=o(e),t+""}}return r.gamma=t,r}(1),uE="ArrayBuffer",lE=Tc[uE],cE=o[uE];function hE(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(a){for(n=0;n<r;++n)i[n]=t[n]*(1-a)+e[n]*a;return i}}function fE(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=_E(t[n],e[n]);for(;n<r;++n)o[n]=e[n];return function(t){for(n=0;n<i;++n)o[n]=a[n](t);return o}}function dE(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function pE(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function vE(t,e){var n,r={},i={};for(n in null!==t&&"object"===ni(t)||(t={}),null!==e&&"object"===ni(e)||(e={}),e)n in t?r[n]=_E(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}Pe({global:!0,constructor:!0,forced:cE!==lE},{ArrayBuffer:lE}),ts(uE);var gE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mE=new RegExp(gE.source,"g");function yE(t,e){var n,r,i,a=gE.lastIndex=mE.lastIndex=0,o=-1,s=[],A=[];for(t+="",e+="";(n=gE.exec(t))&&(r=mE.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,A.push({i:o,x:pE(n,r)})),a=mE.lastIndex;return a<e.length&&(i=e.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?A[0]?function(t){return function(e){return t(e)+""}}(A[0].x):function(t){return function(){return t}}(e):(e=A.length,function(t){for(var n,r=0;r<e;++r)s[(n=A[r]).i]=n.x(t);return s.join("")})}function _E(t,e){var n,r,i=ni(e);return null==e||"boolean"===i?aE(e):("number"===i?pE:"string"===i?(n=NF(e))?(e=n,AE):yE:e instanceof NF?AE:e instanceof Date?dE:(r=e,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(e)?fE:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?vE:pE:hE))(t,e)}function wE(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}Gc("Float32",(function(t){return function(e,n,r){return t(this,e,n,r)}}));var xE=Math.hypot,bE=Math.abs,BE=Math.sqrt,kE=!!xE&&xE(1/0,NaN)!==1/0;function CE(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function FE(t){return(t=CE(Math.abs(t)))?t[1]:NaN}Pe({target:"Math",stat:!0,arity:2,forced:kE},{hypot:function(t,e){for(var n,r,i=0,a=0,o=arguments.length,s=0;a<o;)s<(n=bE(arguments[a++]))?(i=i*(r=s/n)*r+1,s=n):i+=n>0?(r=n/s)*r:n;return s===1/0?1/0:s*BE(i)}});var EE=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function IE(t){if(!(e=EE.exec(t)))throw new Error("invalid format: "+t);var e;return new UE({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function UE(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}IE.prototype=UE.prototype,UE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var SE,QE=RangeError,TE=function(t){var e=je(S(this)),n="",r=le(t);if(r<0||r===1/0)throw new QE("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n},ME=RangeError,DE=String,LE=Math.floor,PE=w(TE),OE=w("".slice),RE=w(1..toFixed),zE=function(t,e,n){return 0===e?n:e%2==1?zE(t,e-1,n*t):zE(t*t,e/2,n)},HE=function(t,e,n){for(var r=-1,i=n;++r<6;)i+=e*t[r],t[r]=i%1e7,i=LE(i/1e7)},VE=function(t,e){for(var n=6,r=0;--n>=0;)r+=t[n],t[n]=LE(r/e),r=r%e*1e7},NE=function(t){for(var e=6,n="";--e>=0;)if(""!==n||0===e||0!==t[e]){var r=DE(t[e]);n=""===n?r:n+PE("0",7-r.length)+r}return n},KE=s((function(){return"0.000"!==RE(8e-5,3)||"1"!==RE(.9,0)||"1.25"!==RE(1.255,2)||"1000000000000000128"!==RE(0xde0b6b3a7640080,0)}))||!s((function(){RE({})}));function GE(t,e){var n=CE(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}Pe({target:"Number",proto:!0,forced:KE},{toFixed:function(t){var e,n,r,i,a=Cm(this),o=le(t),s=[0,0,0,0,0,0],A="",u="0";if(o<0||o>20)throw new ME("Incorrect fraction digits");if(a!=a)return"NaN";if(a<=-1e21||a>=1e21)return DE(a);if(a<0&&(A="-",a=-a),a>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(a*zE(2,69,1))-69)<0?a*zE(2,-e,1):a/zE(2,e,1),n*=4503599627370496,(e=52-e)>0){for(HE(s,0,n),r=o;r>=7;)HE(s,1e7,0),r-=7;for(HE(s,zE(10,r,1),0),r=e-1;r>=23;)VE(s,1<<23),r-=23;VE(s,1<<r),HE(s,1,1),VE(s,2),u=NE(s)}else HE(s,0,n),HE(s,1<<-e,0),u=NE(s)+PE("0",o);return u=o>0?A+((i=u.length)<=o?"0."+PE("0",o-i)+u:OE(u,0,i-o)+"."+OE(u,i-o)):A+u}});var jE={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return GE(100*t,e)},r:GE,s:function(t,e){var n=CE(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(SE=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+CE(t,Math.max(0,e+a-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function $E(t){return t}var WE,ZE,qE,XE=Array.prototype.map,YE=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function JE(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?$E:(e=XE.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,a=[],o=0,s=e[0],A=0;i>0&&s>0&&(A+s+1>r&&(s=Math.max(1,r-A)),a.push(t.substring(i-=s,i+s)),!((A+=s+1)>r));)s=e[o=(o+1)%e.length];return a.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?$E:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(XE.call(t.numerals,String)),A=void 0===t.percent?"%":t.percent+"",u=void 0===t.minus?"â":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function c(t){var e=(t=IE(t)).fill,n=t.align,c=t.sign,h=t.symbol,f=t.zero,d=t.width,p=t.comma,v=t.precision,g=t.trim,m=t.type;"n"===m?(p=!0,m="g"):jE[m]||(void 0===v&&(v=12),g=!0,m="g"),(f||"0"===e&&"="===n)&&(f=!0,e="0",n="=");var y="$"===h?i:"#"===h&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",_="$"===h?a:/[%p]/.test(m)?A:"",w=jE[m],x=/[defgprs%]/.test(m);function b(t){var i,a,A,h=y,b=_;if("c"===m)b=w(t)+b,t="";else{var B=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:w(Math.abs(t),v),g&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),B&&0==+t&&"+"!==c&&(B=!1),h=(B?"("===c?c:u:"-"===c||"("===c?"":c)+h,b=("s"===m?YE[8+SE/3]:"")+b+(B&&"("===c?")":""),x)for(i=-1,a=t.length;++i<a;)if(48>(A=t.charCodeAt(i))||A>57){b=(46===A?o+t.slice(i+1):t.slice(i))+b,t=t.slice(0,i);break}}p&&!f&&(t=r(t,1/0));var k=h.length+t.length+b.length,C=k<d?new Array(d-k+1).join(e):"";switch(p&&f&&(t=r(C+t,C.length?d-b.length:1/0),C=""),n){case"<":t=h+t+b+C;break;case"=":t=h+C+t+b;break;case"^":t=C.slice(0,k=C.length>>1)+h+t+b+C.slice(k);break;default:t=C+h+t+b}return s(t)}return v=void 0===v?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),b.toString=function(){return t+""},b}return{format:c,formatPrefix:function(t,e){var n=c(((t=IE(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(FE(e)/3))),i=Math.pow(10,-r),a=YE[8+r/3];return function(t){return n(i*t)+a}}}}WE=JE({thousands:",",grouping:[3],currency:["$",""]}),ZE=WE.format,qE=WE.formatPrefix;var tI=Math.log,eI=Math.log1p||function(t){var e=+t;return e>-1e-8&&e<1e-8?e-e*e/2:tI(1+e)};function nI(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function rI(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return iI(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?iI(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function iI(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}Pe({target:"Math",stat:!0},{log1p:eI});var aI=Symbol("implicit");function oI(){var t=new dF,e=[],n=[],r=aI;function i(i){var a=t.get(i);if(void 0===a){if(r!==aI)return r;t.set(i,a=e.push(i)-1)}return n[a%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new dF;var r,a=rI(n);try{for(a.s();!(r=a.n()).done;){var o=r.value;t.has(o)||t.set(o,e.push(o)-1)}}catch(t){a.e(t)}finally{a.f()}return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return oI(e,n).unknown(r)},nI.apply(i,arguments),i}function sI(t){return+t}var AI=[0,1];function uI(t){return t}function lI(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function cI(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=lI(i,r),a=n(o,a)):(r=lI(r,i),a=n(a,o)),function(t){return a(r(t))}}function hI(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=lI(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(e){var n=sF(t,e,1,r)-1;return a[n](i[n](e))}}function fI(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function dI(){var t,e,n,r,i,a,o=AI,s=AI,A=_E,u=uI;function l(){var t=Math.min(o.length,s.length);return u!==uI&&(u=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(o[0],o[t-1])),r=t>2?hI:cI,i=a=null,c}function c(e){return null==e||isNaN(e=+e)?n:(i||(i=r(o.map(t),s,A)))(t(u(e)))}return c.invert=function(n){return u(e((a||(a=r(s,o.map(t),pE)))(n)))},c.domain=function(t){return arguments.length?(o=Array.from(t,sI),l()):o.slice()},c.range=function(t){return arguments.length?(s=Array.from(t),l()):s.slice()},c.rangeRound=function(t){return s=Array.from(t),A=wE,l()},c.clamp=function(t){return arguments.length?(u=!!t||uI,l()):u!==uI},c.interpolate=function(t){return arguments.length?(A=t,l()):A},c.unknown=function(t){return arguments.length?(n=t,c):n},function(n,r){return t=n,e=r,l()}}function pI(t,e,n,r){var i,a=function(t,e,n){n=+n;var r=(e=+e)<(t=+t),i=r?wF(e,t,n):wF(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}(t,e,n);switch((r=IE(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(FE(e)/3)))-FE(Math.abs(t)))}(a,o))||(r.precision=i),qE(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,FE(e)-FE(t))+1}(a,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-FE(Math.abs(t)))}(a))||(r.precision=i-2*("%"===r.type))}return ZE(r)}function vI(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){if(!((n=+n)>0))return[];if((t=+t)==(e=+e))return[t];var r=e<t,i=gi(r?_F(e,t,n):_F(t,e,n),3),a=i[0],o=i[1],s=i[2];if(!(o>=a))return[];var A=o-a+1,u=new Array(A);if(r)if(s<0)for(var l=0;l<A;++l)u[l]=(o-l)/-s;else for(var c=0;c<A;++c)u[c]=(o-c)*s;else if(s<0)for(var h=0;h<A;++h)u[h]=(a+h)/-s;else for(var f=0;f<A;++f)u[f]=(a+f)*s;return u}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return pI(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,a=e(),o=0,s=a.length-1,A=a[o],u=a[s],l=10;for(u<A&&(i=A,A=u,u=i,i=o,o=s,s=i);l-- >0;){if((i=wF(A,u,n))===r)return a[o]=A,a[s]=u,e(a);if(i>0)A=Math.floor(A/i)*i,u=Math.ceil(u/i)*i;else{if(!(i<0))break;A=Math.ceil(A*i)/i,u=Math.floor(u*i)/i}r=i}return t},t}function gI(){var t=dI()(uI,uI);return t.copy=function(){return fI(t,gI())},nI.apply(t,arguments),vI(t)}var mI=Math.expm1,yI=Math.exp,_I=!mI||mI(10)>22025.465794806718||mI(10)<22025.465794806718||-2e-17!==mI(-2e-17)?function(t){var e=+t;return 0===e?e:e>-1e-6&&e<1e-6?e+e*e/2:yI(e)-1}:mI;function wI(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function xI(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function bI(){var t=function(t){var e=1,n=t(wI(e),xI(e));return n.constant=function(n){return arguments.length?t(wI(e=+n),xI(e)):e},vI(n)}(dI());return t.copy=function(){return fI(t,bI()).constant(t.constant())},nI.apply(t,arguments)}function BI(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function kI(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function CI(t){return t<0?-t*t:t*t}function FI(t){var e=t(uI,uI),n=1;return e.exponent=function(e){return arguments.length?1===(n=+e)?t(uI,uI):.5===n?t(kI,CI):t(BI(n),BI(1/n)):n},vI(e)}function EI(){var t=FI(dI());return t.copy=function(){return fI(t,EI()).exponent(t.exponent())},nI.apply(t,arguments),t}Pe({target:"Math",stat:!0,forced:_I!==Math.expm1},{expm1:_I});var II=new Date,UI=new Date;function SI(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,a){var o,s=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&a>0))return s;do{s.push(o=new Date(+n)),e(n,a),t(n)}while(o<n&&n<r);return s},i.filter=function(n){return SI((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(i.count=function(e,r){return II.setTime(+e),UI.setTime(+r),t(II),t(UI),Math.floor(n(II,UI))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var QI=6e4,TI=864e5,MI=6048e5,DI=SI((function(t){return t.setHours(0,0,0,0)}),(function(t,e){return t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*QI)/TI}),(function(t){return t.getDate()-1}));DI.range;var LI=SI((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/TI}),(function(t){return t.getUTCDate()-1}));LI.range;var PI=SI((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/TI}),(function(t){return Math.floor(t/TI)}));function OI(t){return SI((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*QI)/MI}))}PI.range;var RI=OI(0),zI=OI(1),HI=OI(2),VI=OI(3),NI=OI(4),KI=OI(5),GI=OI(6);function jI(t){return SI((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/MI}))}RI.range,zI.range,HI.range,VI.range,NI.range,KI.range,GI.range;var $I=jI(0),WI=jI(1),ZI=jI(2),qI=jI(3),XI=jI(4),YI=jI(5),JI=jI(6);$I.range,WI.range,ZI.range,qI.range,XI.range,YI.range,JI.range;var tU=SI((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));tU.every=function(t){return isFinite(t=Math.floor(t))&&t>0?SI((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null},tU.range;var eU=SI((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));function nU(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function rU(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function iU(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}eU.every=function(t){return isFinite(t=Math.floor(t))&&t>0?SI((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null},eU.range;var aU,oU,sU={"-":"",_:" ",0:"0"},AU=/^\s*\d+/,uU=/^%/,lU=/[\\^$*+?|[\]().{}]/g;function cU(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function hU(t){return t.replace(lU,"\\$&")}function fU(t){return new RegExp("^(?:"+t.map(hU).join("|")+")","i")}function dU(t){return new Map(t.map((function(t,e){return[t.toLowerCase(),e]})))}function pU(t,e,n){var r=AU.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function vU(t,e,n){var r=AU.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function gU(t,e,n){var r=AU.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function mU(t,e,n){var r=AU.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function yU(t,e,n){var r=AU.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function _U(t,e,n){var r=AU.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function wU(t,e,n){var r=AU.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function xU(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function bU(t,e,n){var r=AU.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function BU(t,e,n){var r=AU.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function kU(t,e,n){var r=AU.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function CU(t,e,n){var r=AU.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function FU(t,e,n){var r=AU.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function EU(t,e,n){var r=AU.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function IU(t,e,n){var r=AU.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function UU(t,e,n){var r=AU.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function SU(t,e,n){var r=AU.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function QU(t,e,n){var r=uU.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function TU(t,e,n){var r=AU.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function MU(t,e,n){var r=AU.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function DU(t,e){return cU(t.getDate(),e,2)}function LU(t,e){return cU(t.getHours(),e,2)}function PU(t,e){return cU(t.getHours()%12||12,e,2)}function OU(t,e){return cU(1+DI.count(tU(t),t),e,3)}function RU(t,e){return cU(t.getMilliseconds(),e,3)}function zU(t,e){return RU(t,e)+"000"}function HU(t,e){return cU(t.getMonth()+1,e,2)}function VU(t,e){return cU(t.getMinutes(),e,2)}function NU(t,e){return cU(t.getSeconds(),e,2)}function KU(t){var e=t.getDay();return 0===e?7:e}function GU(t,e){return cU(RI.count(tU(t)-1,t),e,2)}function jU(t){var e=t.getDay();return e>=4||0===e?NI(t):NI.ceil(t)}function $U(t,e){return t=jU(t),cU(NI.count(tU(t),t)+(4===tU(t).getDay()),e,2)}function WU(t){return t.getDay()}function ZU(t,e){return cU(zI.count(tU(t)-1,t),e,2)}function qU(t,e){return cU(t.getFullYear()%100,e,2)}function XU(t,e){return cU((t=jU(t)).getFullYear()%100,e,2)}function YU(t,e){return cU(t.getFullYear()%1e4,e,4)}function JU(t,e){var n=t.getDay();return cU((t=n>=4||0===n?NI(t):NI.ceil(t)).getFullYear()%1e4,e,4)}function tS(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+cU(e/60|0,"0",2)+cU(e%60,"0",2)}function eS(t,e){return cU(t.getUTCDate(),e,2)}function nS(t,e){return cU(t.getUTCHours(),e,2)}function rS(t,e){return cU(t.getUTCHours()%12||12,e,2)}function iS(t,e){return cU(1+LI.count(eU(t),t),e,3)}function aS(t,e){return cU(t.getUTCMilliseconds(),e,3)}function oS(t,e){return aS(t,e)+"000"}function sS(t,e){return cU(t.getUTCMonth()+1,e,2)}function AS(t,e){return cU(t.getUTCMinutes(),e,2)}function uS(t,e){return cU(t.getUTCSeconds(),e,2)}function lS(t){var e=t.getUTCDay();return 0===e?7:e}function cS(t,e){return cU($I.count(eU(t)-1,t),e,2)}function hS(t){var e=t.getUTCDay();return e>=4||0===e?XI(t):XI.ceil(t)}function fS(t,e){return t=hS(t),cU(XI.count(eU(t),t)+(4===eU(t).getUTCDay()),e,2)}function dS(t){return t.getUTCDay()}function pS(t,e){return cU(WI.count(eU(t)-1,t),e,2)}function vS(t,e){return cU(t.getUTCFullYear()%100,e,2)}function gS(t,e){return cU((t=hS(t)).getUTCFullYear()%100,e,2)}function mS(t,e){return cU(t.getUTCFullYear()%1e4,e,4)}function yS(t,e){var n=t.getUTCDay();return cU((t=n>=4||0===n?XI(t):XI.ceil(t)).getUTCFullYear()%1e4,e,4)}function _S(){return"+0000"}function wS(){return"%"}function xS(t){return+t}function bS(t){return Math.floor(+t/1e3)}function BS(t,e,n){this.k=t,this.x=e,this.y=n}function kS(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return CS(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?CS(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function CS(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}!function(t){aU=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,s=t.months,A=t.shortMonths,u=fU(i),l=dU(i),c=fU(a),h=dU(a),f=fU(o),d=dU(o),p=fU(s),v=dU(s),g=fU(A),m=dU(A),y={a:function(t){return o[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return A[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:DU,e:DU,f:zU,g:XU,G:JU,H:LU,I:PU,j:OU,L:RU,m:HU,M:VU,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:xS,s:bS,S:NU,u:KU,U:GU,V:$U,w:WU,W:ZU,x:null,X:null,y:qU,Y:YU,Z:tS,"%":wS},_={a:function(t){return o[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return A[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:eS,e:eS,f:oS,g:gS,G:yS,H:nS,I:rS,j:iS,L:aS,m:sS,M:AS,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:xS,s:bS,S:uS,u:lS,U:cS,V:fS,w:dS,W:pS,x:null,X:null,y:vS,Y:mS,Z:_S,"%":wS},w={a:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){var r=c.exec(e.slice(n));return r?(t.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=m.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){var r=p.exec(e.slice(n));return r?(t.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,n,r){return B(t,e,n,r)},d:kU,e:kU,f:SU,g:wU,G:_U,H:FU,I:FU,j:CU,L:UU,m:BU,M:EU,p:function(t,e,n){var r=u.exec(e.slice(n));return r?(t.p=l.get(r[0].toLowerCase()),n+r[0].length):-1},q:bU,Q:TU,s:MU,S:IU,u:vU,U:gU,V:mU,w:pU,W:yU,x:function(t,e,r){return B(t,n,e,r)},X:function(t,e,n){return B(t,r,e,n)},y:wU,Y:_U,Z:xU,"%":QU};function x(t,e){return function(n){var r,i,a,o=[],s=-1,A=0,u=t.length;for(n instanceof Date||(n=new Date(+n));++s<u;)37===t.charCodeAt(s)&&(o.push(t.slice(A,s)),null!=(i=sU[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(a=e[r])&&(r=a(n,i)),o.push(r),A=s+1);return o.push(t.slice(A,s)),o.join("")}}function b(t,e){return function(n){var r,i,a=iU(1900,void 0,1);if(B(a,t,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(e&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=rU(iU(a.y,0,1))).getUTCDay(),r=i>4||0===i?WI.ceil(r):WI(r),r=LI.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=nU(iU(a.y,0,1))).getDay(),r=i>4||0===i?zI.ceil(r):zI(r),r=DI.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?rU(iU(a.y,0,1)).getUTCDay():nU(iU(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,rU(a)):nU(a)}}function B(t,e,n,r){for(var i,a,o=0,s=e.length,A=n.length;o<s;){if(r>=A)return-1;if(37===(i=e.charCodeAt(o++))){if(i=e.charAt(o++),!(a=w[i in sU?e.charAt(o++):i])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return y.x=x(n,y),y.X=x(r,y),y.c=x(e,y),_.x=x(n,_),_.X=x(r,_),_.c=x(e,_),{format:function(t){var e=x(t+="",y);return e.toString=function(){return t},e},parse:function(t){var e=b(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=x(t+="",_);return e.toString=function(){return t},e},utcParse:function(t){var e=b(t+="",!0);return e.toString=function(){return t},e}}}(t),oU=aU.format,aU.parse,aU.utcFormat,aU.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),BS.prototype={constructor:BS,scale:function(t){return 1===t?this:new BS(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new BS(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new BS(1,0,0),BS.prototype,Pe({target:"Object",stat:!0},{fromEntries:function(t){var e={};return $o(t,(function(t,n){Vr(e,t,n)}),{AS_ENTRIES:!0}),e}});var FS=[];function ES(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ad,r=new Set;function i(n){if(fd(t,n)&&(t=n,e)){var i,a=!FS.length,o=kS(r);try{for(o.s();!(i=o.n()).done;){var s=i.value;s[1](),FS.push(s,t)}}catch(t){o.e(t)}finally{o.f()}if(a){for(var A=0;A<FS.length;A+=2)FS[A][0](FS[A+1]);FS.length=0}}}return{set:i,update:function(e){i(e(t))},subscribe:function(a){var o=[a,arguments.length>1&&void 0!==arguments[1]?arguments[1]:ad];return r.add(o),1===r.size&&(e=n(i)||ad),a(t),function(){r.delete(o),0===r.size&&e&&(e(),e=null)}}}}function IS(t,e,n){var r,i=!Array.isArray(t),a=i?[t]:t,o=e.length<2;return r=function(t){var n=!1,r=[],s=0,A=ad,u=function(){if(!s){A();var n=e(i?r[0]:r,t);o?t(n):A=hd(n)?n:ad}},l=a.map((function(t,e){return pd(t,(function(t){r[e]=t,s&=~(1<<e),n&&u()}),(function(){s|=1<<e}))}));return n=!0,u(),function(){cd(l),A(),n=!1}},{subscribe:ES(n,r).subscribe}}function US(t){return 0===(e=t)||e?Array.isArray(t)?function(e){return t.map((function(t){return"function"!=typeof t?e[t]:t(e)}))}:"function"!=typeof t?function(e){return e[t]}:t:null;var e}var SS=ny.entries;function QS(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return TS(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?TS(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function TS(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function MS(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t){var e,n={},r=QS(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(Object(i)!==i)throw new TypeError("iterable for fromEntries should yield objects");var a=i[0],o=i[1];Object.defineProperty(n,a,{configurable:!0,enumerable:!0,writable:!0,value:o})}}catch(t){r.e(t)}finally{r.f()}return n}(Object.entries(t).filter((function(t){var n=gi(t,2),r=n[0];return void 0!==n[1]&&void 0===e[r]})))}function DS(t,e){return t.length===e.length&&t.every((function(t){return e.includes(t)}))}function LS(t){return"function"==typeof t.bandwidth||!!DS(Object.keys(t),["domain","range","unknown","copy"])}function PS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function OS(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?PS(Object(n),!0).forEach((function(e){hi(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function RS(t,e,n){var r=Object.keys(n).reduce((function(t,r){var i=!0===LS(n[r])?"ordinal":"other";return t[i]||(t[i]={}),t[i][r]=e[r],t}),{ordinal:!1,other:!1}),i={};return r.ordinal&&(i=function(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).sort,r=void 0!==n&&n;if(!Array.isArray(t))throw new TypeError("The first argument of calcUniques() must be an array. You passed in a ".concat(ni(t),". If you got this error using the <LayerCake> component, consider passing a flat array to the `flatData` prop. More info: https://layercake.graphics/guide/#flatdata"));if(Array.isArray(e)||null==e)throw new TypeError("The second argument of calcUniques() must be an object with field names as keys as accessor functions as values.");var i,a,o,s,A,u,l,c={},h=Object.keys(e),f=h.length,d=t.length;for(i=0;i<f;i+=1){for(l=new Set,A=e[s=h[i]],a=0;a<d;a+=1)if(u=A(t[a]),Array.isArray(u)){var p=u.length;for(o=0;o<p;o+=1)l.add(u[o])}else l.add(u);var v=Array.from(l);c[s]=!0===r?v.sort():v}return c}(t,r.ordinal)),r.other&&(i=OS(OS({},i),function(t,e){if(!Array.isArray(t))throw new TypeError("The first argument of calcExtents() must be an array. You passed in a ".concat(ni(t),". If you got this error using the <LayerCake> component, consider passing a flat array to the `flatData` prop. More info: https://layercake.graphics/guide/#flatdata"));if(Array.isArray(e)||null==e)throw new TypeError("The second argument of calcExtents() must be an object with field names as keys as accessor functions as values.");var n,r,i,a,o,s,A,u,l={},c=Object.keys(e),h=c.length,f=t.length;for(n=0;n<h;n+=1){for(A=e[a=c[n]],o=null,s=null,r=0;r<f;r+=1)if(u=A(t[r]),Array.isArray(u)){var d=u.length;for(i=0;i<d;i+=1)!1!==u[i]&&void 0!==u[i]&&null!==u[i]&&!1===Number.isNaN(u[i])&&((null===o||u[i]<o)&&(o=u[i]),(null===s||u[i]>s)&&(s=u[i]))}else!1!==u&&null!=u&&!1===Number.isNaN(u)&&((null===o||u<o)&&(o=u),(null===s||u>s)&&(s=u));l[a]=[o,s]}return l}(t,r.other))),i}function zS(t){return function(e){var n=gi(e,2),r=n[0],i=n[1];return"function"==typeof i&&(i=i(r[t])),r?function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;return!0===Array.isArray(e)?e.map((function(e,n){return null===e?t[n]:e})):t}(r[t],i):i}}Pe({target:"Object",stat:!0},{entries:function(t){return SS(t)}});var HS={x:gI,y:gI,z:gI,r:function(){return EI.apply(null,arguments).exponent(.5)}};function VS(t){return t}function NS(t){return function(e){return Math.log(t*e)}}function KS(t){return function(e){return t*Math.exp(e)}}function GS(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function jS(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function $S(t){return t.replace(/^\w/,(function(t){return t.toUpperCase()}))}function WS(t){return"scale".concat($S(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")).concat($S(t))}function ZS(t){if("function"==typeof t.bandwidth)return"function"==typeof t.paddingInner?WS("band"):WS("point");if(DS(Object.keys(t),["domain","range","unknown","copy"]))return WS("ordinal");var e="";if(t.interpolator&&(e=3===t.domain().length?"diverging":"sequential"),t.quantiles)return WS("quantile",e);if(t.thresholds)return WS("quantize",e);if(t.constant)return WS("symlog",e);if(t.base)return WS("log",e);if(t.exponent)return.5===t.exponent()?WS("sqrt",e):WS("pow",e);if(DS(Object.keys(t),["domain","range","invertExtent","unknown","copy"]))return WS("threshold");if(DS(Object.keys(t),["invert","range","domain","unknown","copy","ticks","tickFormat","nice"]))return WS("identity");if(DS(Object.keys(t),["invert","domain","range","rangeRound","round","clamp","unknown","copy","ticks","tickFormat","nice"]))return WS("radial");if(e)return WS(e);if(t.domain()[0]instanceof Date){var n,r=new Date;return r.getDay=function(){return n="time"},r.getUTCDay=function(){return n="utc"},t.tickFormat(0,"%a")(r),WS(n)}return WS("linear")}var qS=["scaleThreshold","scaleQuantile","scaleQuantize","scaleSequentialQuantile"];function XS(t,e){if("function"!=typeof t.range)throw console.log(t),new Error("Scale method `range` must be a function");if("function"!=typeof t.domain)throw new Error("Scale method `domain` must be a function");if(!Array.isArray(e)||qS.includes(ZS(t)))return t.domain();if(!0===LS(t))return t.domain();var n=function(t){var e,n=function(t){return t.constant?"symlog":t.base?"log":t.exponent?.5===t.exponent()?"sqrt":"pow":"other"}(t);if("log"===n){var r=Math.sign(t.domain()[0]);return{lift:NS(r),ground:KS(r),scaleType:n}}if("pow"===n)return{lift:jS(1),ground:jS(1),scaleType:n};if("sqrt"===n)return{lift:jS(.5),ground:jS(2),scaleType:n};if("symlog"===n)return{lift:(e=1,function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}),ground:GS(1),scaleType:n};return{lift:VS,ground:VS,scaleType:n}}(t),r=n.lift,i=n.ground,a=t.domain()[0],o="[object Date]"===Object.prototype.toString.call(a),s=gi(t.domain().map((function(t){return r(o?t.getTime():t)})),2),A=s[0],u=s[1],l=gi(t.range(),2),c=l[0],h=l[1],f=e[0]||0,d=e[1]||0,p=(u-A)/(Math.abs(h-c)-f-d);return[A-f*p,d*p+u].map((function(t){return i(o?new Date(t):t)}))}function YS(t){return function(e){var n=gi(e,10),r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],A=n[5],u=n[6],l=n[7],c=n[8],h=n[9];if(null===i)return null;var f=function(t,e,n,r,i,a){return i?"function"==typeof i?i({width:e,height:n}):i:function(t,e,n,r,i){var a,o;return!0===i?(a=0,o=100):(a="r"===t?1:0,o="y"===t?n:"r"===t?25:e),!0===r?[o,a]:[a,o]}(t,e,n,r,a)}(t,u,l,A,c,h),d=r===HS[t]?r():r.copy();return d.domain(a),(!d.interpolator||"function"==typeof d.interpolator&&d.interpolator().name.startsWith("identity"))&&d.range(f),o&&d.domain(XS(d,o)),!0!==s&&"number"!=typeof s||("function"==typeof d.nice?d.nice("number"==typeof s?s:void 0):console.error("[Layer Cake] You set `".concat(t,"Nice: true` but the ").concat(t,"Scale does not have a `.nice` method. Ignoring..."))),d}}function JS(t){var e=gi(t,2),n=e[0],r=e[1];return function(t){var e=n(t);return Array.isArray(e)?e.map((function(t){return r(t)})):r(e)}}function tQ(t){var e=gi(t,1)[0];if("function"==typeof e){if("function"==typeof e.range)return e.range();console.error("[LayerCake] Your scale doesn't have a `.range` method?")}return null}var eQ="    ";function nQ(t){console.log("/********* LayerCake Debug ************/"),console.log("Bounding box:"),function(t){Object.entries(t).forEach((function(t){var e=gi(t,2),n=e[0],r=e[1];console.log("".concat(eQ).concat(n,":"),r)}))}(t.boundingBox),console.log("Scales:\n"),Object.keys(t.activeGetters).forEach((function(e){var n,r,i,a;n=e,r=t["".concat(e,"Scale")],i=t[e],a=ZS(r),console.log("".concat(eQ).concat(n,":")),console.log("".concat(eQ).concat(eQ,'Accessor: "').concat(i.toString(),'"')),console.log("".concat(eQ).concat(eQ,"Type: ").concat(a)),rQ(r,"domain"),rQ(r,"range"," ")})),console.log("/************ End LayerCake Debug ***************/\n")}function rQ(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=t[e](),i=function(t){var e=[],n=t.map((function(n,r){var i=function(t){var e=jF(t),n=e.r,r=e.g,i=e.b,a=e.opacity;return!![n,r,i].every((function(t){return t>=0&&t<=255}))&&{r:n,g:r,b:i,o:a}}(n);if(!1!==i){e.push(i);var a=r===t.length-1?" ":"";return"%c ".concat(n).concat(a)}return n}));if(e.length)return["%c[ ".concat(n.join(", ")),e.map((function(t){return"background-color: rgba(".concat(t.r,", ").concat(t.g,", ").concat(t.b,", ").concat(t.o,"); color:").concat((.2126*(e=t).r+.7152*e.g+.0722*e.b)/255>.6?"black":"white",";");var e}))];return null}(r);i?function(t,e,n){var r;(r=console).log.apply(r,["".concat(eQ).concat(eQ).concat($S(e),":    %cArray%c(").concat(n.length,") ")+t[0]+"%c ]","color: #1377e4","color: #737373","color: #1478e4"].concat(Di(t[1]),["color: #1478e4"]))}(i,e,r):console.log("".concat(eQ).concat(eQ).concat($S(e),":").concat(n),r)}function iQ(t,e,n){return e=ui(e),Ai(t,aQ()?Reflect.construct(e,n||[],ui(t).constructor):e.apply(t,n))}function aQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(aQ=function(){return!!t})()}function oQ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function sQ(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?oQ(Object(n),!0).forEach((function(e){hi(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oQ(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function AQ(t){Md(t,"svelte-vhzpsp",".layercake-container.svelte-vhzpsp,.layercake-container.svelte-vhzpsp *{box-sizing:border-box}.layercake-container.svelte-vhzpsp{width:100%;height:100%}")}var uQ=function(t){return{element:4&t[0],width:8&t[1],height:16&t[1],aspectRatio:32&t[1],containerWidth:2&t[1],containerHeight:1&t[1],activeGetters:1024&t[0],percentRange:4&t[1],x:268435456&t[0],y:134217728&t[0],z:67108864&t[0],r:33554432&t[0],custom:4096&t[0],data:1073741824&t[0],xNice:16777216&t[0],yNice:8388608&t[0],zNice:4194304&t[0],rNice:2097152&t[0],xReverse:1048576&t[0],yReverse:524288&t[0],zReverse:262144&t[0],rReverse:131072&t[0],xPadding:65536&t[0],yPadding:32768&t[0],zPadding:16384&t[0],rPadding:8192&t[0],padding:64&t[1],flatData:536870912&t[0],extents:128&t[1],xDomain:256&t[1],yDomain:512&t[1],zDomain:1024&t[1],rDomain:2048&t[1],xRange:4096&t[1],yRange:8192&t[1],zRange:16384&t[1],rRange:32768&t[1],config:2048&t[0],xScale:512&t[0],xGet:65536&t[1],yScale:256&t[0],yGet:131072&t[1],zScale:128&t[0],zGet:262144&t[1],rScale:64&t[0],rGet:524288&t[1]}},lQ=function(t){return{element:t[2],width:t[34],height:t[35],aspectRatio:t[36],containerWidth:t[32],containerHeight:t[31],activeGetters:t[10],percentRange:t[33],x:t[28],y:t[27],z:t[26],r:t[25],custom:t[12],data:t[30],xNice:t[24],yNice:t[23],zNice:t[22],rNice:t[21],xReverse:t[20],yReverse:t[19],zReverse:t[18],rReverse:t[17],xPadding:t[16],yPadding:t[15],zPadding:t[14],rPadding:t[13],padding:t[37],flatData:t[29],extents:t[38],xDomain:t[39],yDomain:t[40],zDomain:t[41],rDomain:t[42],xRange:t[43],yRange:t[44],zRange:t[45],rRange:t[46],config:t[11],xScale:t[9],xGet:t[47],yScale:t[8],yGet:t[48],zScale:t[7],zGet:t[49],rScale:t[6],rGet:t[50]}};function cQ(t){var e,n,r,i=t[153].default,a=gd(i,t,t[152],lQ);return{c:function(){e=Od("div"),a&&a.c(),Kd(e,"class","layercake-container svelte-vhzpsp"),up((function(){return t[155].call(e)})),$d(e,"position",t[5]),$d(e,"top","absolute"===t[5]?"0":null),$d(e,"right","absolute"===t[5]?"0":null),$d(e,"bottom","absolute"===t[5]?"0":null),$d(e,"left","absolute"===t[5]?"0":null),$d(e,"pointer-events",!1===t[4]?"none":null)},m:function(i,o){Dd(i,e,o),a&&a.m(e,null),t[154](e),n=function(t,e){"static"===getComputedStyle(t).position&&(t.style.position="relative");var n=Od("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;var r,i=Wd();return i?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=Nd(window,"message",(function(t){t.source===n.contentWindow&&e()}))):(n.src="about:blank",n.onload=function(){r=Nd(n.contentWindow,"resize",e),e()}),Td(t,n),function(){(i||r&&n.contentWindow)&&r(),Ld(n)}}(e,t[155].bind(e)),r=!0},p:function(t,n){a&&a.p&&(!r||2147483588&n[0]|1048575&n[1]|268435456&n[4])&&_d(a,i,t,t[152],r?yd(i,t[152],n,uQ):wd(t[152]),lQ),32&n[0]&&$d(e,"position",t[5]),32&n[0]&&$d(e,"top","absolute"===t[5]?"0":null),32&n[0]&&$d(e,"right","absolute"===t[5]?"0":null),32&n[0]&&$d(e,"bottom","absolute"===t[5]?"0":null),32&n[0]&&$d(e,"left","absolute"===t[5]?"0":null),16&n[0]&&$d(e,"pointer-events",!1===t[4]?"none":null)},i:function(t){r||(yp(a,t),r=!0)},o:function(t){_p(a,t),r=!1},d:function(r){r&&Ld(e),a&&a.d(r),t[154](null),n()}}}function hQ(t){var e,n,r=(!0===t[3]||"undefined"!=typeof window)&&cQ(t);return{c:function(){r&&r.c(),e=Vd()},m:function(t,i){r&&r.m(t,i),Dd(t,e,i),n=!0},p:function(t,n){!0===t[3]||"undefined"!=typeof window?r?(r.p(t,n),8&n[0]&&yp(r,1)):((r=cQ(t)).c(),yp(r,1),r.m(e.parentNode,e)):r&&(gp(),_p(r,1,1,(function(){r=null})),mp())},i:function(t){n||(yp(r),n=!0)},o:function(t){_p(r),n=!1},d:function(t){r&&r.d(t),t&&Ld(e)}}}function fQ(t,e,n){var r,i,a,o,s,A,u,l,c,h,f,d,p,v,g,m,y,_,w,x,b,B,k,C,F,E,I,U,S,Q,T,M,D,L,P,O,R,z,H,V,N,K,G,j,$,W,Z,q,X,Y,J,tt,et,nt,rt,it,at,ot,st,At,ut,lt,ct=e.$$slots,ht=void 0===ct?{}:ct,ft=e.$$scope,dt=function(t){var e,n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];clearTimeout(e),e=setTimeout((function(){t.apply(n,a)}),r)}}(nQ,200),pt=e.ssr,vt=void 0!==pt&&pt,gt=e.pointerEvents,mt=void 0===gt||gt,yt=e.position,_t=void 0===yt?"relative":yt,wt=e.percentRange,xt=void 0!==wt&&wt,bt=e.width,Bt=void 0===bt?void 0:bt,kt=e.height,Ct=void 0===kt?void 0:kt,Ft=e.containerWidth,Et=void 0===Ft?Bt||100:Ft,It=e.containerHeight,Ut=void 0===It?Ct||100:It,St=e.element,Qt=void 0===St?void 0:St,Tt=e.x,Mt=void 0===Tt?void 0:Tt,Dt=e.y,Lt=void 0===Dt?void 0:Dt,Pt=e.z,Ot=void 0===Pt?void 0:Pt,Rt=e.r,zt=void 0===Rt?void 0:Rt,Ht=e.data,Vt=void 0===Ht?[]:Ht,Nt=e.xDomain,Kt=void 0===Nt?void 0:Nt,Gt=e.yDomain,jt=void 0===Gt?void 0:Gt,$t=e.zDomain,Wt=void 0===$t?void 0:$t,Zt=e.rDomain,qt=void 0===Zt?void 0:Zt,Xt=e.xNice,Yt=void 0!==Xt&&Xt,Jt=e.yNice,te=void 0!==Jt&&Jt,ee=e.zNice,ne=void 0!==ee&&ee,re=e.rNice,ie=void 0!==re&&re,ae=e.xPadding,oe=void 0===ae?void 0:ae,se=e.yPadding,Ae=void 0===se?void 0:se,ue=e.zPadding,le=void 0===ue?void 0:ue,ce=e.rPadding,he=void 0===ce?void 0:ce,fe=e.xScale,de=void 0===fe?HS.x:fe,pe=e.yScale,ve=void 0===pe?HS.y:pe,ge=e.zScale,me=void 0===ge?HS.z:ge,ye=e.rScale,_e=void 0===ye?HS.r:ye,we=e.xRange,xe=void 0===we?void 0:we,be=e.yRange,Be=void 0===be?void 0:be,ke=e.zRange,Ce=void 0===ke?void 0:ke,Fe=e.rRange,Ee=void 0===Fe?void 0:Fe,Ie=e.xReverse,Ue=void 0!==Ie&&Ie,Se=e.yReverse,Qe=void 0===Se?void 0:Se,Te=e.zReverse,Me=void 0!==Te&&Te,De=e.rReverse,Le=void 0!==De&&De,Pe=e.padding,Oe=void 0===Pe?{}:Pe,Re=e.extents,ze=void 0===Re?{}:Re,He=e.flatData,Ve=void 0===He?void 0:He,Ne=e.custom,Ke=void 0===Ne?{}:Ne,Ge=e.debug,je=void 0!==Ge&&Ge,$e=!1;Yd((function(){$e=!0}));var We={},Ze=ES(xt);vd(t,Ze,(function(t){return n(33,$=t)}));var qe=ES(Et);vd(t,qe,(function(t){return n(32,j=t)}));var Xe=ES(Ut);vd(t,Xe,(function(t){return n(31,G=t)}));var Ye=ES(MS(ze));vd(t,Ye,(function(t){return n(170,K=t)}));var Je=ES(Vt);vd(t,Je,(function(t){return n(30,N=t)}));var tn=ES(Ve||Vt);vd(t,tn,(function(t){return n(29,V=t)}));var en=ES(Oe);vd(t,en,(function(t){return n(169,H=t)}));var nn=ES(US(Mt));vd(t,nn,(function(t){return n(28,z=t)}));var rn=ES(US(Lt));vd(t,rn,(function(t){return n(27,R=t)}));var an=ES(US(Ot));vd(t,an,(function(t){return n(26,O=t)}));var on=ES(US(zt));vd(t,on,(function(t){return n(25,P=t)}));var sn=ES(Kt);vd(t,sn,(function(t){return n(168,L=t)}));var An=ES(jt);vd(t,An,(function(t){return n(167,D=t)}));var un=ES(Wt);vd(t,un,(function(t){return n(166,M=t)}));var ln=ES(qt);vd(t,ln,(function(t){return n(165,T=t)}));var cn=ES(Yt);vd(t,cn,(function(t){return n(24,Q=t)}));var hn=ES(te);vd(t,hn,(function(t){return n(23,S=t)}));var fn=ES(ne);vd(t,fn,(function(t){return n(22,U=t)}));var dn=ES(ie);vd(t,dn,(function(t){return n(21,I=t)}));var pn=ES(Ue);vd(t,pn,(function(t){return n(20,E=t)}));var vn=ES(r);vd(t,vn,(function(t){return n(19,F=t)}));var gn=ES(Me);vd(t,gn,(function(t){return n(18,C=t)}));var mn=ES(Le);vd(t,mn,(function(t){return n(17,k=t)}));var yn=ES(oe);vd(t,yn,(function(t){return n(16,B=t)}));var _n=ES(Ae);vd(t,_n,(function(t){return n(15,b=t)}));var wn=ES(le);vd(t,wn,(function(t){return n(14,x=t)}));var xn=ES(he);vd(t,xn,(function(t){return n(13,w=t)}));var bn=ES(xe);vd(t,bn,(function(t){return n(164,_=t)}));var Bn=ES(Be);vd(t,Bn,(function(t){return n(163,y=t)}));var kn=ES(Ce);vd(t,kn,(function(t){return n(162,m=t)}));var Cn=ES(Ee);vd(t,Cn,(function(t){return n(161,g=t)}));var Fn=ES(de);vd(t,Fn,(function(t){return n(160,v=t)}));var En=ES(ve);vd(t,En,(function(t){return n(159,p=t)}));var In=ES(me);vd(t,In,(function(t){return n(158,d=t)}));var Un=ES(_e);vd(t,Un,(function(t){return n(157,f=t)}));var Sn=ES(We);vd(t,Sn,(function(t){return n(11,c=t)}));var Qn=ES(Ke);vd(t,Qn,(function(t){return n(12,h=t)}));var Tn=IS([nn,rn,an,on],(function(t){var e=gi(t,4),n=e[0],r=e[1],i=e[2],a=e[3],o={};return n&&(o.x=n),r&&(o.y=r),i&&(o.z=i),a&&(o.r=a),o}));vd(t,Tn,(function(t){return n(10,u=t)}));var Mn=IS([en,qe,Xe],(function(t){var e=gi(t,1)[0];return Object.assign({top:0,right:0,bottom:0,left:0},e)}));vd(t,Mn,(function(t){return n(37,X=t)}));var Dn=IS([qe,Xe,Mn],(function(t){var e=gi(t,3),n=e[0],r=e[1],i=e[2],a={};return a.top=i.top,a.right=n-i.right,a.bottom=r-i.bottom,a.left=i.left,a.width=a.right-a.left,a.height=a.bottom-a.top,a.width<=0&&!0===$e&&console.warn("[LayerCake] Target div has zero or negative width. Did you forget to set an explicit width in CSS on the container?"),a.height<=0&&!0===$e&&console.warn("[LayerCake] Target div has zero or negative height. Did you forget to set an explicit height in CSS on the container?"),a}));vd(t,Dn,(function(t){return n(151,l=t)}));var Ln=IS([Dn],(function(t){return gi(t,1)[0].width}));vd(t,Ln,(function(t){return n(34,W=t)}));var Pn=IS([Dn],(function(t){return gi(t,1)[0].height}));vd(t,Pn,(function(t){return n(35,Z=t)}));var On=IS([tn,Tn,Ye,Fn,En,Un,In],(function(t){var e=gi(t,7),n=e[0],r=e[1],i=e[2],a={x:e[3],y:e[4],r:e[5],z:e[6]},o=MS(r,i),s=Object.fromEntries(Object.keys(o).map((function(t){return[t,a[t]]})));return Object.keys(o).length>0?sQ(sQ({},RS(n,o,s)),i):{}}));vd(t,On,(function(t){return n(38,Y=t)}));var Rn=IS([On,sn],zS("x"));vd(t,Rn,(function(t){return n(39,J=t)}));var zn=IS([On,An],zS("y"));vd(t,zn,(function(t){return n(40,tt=t)}));var Hn=IS([On,un],zS("z"));vd(t,Hn,(function(t){return n(41,et=t)}));var Vn=IS([On,ln],zS("r"));vd(t,Vn,(function(t){return n(42,nt=t)}));var Nn=IS([Fn,On,Rn,yn,cn,pn,Ln,Pn,bn,Ze],YS("x"));vd(t,Nn,(function(t){return n(9,A=t)}));var Kn=IS([nn,Nn],JS);vd(t,Kn,(function(t){return n(47,st=t)}));var Gn=IS([En,On,zn,_n,hn,vn,Ln,Pn,Bn,Ze],YS("y"));vd(t,Gn,(function(t){return n(8,s=t)}));var jn=IS([rn,Gn],JS);vd(t,jn,(function(t){return n(48,At=t)}));var $n=IS([In,On,Hn,wn,fn,gn,Ln,Pn,kn,Ze],YS("z"));vd(t,$n,(function(t){return n(7,o=t)}));var Wn=IS([an,$n],JS);vd(t,Wn,(function(t){return n(49,ut=t)}));var Zn=IS([Un,On,Vn,xn,dn,mn,Ln,Pn,Cn,Ze],YS("r"));vd(t,Zn,(function(t){return n(6,a=t)}));var qn=IS([on,Zn],JS);vd(t,qn,(function(t){return n(50,lt=t)}));var Xn=IS([Nn],tQ);vd(t,Xn,(function(t){return n(43,rt=t)}));var Yn=IS([Gn],tQ);vd(t,Yn,(function(t){return n(44,it=t)}));var Jn=IS([$n],tQ);vd(t,Jn,(function(t){return n(45,at=t)}));var tr=IS([Zn],tQ);vd(t,tr,(function(t){return n(46,ot=t)}));var er=IS([Ln,Pn],(function(t){var e=gi(t,2);return e[0]/e[1]}));return vd(t,er,(function(t){return n(36,q=t)})),t.$$set=function(t){"ssr"in t&&n(3,vt=t.ssr),"pointerEvents"in t&&n(4,mt=t.pointerEvents),"position"in t&&n(5,_t=t.position),"percentRange"in t&&n(111,xt=t.percentRange),"width"in t&&n(112,Bt=t.width),"height"in t&&n(113,Ct=t.height),"containerWidth"in t&&n(0,Et=t.containerWidth),"containerHeight"in t&&n(1,Ut=t.containerHeight),"element"in t&&n(2,Qt=t.element),"x"in t&&n(114,Mt=t.x),"y"in t&&n(115,Lt=t.y),"z"in t&&n(116,Ot=t.z),"r"in t&&n(117,zt=t.r),"data"in t&&n(118,Vt=t.data),"xDomain"in t&&n(119,Kt=t.xDomain),"yDomain"in t&&n(120,jt=t.yDomain),"zDomain"in t&&n(121,Wt=t.zDomain),"rDomain"in t&&n(122,qt=t.rDomain),"xNice"in t&&n(123,Yt=t.xNice),"yNice"in t&&n(124,te=t.yNice),"zNice"in t&&n(125,ne=t.zNice),"rNice"in t&&n(126,ie=t.rNice),"xPadding"in t&&n(127,oe=t.xPadding),"yPadding"in t&&n(128,Ae=t.yPadding),"zPadding"in t&&n(129,le=t.zPadding),"rPadding"in t&&n(130,he=t.rPadding),"xScale"in t&&n(131,de=t.xScale),"yScale"in t&&n(132,ve=t.yScale),"zScale"in t&&n(133,me=t.zScale),"rScale"in t&&n(134,_e=t.rScale),"xRange"in t&&n(135,xe=t.xRange),"yRange"in t&&n(136,Be=t.yRange),"zRange"in t&&n(137,Ce=t.zRange),"rRange"in t&&n(138,Ee=t.rRange),"xReverse"in t&&n(139,Ue=t.xReverse),"yReverse"in t&&n(140,Qe=t.yReverse),"zReverse"in t&&n(141,Me=t.zReverse),"rReverse"in t&&n(142,Le=t.rReverse),"padding"in t&&n(143,Oe=t.padding),"extents"in t&&n(144,ze=t.extents),"flatData"in t&&n(145,Ve=t.flatData),"custom"in t&&n(146,Ke=t.custom),"debug"in t&&n(147,je=t.debug),"$$scope"in t&&n(152,ft=t.$$scope)},t.$$.update=function(){65792&t.$$.dirty[4]&&n(150,r=void 0===Qe?"function"!=typeof ve.bandwidth:Qe),2097152&t.$$.dirty[3]&&Mt&&n(148,We.x=Mt,We),4194304&t.$$.dirty[3]&&Lt&&n(148,We.y=Lt,We),8388608&t.$$.dirty[3]&&Ot&&n(148,We.z=Ot,We),16777216&t.$$.dirty[3]&&zt&&n(148,We.r=zt,We),67108864&t.$$.dirty[3]&&Kt&&n(148,We.xDomain=Kt,We),134217728&t.$$.dirty[3]&&jt&&n(148,We.yDomain=jt,We),268435456&t.$$.dirty[3]&&Wt&&n(148,We.zDomain=Wt,We),536870912&t.$$.dirty[3]&&qt&&n(148,We.rDomain=qt,We),2048&t.$$.dirty[4]&&xe&&n(148,We.xRange=xe,We),4096&t.$$.dirty[4]&&Be&&n(148,We.yRange=Be,We),8192&t.$$.dirty[4]&&Ce&&n(148,We.zRange=Ce,We),16384&t.$$.dirty[4]&&Ee&&n(148,We.rRange=Ee,We),262144&t.$$.dirty[3]&&xd(Ze,$=xt,$),1&t.$$.dirty[0]&&xd(qe,j=Et,j),2&t.$$.dirty[0]&&xd(Xe,G=Ut,G),1048576&t.$$.dirty[4]&&xd(Ye,K=MS(ze),K),33554432&t.$$.dirty[3]&&xd(Je,N=Vt,N),33554432&t.$$.dirty[3]|2097152&t.$$.dirty[4]&&xd(tn,V=Ve||Vt,V),524288&t.$$.dirty[4]&&xd(en,H=Oe,H),2097152&t.$$.dirty[3]&&xd(nn,z=US(Mt),z),4194304&t.$$.dirty[3]&&xd(rn,R=US(Lt),R),8388608&t.$$.dirty[3]&&xd(an,O=US(Ot),O),16777216&t.$$.dirty[3]&&xd(on,P=US(zt),P),67108864&t.$$.dirty[3]&&xd(sn,L=Kt,L),134217728&t.$$.dirty[3]&&xd(An,D=jt,D),268435456&t.$$.dirty[3]&&xd(un,M=Wt,M),536870912&t.$$.dirty[3]&&xd(ln,T=qt,T),1073741824&t.$$.dirty[3]&&xd(cn,Q=Yt,Q),1&t.$$.dirty[4]&&xd(hn,S=te,S),2&t.$$.dirty[4]&&xd(fn,U=ne,U),4&t.$$.dirty[4]&&xd(dn,I=ie,I),32768&t.$$.dirty[4]&&xd(pn,E=Ue,E),67108864&t.$$.dirty[4]&&xd(vn,F=r,F),131072&t.$$.dirty[4]&&xd(gn,C=Me,C),262144&t.$$.dirty[4]&&xd(mn,k=Le,k),8&t.$$.dirty[4]&&xd(yn,B=oe,B),16&t.$$.dirty[4]&&xd(_n,b=Ae,b),32&t.$$.dirty[4]&&xd(wn,x=le,x),64&t.$$.dirty[4]&&xd(xn,w=he,w),2048&t.$$.dirty[4]&&xd(bn,_=xe,_),4096&t.$$.dirty[4]&&xd(Bn,y=Be,y),8192&t.$$.dirty[4]&&xd(kn,m=Ce,m),16384&t.$$.dirty[4]&&xd(Cn,g=Ee,g),128&t.$$.dirty[4]&&xd(Fn,v=de,v),256&t.$$.dirty[4]&&xd(En,p=ve,p),512&t.$$.dirty[4]&&xd(In,d=me,d),1024&t.$$.dirty[4]&&xd(Un,f=_e,f),4194304&t.$$.dirty[4]&&xd(Qn,h=Ke,h),16777216&t.$$.dirty[4]&&xd(Sn,c=We,c),33554432&t.$$.dirty[4]&&tp("LayerCake",i),1992&t.$$.dirty[0]|159383552&t.$$.dirty[4]&&(!l||!0!==je||!0!==vt&&"undefined"==typeof window||dt({boundingBox:l,activeGetters:u,x:We.x,y:We.y,z:We.z,r:We.r,xScale:A,yScale:s,zScale:o,rScale:a}))},n(149,i={activeGetters:Tn,width:Ln,height:Pn,percentRange:Ze,aspectRatio:er,containerWidth:qe,containerHeight:Xe,x:nn,y:rn,z:an,r:on,custom:Qn,data:Je,xNice:cn,yNice:hn,zNice:fn,rNice:dn,xReverse:pn,yReverse:vn,zReverse:gn,rReverse:mn,xPadding:yn,yPadding:_n,zPadding:wn,rPadding:xn,padding:Mn,flatData:tn,extents:On,xDomain:Rn,yDomain:zn,zDomain:Hn,rDomain:Vn,xRange:Xn,yRange:Yn,zRange:Jn,rRange:tr,config:Sn,xScale:Nn,xGet:Kn,yScale:Gn,yGet:jn,zScale:$n,zGet:Wn,rScale:Zn,rGet:qn}),[Et,Ut,Qt,vt,mt,_t,a,o,s,A,u,c,h,w,x,b,B,k,C,F,E,I,U,S,Q,P,O,R,z,V,N,G,j,$,W,Z,q,X,Y,J,tt,et,nt,rt,it,at,ot,st,At,ut,lt,Ze,qe,Xe,Ye,Je,tn,en,nn,rn,an,on,sn,An,un,ln,cn,hn,fn,dn,pn,vn,gn,mn,yn,_n,wn,xn,bn,Bn,kn,Cn,Fn,En,In,Un,Sn,Qn,Tn,Mn,Dn,Ln,Pn,On,Rn,zn,Hn,Vn,Nn,Kn,Gn,jn,$n,Wn,Zn,qn,Xn,Yn,Jn,tr,er,xt,Bt,Ct,Mt,Lt,Ot,zt,Vt,Kt,jt,Wt,qt,Yt,te,ne,ie,oe,Ae,le,he,de,ve,me,_e,xe,Be,Ce,Ee,Ue,Qe,Me,Le,Oe,ze,Ve,Ke,je,We,i,r,l,ft,ht,function(t){ip[t?"unshift":"push"]((function(){n(2,Qt=t)}))},function(){Et=this.clientWidth,Ut=this.clientHeight,n(0,Et),n(1,Ut)}]}var dQ=function(t){function e(t){var n;return oi(this,e),Cp(n=iQ(this,e),t,fQ,hQ,fd,{ssr:3,pointerEvents:4,position:5,percentRange:111,width:112,height:113,containerWidth:0,containerHeight:1,element:2,x:114,y:115,z:116,r:117,data:118,xDomain:119,yDomain:120,zDomain:121,rDomain:122,xNice:123,yNice:124,zNice:125,rNice:126,xPadding:127,yPadding:128,zPadding:129,rPadding:130,xScale:131,yScale:132,zScale:133,rScale:134,xRange:135,yRange:136,zRange:137,rRange:138,xReverse:139,yReverse:140,zReverse:141,rReverse:142,padding:143,extents:144,flatData:145,custom:146,debug:147},AQ,[-1,-1,-1,-1,-1,-1]),n}return ci(e,t),ai(e)}(Fp);function pQ(t,e,n){return e=ui(e),Ai(t,vQ()?Reflect.construct(e,n||[],ui(t).constructor):e.apply(t,n))}function vQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(vQ=function(){return!!t})()}function gQ(t){Md(t,"svelte-u84d8d","svg.svelte-u84d8d{position:absolute;top:0;left:0;overflow:visible}")}var mQ=function(t){return{element:1&t}},yQ=function(t){return{element:t[0]}},_Q=function(t){return{element:1&t}},wQ=function(t){return{element:t[0]}},xQ=function(t){return{element:1&t}},bQ=function(t){return{element:t[0]}};function BQ(t){var e,n;return{c:function(){e=Rd("title"),n=zd(t[8])},m:function(t,r){Dd(t,e,r),Td(e,n)},p:function(t,e){256&e&&jd(n,t[8])},d:function(t){t&&Ld(e)}}}function kQ(t){var e,n,r,i,a,o=t[16].title,s=gd(o,t,t[15],bQ),A=s||function(t){var e,n=t[8]&&BQ(t);return{c:function(){n&&n.c(),e=Vd()},m:function(t,r){n&&n.m(t,r),Dd(t,e,r)},p:function(t,r){t[8]?n?n.p(t,r):((n=BQ(t)).c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d:function(t){n&&n.d(t),t&&Ld(e)}}}(t),u=t[16].defs,l=gd(u,t,t[15],wQ),c=t[16].default,h=gd(c,t,t[15],yQ);return{c:function(){e=Rd("svg"),A&&A.c(),n=Rd("defs"),l&&l.c(),r=Rd("g"),h&&h.c(),Kd(r,"class","layercake-layout-svg_g"),Kd(r,"transform",i="translate("+t[11].left+", "+t[11].top+")"),Kd(e,"class","layercake-layout-svg svelte-u84d8d"),Kd(e,"viewBox",t[4]),Kd(e,"width",t[9]),Kd(e,"height",t[10]),Kd(e,"aria-label",t[5]),Kd(e,"aria-labelledby",t[6]),Kd(e,"aria-describedby",t[7]),$d(e,"z-index",t[2]),$d(e,"pointer-events",!1===t[3]?"none":null)},m:function(i,o){Dd(i,e,o),A&&A.m(e,null),Td(e,n),l&&l.m(n,null),Td(e,r),h&&h.m(r,null),t[17](r),t[18](e),a=!0},p:function(t,n){var f=gi(n,1)[0];s?s.p&&(!a||32769&f)&&_d(s,o,t,t[15],a?yd(o,t[15],f,xQ):wd(t[15]),bQ):A&&A.p&&(!a||256&f)&&A.p(t,a?f:-1),l&&l.p&&(!a||32769&f)&&_d(l,u,t,t[15],a?yd(u,t[15],f,_Q):wd(t[15]),wQ),h&&h.p&&(!a||32769&f)&&_d(h,c,t,t[15],a?yd(c,t[15],f,mQ):wd(t[15]),yQ),(!a||2048&f&&i!==(i="translate("+t[11].left+", "+t[11].top+")"))&&Kd(r,"transform",i),(!a||16&f)&&Kd(e,"viewBox",t[4]),(!a||512&f)&&Kd(e,"width",t[9]),(!a||1024&f)&&Kd(e,"height",t[10]),(!a||32&f)&&Kd(e,"aria-label",t[5]),(!a||64&f)&&Kd(e,"aria-labelledby",t[6]),(!a||128&f)&&Kd(e,"aria-describedby",t[7]),4&f&&$d(e,"z-index",t[2]),8&f&&$d(e,"pointer-events",!1===t[3]?"none":null)},i:function(t){a||(yp(A,t),yp(l,t),yp(h,t),a=!0)},o:function(t){_p(A,t),_p(l,t),_p(h,t),a=!1},d:function(n){n&&Ld(e),A&&A.d(n),l&&l.d(n),h&&h.d(n),t[17](null),t[18](null)}}}function CQ(t,e,n){var r,i,a,o=e.$$slots,s=void 0===o?{}:o,A=e.$$scope,u=e.element,l=void 0===u?void 0:u,c=e.innerElement,h=void 0===c?void 0:c,f=e.zIndex,d=void 0===f?void 0:f,p=e.pointerEvents,v=void 0===p?void 0:p,g=e.viewBox,m=void 0===g?void 0:g,y=e.label,_=void 0===y?void 0:y,w=e.labelledBy,x=void 0===w?void 0:w,b=e.describedBy,B=void 0===b?void 0:b,k=e.title,C=void 0===k?void 0:k,F=ep("LayerCake"),E=F.containerWidth,I=F.containerHeight,U=F.padding;return vd(t,E,(function(t){return n(9,r=t)})),vd(t,I,(function(t){return n(10,i=t)})),vd(t,U,(function(t){return n(11,a=t)})),t.$$set=function(t){"element"in t&&n(0,l=t.element),"innerElement"in t&&n(1,h=t.innerElement),"zIndex"in t&&n(2,d=t.zIndex),"pointerEvents"in t&&n(3,v=t.pointerEvents),"viewBox"in t&&n(4,m=t.viewBox),"label"in t&&n(5,_=t.label),"labelledBy"in t&&n(6,x=t.labelledBy),"describedBy"in t&&n(7,B=t.describedBy),"title"in t&&n(8,C=t.title),"$$scope"in t&&n(15,A=t.$$scope)},[l,h,d,v,m,_,x,B,C,r,i,a,E,I,U,A,s,function(t){ip[t?"unshift":"push"]((function(){n(1,h=t)}))},function(t){ip[t?"unshift":"push"]((function(){n(0,l=t)}))}]}var FQ=function(t){function e(t){var n;return oi(this,e),Cp(n=pQ(this,e),t,CQ,kQ,fd,{element:0,innerElement:1,zIndex:2,pointerEvents:3,viewBox:4,label:5,labelledBy:6,describedBy:7,title:8},gQ),n}return ci(e,t),ai(e)}(Fp);function EQ(t){t.nextSibling&&t.parentNode.appendChild(t)}function IQ(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function UQ(t){return"[object Date]"===Object.prototype.toString.call(t)}function SQ(t,e){if(t===e||t!=t)return function(){return t};var n=ni(t);if(n!==ni(e)||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){var r=e.map((function(e,n){return SQ(t[n],e)}));return function(t){return r.map((function(e){return e(t)}))}}if("object"===n){if(!t||!e)throw new Error("Object cannot be null");if(UQ(t)&&UQ(e)){t=t.getTime();var i=(e=e.getTime())-t;return function(e){return new Date(t+e*i)}}var a=Object.keys(e),o={};return a.forEach((function(n){o[n]=SQ(t[n],e[n])})),function(t){var e={};return a.forEach((function(n){e[n]=o[n](t)})),e}}if("number"===n){var s=e-t;return function(e){return t+e*s}}throw new Error("Cannot interpolate ".concat(n," values"))}function QQ(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=ES(t),i=t;function a(a,o){if(null==t)return r.set(t=a),Promise.resolve();i=a;var s=e,A=!1,u=Ad(Ad({},n),o),l=u.delay,c=void 0===l?0:l,h=u.duration,f=void 0===h?400:h,d=u.easing,p=void 0===d?sd:d,v=u.interpolate,g=void 0===v?SQ:v;if(0===f)return s&&(s.abort(),s=null),r.set(t=i),Promise.resolve();var m,y=kd()+c;return e=function(t){var e;return 0===Fd.size&&Cd(Ed),{promise:new Promise((function(n){Fd.add(e={c:t,f:n})})),abort:function(){Fd.delete(e)}}}((function(e){if(e<y)return!0;A||(m=g(t,a),"function"==typeof f&&(f=f(t,a)),A=!0),s&&(s.abort(),s=null);var n=e-y;return n>f?(r.set(t=a),!1):(r.set(t=m(p(n/f))),!0)})),e.promise}return{set:a,update:function(e,n){return a(e(i,t),n)},subscribe:r.subscribe}}var TQ=o.RegExp,MQ=TQ.prototype,DQ=A&&s((function(){var t=!0;try{TQ(".","d")}catch(e){t=!1}var e={},n="",r=t?"dgimsy":"gimsy",i=function(t,r){Object.defineProperty(e,t,{get:function(){return n+=r,!0}})},a={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var o in t&&(a.hasIndices="d"),a)i(o,a[o]);return Object.getOwnPropertyDescriptor(MQ,"flags").get.call(e)!==r||n!==r}));DQ&&ln(MQ,"flags",{configurable:!0,get:$A});var LQ=RangeError,PQ=String.fromCharCode,OQ=String.fromCodePoint,RQ=w([].join),zQ=!!OQ&&1!==OQ.length;Pe({target:"String",stat:!0,arity:1,forced:zQ},{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,i=0;r>i;){if(e=+arguments[i++],fe(e,1114111)!==e)throw new LQ(e+" is not a valid code point");n[i]=e<65536?PQ(e):PQ(55296+((e-=65536)>>10),e%1024+56320)}return RQ(n,"")}}),Pe({target:"String",proto:!0},{repeat:TE}),Gc("Uint8",(function(t){return function(e,n,r){return t(this,e,n,r)}})),Gc("Uint16",(function(t){return function(e,n,r){return t(this,e,n,r)}}));var HQ=e((function(t,e){
/*!
	   * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
	   * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
	   * Released under MIT License
	   */
t.exports=function(){
/*! *****************************************************************************
	    Copyright (c) Microsoft Corporation.
	      Permission to use, copy, modify, and/or distribute this software for any
	    purpose with or without fee is hereby granted.
	      THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	    PERFORMANCE OF THIS SOFTWARE.
	    ***************************************************************************** */
var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};function e(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var n=function(){return n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},n.apply(this,arguments)};function r(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,a){function o(t){try{A(r.next(t))}catch(t){a(t)}}function s(t){try{A(r.throw(t))}catch(t){a(t)}}function A(t){t.done?n(t.value):i(t.value).then(o,s)}A((r=r.apply(t,e||[])).next())}))}function i(t,e){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(t){return function(e){return A([t,e])}}function A(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function a(t,e,n){if(n||2===arguments.length)for(var r,i=0,a=e.length;i<a;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}for(var o=function(){function t(t,e,n,r){this.left=t,this.top=e,this.width=n,this.height=r}return t.prototype.add=function(e,n,r,i){return new t(this.left+e,this.top+n,this.width+r,this.height+i)},t.fromClientRect=function(e,n){return new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height)},t.fromDOMRectList=function(e,n){var r=Array.from(n).find((function(t){return 0!==t.width}));return r?new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),s=function(t,e){return o.fromClientRect(t,e.getBoundingClientRect())},A=function(t){var e=t.body,n=t.documentElement;if(!e||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,n.scrollWidth),Math.max(e.offsetWidth,n.offsetWidth),Math.max(e.clientWidth,n.clientWidth)),i=Math.max(Math.max(e.scrollHeight,n.scrollHeight),Math.max(e.offsetHeight,n.offsetHeight),Math.max(e.clientHeight,n.clientHeight));return new o(0,0,r,i)},u=function(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var a=t.charCodeAt(n++);56320==(64512&a)?e.push(((1023&i)<<10)+(1023&a)+65536):(e.push(i),n--)}else e.push(i)}return e},l=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],i=-1,a="";++i<n;){var o=t[i];o<=65535?r.push(o):(o-=65536,r.push(55296+(o>>10),o%1024+56320)),(i+1===n||r.length>16384)&&(a+=String.fromCharCode.apply(String,r),r.length=0)}return a},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h="undefined"==typeof Uint8Array?[]:new Uint8Array(256),f=0;f<c.length;f++)h[c.charCodeAt(f)]=f;for(var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p="undefined"==typeof Uint8Array?[]:new Uint8Array(256),v=0;v<d.length;v++)p[d.charCodeAt(v)]=v;for(var g=function(t){var e,n,r,i,a,o=.75*t.length,s=t.length,A=0;"="===t[t.length-1]&&(o--,"="===t[t.length-2]&&o--);var u="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(o):new Array(o),l=Array.isArray(u)?u:new Uint8Array(u);for(e=0;e<s;e+=4)n=p[t.charCodeAt(e)],r=p[t.charCodeAt(e+1)],i=p[t.charCodeAt(e+2)],a=p[t.charCodeAt(e+3)],l[A++]=n<<2|r>>4,l[A++]=(15&r)<<4|i>>2,l[A++]=(3&i)<<6|63&a;return u},m=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},y=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},_=5,w=11,x=2,b=65536>>_,B=(1<<_)-1,k=b+(1024>>_)+32,C=65536>>w,F=(1<<w-_)-1,E=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},I=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},U=function(t,e){var n=g(t),r=Array.isArray(n)?y(n):new Uint32Array(n),i=Array.isArray(n)?m(n):new Uint16Array(n),a=24,o=E(i,a/2,r[4]/2),s=2===r[5]?E(i,(a+r[4])/2):I(r,Math.ceil((a+r[4])/4));return new S(r[0],r[1],r[2],r[3],o,s)},S=function(){function t(t,e,n,r,i,a){this.initialValue=t,this.errorValue=e,this.highStart=n,this.highValueIndex=r,this.index=i,this.data=a}return t.prototype.get=function(t){var e;if(t>=0){if(t<55296||t>56319&&t<=65535)return e=((e=this.index[t>>_])<<x)+(t&B),this.data[e];if(t<=65535)return e=((e=this.index[b+(t-55296>>_)])<<x)+(t&B),this.data[e];if(t<this.highStart)return e=k-C+(t>>w),e=this.index[e],e+=t>>_&F,e=((e=this.index[e])<<x)+(t&B),this.data[e];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),Q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T="undefined"==typeof Uint8Array?[]:new Uint8Array(256),M=0;M<Q.length;M++)T[Q.charCodeAt(M)]=M;var D=50,L=1,P=2,O=3,R=4,z=5,H=7,V=8,N=9,K=10,G=11,j=12,$=13,W=14,Z=15,q=16,X=17,Y=18,J=19,tt=20,et=21,nt=22,rt=23,it=24,at=25,ot=26,st=27,At=28,ut=29,lt=30,ct=31,ht=32,ft=33,dt=34,pt=35,vt=36,gt=37,mt=38,yt=39,_t=40,wt=41,xt=42,bt=43,Bt=[9001,65288],kt="!",Ct="Ã",Ft="Ã·",Et=U("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),It=[lt,vt],Ut=[L,P,O,z],St=[K,V],Qt=[st,ot],Tt=Ut.concat(St),Mt=[mt,yt,_t,dt,pt],Dt=[Z,$],Lt=function(t,e){void 0===e&&(e="strict");var n=[],r=[],i=[];return t.forEach((function(t,a){var o=Et.get(t);if(o>D?(i.push(!0),o-=D):i.push(!1),-1!==["normal","auto","loose"].indexOf(e)&&-1!==[8208,8211,12316,12448].indexOf(t))return r.push(a),n.push(q);if(o===R||o===G){if(0===a)return r.push(a),n.push(lt);var s=n[a-1];return-1===Tt.indexOf(s)?(r.push(r[a-1]),n.push(s)):(r.push(a),n.push(lt))}return r.push(a),o===ct?n.push("strict"===e?et:gt):o===xt||o===ut?n.push(lt):o===bt?t>=131072&&t<=196605||t>=196608&&t<=262141?n.push(gt):n.push(lt):void n.push(o)})),[r,n,i]},Pt=function(t,e,n,r){var i=r[n];if(Array.isArray(t)?-1!==t.indexOf(i):t===i)for(var a=n;a<=r.length;){if((A=r[++a])===e)return!0;if(A!==K)break}if(i===K)for(a=n;a>0;){var o=r[--a];if(Array.isArray(t)?-1!==t.indexOf(o):t===o)for(var s=n;s<=r.length;){var A;if((A=r[++s])===e)return!0;if(A!==K)break}if(o!==K)break}return!1},Ot=function(t,e){for(var n=t;n>=0;){var r=e[n];if(r!==K)return r;n--}return 0},Rt=function(t,e,n,r,i){if(0===n[r])return Ct;var a=r-1;if(Array.isArray(i)&&!0===i[a])return Ct;var o=a-1,s=a+1,A=e[a],u=o>=0?e[o]:0,l=e[s];if(A===P&&l===O)return Ct;if(-1!==Ut.indexOf(A))return kt;if(-1!==Ut.indexOf(l))return Ct;if(-1!==St.indexOf(l))return Ct;if(Ot(a,e)===V)return Ft;if(Et.get(t[a])===G)return Ct;if((A===ht||A===ft)&&Et.get(t[s])===G)return Ct;if(A===H||l===H)return Ct;if(A===N)return Ct;if(-1===[K,$,Z].indexOf(A)&&l===N)return Ct;if(-1!==[X,Y,J,it,At].indexOf(l))return Ct;if(Ot(a,e)===nt)return Ct;if(Pt(rt,nt,a,e))return Ct;if(Pt([X,Y],et,a,e))return Ct;if(Pt(j,j,a,e))return Ct;if(A===K)return Ft;if(A===rt||l===rt)return Ct;if(l===q||A===q)return Ft;if(-1!==[$,Z,et].indexOf(l)||A===W)return Ct;if(u===vt&&-1!==Dt.indexOf(A))return Ct;if(A===At&&l===vt)return Ct;if(l===tt)return Ct;if(-1!==It.indexOf(l)&&A===at||-1!==It.indexOf(A)&&l===at)return Ct;if(A===st&&-1!==[gt,ht,ft].indexOf(l)||-1!==[gt,ht,ft].indexOf(A)&&l===ot)return Ct;if(-1!==It.indexOf(A)&&-1!==Qt.indexOf(l)||-1!==Qt.indexOf(A)&&-1!==It.indexOf(l))return Ct;if(-1!==[st,ot].indexOf(A)&&(l===at||-1!==[nt,Z].indexOf(l)&&e[s+1]===at)||-1!==[nt,Z].indexOf(A)&&l===at||A===at&&-1!==[at,At,it].indexOf(l))return Ct;if(-1!==[at,At,it,X,Y].indexOf(l))for(var c=a;c>=0;){if((h=e[c])===at)return Ct;if(-1===[At,it].indexOf(h))break;c--}if(-1!==[st,ot].indexOf(l))for(c=-1!==[X,Y].indexOf(A)?o:a;c>=0;){var h;if((h=e[c])===at)return Ct;if(-1===[At,it].indexOf(h))break;c--}if(mt===A&&-1!==[mt,yt,dt,pt].indexOf(l)||-1!==[yt,dt].indexOf(A)&&-1!==[yt,_t].indexOf(l)||-1!==[_t,pt].indexOf(A)&&l===_t)return Ct;if(-1!==Mt.indexOf(A)&&-1!==[tt,ot].indexOf(l)||-1!==Mt.indexOf(l)&&A===st)return Ct;if(-1!==It.indexOf(A)&&-1!==It.indexOf(l))return Ct;if(A===it&&-1!==It.indexOf(l))return Ct;if(-1!==It.concat(at).indexOf(A)&&l===nt&&-1===Bt.indexOf(t[s])||-1!==It.concat(at).indexOf(l)&&A===Y)return Ct;if(A===wt&&l===wt){for(var f=n[a],d=1;f>0&&e[--f]===wt;)d++;if(d%2!=0)return Ct}return A===ht&&l===ft?Ct:Ft},zt=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var n=Lt(t,e.lineBreak),r=n[0],i=n[1],a=n[2];"break-all"!==e.wordBreak&&"break-word"!==e.wordBreak||(i=i.map((function(t){return-1!==[at,lt,xt].indexOf(t)?gt:t})));var o="keep-all"===e.wordBreak?a.map((function(e,n){return e&&t[n]>=19968&&t[n]<=40959})):void 0;return[r,i,o]},Ht=function(){function t(t,e,n,r){this.codePoints=t,this.required=e===kt,this.start=n,this.end=r}return t.prototype.slice=function(){return l.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),Vt=function(t,e){var n=u(t),r=zt(n,e),i=r[0],a=r[1],o=r[2],s=n.length,A=0,l=0;return{next:function(){if(l>=s)return{done:!0,value:null};for(var t=Ct;l<s&&(t=Rt(n,a,i,++l,o))===Ct;);if(t!==Ct||l===s){var e=new Ht(n,t,A,l);return A=l,{value:e,done:!1}}return{done:!0,value:null}}}},Nt=1,Kt=2,Gt=4,jt=8,$t=10,Wt=47,Zt=92,qt=9,Xt=32,Yt=34,Jt=61,te=35,ee=36,ne=37,re=39,ie=40,ae=41,oe=95,se=45,Ae=33,ue=60,le=62,ce=64,he=91,fe=93,de=61,pe=123,ve=63,ge=125,me=124,ye=126,_e=128,we=65533,xe=42,be=43,Be=44,ke=58,Ce=59,Fe=46,Ee=0,Ie=8,Ue=11,Se=14,Qe=31,Te=127,Me=-1,De=48,Le=97,Pe=101,Oe=102,Re=117,ze=122,He=65,Ve=69,Ne=70,Ke=85,Ge=90,je=function(t){return t>=De&&t<=57},$e=function(t){return t>=55296&&t<=57343},We=function(t){return je(t)||t>=He&&t<=Ne||t>=Le&&t<=Oe},Ze=function(t){return t>=Le&&t<=ze},qe=function(t){return t>=He&&t<=Ge},Xe=function(t){return Ze(t)||qe(t)},Ye=function(t){return t>=_e},Je=function(t){return t===$t||t===qt||t===Xt},tn=function(t){return Xe(t)||Ye(t)||t===oe},en=function(t){return tn(t)||je(t)||t===se},nn=function(t){return t>=Ee&&t<=Ie||t===Ue||t>=Se&&t<=Qe||t===Te},rn=function(t,e){return t===Zt&&e!==$t},an=function(t,e,n){return t===se?tn(e)||rn(e,n):!!tn(t)||!(t!==Zt||!rn(t,e))},on=function(t,e,n){return t===be||t===se?!!je(e)||e===Fe&&je(n):je(t===Fe?e:t)},sn=function(t){var e=0,n=1;t[e]!==be&&t[e]!==se||(t[e]===se&&(n=-1),e++);for(var r=[];je(t[e]);)r.push(t[e++]);var i=r.length?parseInt(l.apply(void 0,r),10):0;t[e]===Fe&&e++;for(var a=[];je(t[e]);)a.push(t[e++]);var o=a.length,s=o?parseInt(l.apply(void 0,a),10):0;t[e]!==Ve&&t[e]!==Pe||e++;var A=1;t[e]!==be&&t[e]!==se||(t[e]===se&&(A=-1),e++);for(var u=[];je(t[e]);)u.push(t[e++]);var c=u.length?parseInt(l.apply(void 0,u),10):0;return n*(i+s*Math.pow(10,-o))*Math.pow(10,A*c)},An={type:2},un={type:3},ln={type:4},cn={type:13},hn={type:8},fn={type:21},dn={type:9},pn={type:10},vn={type:11},gn={type:12},mn={type:14},yn={type:23},_n={type:1},wn={type:25},xn={type:24},bn={type:26},Bn={type:27},kn={type:28},Cn={type:29},Fn={type:31},En={type:32},In=function(){function t(){this._value=[]}return t.prototype.write=function(t){this._value=this._value.concat(u(t))},t.prototype.read=function(){for(var t=[],e=this.consumeToken();e!==En;)t.push(e),e=this.consumeToken();return t},t.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case Yt:return this.consumeStringToken(Yt);case te:var e=this.peekCodePoint(0),n=this.peekCodePoint(1),r=this.peekCodePoint(2);if(en(e)||rn(n,r)){var i=an(e,n,r)?Kt:Nt;return{type:5,value:this.consumeName(),flags:i}}break;case ee:if(this.peekCodePoint(0)===Jt)return this.consumeCodePoint(),cn;break;case re:return this.consumeStringToken(re);case ie:return An;case ae:return un;case xe:if(this.peekCodePoint(0)===Jt)return this.consumeCodePoint(),mn;break;case be:if(on(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case Be:return ln;case se:var a=t,o=this.peekCodePoint(0),s=this.peekCodePoint(1);if(on(a,o,s))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(an(a,o,s))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(o===se&&s===le)return this.consumeCodePoint(),this.consumeCodePoint(),xn;break;case Fe:if(on(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case Wt:if(this.peekCodePoint(0)===xe)for(this.consumeCodePoint();;){var A=this.consumeCodePoint();if(A===xe&&(A=this.consumeCodePoint())===Wt)return this.consumeToken();if(A===Me)return this.consumeToken()}break;case ke:return bn;case Ce:return Bn;case ue:if(this.peekCodePoint(0)===Ae&&this.peekCodePoint(1)===se&&this.peekCodePoint(2)===se)return this.consumeCodePoint(),this.consumeCodePoint(),wn;break;case ce:var u=this.peekCodePoint(0),c=this.peekCodePoint(1),h=this.peekCodePoint(2);if(an(u,c,h))return{type:7,value:this.consumeName()};break;case he:return kn;case Zt:if(rn(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case fe:return Cn;case de:if(this.peekCodePoint(0)===Jt)return this.consumeCodePoint(),hn;break;case pe:return vn;case ge:return gn;case Re:case Ke:var f=this.peekCodePoint(0),d=this.peekCodePoint(1);return f!==be||!We(d)&&d!==ve||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case me:if(this.peekCodePoint(0)===Jt)return this.consumeCodePoint(),dn;if(this.peekCodePoint(0)===me)return this.consumeCodePoint(),fn;break;case ye:if(this.peekCodePoint(0)===Jt)return this.consumeCodePoint(),pn;break;case Me:return En}return Je(t)?(this.consumeWhiteSpace(),Fn):je(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):tn(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:l(t)}},t.prototype.consumeCodePoint=function(){var t=this._value.shift();return void 0===t?-1:t},t.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},t.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},t.prototype.consumeUnicodeRangeToken=function(){for(var t=[],e=this.consumeCodePoint();We(e)&&t.length<6;)t.push(e),e=this.consumeCodePoint();for(var n=!1;e===ve&&t.length<6;)t.push(e),e=this.consumeCodePoint(),n=!0;if(n)return{type:30,start:parseInt(l.apply(void 0,t.map((function(t){return t===ve?De:t}))),16),end:parseInt(l.apply(void 0,t.map((function(t){return t===ve?Ne:t}))),16)};var r=parseInt(l.apply(void 0,t),16);if(this.peekCodePoint(0)===se&&We(this.peekCodePoint(1))){this.consumeCodePoint(),e=this.consumeCodePoint();for(var i=[];We(e)&&i.length<6;)i.push(e),e=this.consumeCodePoint();return{type:30,start:r,end:parseInt(l.apply(void 0,i),16)}}return{type:30,start:r,end:r}},t.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return"url"===t.toLowerCase()&&this.peekCodePoint(0)===ie?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===ie?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},t.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Me)return{type:22,value:""};var e=this.peekCodePoint(0);if(e===re||e===Yt){var n=this.consumeStringToken(this.consumeCodePoint());return 0===n.type&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Me||this.peekCodePoint(0)===ae)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),yn)}for(;;){var r=this.consumeCodePoint();if(r===Me||r===ae)return{type:22,value:l.apply(void 0,t)};if(Je(r))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Me||this.peekCodePoint(0)===ae?(this.consumeCodePoint(),{type:22,value:l.apply(void 0,t)}):(this.consumeBadUrlRemnants(),yn);if(r===Yt||r===re||r===ie||nn(r))return this.consumeBadUrlRemnants(),yn;if(r===Zt){if(!rn(r,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),yn;t.push(this.consumeEscapedCodePoint())}else t.push(r)}},t.prototype.consumeWhiteSpace=function(){for(;Je(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===ae||t===Me)return;rn(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(t){for(var e=5e4,n="";t>0;){var r=Math.min(e,t);n+=l.apply(void 0,this._value.splice(0,r)),t-=r}return this._value.shift(),n},t.prototype.consumeStringToken=function(t){for(var e="",n=0;;){var r=this._value[n];if(r===Me||void 0===r||r===t)return{type:0,value:e+=this.consumeStringSlice(n)};if(r===$t)return this._value.splice(0,n),_n;if(r===Zt){var i=this._value[n+1];i!==Me&&void 0!==i&&(i===$t?(e+=this.consumeStringSlice(n),n=-1,this._value.shift()):rn(r,i)&&(e+=this.consumeStringSlice(n),e+=l(this.consumeEscapedCodePoint()),n=-1))}n++}},t.prototype.consumeNumber=function(){var t=[],e=Gt,n=this.peekCodePoint(0);for(n!==be&&n!==se||t.push(this.consumeCodePoint());je(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0);var r=this.peekCodePoint(1);if(n===Fe&&je(r))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),e=jt;je(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0),r=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((n===Ve||n===Pe)&&((r===be||r===se)&&je(i)||je(r)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),e=jt;je(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[sn(t),e]},t.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),e=t[0],n=t[1],r=this.peekCodePoint(0),i=this.peekCodePoint(1),a=this.peekCodePoint(2);return an(r,i,a)?{type:15,number:e,flags:n,unit:this.consumeName()}:r===ne?(this.consumeCodePoint(),{type:16,number:e,flags:n}):{type:17,number:e,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(We(t)){for(var e=l(t);We(this.peekCodePoint(0))&&e.length<6;)e+=l(this.consumeCodePoint());Je(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(e,16);return 0===n||$e(n)||n>1114111?we:n}return t===Me?we:t},t.prototype.consumeName=function(){for(var t="";;){var e=this.consumeCodePoint();if(en(e))t+=l(e);else{if(!rn(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),t;t+=l(this.consumeEscapedCodePoint())}}},t}(),Un=function(){function t(t){this._tokens=t}return t.create=function(e){var n=new In;return n.write(e),new t(n.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var t=this.consumeToken();31===t.type;)t=this.consumeToken();if(32===t.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var e=this.consumeComponentValue();do{t=this.consumeToken()}while(31===t.type);if(32===t.type)return e;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var t=[];;){var e=this.consumeComponentValue();if(32===e.type)return t;t.push(e),t.push()}},t.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},t.prototype.consumeSimpleBlock=function(t){for(var e={type:t,values:[]},n=this.consumeToken();;){if(32===n.type||Rn(n,t))return e;this.reconsumeToken(n),e.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(t){for(var e={name:t.value,values:[],type:18};;){var n=this.consumeToken();if(32===n.type||3===n.type)return e;this.reconsumeToken(n),e.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var t=this._tokens.shift();return void 0===t?En:t},t.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},t}(),Sn=function(t){return 15===t.type},Qn=function(t){return 17===t.type},Tn=function(t){return 20===t.type},Mn=function(t){return 0===t.type},Dn=function(t,e){return Tn(t)&&t.value===e},Ln=function(t){return 31!==t.type},Pn=function(t){return 31!==t.type&&4!==t.type},On=function(t){var e=[],n=[];return t.forEach((function(t){if(4===t.type){if(0===n.length)throw new Error("Error parsing function args, zero tokens for arg");return e.push(n),void(n=[])}31!==t.type&&n.push(t)})),n.length&&e.push(n),e},Rn=function(t,e){return 11===e&&12===t.type||28===e&&29===t.type||2===e&&3===t.type},zn=function(t){return 17===t.type||15===t.type},Hn=function(t){return 16===t.type||zn(t)},Vn=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},Nn={type:17,number:0,flags:Gt},Kn={type:16,number:50,flags:Gt},Gn={type:16,number:100,flags:Gt},jn=function(t,e,n){var r=t[0],i=t[1];return[$n(r,e),$n(void 0!==i?i:r,n)]},$n=function(t,e){if(16===t.type)return t.number/100*e;if(Sn(t))switch(t.unit){case"rem":case"em":return 16*t.number;default:return t.number}return t.number},Wn="deg",Zn="grad",qn="rad",Xn="turn",Yn={name:"angle",parse:function(t,e){if(15===e.type)switch(e.unit){case Wn:return Math.PI*e.number/180;case Zn:return Math.PI/200*e.number;case qn:return e.number;case Xn:return 2*Math.PI*e.number}throw new Error("Unsupported angle type")}},Jn=function(t){return 15===t.type&&(t.unit===Wn||t.unit===Zn||t.unit===qn||t.unit===Xn)},tr=function(t){switch(t.filter(Tn).map((function(t){return t.value})).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Nn,Nn];case"to top":case"bottom":return er(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Nn,Gn];case"to right":case"left":return er(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Gn,Gn];case"to bottom":case"top":return er(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Gn,Nn];case"to left":case"right":return er(270)}return 0},er=function(t){return Math.PI*t/180},nr={name:"color",parse:function(t,e){if(18===e.type){var n=lr[e.name];if(void 0===n)throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return n(t,e.values)}if(5===e.type){if(3===e.value.length){var r=e.value.substring(0,1),i=e.value.substring(1,2),a=e.value.substring(2,3);return ar(parseInt(r+r,16),parseInt(i+i,16),parseInt(a+a,16),1)}if(4===e.value.length){r=e.value.substring(0,1),i=e.value.substring(1,2),a=e.value.substring(2,3);var o=e.value.substring(3,4);return ar(parseInt(r+r,16),parseInt(i+i,16),parseInt(a+a,16),parseInt(o+o,16)/255)}if(6===e.value.length)return r=e.value.substring(0,2),i=e.value.substring(2,4),a=e.value.substring(4,6),ar(parseInt(r,16),parseInt(i,16),parseInt(a,16),1);if(8===e.value.length)return r=e.value.substring(0,2),i=e.value.substring(2,4),a=e.value.substring(4,6),o=e.value.substring(6,8),ar(parseInt(r,16),parseInt(i,16),parseInt(a,16),parseInt(o,16)/255)}if(20===e.type){var s=hr[e.value.toUpperCase()];if(void 0!==s)return s}return hr.TRANSPARENT}},rr=function(t){return!(255&t)},ir=function(t){var e=255&t,n=255&t>>8,r=255&t>>16,i=255&t>>24;return e<255?"rgba("+i+","+r+","+n+","+e/255+")":"rgb("+i+","+r+","+n+")"},ar=function(t,e,n,r){return(t<<24|e<<16|n<<8|Math.round(255*r))>>>0},or=function(t,e){if(17===t.type)return t.number;if(16===t.type){var n=3===e?1:255;return 3===e?t.number/100*n:Math.round(t.number/100*n)}return 0},sr=function(t,e){var n=e.filter(Pn);if(3===n.length){var r=n.map(or),i=r[0],a=r[1],o=r[2];return ar(i,a,o,1)}if(4===n.length){var s=n.map(or),A=(i=s[0],a=s[1],o=s[2],s[3]);return ar(i,a,o,A)}return 0};function Ar(t,e,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(e-t)*n*6+t:n<.5?e:n<2/3?6*(e-t)*(2/3-n)+t:t}var ur=function(t,e){var n=e.filter(Pn),r=n[0],i=n[1],a=n[2],o=n[3],s=(17===r.type?er(r.number):Yn.parse(t,r))/(2*Math.PI),A=Hn(i)?i.number/100:0,u=Hn(a)?a.number/100:0,l=void 0!==o&&Hn(o)?$n(o,1):1;if(0===A)return ar(255*u,255*u,255*u,1);var c=u<=.5?u*(A+1):u+A-u*A,h=2*u-c,f=Ar(h,c,s+1/3),d=Ar(h,c,s),p=Ar(h,c,s-1/3);return ar(255*f,255*d,255*p,l)},lr={hsl:ur,hsla:ur,rgb:sr,rgba:sr},cr=function(t,e){return nr.parse(t,Un.create(e).parseComponentValue())},hr={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},fr={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map((function(t){if(Tn(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},dr={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},pr=function(t,e){var n=nr.parse(t,e[0]),r=e[1];return r&&Hn(r)?{color:n,stop:r}:{color:n,stop:null}},vr=function(t,e){var n=t[0],r=t[t.length-1];null===n.stop&&(n.stop=Nn),null===r.stop&&(r.stop=Gn);for(var i=[],a=0,o=0;o<t.length;o++){var s=t[o].stop;if(null!==s){var A=$n(s,e);A>a?i.push(A):i.push(a),a=A}else i.push(null)}var u=null;for(o=0;o<i.length;o++){var l=i[o];if(null===l)null===u&&(u=o);else if(null!==u){for(var c=o-u,h=(l-i[u-1])/(c+1),f=1;f<=c;f++)i[u+f-1]=h*f;u=null}}return t.map((function(t,n){return{color:t.color,stop:Math.max(Math.min(1,i[n]/e),0)}}))},gr=function(t,e,n){var r=e/2,i=n/2,a=$n(t[0],e)-r,o=i-$n(t[1],n);return(Math.atan2(o,a)+2*Math.PI)%(2*Math.PI)},mr=function(t,e,n){var r="number"==typeof t?t:gr(t,e,n),i=Math.abs(e*Math.sin(r))+Math.abs(n*Math.cos(r)),a=e/2,o=n/2,s=i/2,A=Math.sin(r-Math.PI/2)*s,u=Math.cos(r-Math.PI/2)*s;return[i,a-u,a+u,o-A,o+A]},yr=function(t,e){return Math.sqrt(t*t+e*e)},_r=function(t,e,n,r,i){return[[0,0],[0,e],[t,0],[t,e]].reduce((function(t,e){var a=e[0],o=e[1],s=yr(n-a,r-o);return(i?s<t.optimumDistance:s>t.optimumDistance)?{optimumCorner:e,optimumDistance:s}:t}),{optimumDistance:i?1/0:-1/0,optimumCorner:null}).optimumCorner},wr=function(t,e,n,r,i){var a=0,o=0;switch(t.size){case 0:0===t.shape?a=o=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-i)):1===t.shape&&(a=Math.min(Math.abs(e),Math.abs(e-r)),o=Math.min(Math.abs(n),Math.abs(n-i)));break;case 2:if(0===t.shape)a=o=Math.min(yr(e,n),yr(e,n-i),yr(e-r,n),yr(e-r,n-i));else if(1===t.shape){var s=Math.min(Math.abs(n),Math.abs(n-i))/Math.min(Math.abs(e),Math.abs(e-r)),A=_r(r,i,e,n,!0),u=A[0],l=A[1];o=s*(a=yr(u-e,(l-n)/s))}break;case 1:0===t.shape?a=o=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-i)):1===t.shape&&(a=Math.max(Math.abs(e),Math.abs(e-r)),o=Math.max(Math.abs(n),Math.abs(n-i)));break;case 3:if(0===t.shape)a=o=Math.max(yr(e,n),yr(e,n-i),yr(e-r,n),yr(e-r,n-i));else if(1===t.shape){s=Math.max(Math.abs(n),Math.abs(n-i))/Math.max(Math.abs(e),Math.abs(e-r));var c=_r(r,i,e,n,!1);u=c[0],l=c[1],o=s*(a=yr(u-e,(l-n)/s))}}return Array.isArray(t.size)&&(a=$n(t.size[0],r),o=2===t.size.length?$n(t.size[1],i):a),[a,o]},xr=function(t,e){var n=er(180),r=[];return On(e).forEach((function(e,i){if(0===i){var a=e[0];if(20===a.type&&-1!==["top","left","right","bottom"].indexOf(a.value))return void(n=tr(e));if(Jn(a))return void(n=(Yn.parse(t,a)+er(270))%er(360))}var o=pr(t,e);r.push(o)})),{angle:n,stops:r,type:1}},br=function(t,e){var n=er(180),r=[],i=1,a=0,o=3,s=[];return On(e).forEach((function(e,n){var a=e[0];if(0===n){if(Tn(a)&&"linear"===a.value)return void(i=1);if(Tn(a)&&"radial"===a.value)return void(i=2)}if(18===a.type)if("from"===a.name){var o=nr.parse(t,a.values[0]);r.push({stop:Nn,color:o})}else if("to"===a.name)o=nr.parse(t,a.values[0]),r.push({stop:Gn,color:o});else if("color-stop"===a.name){var s=a.values.filter(Pn);if(2===s.length){o=nr.parse(t,s[1]);var A=s[0];Qn(A)&&r.push({stop:{type:16,number:100*A.number,flags:A.flags},color:o})}}})),1===i?{angle:(n+er(180))%er(360),stops:r,type:i}:{size:o,shape:a,stops:r,position:s,type:i}},Br="closest-side",kr="farthest-side",Cr="closest-corner",Fr="farthest-corner",Er="circle",Ir="ellipse",Ur="cover",Sr="contain",Qr=function(t,e){var n=0,r=3,i=[],a=[];return On(e).forEach((function(e,o){var s=!0;if(0===o?s=e.reduce((function(t,e){if(Tn(e))switch(e.value){case"center":return a.push(Kn),!1;case"top":case"left":return a.push(Nn),!1;case"right":case"bottom":return a.push(Gn),!1}else if(Hn(e)||zn(e))return a.push(e),!1;return t}),s):1===o&&(s=e.reduce((function(t,e){if(Tn(e))switch(e.value){case Er:return n=0,!1;case Ir:return n=1,!1;case Sr:case Br:return r=0,!1;case kr:return r=1,!1;case Cr:return r=2,!1;case Ur:case Fr:return r=3,!1}else if(zn(e)||Hn(e))return Array.isArray(r)||(r=[]),r.push(e),!1;return t}),s)),s){var A=pr(t,e);i.push(A)}})),{size:r,shape:n,stops:i,position:a,type:2}},Tr=function(t){return 1===t.type},Mr=function(t){return 2===t.type},Dr={name:"image",parse:function(t,e){if(22===e.type){var n={url:e.value,type:0};return t.cache.addImage(e.value),n}if(18===e.type){var r=Or[e.name];if(void 0===r)throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function Lr(t){return!(20===t.type&&"none"===t.value||18===t.type&&!Or[t.name])}var Pr,Or={"linear-gradient":function(t,e){var n=er(180),r=[];return On(e).forEach((function(e,i){if(0===i){var a=e[0];if(20===a.type&&"to"===a.value)return void(n=tr(e));if(Jn(a))return void(n=Yn.parse(t,a))}var o=pr(t,e);r.push(o)})),{angle:n,stops:r,type:1}},"-moz-linear-gradient":xr,"-ms-linear-gradient":xr,"-o-linear-gradient":xr,"-webkit-linear-gradient":xr,"radial-gradient":function(t,e){var n=0,r=3,i=[],a=[];return On(e).forEach((function(e,o){var s=!0;if(0===o){var A=!1;s=e.reduce((function(t,e){if(A)if(Tn(e))switch(e.value){case"center":return a.push(Kn),t;case"top":case"left":return a.push(Nn),t;case"right":case"bottom":return a.push(Gn),t}else(Hn(e)||zn(e))&&a.push(e);else if(Tn(e))switch(e.value){case Er:return n=0,!1;case Ir:return n=1,!1;case"at":return A=!0,!1;case Br:return r=0,!1;case Ur:case kr:return r=1,!1;case Sr:case Cr:return r=2,!1;case Fr:return r=3,!1}else if(zn(e)||Hn(e))return Array.isArray(r)||(r=[]),r.push(e),!1;return t}),s)}if(s){var u=pr(t,e);i.push(u)}})),{size:r,shape:n,stops:i,position:a,type:2}},"-moz-radial-gradient":Qr,"-ms-radial-gradient":Qr,"-o-radial-gradient":Qr,"-webkit-radial-gradient":Qr,"-webkit-gradient":br},Rr={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(0===e.length)return[];var n=e[0];return 20===n.type&&"none"===n.value?[]:e.filter((function(t){return Pn(t)&&Lr(t)})).map((function(e){return Dr.parse(t,e)}))}},zr={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map((function(t){if(Tn(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},Hr={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return On(e).map((function(t){return t.filter(Hn)})).map(Vn)}},Vr={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return On(e).map((function(t){return t.filter(Tn).map((function(t){return t.value})).join(" ")})).map(Nr)}},Nr=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};!function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"}(Pr||(Pr={}));var Kr,Gr={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return On(e).map((function(t){return t.filter(jr)}))}},jr=function(t){return Tn(t)||Hn(t)},$r=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Wr=$r("top"),Zr=$r("right"),qr=$r("bottom"),Xr=$r("left"),Yr=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(t,e){return Vn(e.filter(Hn))}}},Jr=Yr("top-left"),ti=Yr("top-right"),ei=Yr("bottom-right"),ri=Yr("bottom-left"),ii=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,e){switch(e){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},ai=ii("top"),oi=ii("right"),si=ii("bottom"),Ai=ii("left"),ui=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Sn(e)?e.number:0}}},li=ui("top"),ci=ui("right"),hi=ui("bottom"),fi=ui("left"),di={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},pi={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){return"rtl"===e?1:0}},vi={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Tn).reduce((function(t,e){return t|gi(e.value)}),0)}},gi=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},mi={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},yi={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return 20===e.type&&"normal"===e.value?0:17===e.type||15===e.type?e.number:0}};!function(t){t.NORMAL="normal",t.STRICT="strict"}(Kr||(Kr={}));var _i,wi={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){return"strict"===e?Kr.STRICT:Kr.NORMAL}},xi={name:"line-height",initialValue:"normal",prefix:!1,type:4},bi=function(t,e){return Tn(t)&&"normal"===t.value?1.2*e:17===t.type?e*t.number:Hn(t)?$n(t,e):e},Bi={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return 20===e.type&&"none"===e.value?null:Dr.parse(t,e)}},ki={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){return"inside"===e?0:1}},Ci={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},Fi=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},Ei=Fi("top"),Ii=Fi("right"),Ui=Fi("bottom"),Si=Fi("left"),Qi={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Tn).map((function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}}))}},Ti={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){return"break-word"===e?"break-word":"normal"}},Mi=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Di=Mi("top"),Li=Mi("right"),Pi=Mi("bottom"),Oi=Mi("left"),Ri={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},zi={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Hi={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return 1===e.length&&Dn(e[0],"none")?[]:On(e).map((function(e){for(var n={color:hr.TRANSPARENT,offsetX:Nn,offsetY:Nn,blur:Nn},r=0,i=0;i<e.length;i++){var a=e[i];zn(a)?(0===r?n.offsetX=a:1===r?n.offsetY=a:n.blur=a,r++):n.color=nr.parse(t,a)}return n}))}},Vi={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Ni={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(20===e.type&&"none"===e.value)return null;if(18===e.type){var n=ji[e.name];if(void 0===n)throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return n(e.values)}return null}},Ki=function(t){var e=t.filter((function(t){return 17===t.type})).map((function(t){return t.number}));return 6===e.length?e:null},Gi=function(t){var e=t.filter((function(t){return 17===t.type})).map((function(t){return t.number})),n=e[0],r=e[1];e[2],e[3];var i=e[4],a=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var o=e[12],s=e[13];return e[14],e[15],16===e.length?[n,r,i,a,o,s]:null},ji={matrix:Ki,matrix3d:Gi},$i={type:16,number:50,flags:Gt},Wi=[$i,$i],Zi={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var n=e.filter(Hn);return 2!==n.length?Wi:[n[0],n[1]]}},qi={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;default:return 0}}};!function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"}(_i||(_i={}));for(var Xi={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return _i.BREAK_ALL;case"keep-all":return _i.KEEP_ALL;default:return _i.NORMAL}}},Yi={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(20===e.type)return{auto:!0,order:0};if(Qn(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},Ji={name:"time",parse:function(t,e){if(15===e.type)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},ta={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return Qn(e)?e.number:1}},ea={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},na={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Tn).map((function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0})).filter((function(t){return 0!==t}))}},ra={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var n=[],r=[];return e.forEach((function(t){switch(t.type){case 20:case 0:n.push(t.value);break;case 17:n.push(t.number.toString());break;case 4:r.push(n.join(" ")),n.length=0}})),n.length&&r.push(n.join(" ")),r.map((function(t){return-1===t.indexOf(" ")?t:"'"+t+"'"}))}},ia={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},aa={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){return Qn(e)?e.number:Tn(e)&&"bold"===e.value?700:400}},oa={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Tn).map((function(t){return t.value}))}},sa={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},Aa=function(t,e){return!!(t&e)},ua={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(0===e.length)return[];var n=e[0];return 20===n.type&&"none"===n.value?[]:e}},la={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(0===e.length)return null;var n=e[0];if(20===n.type&&"none"===n.value)return null;for(var r=[],i=e.filter(Ln),a=0;a<i.length;a++){var o=i[a],s=i[a+1];if(20===o.type){var A=s&&Qn(s)?s.number:1;r.push({counter:o.value,increment:A})}}return r}},ca={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(0===e.length)return[];for(var n=[],r=e.filter(Ln),i=0;i<r.length;i++){var a=r[i],o=r[i+1];if(Tn(a)&&"none"!==a.value){var s=o&&Qn(o)?o.number:0;n.push({counter:a.value,reset:s})}}return n}},ha={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(Sn).map((function(e){return Ji.parse(t,e)}))}},fa={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(0===e.length)return null;var n=e[0];if(20===n.type&&"none"===n.value)return null;var r=[],i=e.filter(Mn);if(i.length%2!=0)return null;for(var a=0;a<i.length;a+=2){var o=i[a].value,s=i[a+1].value;r.push({open:o,close:s})}return r}},da=function(t,e,n){if(!t)return"";var r=t[Math.min(e,t.length-1)];return r?n?r.open:r.close:""},pa={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return 1===e.length&&Dn(e[0],"none")?[]:On(e).map((function(e){for(var n={color:255,offsetX:Nn,offsetY:Nn,blur:Nn,spread:Nn,inset:!1},r=0,i=0;i<e.length;i++){var a=e[i];Dn(a,"inset")?n.inset=!0:zn(a)?(0===r?n.offsetX=a:1===r?n.offsetY=a:2===r?n.blur=a:n.spread=a,r++):n.color=nr.parse(t,a)}return n}))}},va={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var n=[0,1,2],r=[];return e.filter(Tn).forEach((function(t){switch(t.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2)}})),n.forEach((function(t){-1===r.indexOf(t)&&r.push(t)})),r}},ga={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},ma={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Sn(e)?e.number:0}},ya=function(){function t(t,e){var n,r;this.animationDuration=xa(t,ha,e.animationDuration),this.backgroundClip=xa(t,fr,e.backgroundClip),this.backgroundColor=xa(t,dr,e.backgroundColor),this.backgroundImage=xa(t,Rr,e.backgroundImage),this.backgroundOrigin=xa(t,zr,e.backgroundOrigin),this.backgroundPosition=xa(t,Hr,e.backgroundPosition),this.backgroundRepeat=xa(t,Vr,e.backgroundRepeat),this.backgroundSize=xa(t,Gr,e.backgroundSize),this.borderTopColor=xa(t,Wr,e.borderTopColor),this.borderRightColor=xa(t,Zr,e.borderRightColor),this.borderBottomColor=xa(t,qr,e.borderBottomColor),this.borderLeftColor=xa(t,Xr,e.borderLeftColor),this.borderTopLeftRadius=xa(t,Jr,e.borderTopLeftRadius),this.borderTopRightRadius=xa(t,ti,e.borderTopRightRadius),this.borderBottomRightRadius=xa(t,ei,e.borderBottomRightRadius),this.borderBottomLeftRadius=xa(t,ri,e.borderBottomLeftRadius),this.borderTopStyle=xa(t,ai,e.borderTopStyle),this.borderRightStyle=xa(t,oi,e.borderRightStyle),this.borderBottomStyle=xa(t,si,e.borderBottomStyle),this.borderLeftStyle=xa(t,Ai,e.borderLeftStyle),this.borderTopWidth=xa(t,li,e.borderTopWidth),this.borderRightWidth=xa(t,ci,e.borderRightWidth),this.borderBottomWidth=xa(t,hi,e.borderBottomWidth),this.borderLeftWidth=xa(t,fi,e.borderLeftWidth),this.boxShadow=xa(t,pa,e.boxShadow),this.color=xa(t,di,e.color),this.direction=xa(t,pi,e.direction),this.display=xa(t,vi,e.display),this.float=xa(t,mi,e.cssFloat),this.fontFamily=xa(t,ra,e.fontFamily),this.fontSize=xa(t,ia,e.fontSize),this.fontStyle=xa(t,sa,e.fontStyle),this.fontVariant=xa(t,oa,e.fontVariant),this.fontWeight=xa(t,aa,e.fontWeight),this.letterSpacing=xa(t,yi,e.letterSpacing),this.lineBreak=xa(t,wi,e.lineBreak),this.lineHeight=xa(t,xi,e.lineHeight),this.listStyleImage=xa(t,Bi,e.listStyleImage),this.listStylePosition=xa(t,ki,e.listStylePosition),this.listStyleType=xa(t,Ci,e.listStyleType),this.marginTop=xa(t,Ei,e.marginTop),this.marginRight=xa(t,Ii,e.marginRight),this.marginBottom=xa(t,Ui,e.marginBottom),this.marginLeft=xa(t,Si,e.marginLeft),this.opacity=xa(t,ta,e.opacity);var i=xa(t,Qi,e.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=xa(t,Ti,e.overflowWrap),this.paddingTop=xa(t,Di,e.paddingTop),this.paddingRight=xa(t,Li,e.paddingRight),this.paddingBottom=xa(t,Pi,e.paddingBottom),this.paddingLeft=xa(t,Oi,e.paddingLeft),this.paintOrder=xa(t,va,e.paintOrder),this.position=xa(t,zi,e.position),this.textAlign=xa(t,Ri,e.textAlign),this.textDecorationColor=xa(t,ea,null!==(n=e.textDecorationColor)&&void 0!==n?n:e.color),this.textDecorationLine=xa(t,na,null!==(r=e.textDecorationLine)&&void 0!==r?r:e.textDecoration),this.textShadow=xa(t,Hi,e.textShadow),this.textTransform=xa(t,Vi,e.textTransform),this.transform=xa(t,Ni,e.transform),this.transformOrigin=xa(t,Zi,e.transformOrigin),this.visibility=xa(t,qi,e.visibility),this.webkitTextStrokeColor=xa(t,ga,e.webkitTextStrokeColor),this.webkitTextStrokeWidth=xa(t,ma,e.webkitTextStrokeWidth),this.wordBreak=xa(t,Xi,e.wordBreak),this.zIndex=xa(t,Yi,e.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},t.prototype.isTransparent=function(){return rr(this.backgroundColor)},t.prototype.isTransformed=function(){return null!==this.transform},t.prototype.isPositioned=function(){return 0!==this.position},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return 0!==this.float},t.prototype.isInlineLevel=function(){return Aa(this.display,4)||Aa(this.display,33554432)||Aa(this.display,268435456)||Aa(this.display,536870912)||Aa(this.display,67108864)||Aa(this.display,134217728)},t}(),_a=function(){function t(t,e){this.content=xa(t,ua,e.content),this.quotes=xa(t,fa,e.quotes)}return t}(),wa=function(){function t(t,e){this.counterIncrement=xa(t,la,e.counterIncrement),this.counterReset=xa(t,ca,e.counterReset)}return t}(),xa=function(t,e,n){var r=new In,i=null!=n?n.toString():e.initialValue;r.write(i);var a=new Un(r.read());switch(e.type){case 2:var o=a.parseComponentValue();return e.parse(t,Tn(o)?o.value:e.initialValue);case 0:return e.parse(t,a.parseComponentValue());case 1:return e.parse(t,a.parseComponentValues());case 4:return a.parseComponentValue();case 3:switch(e.format){case"angle":return Yn.parse(t,a.parseComponentValue());case"color":return nr.parse(t,a.parseComponentValue());case"image":return Dr.parse(t,a.parseComponentValue());case"length":var s=a.parseComponentValue();return zn(s)?s:Nn;case"length-percentage":var A=a.parseComponentValue();return Hn(A)?A:Nn;case"time":return Ji.parse(t,a.parseComponentValue())}}},ba="data-html2canvas-debug",Ba=function(t){switch(t.getAttribute(ba)){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},ka=function(t,e){var n=Ba(t);return 1===n||e===n},Ca=function(){function t(t,e){this.context=t,this.textNodes=[],this.elements=[],this.flags=0,ka(e,3),this.styles=new ya(t,window.getComputedStyle(e,null)),ds(e)&&(this.styles.animationDuration.some((function(t){return t>0}))&&(e.style.animationDuration="0s"),null!==this.styles.transform&&(e.style.transform="none")),this.bounds=s(this.context,e),ka(e,4)&&(this.flags|=16)}return t}(),Fa="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",Ea="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ia="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Ua=0;Ua<Ea.length;Ua++)Ia[Ea.charCodeAt(Ua)]=Ua;for(var Sa=function(t){var e,n,r,i,a,o=.75*t.length,s=t.length,A=0;"="===t[t.length-1]&&(o--,"="===t[t.length-2]&&o--);var u="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(o):new Array(o),l=Array.isArray(u)?u:new Uint8Array(u);for(e=0;e<s;e+=4)n=Ia[t.charCodeAt(e)],r=Ia[t.charCodeAt(e+1)],i=Ia[t.charCodeAt(e+2)],a=Ia[t.charCodeAt(e+3)],l[A++]=n<<2|r>>4,l[A++]=(15&r)<<4|i>>2,l[A++]=(3&i)<<6|63&a;return u},Qa=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},Ta=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},Ma=5,Da=11,La=2,Pa=65536>>Ma,Oa=(1<<Ma)-1,Ra=Pa+(1024>>Ma)+32,za=65536>>Da,Ha=(1<<Da-Ma)-1,Va=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},Na=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},Ka=function(t,e){var n=Sa(t),r=Array.isArray(n)?Ta(n):new Uint32Array(n),i=Array.isArray(n)?Qa(n):new Uint16Array(n),a=24,o=Va(i,a/2,r[4]/2),s=2===r[5]?Va(i,(a+r[4])/2):Na(r,Math.ceil((a+r[4])/4));return new Ga(r[0],r[1],r[2],r[3],o,s)},Ga=function(){function t(t,e,n,r,i,a){this.initialValue=t,this.errorValue=e,this.highStart=n,this.highValueIndex=r,this.index=i,this.data=a}return t.prototype.get=function(t){var e;if(t>=0){if(t<55296||t>56319&&t<=65535)return e=((e=this.index[t>>Ma])<<La)+(t&Oa),this.data[e];if(t<=65535)return e=((e=this.index[Pa+(t-55296>>Ma)])<<La)+(t&Oa),this.data[e];if(t<this.highStart)return e=Ra-za+(t>>Da),e=this.index[e],e+=t>>Ma&Ha,e=((e=this.index[e])<<La)+(t&Oa),this.data[e];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),ja="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$a="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Wa=0;Wa<ja.length;Wa++)$a[ja.charCodeAt(Wa)]=Wa;var Za,qa=1,Xa=2,Ya=3,Ja=4,to=5,eo=7,no=8,ro=9,io=10,ao=11,oo=12,so=13,Ao=14,uo=15,lo=function(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var a=t.charCodeAt(n++);56320==(64512&a)?e.push(((1023&i)<<10)+(1023&a)+65536):(e.push(i),n--)}else e.push(i)}return e},co=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],i=-1,a="";++i<n;){var o=t[i];o<=65535?r.push(o):(o-=65536,r.push(55296+(o>>10),o%1024+56320)),(i+1===n||r.length>16384)&&(a+=String.fromCharCode.apply(String,r),r.length=0)}return a},ho=Ka(Fa),fo="Ã",po="Ã·",vo=function(t){return ho.get(t)},go=function(t,e,n){var r=n-2,i=e[r],a=e[n-1],o=e[n];if(a===Xa&&o===Ya)return fo;if(a===Xa||a===Ya||a===Ja)return po;if(o===Xa||o===Ya||o===Ja)return po;if(a===no&&-1!==[no,ro,ao,oo].indexOf(o))return fo;if(!(a!==ao&&a!==ro||o!==ro&&o!==io))return fo;if((a===oo||a===io)&&o===io)return fo;if(o===so||o===to)return fo;if(o===eo)return fo;if(a===qa)return fo;if(a===so&&o===Ao){for(;i===to;)i=e[--r];if(i===Ao)return fo}if(a===uo&&o===uo){for(var s=0;i===uo;)s++,i=e[--r];if(s%2==0)return fo}return po},mo=function(t){var e=lo(t),n=e.length,r=0,i=0,a=e.map(vo);return{next:function(){if(r>=n)return{done:!0,value:null};for(var t=fo;r<n&&(t=go(e,a,++r))===fo;);if(t!==fo||r===n){var o=co.apply(null,e.slice(i,r));return i=r,{value:o,done:!1}}return{done:!0,value:null}}}},yo=function(t){for(var e,n=mo(t),r=[];!(e=n.next()).done;)e.value&&r.push(e.value.slice());return r},_o=function(t){var e=123;if(t.createRange){var n=t.createRange();if(n.getBoundingClientRect){var r=t.createElement("boundtest");r.style.height=e+"px",r.style.display="block",t.body.appendChild(r),n.selectNode(r);var i=n.getBoundingClientRect(),a=Math.round(i.height);if(t.body.removeChild(r),a===e)return!0}}return!1},wo=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var n=t.createRange();e.innerHTML="function"==typeof"".repeat?"&#128104;".repeat(10):"";var r=e.firstChild,i=u(r.data).map((function(t){return l(t)})),a=0,o={},s=i.every((function(t,e){n.setStart(r,a),n.setEnd(r,a+t.length);var i=n.getBoundingClientRect();a+=t.length;var s=i.x>o.x||i.y>o.y;return o=i,0===e||s}));return t.body.removeChild(e),s},xo=function(){return void 0!==(new Image).crossOrigin},bo=function(){return"string"==typeof(new XMLHttpRequest).responseType},Bo=function(t){var e=new Image,n=t.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),n.toDataURL()}catch(t){return!1}return!0},ko=function(t){return 0===t[0]&&255===t[1]&&0===t[2]&&255===t[3]},Co=function(t){var e=t.createElement("canvas"),n=100;e.width=n,e.height=n;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var i=new Image,a=e.toDataURL();i.src=a;var o=Fo(n,n,0,0,i);return r.fillStyle="red",r.fillRect(0,0,n,n),Eo(o).then((function(e){r.drawImage(e,0,0);var i=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var o=t.createElement("div");return o.style.backgroundImage="url("+a+")",o.style.height=n+"px",ko(i)?Eo(Fo(n,n,0,0,o)):Promise.reject(!1)})).then((function(t){return r.drawImage(t,0,0),ko(r.getImageData(0,0,n,n).data)})).catch((function(){return!1}))},Fo=function(t,e,n,r,i){var a="http://www.w3.org/2000/svg",o=document.createElementNS(a,"svg"),s=document.createElementNS(a,"foreignObject");return o.setAttributeNS(null,"width",t.toString()),o.setAttributeNS(null,"height",e.toString()),s.setAttributeNS(null,"width","100%"),s.setAttributeNS(null,"height","100%"),s.setAttributeNS(null,"x",n.toString()),s.setAttributeNS(null,"y",r.toString()),s.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(s),s.appendChild(i),o},Eo=function(t){return new Promise((function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(t))}))},Io={get SUPPORT_RANGE_BOUNDS(){var t=_o(document);return Object.defineProperty(Io,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=Io.SUPPORT_RANGE_BOUNDS&&wo(document);return Object.defineProperty(Io,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=Bo(document);return Object.defineProperty(Io,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t="function"==typeof Array.from&&"function"==typeof window.fetch?Co(document):Promise.resolve(!1);return Object.defineProperty(Io,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=xo();return Object.defineProperty(Io,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=bo();return Object.defineProperty(Io,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Io,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!("undefined"==typeof Intl||!Intl.Segmenter);return Object.defineProperty(Io,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Uo=function(){function t(t,e){this.text=t,this.bounds=e}return t}(),So=function(t,e,n,r){var i=Lo(e,n),a=[],s=0;return i.forEach((function(e){if(n.textDecorationLine.length||e.trim().length>0)if(Io.SUPPORT_RANGE_BOUNDS){var i=To(r,s,e.length).getClientRects();if(i.length>1){var A=Mo(e),u=0;A.forEach((function(e){a.push(new Uo(e,o.fromDOMRectList(t,To(r,u+s,e.length).getClientRects()))),u+=e.length}))}else a.push(new Uo(e,o.fromDOMRectList(t,i)))}else{var l=r.splitText(e.length);a.push(new Uo(e,Qo(t,r))),r=l}else Io.SUPPORT_RANGE_BOUNDS||(r=r.splitText(e.length));s+=e.length})),a},Qo=function(t,e){var n=e.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var i=e.parentNode;if(i){i.replaceChild(r,e);var a=s(t,r);return r.firstChild&&i.replaceChild(r.firstChild,r),a}}return o.EMPTY},To=function(t,e,n){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var i=r.createRange();return i.setStart(t,e),i.setEnd(t,e+n),i},Mo=function(t){if(Io.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map((function(t){return t.segment}))}return yo(t)},Do=function(t,e){if(Io.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(t)).map((function(t){return t.segment}))}return Oo(t,e)},Lo=function(t,e){return 0!==e.letterSpacing?Mo(t):Do(t,e)},Po=[32,160,4961,65792,65793,4153,4241],Oo=function(t,e){for(var n,r=Vt(t,{lineBreak:e.lineBreak,wordBreak:"break-word"===e.overflowWrap?"break-word":e.wordBreak}),i=[],a=function(){if(n.value){var t=n.value.slice(),e=u(t),r="";e.forEach((function(t){-1===Po.indexOf(t)?r+=l(t):(r.length&&i.push(r),i.push(l(t)),r="")})),r.length&&i.push(r)}};!(n=r.next()).done;)a();return i},Ro=function(){function t(t,e,n){this.text=zo(e.data,n.textTransform),this.textBounds=So(t,this.text,n,e)}return t}(),zo=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(Ho,Vo);case 2:return t.toUpperCase();default:return t}},Ho=/(^|\s|:|-|\(|\))([a-z])/g,Vo=function(t,e,n){return t.length>0?e+n.toUpperCase():t},No=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.src=n.currentSrc||n.src,r.intrinsicWidth=n.naturalWidth,r.intrinsicHeight=n.naturalHeight,r.context.cache.addImage(r.src),r}return e(n,t),n}(Ca),Ko=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.canvas=n,r.intrinsicWidth=n.width,r.intrinsicHeight=n.height,r}return e(n,t),n}(Ca),Go=function(t){function n(e,n){var r=t.call(this,e,n)||this,i=new XMLSerializer,a=s(e,n);return n.setAttribute("width",a.width+"px"),n.setAttribute("height",a.height+"px"),r.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(n)),r.intrinsicWidth=n.width.baseVal.value,r.intrinsicHeight=n.height.baseVal.value,r.context.cache.addImage(r.svg),r}return e(n,t),n}(Ca),jo=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.value=n.value,r}return e(n,t),n}(Ca),$o=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.start=n.start,r.reversed="boolean"==typeof n.reversed&&!0===n.reversed,r}return e(n,t),n}(Ca),Wo=[{type:15,flags:0,unit:"px",number:3}],Zo=[{type:16,flags:0,number:50}],qo=function(t){return t.width>t.height?new o(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new o(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},Xo=function(t){var e=t.type===ts?new Array(t.value.length+1).join("â¢"):t.value;return 0===e.length?t.placeholder||"":e},Yo="checkbox",Jo="radio",ts="password",es=707406591,ns=function(t){function n(e,n){var r=t.call(this,e,n)||this;switch(r.type=n.type.toLowerCase(),r.checked=n.checked,r.value=Xo(n),r.type!==Yo&&r.type!==Jo||(r.styles.backgroundColor=3739148031,r.styles.borderTopColor=r.styles.borderRightColor=r.styles.borderBottomColor=r.styles.borderLeftColor=2779096575,r.styles.borderTopWidth=r.styles.borderRightWidth=r.styles.borderBottomWidth=r.styles.borderLeftWidth=1,r.styles.borderTopStyle=r.styles.borderRightStyle=r.styles.borderBottomStyle=r.styles.borderLeftStyle=1,r.styles.backgroundClip=[0],r.styles.backgroundOrigin=[0],r.bounds=qo(r.bounds)),r.type){case Yo:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=Wo;break;case Jo:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=Zo}return r}return e(n,t),n}(Ca),rs=function(t){function n(e,n){var r=t.call(this,e,n)||this,i=n.options[n.selectedIndex||0];return r.value=i&&i.text||"",r}return e(n,t),n}(Ca),is=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.value=n.value,r}return e(n,t),n}(Ca),as=function(t){function n(e,n){var r=t.call(this,e,n)||this;r.src=n.src,r.width=parseInt(n.width,10)||0,r.height=parseInt(n.height,10)||0,r.backgroundColor=r.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){r.tree=us(e,n.contentWindow.document.documentElement);var i=n.contentWindow.document.documentElement?cr(e,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):hr.TRANSPARENT,a=n.contentWindow.document.body?cr(e,getComputedStyle(n.contentWindow.document.body).backgroundColor):hr.TRANSPARENT;r.backgroundColor=rr(i)?rr(a)?r.styles.backgroundColor:a:i}}catch(t){}return r}return e(n,t),n}(Ca),os=["OL","UL","MENU"],ss=function t(e,n,r,i){for(var a=n.firstChild,o=void 0;a;a=o)if(o=a.nextSibling,hs(a)&&a.data.trim().length>0)r.textNodes.push(new Ro(e,a,r.styles));else if(fs(a))if(Us(a)&&a.assignedNodes)a.assignedNodes().forEach((function(n){return t(e,n,r,i)}));else{var s=As(e,a);s.styles.isVisible()&&(ls(a,s,i)?s.flags|=4:cs(s.styles)&&(s.flags|=2),-1!==os.indexOf(a.tagName)&&(s.flags|=8),r.elements.push(s),a.slot,a.shadowRoot?t(e,a.shadowRoot,s,i):Es(a)||_s(a)||Is(a)||t(e,a,s,i))}},As=function(t,e){return Bs(e)?new No(t,e):xs(e)?new Ko(t,e):_s(e)?new Go(t,e):vs(e)?new jo(t,e):gs(e)?new $o(t,e):ms(e)?new ns(t,e):Is(e)?new rs(t,e):Es(e)?new is(t,e):ks(e)?new as(t,e):new Ca(t,e)},us=function(t,e){var n=As(t,e);return n.flags|=4,ss(t,e,n,n),n},ls=function(t,e,n){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||ws(t)&&n.styles.isTransparent()},cs=function(t){return t.isPositioned()||t.isFloating()},hs=function(t){return t.nodeType===Node.TEXT_NODE},fs=function(t){return t.nodeType===Node.ELEMENT_NODE},ds=function(t){return fs(t)&&void 0!==t.style&&!ps(t)},ps=function(t){return"object"===ni(t.className)},vs=function(t){return"LI"===t.tagName},gs=function(t){return"OL"===t.tagName},ms=function(t){return"INPUT"===t.tagName},ys=function(t){return"HTML"===t.tagName},_s=function(t){return"svg"===t.tagName},ws=function(t){return"BODY"===t.tagName},xs=function(t){return"CANVAS"===t.tagName},bs=function(t){return"VIDEO"===t.tagName},Bs=function(t){return"IMG"===t.tagName},ks=function(t){return"IFRAME"===t.tagName},Cs=function(t){return"STYLE"===t.tagName},Fs=function(t){return"SCRIPT"===t.tagName},Es=function(t){return"TEXTAREA"===t.tagName},Is=function(t){return"SELECT"===t.tagName},Us=function(t){return"SLOT"===t.tagName},Ss=function(t){return t.tagName.indexOf("-")>0},Qs=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(t){var e=this.counters[t];return e&&e.length?e[e.length-1]:1},t.prototype.getCounterValues=function(t){var e=this.counters[t];return e||[]},t.prototype.pop=function(t){var e=this;t.forEach((function(t){return e.counters[t].pop()}))},t.prototype.parse=function(t){var e=this,n=t.counterIncrement,r=t.counterReset,i=!0;null!==n&&n.forEach((function(t){var n=e.counters[t.counter];n&&0!==t.increment&&(i=!1,n.length||n.push(1),n[Math.max(0,n.length-1)]+=t.increment)}));var a=[];return i&&r.forEach((function(t){var n=e.counters[t.counter];a.push(t.counter),n||(n=e.counters[t.counter]=[]),n.push(t.reset)})),a},t}(),Ts={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Ms={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Ô¿","Ô¾","Ô½","Ô¼","Ô»","Ôº","Ô¹","Ô¸","Ô·","Ô¶","Ôµ","Ô´","Ô³","Ô²","Ô±"]},Ds={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["××³","××³","××³","××³","××³","××³","××³","××³","××³","××³","×ª","×©","×¨","×§","×¦","×¤","×¢","×¡","× ","×","×","×","××","××","××","××","××","×","×","×","×","×","×","×","×","×","×"]},Ls={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["áµ","á°","á¯","á´","á®","á­","á¬","á«","áª","á©","á¨","á§","á¦","á¥","á¤","á³","á¢","á¡","á ","á","á","á","á²","á","á","á","á","á","á","á±","á","á","á","á","á","á","á"]},Ps=function(t,e,n,r,i,a){return t<e||t>n?qs(t,i,a.length>0):r.integers.reduce((function(e,n,i){for(;t>=n;)t-=n,e+=r.values[i];return e}),"")+a},Os=function(t,e,n,r){var i="";do{n||t--,i=r(t)+i,t/=e}while(t*e>=e);return i},Rs=function(t,e,n,r,i){var a=n-e+1;return(t<0?"-":"")+(Os(Math.abs(t),a,r,(function(t){return l(Math.floor(t%a)+e)}))+i)},zs=function(t,e,n){void 0===n&&(n=". ");var r=e.length;return Os(Math.abs(t),r,!1,(function(t){return e[Math.floor(t%r)]}))+n},Hs=1,Vs=2,Ns=4,Ks=8,Gs=function(t,e,n,r,i,a){if(t<-9999||t>9999)return qs(t,4,i.length>0);var o=Math.abs(t),s=i;if(0===o)return e[0]+s;for(var A=0;o>0&&A<=4;A++){var u=o%10;0===u&&Aa(a,Hs)&&""!==s?s=e[u]+s:u>1||1===u&&0===A||1===u&&1===A&&Aa(a,Vs)||1===u&&1===A&&Aa(a,Ns)&&t>100||1===u&&A>1&&Aa(a,Ks)?s=e[u]+(A>0?n[A-1]:"")+s:1===u&&A>0&&(s=n[A-1]+s),o=Math.floor(o/10)}return(t<0?r:"")+s},js="åç¾åè¬",$s="æ¾ä½°ä»è¬",Ws="ãã¤ãã¹",Zs="ë§ì´ëì¤",qs=function(t,e,n){var r=n?". ":"",i=n?"ã":"",a=n?", ":"",o=n?" ":"";switch(e){case 0:return"â¢"+o;case 1:return"â¦"+o;case 2:return"â¾"+o;case 5:var s=Rs(t,48,57,!0,r);return s.length<4?"0"+s:s;case 4:return zs(t,"ãä¸äºä¸åäºå­ä¸å«ä¹",i);case 6:return Ps(t,1,3999,Ts,3,r).toLowerCase();case 7:return Ps(t,1,3999,Ts,3,r);case 8:return Rs(t,945,969,!1,r);case 9:return Rs(t,97,122,!1,r);case 10:return Rs(t,65,90,!1,r);case 11:return Rs(t,1632,1641,!0,r);case 12:case 49:return Ps(t,1,9999,Ms,3,r);case 35:return Ps(t,1,9999,Ms,3,r).toLowerCase();case 13:return Rs(t,2534,2543,!0,r);case 14:case 30:return Rs(t,6112,6121,!0,r);case 15:return zs(t,"å­ä¸å¯å¯è¾°å·³åæªç³éæäº¥",i);case 16:return zs(t,"ç²ä¹ä¸ä¸æå·±åºè¾å£¬ç¸",i);case 17:case 48:return Gs(t,"é¶ä¸äºä¸åäºå­ä¸å«ä¹",js,"è² ",i,Vs|Ns|Ks);case 47:return Gs(t,"é¶å£¹è²³åèä¼é¸ææç",$s,"è² ",i,Hs|Vs|Ns|Ks);case 42:return Gs(t,"é¶ä¸äºä¸åäºå­ä¸å«ä¹",js,"è´",i,Vs|Ns|Ks);case 41:return Gs(t,"é¶å£¹è´°åèä¼éææç",$s,"è´",i,Hs|Vs|Ns|Ks);case 26:return Gs(t,"ãä¸äºä¸åäºå­ä¸å«ä¹","åç¾åä¸",Ws,i,0);case 25:return Gs(t,"é¶å£±å¼ååä¼å­ä¸å«ä¹","æ¾ç¾åä¸",Ws,i,Hs|Vs|Ns);case 31:return Gs(t,"ìì¼ì´ì¼ì¬ì¤ì¡ì¹ íêµ¬","ì­ë°±ì²ë§",Zs,a,Hs|Vs|Ns);case 33:return Gs(t,"é¶ä¸äºä¸åäºå­ä¸å«ä¹","åç¾åè¬",Zs,a,0);case 32:return Gs(t,"é¶å£¹è²³ååäºå­ä¸å«ä¹","æ¾ç¾å",Zs,a,Hs|Vs|Ns);case 18:return Rs(t,2406,2415,!0,r);case 20:return Ps(t,1,19999,Ls,3,r);case 21:return Rs(t,2790,2799,!0,r);case 22:return Rs(t,2662,2671,!0,r);case 22:return Ps(t,1,10999,Ds,3,r);case 23:return zs(t,"ããããããããããããããããã¡ã¤ã¦ã¨ãªã«ã¬ã­ã®ã¯ã²ãµã¸ã»ã¾ã¿ãããããããããããããããã");case 24:return zs(t,"ããã¯ã«ã»ã¸ã¨ã¡ãã¬ããããããããã¤ã­ãªããããã®ãããã¾ããµããã¦ãããããã¿ããã²ããã");case 27:return Rs(t,3302,3311,!0,r);case 28:return zs(t,"ã¢ã¤ã¦ã¨ãªã«ã­ã¯ã±ã³ãµã·ã¹ã»ã½ã¿ããããããããããããããããã ã¡ã¢ã¤ã¦ã¨ã©ãªã«ã¬ã­ã¯ã°ã±ã²ã³",i);case 29:return zs(t,"ã¤ã­ãããããããªãã«ã²ã¯ã«ã¨ã¿ã¬ã½ãããã©ã ã¦ã°ããªã¯ã¤ãã±ãã³ã¨ãã¢ãµã­ã¦ã¡ãã·ã±ãã¢ã»ã¹",i);case 34:return Rs(t,3792,3801,!0,r);case 37:return Rs(t,6160,6169,!0,r);case 38:return Rs(t,4160,4169,!0,r);case 39:return Rs(t,2918,2927,!0,r);case 40:return Rs(t,1776,1785,!0,r);case 43:return Rs(t,3046,3055,!0,r);case 44:return Rs(t,3174,3183,!0,r);case 45:return Rs(t,3664,3673,!0,r);case 46:return Rs(t,3872,3881,!0,r);default:return Rs(t,48,57,!0,r)}},Xs="data-html2canvas-ignore",Ys=function(){function t(t,e,n){if(this.context=t,this.options=n,this.scrolledElements=[],this.referenceElement=e,this.counters=new Qs,this.quoteDepth=0,!e.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(e.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(t,e){var n=this,a=tA(t,e);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var o=t.defaultView.pageXOffset,s=t.defaultView.pageYOffset,A=a.contentWindow,u=A.document,l=rA(a).then((function(){return r(n,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return this.scrolledElements.forEach(AA),A&&(A.scrollTo(e.left,e.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||A.scrollY===e.top&&A.scrollX===e.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(A.scrollX-e.left,A.scrollY-e.top,0,0))),t=this.options.onclone,void 0===(n=this.clonedReferenceElement)?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:u.fonts&&u.fonts.ready?[4,u.fonts.ready]:[3,2];case 1:r.sent(),r.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,nA(u)]:[3,4];case 3:r.sent(),r.label=4;case 4:return"function"==typeof t?[2,Promise.resolve().then((function(){return t(u,n)})).then((function(){return a}))]:[2,a]}}))}))}));return u.open(),u.write(oA(document.doctype)+"<html></html>"),sA(this.referenceElement.ownerDocument,o,s),u.replaceChild(u.adoptNode(this.documentElement),u.documentElement),u.close(),l},t.prototype.createElementClone=function(t){if(ka(t,2),xs(t))return this.createCanvasClone(t);if(bs(t))return this.createVideoClone(t);if(Cs(t))return this.createStyleClone(t);var e=t.cloneNode(!1);return Bs(e)&&(Bs(t)&&t.currentSrc&&t.currentSrc!==t.src&&(e.src=t.currentSrc,e.srcset=""),"lazy"===e.loading&&(e.loading="eager")),Ss(e)?this.createCustomElementClone(e):e},t.prototype.createCustomElementClone=function(t){var e=document.createElement("html2canvascustomelement");return aA(t.style,e),e},t.prototype.createStyleClone=function(t){try{var e=t.sheet;if(e&&e.cssRules){var n=[].slice.call(e.cssRules,0).reduce((function(t,e){return e&&"string"==typeof e.cssText?t+e.cssText:t}),""),r=t.cloneNode(!1);return r.textContent=n,r}}catch(t){if(this.context.logger.error("Unable to access cssRules property",t),"SecurityError"!==t.name)throw t}return t.cloneNode(!1)},t.prototype.createCanvasClone=function(t){var e;if(this.options.inlineImages&&t.ownerDocument){var n=t.ownerDocument.createElement("img");try{return n.src=t.toDataURL(),n}catch(e){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var r=t.cloneNode(!1);try{r.width=t.width,r.height=t.height;var i=t.getContext("2d"),a=r.getContext("2d");if(a)if(!this.options.allowTaint&&i)a.putImageData(i.getImageData(0,0,t.width,t.height),0,0);else{var o=null!==(e=t.getContext("webgl2"))&&void 0!==e?e:t.getContext("webgl");if(o){var s=o.getContextAttributes();!1===(null==s?void 0:s.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}a.drawImage(t,0,0)}return r}catch(e){this.context.logger.info("Unable to clone canvas as it is tainted",t)}return r},t.prototype.createVideoClone=function(t){var e=t.ownerDocument.createElement("canvas");e.width=t.offsetWidth,e.height=t.offsetHeight;var n=e.getContext("2d");try{return n&&(n.drawImage(t,0,0,e.width,e.height),this.options.allowTaint||n.getImageData(0,0,e.width,e.height)),e}catch(e){this.context.logger.info("Unable to clone video as it is tainted",t)}var r=t.ownerDocument.createElement("canvas");return r.width=t.offsetWidth,r.height=t.offsetHeight,r},t.prototype.appendChildNode=function(t,e,n){fs(e)&&(Fs(e)||e.hasAttribute(Xs)||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(e))||this.options.copyStyles&&fs(e)&&Cs(e)||t.appendChild(this.cloneNode(e,n))},t.prototype.cloneChildNodes=function(t,e,n){for(var r=this,i=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;i;i=i.nextSibling)if(fs(i)&&Us(i)&&"function"==typeof i.assignedNodes){var a=i.assignedNodes();a.length&&a.forEach((function(t){return r.appendChildNode(e,t,n)}))}else this.appendChildNode(e,i,n)},t.prototype.cloneNode=function(t,e){if(hs(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var n=t.ownerDocument.defaultView;if(n&&fs(t)&&(ds(t)||ps(t))){var r=this.createElementClone(t);r.style.transitionProperty="none";var i=n.getComputedStyle(t),a=n.getComputedStyle(t,":before"),o=n.getComputedStyle(t,":after");this.referenceElement===t&&ds(r)&&(this.clonedReferenceElement=r),ws(r)&&dA(r);var s=this.counters.parse(new wa(this.context,i)),A=this.resolvePseudoContent(t,r,a,Za.BEFORE);Ss(t)&&(e=!0),bs(t)||this.cloneChildNodes(t,r,e),A&&r.insertBefore(A,r.firstChild);var u=this.resolvePseudoContent(t,r,o,Za.AFTER);return u&&r.appendChild(u),this.counters.pop(s),(i&&(this.options.copyStyles||ps(t))&&!ks(t)||e)&&aA(i,r),0===t.scrollTop&&0===t.scrollLeft||this.scrolledElements.push([r,t.scrollLeft,t.scrollTop]),(Es(t)||Is(t))&&(Es(r)||Is(r))&&(r.value=t.value),r}return t.cloneNode(!1)},t.prototype.resolvePseudoContent=function(t,e,n,r){var i=this;if(n){var a=n.content,o=e.ownerDocument;if(o&&a&&"none"!==a&&"-moz-alt-content"!==a&&"none"!==n.display){this.counters.parse(new wa(this.context,n));var s=new _a(this.context,n),A=o.createElement("html2canvaspseudoelement");aA(n,A),s.content.forEach((function(e){if(0===e.type)A.appendChild(o.createTextNode(e.value));else if(22===e.type){var n=o.createElement("img");n.src=e.value,n.style.opacity="1",A.appendChild(n)}else if(18===e.type){if("attr"===e.name){var r=e.values.filter(Tn);r.length&&A.appendChild(o.createTextNode(t.getAttribute(r[0].value)||""))}else if("counter"===e.name){var a=e.values.filter(Pn),u=a[0],l=a[1];if(u&&Tn(u)){var c=i.counters.getCounterValue(u.value),h=l&&Tn(l)?Ci.parse(i.context,l.value):3;A.appendChild(o.createTextNode(qs(c,h,!1)))}}else if("counters"===e.name){var f=e.values.filter(Pn),d=(u=f[0],f[1]);if(l=f[2],u&&Tn(u)){var p=i.counters.getCounterValues(u.value),v=l&&Tn(l)?Ci.parse(i.context,l.value):3,g=d&&0===d.type?d.value:"",m=p.map((function(t){return qs(t,v,!1)})).join(g);A.appendChild(o.createTextNode(m))}}}else if(20===e.type)switch(e.value){case"open-quote":A.appendChild(o.createTextNode(da(s.quotes,i.quoteDepth++,!0)));break;case"close-quote":A.appendChild(o.createTextNode(da(s.quotes,--i.quoteDepth,!1)));break;default:A.appendChild(o.createTextNode(e.value))}})),A.className=cA+" "+hA;var u=r===Za.BEFORE?" "+cA:" "+hA;return ps(e)?e.className.baseValue+=u:e.className+=u,A}}},t.destroy=function(t){return!!t.parentNode&&(t.parentNode.removeChild(t),!0)},t}();!function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"}(Za||(Za={}));var Js,tA=function(t,e){var n=t.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=e.width.toString(),n.height=e.height.toString(),n.scrolling="no",n.setAttribute(Xs,"true"),t.body.appendChild(n),n},eA=function(t){return new Promise((function(e){t.complete?e():t.src?(t.onload=e,t.onerror=e):e()}))},nA=function(t){return Promise.all([].slice.call(t.images,0).map(eA))},rA=function(t){return new Promise((function(e,n){var r=t.contentWindow;if(!r)return n("No window assigned for iframe");var i=r.document;r.onload=t.onload=function(){r.onload=t.onload=null;var n=setInterval((function(){i.body.childNodes.length>0&&"complete"===i.readyState&&(clearInterval(n),e(t))}),50)}}))},iA=["all","d","content"],aA=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t.item(n);-1===iA.indexOf(r)&&e.style.setProperty(r,t.getPropertyValue(r))}return e},oA=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},sA=function(t,e,n){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||n!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,n)},AA=function(t){var e=t[0],n=t[1],r=t[2];e.scrollLeft=n,e.scrollTop=r},uA=":before",lA=":after",cA="___html2canvas___pseudoelement_before",hA="___html2canvas___pseudoelement_after",fA='{\n    content: "" !important;\n    display: none !important;\n}',dA=function(t){pA(t,"."+cA+uA+fA+"\n         ."+hA+lA+fA)},pA=function(t,e){var n=t.ownerDocument;if(n){var r=n.createElement("style");r.textContent=e,t.appendChild(r)}},vA=function(){function t(){}return t.getOrigin=function(e){var n=t._link;return n?(n.href=e,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),gA=function(){function t(t,e){this.context=t,this._options=e,this._cache={}}return t.prototype.addImage=function(t){var e=Promise.resolve();return this.has(t)?e:BA(t)||wA(t)?((this._cache[t]=this.loadImage(t)).catch((function(){})),e):e},t.prototype.match=function(t){return this._cache[t]},t.prototype.loadImage=function(t){return r(this,void 0,void 0,(function(){var e,n,r,a,o=this;return i(this,(function(i){switch(i.label){case 0:return e=vA.isSameOrigin(t),n=!xA(t)&&!0===this._options.useCORS&&Io.SUPPORT_CORS_IMAGES&&!e,r=!xA(t)&&!e&&!BA(t)&&"string"==typeof this._options.proxy&&Io.SUPPORT_CORS_XHR&&!n,e||!1!==this._options.allowTaint||xA(t)||BA(t)||r||n?(a=t,r?[4,this.proxy(a)]:[3,2]):[2];case 1:a=i.sent(),i.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise((function(t,e){var r=new Image;r.onload=function(){return t(r)},r.onerror=e,(bA(a)||n)&&(r.crossOrigin="anonymous"),r.src=a,!0===r.complete&&setTimeout((function(){return t(r)}),500),o._options.imageTimeout>0&&setTimeout((function(){return e("Timed out ("+o._options.imageTimeout+"ms) loading image")}),o._options.imageTimeout)}))];case 3:return[2,i.sent()]}}))}))},t.prototype.has=function(t){return void 0!==this._cache[t]},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(t){var e=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var r=t.substring(0,256);return new Promise((function(i,a){var o=Io.SUPPORT_RESPONSE_TYPE?"blob":"text",s=new XMLHttpRequest;s.onload=function(){if(200===s.status)if("text"===o)i(s.response);else{var t=new FileReader;t.addEventListener("load",(function(){return i(t.result)}),!1),t.addEventListener("error",(function(t){return a(t)}),!1),t.readAsDataURL(s.response)}else a("Failed to proxy resource "+r+" with status code "+s.status)},s.onerror=a;var A=n.indexOf("?")>-1?"&":"?";if(s.open("GET",""+n+A+"url="+encodeURIComponent(t)+"&responseType="+o),"text"!==o&&s instanceof XMLHttpRequest&&(s.responseType=o),e._options.imageTimeout){var u=e._options.imageTimeout;s.timeout=u,s.ontimeout=function(){return a("Timed out ("+u+"ms) proxying "+r)}}s.send()}))},t}(),mA=/^data:image\/svg\+xml/i,yA=/^data:image\/.*;base64,/i,_A=/^data:image\/.*/i,wA=function(t){return Io.SUPPORT_SVG_DRAWING||!kA(t)},xA=function(t){return _A.test(t)},bA=function(t){return yA.test(t)},BA=function(t){return"blob"===t.substr(0,4)},kA=function(t){return"svg"===t.substr(-3).toLowerCase()||mA.test(t)},CA=function(){function t(t,e){this.type=0,this.x=t,this.y=e}return t.prototype.add=function(e,n){return new t(this.x+e,this.y+n)},t}(),FA=function(t,e,n){return new CA(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},EA=function(){function t(t,e,n,r){this.type=1,this.start=t,this.startControl=e,this.endControl=n,this.end=r}return t.prototype.subdivide=function(e,n){var r=FA(this.start,this.startControl,e),i=FA(this.startControl,this.endControl,e),a=FA(this.endControl,this.end,e),o=FA(r,i,e),s=FA(i,a,e),A=FA(o,s,e);return n?new t(this.start,r,o,A):new t(A,s,a,this.end)},t.prototype.add=function(e,n){return new t(this.start.add(e,n),this.startControl.add(e,n),this.endControl.add(e,n),this.end.add(e,n))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),IA=function(t){return 1===t.type},UA=function(){function t(t){var e=t.styles,n=t.bounds,r=jn(e.borderTopLeftRadius,n.width,n.height),i=r[0],a=r[1],o=jn(e.borderTopRightRadius,n.width,n.height),s=o[0],A=o[1],u=jn(e.borderBottomRightRadius,n.width,n.height),l=u[0],c=u[1],h=jn(e.borderBottomLeftRadius,n.width,n.height),f=h[0],d=h[1],p=[];p.push((i+s)/n.width),p.push((f+l)/n.width),p.push((a+d)/n.height),p.push((A+c)/n.height);var v=Math.max.apply(Math,p);v>1&&(i/=v,a/=v,s/=v,A/=v,l/=v,c/=v,f/=v,d/=v);var g=n.width-s,m=n.height-c,y=n.width-l,_=n.height-d,w=e.borderTopWidth,x=e.borderRightWidth,b=e.borderBottomWidth,B=e.borderLeftWidth,k=$n(e.paddingTop,t.bounds.width),C=$n(e.paddingRight,t.bounds.width),F=$n(e.paddingBottom,t.bounds.width),E=$n(e.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||a>0?SA(n.left+B/3,n.top+w/3,i-B/3,a-w/3,Js.TOP_LEFT):new CA(n.left+B/3,n.top+w/3),this.topRightBorderDoubleOuterBox=i>0||a>0?SA(n.left+g,n.top+w/3,s-x/3,A-w/3,Js.TOP_RIGHT):new CA(n.left+n.width-x/3,n.top+w/3),this.bottomRightBorderDoubleOuterBox=l>0||c>0?SA(n.left+y,n.top+m,l-x/3,c-b/3,Js.BOTTOM_RIGHT):new CA(n.left+n.width-x/3,n.top+n.height-b/3),this.bottomLeftBorderDoubleOuterBox=f>0||d>0?SA(n.left+B/3,n.top+_,f-B/3,d-b/3,Js.BOTTOM_LEFT):new CA(n.left+B/3,n.top+n.height-b/3),this.topLeftBorderDoubleInnerBox=i>0||a>0?SA(n.left+2*B/3,n.top+2*w/3,i-2*B/3,a-2*w/3,Js.TOP_LEFT):new CA(n.left+2*B/3,n.top+2*w/3),this.topRightBorderDoubleInnerBox=i>0||a>0?SA(n.left+g,n.top+2*w/3,s-2*x/3,A-2*w/3,Js.TOP_RIGHT):new CA(n.left+n.width-2*x/3,n.top+2*w/3),this.bottomRightBorderDoubleInnerBox=l>0||c>0?SA(n.left+y,n.top+m,l-2*x/3,c-2*b/3,Js.BOTTOM_RIGHT):new CA(n.left+n.width-2*x/3,n.top+n.height-2*b/3),this.bottomLeftBorderDoubleInnerBox=f>0||d>0?SA(n.left+2*B/3,n.top+_,f-2*B/3,d-2*b/3,Js.BOTTOM_LEFT):new CA(n.left+2*B/3,n.top+n.height-2*b/3),this.topLeftBorderStroke=i>0||a>0?SA(n.left+B/2,n.top+w/2,i-B/2,a-w/2,Js.TOP_LEFT):new CA(n.left+B/2,n.top+w/2),this.topRightBorderStroke=i>0||a>0?SA(n.left+g,n.top+w/2,s-x/2,A-w/2,Js.TOP_RIGHT):new CA(n.left+n.width-x/2,n.top+w/2),this.bottomRightBorderStroke=l>0||c>0?SA(n.left+y,n.top+m,l-x/2,c-b/2,Js.BOTTOM_RIGHT):new CA(n.left+n.width-x/2,n.top+n.height-b/2),this.bottomLeftBorderStroke=f>0||d>0?SA(n.left+B/2,n.top+_,f-B/2,d-b/2,Js.BOTTOM_LEFT):new CA(n.left+B/2,n.top+n.height-b/2),this.topLeftBorderBox=i>0||a>0?SA(n.left,n.top,i,a,Js.TOP_LEFT):new CA(n.left,n.top),this.topRightBorderBox=s>0||A>0?SA(n.left+g,n.top,s,A,Js.TOP_RIGHT):new CA(n.left+n.width,n.top),this.bottomRightBorderBox=l>0||c>0?SA(n.left+y,n.top+m,l,c,Js.BOTTOM_RIGHT):new CA(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=f>0||d>0?SA(n.left,n.top+_,f,d,Js.BOTTOM_LEFT):new CA(n.left,n.top+n.height),this.topLeftPaddingBox=i>0||a>0?SA(n.left+B,n.top+w,Math.max(0,i-B),Math.max(0,a-w),Js.TOP_LEFT):new CA(n.left+B,n.top+w),this.topRightPaddingBox=s>0||A>0?SA(n.left+Math.min(g,n.width-x),n.top+w,g>n.width+x?0:Math.max(0,s-x),Math.max(0,A-w),Js.TOP_RIGHT):new CA(n.left+n.width-x,n.top+w),this.bottomRightPaddingBox=l>0||c>0?SA(n.left+Math.min(y,n.width-B),n.top+Math.min(m,n.height-b),Math.max(0,l-x),Math.max(0,c-b),Js.BOTTOM_RIGHT):new CA(n.left+n.width-x,n.top+n.height-b),this.bottomLeftPaddingBox=f>0||d>0?SA(n.left+B,n.top+Math.min(_,n.height-b),Math.max(0,f-B),Math.max(0,d-b),Js.BOTTOM_LEFT):new CA(n.left+B,n.top+n.height-b),this.topLeftContentBox=i>0||a>0?SA(n.left+B+E,n.top+w+k,Math.max(0,i-(B+E)),Math.max(0,a-(w+k)),Js.TOP_LEFT):new CA(n.left+B+E,n.top+w+k),this.topRightContentBox=s>0||A>0?SA(n.left+Math.min(g,n.width+B+E),n.top+w+k,g>n.width+B+E?0:s-B+E,A-(w+k),Js.TOP_RIGHT):new CA(n.left+n.width-(x+C),n.top+w+k),this.bottomRightContentBox=l>0||c>0?SA(n.left+Math.min(y,n.width-(B+E)),n.top+Math.min(m,n.height+w+k),Math.max(0,l-(x+C)),c-(b+F),Js.BOTTOM_RIGHT):new CA(n.left+n.width-(x+C),n.top+n.height-(b+F)),this.bottomLeftContentBox=f>0||d>0?SA(n.left+B+E,n.top+_,Math.max(0,f-(B+E)),d-(b+F),Js.BOTTOM_LEFT):new CA(n.left+B+E,n.top+n.height-(b+F))}return t}();!function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"}(Js||(Js={}));var SA=function(t,e,n,r,i){var a=(Math.sqrt(2)-1)/3*4,o=n*a,s=r*a,A=t+n,u=e+r;switch(i){case Js.TOP_LEFT:return new EA(new CA(t,u),new CA(t,u-s),new CA(A-o,e),new CA(A,e));case Js.TOP_RIGHT:return new EA(new CA(t,e),new CA(t+o,e),new CA(A,u-s),new CA(A,u));case Js.BOTTOM_RIGHT:return new EA(new CA(A,e),new CA(A,e+s),new CA(t+o,u),new CA(t,u));case Js.BOTTOM_LEFT:default:return new EA(new CA(A,u),new CA(A-o,u),new CA(t,e+s),new CA(t,e))}},QA=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},TA=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},MA=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},DA=function(){function t(t,e,n){this.offsetX=t,this.offsetY=e,this.matrix=n,this.type=0,this.target=6}return t}(),LA=function(){function t(t,e){this.path=t,this.target=e,this.type=1}return t}(),PA=function(){function t(t){this.opacity=t,this.type=2,this.target=6}return t}(),OA=function(t){return 0===t.type},RA=function(t){return 1===t.type},zA=function(t){return 2===t.type},HA=function(t,e){return t.length===e.length&&t.some((function(t,n){return t===e[n]}))},VA=function(t,e,n,r,i){return t.map((function(t,a){switch(a){case 0:return t.add(e,n);case 1:return t.add(e+r,n);case 2:return t.add(e+r,n+i);case 3:return t.add(e,n+i)}return t}))},NA=function(){function t(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),KA=function(){function t(t,e){if(this.container=t,this.parent=e,this.effects=[],this.curves=new UA(this.container),this.container.styles.opacity<1&&this.effects.push(new PA(this.container.styles.opacity)),null!==this.container.styles.transform){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,r=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new DA(n,r,i))}if(0!==this.container.styles.overflowX){var a=QA(this.curves),o=MA(this.curves);HA(a,o)?this.effects.push(new LA(a,6)):(this.effects.push(new LA(a,2)),this.effects.push(new LA(o,4)))}}return t.prototype.getEffects=function(t){for(var e=-1===[2,3].indexOf(this.container.styles.position),n=this.parent,r=this.effects.slice(0);n;){var i=n.effects.filter((function(t){return!RA(t)}));if(e||0!==n.container.styles.position||!n.parent){if(r.unshift.apply(r,i),e=-1===[2,3].indexOf(n.container.styles.position),0!==n.container.styles.overflowX){var a=QA(n.curves),o=MA(n.curves);HA(a,o)||r.unshift(new LA(o,6))}}else r.unshift.apply(r,i);n=n.parent}return r.filter((function(e){return Aa(e.target,t)}))},t}(),GA=function t(e,n,r,i){e.container.elements.forEach((function(a){var o=Aa(a.flags,4),s=Aa(a.flags,2),A=new KA(a,e);Aa(a.styles.display,2048)&&i.push(A);var u=Aa(a.flags,8)?[]:i;if(o||s){var l=o||a.styles.isPositioned()?r:n,c=new NA(A);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var h=a.styles.zIndex.order;if(h<0){var f=0;l.negativeZIndex.some((function(t,e){return h>t.element.container.styles.zIndex.order?(f=e,!1):f>0})),l.negativeZIndex.splice(f,0,c)}else if(h>0){var d=0;l.positiveZIndex.some((function(t,e){return h>=t.element.container.styles.zIndex.order?(d=e+1,!1):d>0})),l.positiveZIndex.splice(d,0,c)}else l.zeroOrAutoZIndexOrTransformedOrOpacity.push(c)}else a.styles.isFloating()?l.nonPositionedFloats.push(c):l.nonPositionedInlineLevel.push(c);t(A,c,o?c:r,u)}else a.styles.isInlineLevel()?n.inlineLevel.push(A):n.nonInlineLevel.push(A),t(A,n,r,u);Aa(a.flags,8)&&jA(a,u)}))},jA=function(t,e){for(var n=t instanceof $o?t.start:1,r=t instanceof $o&&t.reversed,i=0;i<e.length;i++){var a=e[i];a.container instanceof jo&&"number"==typeof a.container.value&&0!==a.container.value&&(n=a.container.value),a.listValue=qs(n,a.container.styles.listStyleType,!0),n+=r?-1:1}},$A=function(t){var e=new KA(t,null),n=new NA(e),r=[];return GA(e,n,n,r),jA(e.container,r),n},WA=function(t,e){switch(e){case 0:return JA(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return JA(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return JA(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);default:return JA(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},ZA=function(t,e){switch(e){case 0:return JA(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return JA(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return JA(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);default:return JA(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},qA=function(t,e){switch(e){case 0:return JA(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return JA(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return JA(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);default:return JA(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},XA=function(t,e){switch(e){case 0:return YA(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return YA(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return YA(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);default:return YA(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},YA=function(t,e){var n=[];return IA(t)?n.push(t.subdivide(.5,!1)):n.push(t),IA(e)?n.push(e.subdivide(.5,!0)):n.push(e),n},JA=function(t,e,n,r){var i=[];return IA(t)?i.push(t.subdivide(.5,!1)):i.push(t),IA(n)?i.push(n.subdivide(.5,!0)):i.push(n),IA(r)?i.push(r.subdivide(.5,!0).reverse()):i.push(r),IA(e)?i.push(e.subdivide(.5,!1).reverse()):i.push(e),i},tu=function(t){var e=t.bounds,n=t.styles;return e.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},eu=function(t){var e=t.styles,n=t.bounds,r=$n(e.paddingLeft,n.width),i=$n(e.paddingRight,n.width),a=$n(e.paddingTop,n.width),o=$n(e.paddingBottom,n.width);return n.add(r+e.borderLeftWidth,a+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+i),-(e.borderTopWidth+e.borderBottomWidth+a+o))},nu=function(t,e){return 0===t?e.bounds:2===t?eu(e):tu(e)},ru=function(t,e){return 0===t?e.bounds:2===t?eu(e):tu(e)},iu=function(t,e,n){var r=nu(Au(t.styles.backgroundOrigin,e),t),i=ru(Au(t.styles.backgroundClip,e),t),a=su(Au(t.styles.backgroundSize,e),n,r),o=a[0],s=a[1],A=jn(Au(t.styles.backgroundPosition,e),r.width-o,r.height-s);return[uu(Au(t.styles.backgroundRepeat,e),A,a,r,i),Math.round(r.left+A[0]),Math.round(r.top+A[1]),o,s]},au=function(t){return Tn(t)&&t.value===Pr.AUTO},ou=function(t){return"number"==typeof t},su=function(t,e,n){var r=e[0],i=e[1],a=e[2],o=t[0],s=t[1];if(!o)return[0,0];if(Hn(o)&&s&&Hn(s))return[$n(o,n.width),$n(s,n.height)];var A=ou(a);if(Tn(o)&&(o.value===Pr.CONTAIN||o.value===Pr.COVER))return ou(a)?n.width/n.height<a!=(o.value===Pr.COVER)?[n.width,n.width/a]:[n.height*a,n.height]:[n.width,n.height];var u=ou(r),l=ou(i),c=u||l;if(au(o)&&(!s||au(s)))return u&&l?[r,i]:A||c?c&&A?[u?r:i*a,l?i:r/a]:[u?r:n.width,l?i:n.height]:[n.width,n.height];if(A){var h=0,f=0;return Hn(o)?h=$n(o,n.width):Hn(s)&&(f=$n(s,n.height)),au(o)?h=f*a:s&&!au(s)||(f=h/a),[h,f]}var d=null,p=null;if(Hn(o)?d=$n(o,n.width):s&&Hn(s)&&(p=$n(s,n.height)),null===d||s&&!au(s)||(p=u&&l?d/r*i:n.height),null!==p&&au(o)&&(d=u&&l?p/i*r:n.width),null!==d&&null!==p)return[d,p];throw new Error("Unable to calculate background-size for element")},Au=function(t,e){var n=t[e];return void 0===n?t[0]:n},uu=function(t,e,n,r,i){var a=e[0],o=e[1],s=n[0],A=n[1];switch(t){case 2:return[new CA(Math.round(r.left),Math.round(r.top+o)),new CA(Math.round(r.left+r.width),Math.round(r.top+o)),new CA(Math.round(r.left+r.width),Math.round(A+r.top+o)),new CA(Math.round(r.left),Math.round(A+r.top+o))];case 3:return[new CA(Math.round(r.left+a),Math.round(r.top)),new CA(Math.round(r.left+a+s),Math.round(r.top)),new CA(Math.round(r.left+a+s),Math.round(r.height+r.top)),new CA(Math.round(r.left+a),Math.round(r.height+r.top))];case 1:return[new CA(Math.round(r.left+a),Math.round(r.top+o)),new CA(Math.round(r.left+a+s),Math.round(r.top+o)),new CA(Math.round(r.left+a+s),Math.round(r.top+o+A)),new CA(Math.round(r.left+a),Math.round(r.top+o+A))];default:return[new CA(Math.round(i.left),Math.round(i.top)),new CA(Math.round(i.left+i.width),Math.round(i.top)),new CA(Math.round(i.left+i.width),Math.round(i.height+i.top)),new CA(Math.round(i.left),Math.round(i.height+i.top))]}},lu="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",cu="Hidden Text",hu=function(){function t(t){this._data={},this._document=t}return t.prototype.parseMetrics=function(t,e){var n=this._document.createElement("div"),r=this._document.createElement("img"),i=this._document.createElement("span"),a=this._document.body;n.style.visibility="hidden",n.style.fontFamily=t,n.style.fontSize=e,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",a.appendChild(n),r.src=lu,r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",i.style.fontFamily=t,i.style.fontSize=e,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(cu)),n.appendChild(i),n.appendChild(r);var o=r.offsetTop-i.offsetTop+2;n.removeChild(i),n.appendChild(this._document.createTextNode(cu)),n.style.lineHeight="normal",r.style.verticalAlign="super";var s=r.offsetTop-n.offsetTop+2;return a.removeChild(n),{baseline:o,middle:s}},t.prototype.getMetrics=function(t,e){var n=t+" "+e;return void 0===this._data[n]&&(this._data[n]=this.parseMetrics(t,e)),this._data[n]},t}(),fu=function(){function t(t,e){this.context=t,this.options=e}return t}(),du=1e4,pu=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r._activeEffects=[],r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),n.canvas||(r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px"),r.fontMetrics=new hu(document),r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.ctx.textBaseline="bottom",r._activeEffects=[],r.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),r}return e(n,t),n.prototype.applyEffects=function(t){for(var e=this;this._activeEffects.length;)this.popEffect();t.forEach((function(t){return e.applyEffect(t)}))},n.prototype.applyEffect=function(t){this.ctx.save(),zA(t)&&(this.ctx.globalAlpha=t.opacity),OA(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),RA(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},n.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},n.prototype.renderStack=function(t){return r(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return t.element.container.styles.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},n.prototype.renderNode=function(t){return r(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return Aa(t.container.flags,16),t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return e.sent(),[4,this.renderNodeContent(t)];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},n.prototype.renderTextWithLetterSpacing=function(t,e,n){var r=this;0===e?this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+n):Mo(t.text).reduce((function(e,i){return r.ctx.fillText(i,e,t.bounds.top+n),e+r.ctx.measureText(i).width}),t.bounds.left)},n.prototype.createFontStyle=function(t){var e=t.fontVariant.filter((function(t){return"normal"===t||"small-caps"===t})).join(""),n=_u(t.fontFamily).join(", "),r=Sn(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,e,t.fontWeight,r,n].join(" "),n,r]},n.prototype.renderTextNode=function(t,e){return r(this,void 0,void 0,(function(){var n,r,a,o,s,A,u,l,c=this;return i(this,(function(i){return n=this.createFontStyle(e),r=n[0],a=n[1],o=n[2],this.ctx.font=r,this.ctx.direction=1===e.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",s=this.fontMetrics.getMetrics(a,o),A=s.baseline,u=s.middle,l=e.paintOrder,t.textBounds.forEach((function(t){l.forEach((function(n){switch(n){case 0:c.ctx.fillStyle=ir(e.color),c.renderTextWithLetterSpacing(t,e.letterSpacing,A);var r=e.textShadow;r.length&&t.text.trim().length&&(r.slice(0).reverse().forEach((function(n){c.ctx.shadowColor=ir(n.color),c.ctx.shadowOffsetX=n.offsetX.number*c.options.scale,c.ctx.shadowOffsetY=n.offsetY.number*c.options.scale,c.ctx.shadowBlur=n.blur.number,c.renderTextWithLetterSpacing(t,e.letterSpacing,A)})),c.ctx.shadowColor="",c.ctx.shadowOffsetX=0,c.ctx.shadowOffsetY=0,c.ctx.shadowBlur=0),e.textDecorationLine.length&&(c.ctx.fillStyle=ir(e.textDecorationColor||e.color),e.textDecorationLine.forEach((function(e){switch(e){case 1:c.ctx.fillRect(t.bounds.left,Math.round(t.bounds.top+A),t.bounds.width,1);break;case 2:c.ctx.fillRect(t.bounds.left,Math.round(t.bounds.top),t.bounds.width,1);break;case 3:c.ctx.fillRect(t.bounds.left,Math.ceil(t.bounds.top+u),t.bounds.width,1)}})));break;case 1:e.webkitTextStrokeWidth&&t.text.trim().length&&(c.ctx.strokeStyle=ir(e.webkitTextStrokeColor),c.ctx.lineWidth=e.webkitTextStrokeWidth,c.ctx.lineJoin=window.chrome?"miter":"round",c.ctx.strokeText(t.text,t.bounds.left,t.bounds.top+A)),c.ctx.strokeStyle="",c.ctx.lineWidth=0,c.ctx.lineJoin="miter"}}))})),[2]}))}))},n.prototype.renderReplacedElement=function(t,e,n){if(n&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var r=eu(t),i=MA(e);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,t.intrinsicWidth,t.intrinsicHeight,r.left,r.top,r.width,r.height),this.ctx.restore()}},n.prototype.renderNodeContent=function(t){return r(this,void 0,void 0,(function(){var e,r,a,s,A,u,l,c,h,f,d,p,v,g,m,y,_,w;return i(this,(function(i){switch(i.label){case 0:this.applyEffects(t.getEffects(4)),e=t.container,r=t.curves,a=e.styles,s=0,A=e.textNodes,i.label=1;case 1:return s<A.length?(u=A[s],[4,this.renderTextNode(u,a)]):[3,4];case 2:i.sent(),i.label=3;case 3:return s++,[3,1];case 4:if(!(e instanceof No))return[3,8];i.label=5;case 5:return i.trys.push([5,7,,8]),[4,this.context.cache.match(e.src)];case 6:return m=i.sent(),this.renderReplacedElement(e,r,m),[3,8];case 7:return i.sent(),this.context.logger.error("Error loading image "+e.src),[3,8];case 8:if(e instanceof Ko&&this.renderReplacedElement(e,r,e.canvas),!(e instanceof Go))return[3,12];i.label=9;case 9:return i.trys.push([9,11,,12]),[4,this.context.cache.match(e.svg)];case 10:return m=i.sent(),this.renderReplacedElement(e,r,m),[3,12];case 11:return i.sent(),this.context.logger.error("Error loading svg "+e.svg.substring(0,255)),[3,12];case 12:return e instanceof as&&e.tree?[4,new n(this.context,{scale:this.options.scale,backgroundColor:e.backgroundColor,x:0,y:0,width:e.width,height:e.height}).render(e.tree)]:[3,14];case 13:l=i.sent(),e.width&&e.height&&this.ctx.drawImage(l,0,0,e.width,e.height,e.bounds.left,e.bounds.top,e.bounds.width,e.bounds.height),i.label=14;case 14:if(e instanceof ns&&(c=Math.min(e.bounds.width,e.bounds.height),e.type===Yo?e.checked&&(this.ctx.save(),this.path([new CA(e.bounds.left+.39363*c,e.bounds.top+.79*c),new CA(e.bounds.left+.16*c,e.bounds.top+.5549*c),new CA(e.bounds.left+.27347*c,e.bounds.top+.44071*c),new CA(e.bounds.left+.39694*c,e.bounds.top+.5649*c),new CA(e.bounds.left+.72983*c,e.bounds.top+.23*c),new CA(e.bounds.left+.84*c,e.bounds.top+.34085*c),new CA(e.bounds.left+.39363*c,e.bounds.top+.79*c)]),this.ctx.fillStyle=ir(es),this.ctx.fill(),this.ctx.restore()):e.type===Jo&&e.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(e.bounds.left+c/2,e.bounds.top+c/2,c/4,0,2*Math.PI,!0),this.ctx.fillStyle=ir(es),this.ctx.fill(),this.ctx.restore())),vu(e)&&e.value.length){switch(h=this.createFontStyle(a),_=h[0],f=h[1],d=this.fontMetrics.getMetrics(_,f).baseline,this.ctx.font=_,this.ctx.fillStyle=ir(a.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=mu(e.styles.textAlign),w=eu(e),p=0,e.styles.textAlign){case 1:p+=w.width/2;break;case 2:p+=w.width}v=w.add(p,0,0,-w.height/2+1),this.ctx.save(),this.path([new CA(w.left,w.top),new CA(w.left+w.width,w.top),new CA(w.left+w.width,w.top+w.height),new CA(w.left,w.top+w.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Uo(e.value,v),a.letterSpacing,d),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Aa(e.styles.display,2048))return[3,20];if(null===e.styles.listStyleImage)return[3,19];if(0!==(g=e.styles.listStyleImage).type)return[3,18];m=void 0,y=g.url,i.label=15;case 15:return i.trys.push([15,17,,18]),[4,this.context.cache.match(y)];case 16:return m=i.sent(),this.ctx.drawImage(m,e.bounds.left-(m.width+10),e.bounds.top),[3,18];case 17:return i.sent(),this.context.logger.error("Error loading list-style-image "+y),[3,18];case 18:return[3,20];case 19:t.listValue&&-1!==e.styles.listStyleType&&(_=this.createFontStyle(a)[0],this.ctx.font=_,this.ctx.fillStyle=ir(a.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",w=new o(e.bounds.left,e.bounds.top+$n(e.styles.paddingTop,e.bounds.width),e.bounds.width,bi(a.lineHeight,a.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Uo(t.listValue,w),a.letterSpacing,bi(a.lineHeight,a.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),i.label=20;case 20:return[2]}}))}))},n.prototype.renderStackContent=function(t){return r(this,void 0,void 0,(function(){var e,n,r,a,o,s,A,u,l,c,h,f,d,p,v;return i(this,(function(i){switch(i.label){case 0:return Aa(t.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:i.sent(),e=0,n=t.negativeZIndex,i.label=2;case 2:return e<n.length?(v=n[e],[4,this.renderStack(v)]):[3,5];case 3:i.sent(),i.label=4;case 4:return e++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:i.sent(),r=0,a=t.nonInlineLevel,i.label=7;case 7:return r<a.length?(v=a[r],[4,this.renderNode(v)]):[3,10];case 8:i.sent(),i.label=9;case 9:return r++,[3,7];case 10:o=0,s=t.nonPositionedFloats,i.label=11;case 11:return o<s.length?(v=s[o],[4,this.renderStack(v)]):[3,14];case 12:i.sent(),i.label=13;case 13:return o++,[3,11];case 14:A=0,u=t.nonPositionedInlineLevel,i.label=15;case 15:return A<u.length?(v=u[A],[4,this.renderStack(v)]):[3,18];case 16:i.sent(),i.label=17;case 17:return A++,[3,15];case 18:l=0,c=t.inlineLevel,i.label=19;case 19:return l<c.length?(v=c[l],[4,this.renderNode(v)]):[3,22];case 20:i.sent(),i.label=21;case 21:return l++,[3,19];case 22:h=0,f=t.zeroOrAutoZIndexOrTransformedOrOpacity,i.label=23;case 23:return h<f.length?(v=f[h],[4,this.renderStack(v)]):[3,26];case 24:i.sent(),i.label=25;case 25:return h++,[3,23];case 26:d=0,p=t.positiveZIndex,i.label=27;case 27:return d<p.length?(v=p[d],[4,this.renderStack(v)]):[3,30];case 28:i.sent(),i.label=29;case 29:return d++,[3,27];case 30:return[2]}}))}))},n.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},n.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},n.prototype.formatPath=function(t){var e=this;t.forEach((function(t,n){var r=IA(t)?t.start:t;0===n?e.ctx.moveTo(r.x,r.y):e.ctx.lineTo(r.x,r.y),IA(t)&&e.ctx.bezierCurveTo(t.startControl.x,t.startControl.y,t.endControl.x,t.endControl.y,t.end.x,t.end.y)}))},n.prototype.renderRepeat=function(t,e,n,r){this.path(t),this.ctx.fillStyle=e,this.ctx.translate(n,r),this.ctx.fill(),this.ctx.translate(-n,-r)},n.prototype.resizeImage=function(t,e,n){var r;if(t.width===e&&t.height===n)return t;var i=(null!==(r=this.canvas.ownerDocument)&&void 0!==r?r:document).createElement("canvas");return i.width=Math.max(1,e),i.height=Math.max(1,n),i.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,e,n),i},n.prototype.renderBackgroundImage=function(t){return r(this,void 0,void 0,(function(){var e,n,r,a,o,s;return i(this,(function(A){switch(A.label){case 0:e=t.styles.backgroundImage.length-1,n=function(n){var a,o,s,A,u,l,c,h,f,d,p,v,g,m,y,_,w,x,b,B,k,C,F,E,I,U,S,Q,T,M,D;return i(this,(function(i){switch(i.label){case 0:if(0!==n.type)return[3,5];a=void 0,o=n.url,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,r.context.cache.match(o)];case 2:return a=i.sent(),[3,4];case 3:return i.sent(),r.context.logger.error("Error loading background-image "+o),[3,4];case 4:return a&&(s=iu(t,e,[a.width,a.height,a.width/a.height]),_=s[0],C=s[1],F=s[2],b=s[3],B=s[4],m=r.ctx.createPattern(r.resizeImage(a,b,B),"repeat"),r.renderRepeat(_,m,C,F)),[3,6];case 5:Tr(n)?(A=iu(t,e,[null,null,null]),_=A[0],C=A[1],F=A[2],b=A[3],B=A[4],u=mr(n.angle,b,B),l=u[0],c=u[1],h=u[2],f=u[3],d=u[4],(p=document.createElement("canvas")).width=b,p.height=B,v=p.getContext("2d"),g=v.createLinearGradient(c,f,h,d),vr(n.stops,l).forEach((function(t){return g.addColorStop(t.stop,ir(t.color))})),v.fillStyle=g,v.fillRect(0,0,b,B),b>0&&B>0&&(m=r.ctx.createPattern(p,"repeat"),r.renderRepeat(_,m,C,F))):Mr(n)&&(y=iu(t,e,[null,null,null]),_=y[0],w=y[1],x=y[2],b=y[3],B=y[4],k=0===n.position.length?[Kn]:n.position,C=$n(k[0],b),F=$n(k[k.length-1],B),E=wr(n,C,F,b,B),I=E[0],U=E[1],I>0&&U>0&&(S=r.ctx.createRadialGradient(w+C,x+F,0,w+C,x+F,I),vr(n.stops,2*I).forEach((function(t){return S.addColorStop(t.stop,ir(t.color))})),r.path(_),r.ctx.fillStyle=S,I!==U?(Q=t.bounds.left+.5*t.bounds.width,T=t.bounds.top+.5*t.bounds.height,D=1/(M=U/I),r.ctx.save(),r.ctx.translate(Q,T),r.ctx.transform(1,0,0,M,0,0),r.ctx.translate(-Q,-T),r.ctx.fillRect(w,D*(x-T)+T,b,B*D),r.ctx.restore()):r.ctx.fill())),i.label=6;case 6:return e--,[2]}}))},r=this,a=0,o=t.styles.backgroundImage.slice(0).reverse(),A.label=1;case 1:return a<o.length?(s=o[a],[5,n(s)]):[3,4];case 2:A.sent(),A.label=3;case 3:return a++,[3,1];case 4:return[2]}}))}))},n.prototype.renderSolidBorder=function(t,e,n){return r(this,void 0,void 0,(function(){return i(this,(function(r){return this.path(WA(n,e)),this.ctx.fillStyle=ir(t),this.ctx.fill(),[2]}))}))},n.prototype.renderDoubleBorder=function(t,e,n,a){return r(this,void 0,void 0,(function(){var r,o;return i(this,(function(i){switch(i.label){case 0:return e<3?[4,this.renderSolidBorder(t,n,a)]:[3,2];case 1:return i.sent(),[2];case 2:return r=ZA(a,n),this.path(r),this.ctx.fillStyle=ir(t),this.ctx.fill(),o=qA(a,n),this.path(o),this.ctx.fill(),[2]}}))}))},n.prototype.renderNodeBackgroundAndBorders=function(t){return r(this,void 0,void 0,(function(){var e,n,r,a,o,s,A,u,l=this;return i(this,(function(i){switch(i.label){case 0:return this.applyEffects(t.getEffects(2)),e=t.container.styles,n=!rr(e.backgroundColor)||e.backgroundImage.length,r=[{style:e.borderTopStyle,color:e.borderTopColor,width:e.borderTopWidth},{style:e.borderRightStyle,color:e.borderRightColor,width:e.borderRightWidth},{style:e.borderBottomStyle,color:e.borderBottomColor,width:e.borderBottomWidth},{style:e.borderLeftStyle,color:e.borderLeftColor,width:e.borderLeftWidth}],a=gu(Au(e.backgroundClip,0),t.curves),n||e.boxShadow.length?(this.ctx.save(),this.path(a),this.ctx.clip(),rr(e.backgroundColor)||(this.ctx.fillStyle=ir(e.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:i.sent(),this.ctx.restore(),e.boxShadow.slice(0).reverse().forEach((function(e){l.ctx.save();var n=QA(t.curves),r=e.inset?0:du,i=VA(n,-r+(e.inset?1:-1)*e.spread.number,(e.inset?1:-1)*e.spread.number,e.spread.number*(e.inset?-2:2),e.spread.number*(e.inset?-2:2));e.inset?(l.path(n),l.ctx.clip(),l.mask(i)):(l.mask(n),l.ctx.clip(),l.path(i)),l.ctx.shadowOffsetX=e.offsetX.number+r,l.ctx.shadowOffsetY=e.offsetY.number,l.ctx.shadowColor=ir(e.color),l.ctx.shadowBlur=e.blur.number,l.ctx.fillStyle=e.inset?ir(e.color):"rgba(0,0,0,1)",l.ctx.fill(),l.ctx.restore()})),i.label=2;case 2:o=0,s=0,A=r,i.label=3;case 3:return s<A.length?0!==(u=A[s]).style&&!rr(u.color)&&u.width>0?2!==u.style?[3,5]:[4,this.renderDashedDottedBorder(u.color,u.width,o,t.curves,2)]:[3,11]:[3,13];case 4:return i.sent(),[3,11];case 5:return 3!==u.style?[3,7]:[4,this.renderDashedDottedBorder(u.color,u.width,o,t.curves,3)];case 6:return i.sent(),[3,11];case 7:return 4!==u.style?[3,9]:[4,this.renderDoubleBorder(u.color,u.width,o,t.curves)];case 8:return i.sent(),[3,11];case 9:return[4,this.renderSolidBorder(u.color,o,t.curves)];case 10:i.sent(),i.label=11;case 11:o++,i.label=12;case 12:return s++,[3,3];case 13:return[2]}}))}))},n.prototype.renderDashedDottedBorder=function(t,e,n,a,o){return r(this,void 0,void 0,(function(){var r,s,A,u,l,c,h,f,d,p,v,g,m,y,_,w;return i(this,(function(i){return this.ctx.save(),r=XA(a,n),s=WA(a,n),2===o&&(this.path(s),this.ctx.clip()),IA(s[0])?(A=s[0].start.x,u=s[0].start.y):(A=s[0].x,u=s[0].y),IA(s[1])?(l=s[1].end.x,c=s[1].end.y):(l=s[1].x,c=s[1].y),h=0===n||2===n?Math.abs(A-l):Math.abs(u-c),this.ctx.beginPath(),3===o?this.formatPath(r):this.formatPath(s.slice(0,2)),f=e<3?3*e:2*e,d=e<3?2*e:e,3===o&&(f=e,d=e),p=!0,h<=2*f?p=!1:h<=2*f+d?(f*=v=h/(2*f+d),d*=v):(g=Math.floor((h+d)/(f+d)),m=(h-g*f)/(g-1),d=(y=(h-(g+1)*f)/g)<=0||Math.abs(d-m)<Math.abs(d-y)?m:y),p&&(3===o?this.ctx.setLineDash([0,f+d]):this.ctx.setLineDash([f,d])),3===o?(this.ctx.lineCap="round",this.ctx.lineWidth=e):this.ctx.lineWidth=2*e+1.1,this.ctx.strokeStyle=ir(t),this.ctx.stroke(),this.ctx.setLineDash([]),2===o&&(IA(s[0])&&(_=s[3],w=s[0],this.ctx.beginPath(),this.formatPath([new CA(_.end.x,_.end.y),new CA(w.start.x,w.start.y)]),this.ctx.stroke()),IA(s[1])&&(_=s[1],w=s[2],this.ctx.beginPath(),this.formatPath([new CA(_.end.x,_.end.y),new CA(w.start.x,w.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]}))}))},n.prototype.render=function(t){return r(this,void 0,void 0,(function(){var e;return i(this,(function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=ir(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),e=$A(t),[4,this.renderStack(e)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}}))}))},n}(fu),vu=function(t){return t instanceof is||t instanceof rs||t instanceof ns&&t.type!==Jo&&t.type!==Yo},gu=function(t,e){switch(t){case 0:return QA(e);case 2:return TA(e);default:return MA(e)}},mu=function(t){switch(t){case 1:return"center";case 2:return"right";default:return"left"}},yu=["-apple-system","system-ui"],_u=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter((function(t){return-1===yu.indexOf(t)})):t},wu=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),r.options=n,r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px",r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),r}return e(n,t),n.prototype.render=function(t){return r(this,void 0,void 0,(function(){var e,n;return i(this,(function(r){switch(r.label){case 0:return e=Fo(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,xu(e)];case 1:return n=r.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=ir(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}}))}))},n}(fu),xu=function(t){return new Promise((function(e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(t))}))},bu=function(){function t(t){var e=t.id,n=t.enabled;this.id=e,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.debug?console.debug.apply(console,a([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&"undefined"!=typeof window&&window.console&&"function"==typeof console.info&&console.info.apply(console,a([this.id,this.getTime()+"ms"],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.warn?console.warn.apply(console,a([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.error?console.error.apply(console,a([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},t.instances={},t}(),Bu=function(){function t(e,n){var r;this.windowBounds=n,this.instanceName="#"+t.instanceCount++,this.logger=new bu({id:this.instanceName,enabled:e.logging}),this.cache=null!==(r=e.cache)&&void 0!==r?r:new gA(this,e)}return t.instanceCount=1,t}(),ku=function(t,e){return void 0===e&&(e={}),Cu(t,e)};"undefined"!=typeof window&&vA.setContext(window);var Cu=function(t,e){return r(void 0,void 0,void 0,(function(){var r,a,u,l,c,h,f,d,p,v,g,m,y,_,w,x,b,B,k,C,F,E,I,U,S,Q,T,M,D,L,P,O,R,z,H,V,N,K;return i(this,(function(i){switch(i.label){case 0:if(!t||"object"!==ni(t))return[2,Promise.reject("Invalid element provided as first argument")];if(!(r=t.ownerDocument))throw new Error("Element is not attached to a Document");if(!(a=r.defaultView))throw new Error("Document is not attached to a Window");return u={allowTaint:null!==(E=e.allowTaint)&&void 0!==E&&E,imageTimeout:null!==(I=e.imageTimeout)&&void 0!==I?I:15e3,proxy:e.proxy,useCORS:null!==(U=e.useCORS)&&void 0!==U&&U},l=n({logging:null===(S=e.logging)||void 0===S||S,cache:e.cache},u),c={windowWidth:null!==(Q=e.windowWidth)&&void 0!==Q?Q:a.innerWidth,windowHeight:null!==(T=e.windowHeight)&&void 0!==T?T:a.innerHeight,scrollX:null!==(M=e.scrollX)&&void 0!==M?M:a.pageXOffset,scrollY:null!==(D=e.scrollY)&&void 0!==D?D:a.pageYOffset},h=new o(c.scrollX,c.scrollY,c.windowWidth,c.windowHeight),f=new Bu(l,h),d=null!==(L=e.foreignObjectRendering)&&void 0!==L&&L,p={allowTaint:null!==(P=e.allowTaint)&&void 0!==P&&P,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:d,copyStyles:d},f.logger.debug("Starting document clone with size "+h.width+"x"+h.height+" scrolled to "+-h.left+","+-h.top),v=new Ys(f,t,p),(g=v.clonedReferenceElement)?[4,v.toIFrame(r,h)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return m=i.sent(),y=ws(g)||ys(g)?A(g.ownerDocument):s(f,g),_=y.width,w=y.height,x=y.left,b=y.top,B=Fu(f,g,e.backgroundColor),k={canvas:e.canvas,backgroundColor:B,scale:null!==(R=null!==(O=e.scale)&&void 0!==O?O:a.devicePixelRatio)&&void 0!==R?R:1,x:(null!==(z=e.x)&&void 0!==z?z:0)+x,y:(null!==(H=e.y)&&void 0!==H?H:0)+b,width:null!==(V=e.width)&&void 0!==V?V:Math.ceil(_),height:null!==(N=e.height)&&void 0!==N?N:Math.ceil(w)},d?(f.logger.debug("Document cloned, using foreign object rendering"),[4,new wu(f,k).render(g)]):[3,3];case 2:return C=i.sent(),[3,5];case 3:return f.logger.debug("Document cloned, element located at "+x+","+b+" with size "+_+"x"+w+" using computed rendering"),f.logger.debug("Starting DOM parsing"),F=us(f,g),B===F.styles.backgroundColor&&(F.styles.backgroundColor=hr.TRANSPARENT),f.logger.debug("Starting renderer for element at "+k.x+","+k.y+" with size "+k.width+"x"+k.height),[4,new pu(f,k).render(F)];case 4:C=i.sent(),i.label=5;case 5:return(null===(K=e.removeContainer)||void 0===K||K)&&(Ys.destroy(m)||f.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),f.logger.debug("Finished rendering"),[2,C]}}))}))},Fu=function(t,e,n){var r=e.ownerDocument,i=r.documentElement?cr(t,getComputedStyle(r.documentElement).backgroundColor):hr.TRANSPARENT,a=r.body?cr(t,getComputedStyle(r.body).backgroundColor):hr.TRANSPARENT,o="string"==typeof n?cr(t,n):null===n?hr.TRANSPARENT:4294967295;return e===r.documentElement?rr(i)?rr(a)?o:a:i:o};return ku}()}));function VQ(t,e){var n=document.createElement("a");n.href=t,n.download=e,n.click()}function NQ(t){var e=String(t).split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")}function KQ(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return GQ(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?GQ(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function GQ(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}Pe({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=ot(this),n=ve(e),r=Qn(e,0);return r.length=uF(r,e,e,n,0,void 0===t?1:le(t)),r}}),ra("flat");var jQ=function(){return ai((function t(e,n,r,i,a){oi(this,t),this.items=e,this.radiusFun=n,this.xFun=r,this.padding=i,this.yOffset=a,this.tieBreakFn=this._sfc32(2654435769,608135816,3084996962,1),this.maxR=Math.max.apply(Math,Di(e.map((function(t){return n(t)})))),this.rng=this._sfc32(1,2,3,1)}),[{key:"calculateYPositions",value:function(){var t=this,e=this.items.map((function(e,n){return{datum:e,originalIndex:n,x:t.xFun(e),r:t.radiusFun(e)+t.padding,y:null,placed:!1}})).sort((function(t,e){return t.x-e.x}));e.forEach((function(t,e){t.index=e}));var n=this.tieBreakFn;e.forEach((function(t){t.tieBreaker=n(t.x)}));var r,i=KQ(Di(e).sort((function(e,n){var r=t.radiusFun(e.datum)+5*e.tieBreaker,i=t.radiusFun(n.datum)+5*n.tieBreaker;return r!=i?i-r:e.x-n.x})));try{for(i.s();!(r=i.n()).done;){var a=r.value;a.placed=!0,a.y=this._getBestYPosition(a,e)}}catch(t){i.e(t)}finally{i.f()}return e.sort((function(t,e){return t.originalIndex-e.originalIndex})),e.map((function(e){return{x:e.x,y:e.y+t.yOffset,r:t.radiusFun(e.datum)}}))}},{key:"_sfc32",value:function(t,e,n,r){for(var i=function(){var i=(t>>>=0)+(e>>>=0)|0;return t=e^e>>>9,e=(n>>>=0)+(n<<3)|0,n=(n=n<<21|n>>>11)+(i=i+(r=(r>>>=0)+1|0)|0)|0,(i>>>0)/4294967296},a=0;a<10;a++)i();return i}},{key:"_getBestYPosition",value:function(t,e){for(var n=[],r=0,i=[-1,1];r<i.length;r++)for(var a=i[r],o=void 0,s=t.r,A=t.index+a;A>=0&&A<e.length&&(o=Math.abs(t.x-e[A].x))<s+this.maxR;A+=a){var u=e[A];if(u.placed){var l=s+u.r;if(!(o>=s+u.r)){var c=Math.sqrt(l*l-o*o),h=[u.y-c,u.y+c];n.push(h)}}}if(0==n.length)return t.r*(this.rng()-.5)*2;var f=n.flat();f.push(0),f.sort((function(t,e){var n=Math.abs(t),r=Math.abs(e);return n<r?-1:n>r?1:t-e}));for(var d,p=function(){var t=f[v];if(n.every((function(e){return t<=e[0]||t>=e[1]})))return{v:t}},v=0;v<f.length;v++)if(d=p())return d.v}}])}();function $Q(t,e,n){return e=ui(e),Ai(t,WQ()?Reflect.construct(e,n||[],ui(t).constructor):e.apply(t,n))}function WQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(WQ=function(){return!!t})()}function ZQ(t,e,n){var r,i,a,o,s,A,u,l,c,h,f,d,p,v,g=ep("LayerCake"),m=g.data,y=g.x,_=g.y,w=g.r,x=g.xGet,b=g.yGet,B=g.rGet,k=g.xScale,C=g.yScale,F=g.yRange,E=g.rRange;g.xDomain;var I=g.yDomain,U=g.custom,S=g.width;vd(t,m,(function(t){return n(19,v=t)})),vd(t,y,(function(t){return n(17,d=t)})),vd(t,_,(function(t){return n(16,f=t)})),vd(t,w,(function(t){return n(15,h=t)})),vd(t,x,(function(t){return n(25,s=t)})),vd(t,b,(function(t){return n(28,l=t)})),vd(t,B,(function(t){return n(27,u=t)})),vd(t,k,(function(t){return n(23,a=t)})),vd(t,C,(function(t){return n(22,i=t)})),vd(t,F,(function(t){return n(24,o=t)})),vd(t,E,(function(t){return n(26,A=t)})),vd(t,I,(function(t){return n(21,r=t)})),vd(t,U,(function(t){return n(18,p=t)})),vd(t,S,(function(t){return n(14,c=t)}));var Q=p.coords,T=p.type,M=c;return t.$$.update=function(){1032192&t.$$.dirty[0]&&function(t,e,n,c,h,f){var d,p=e.mode,v=e.padding,g=e.animation&&f==M?e.duration:0;if(M=f,"bar"==T){var m=[],y=[];d=t.map((function(e,r){return e.map((function(e,a){m[a]||(m[a]=0),y[a]||(y[a]=0);var o="default"==p||"grouped"==p||"comparison"==p&&0==r?0:"stacked"==p&&n(e)>=0?m[a]:"stacked"==p?y[a]:n(e),s="default"==p||"grouped"==p||"comparison"==p&&0==r?n(e):"stacked"==p&&n(e)>=0?m[a]+n(e):"stacked"==p?y[a]+n(e):n(e);n(e)>=0?m[a]+=n(e):y[a]+=n(e);var A="grouped"==p?l(e)+r*(i.bandwidth()/t.length):l(e);return{x0:o,x1:s,y0:A,y1:"grouped"==p?A+i.bandwidth()/t.length:A+i.bandwidth()}}))}))}else if("column"==T){var _=[],w=[];d=t.map((function(e,n){return e.map((function(e,r){_[r]||(_[r]=0),w[r]||(w[r]=0);var i="grouped"==p&&a.bandwidth?s(e)+n*(1/t.length)*a.bandwidth():"grouped"==p?s(e)[0]+n*(1/t.length)*Math.max(0,s(e)[1]-s(e)[0]):a.bandwidth?s(e):s(e)[0],o="grouped"==p&&a.bandwidth?i+a.bandwidth()/t.length:"grouped"==p?i+Math.max(0,s(e)[1]-s(e)[0])/t.length:a.bandwidth?i+a.bandwidth():i+Math.max(0,s(e)[1]-s(e)[0]),A="default"==p||"grouped"==p||"comparison"==p&&0==n?0:"stacked"==p&&c(e)>=0?_[r]:"stacked"==p?w[r]:c(e),u="default"==p||"grouped"==p||"comparison"==p&&0==n?c(e):"stacked"==p&&c(e)>=0?_[r]+c(e):"stacked"==p?w[r]+c(e):c(e);return c(e)>=0?_[r]+=c(e):w[r]+=c(e),{x0:i,x1:o,y0:A,y1:u}}))}))}else if("scatter"==T){var x=function(t){return h?u(t):A[0]};if(d=c?t.map((function(t){return{x:n(t),y:c(t),r:x(t)}})):new jQ(t,(function(t){return x(t)}),(function(t){return s(t)}),v,o[0]/2).calculateYPositions().map((function(t){return{x:a.invert(t.x),y:i.invert(t.y),r:t.r}})),!c&&e.yFitBeeswarm){var b=Math.max.apply(Math,Di(d.map((function(t){return Math.abs(t.y)})))),B=b&&b>r[1]?r[1]/b:null;B&&(d=d.map((function(t){return{x:t.x,y:t.y*B,r:t.r}})))}}else d=t.map((function(t){return t.map((function(t){return{x:n(t),y:c(t)}}))}));Q.set(d,{duration:g})}(v,p,d,f,h,c)},[m,y,_,w,x,b,B,k,C,F,E,I,U,S,c,h,f,d,p,v]}var qQ=function(t){function e(t){var n;return oi(this,e),Cp(n=$Q(this,e),t,ZQ,null,fd,{},null,[-1,-1]),n}return ci(e,t),ai(e)}(Fp);function XQ(t,e,n){return e=ui(e),Ai(t,YQ()?Reflect.construct(e,n||[],ui(t).constructor):e.apply(t,n))}function YQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(YQ=function(){return!!t})()}function JQ(t){Md(t,"svelte-1b8cddl",".tick.svelte-1b8cddl.svelte-1b8cddl{font-size:.8em}.tick.svelte-1b8cddl .tick-mark.svelte-1b8cddl,.tick.tick-0.svelte-1b8cddl line.svelte-1b8cddl{stroke-dasharray:0}.tick.svelte-1b8cddl line.svelte-1b8cddl{shape-rendering:crispEdges}.dashed.svelte-1b8cddl.svelte-1b8cddl{stroke-dasharray:2}.axis.snapTicks.svelte-1b8cddl .tick:last-child text.svelte-1b8cddl{transform:translateX(3px)}.axis.snapTicks.svelte-1b8cddl .tick.tick-0 text.svelte-1b8cddl{transform:translateX(-3px)}")}function tT(t,e,n){var r=t.slice();return r[27]=e[n],r[29]=n,r}function eT(t){var e,n;return{c:function(){Kd(e=Rd("line"),"class","gridline svelte-1b8cddl"),Kd(e,"y1",n=-1*t[17]),Kd(e,"y2","0"),Kd(e,"x1","0"),Kd(e,"x2","0"),Zd(e,"dashed",t[2]),$d(e,"stroke",t[4]),$d(e,"stroke-width",0===t[27]?1.5:1),$d(e,"filter",0!==t[27]?"contrast(calc(1/3)) brightness(1.5)":null)},m:function(t,n){Dd(t,e,n)},p:function(t,r){131072&r&&n!==(n=-1*t[17])&&Kd(e,"y1",n),4&r&&Zd(e,"dashed",t[2]),16&r&&$d(e,"stroke",t[4]),32768&r&&$d(e,"stroke-width",0===t[27]?1.5:1),32768&r&&$d(e,"filter",0!==t[27]?"contrast(calc(1/3)) brightness(1.5)":null)},d:function(t){t&&Ld(e)}}}function nT(t){var e,n,r;return{c:function(){Kd(e=Rd("line"),"class","tick-mark svelte-1b8cddl"),Kd(e,"y1",0),Kd(e,"y2",t[10]),Kd(e,"x1",n=t[7]||t[13]?t[14].bandwidth()/2:0),Kd(e,"x2",r=t[7]||t[13]?t[14].bandwidth()/2:0),$d(e,"stroke",t[4]),$d(e,"stroke-width",0===t[27]?1.5:1),$d(e,"filter",0!==t[27]?"contrast(calc(1/3)) brightness(1.5)":null)},m:function(t,n){Dd(t,e,n)},p:function(t,i){1024&i&&Kd(e,"y2",t[10]),24704&i&&n!==(n=t[7]||t[13]?t[14].bandwidth()/2:0)&&Kd(e,"x1",n),24704&i&&r!==(r=t[7]||t[13]?t[14].bandwidth()/2:0)&&Kd(e,"x2",r),16&i&&$d(e,"stroke",t[4]),32768&i&&$d(e,"stroke-width",0===t[27]?1.5:1),32768&i&&$d(e,"filter",0!==t[27]?"contrast(calc(1/3)) brightness(1.5)":null)},d:function(t){t&&Ld(e)}}}function rT(t){var e,n,r,i,a,o,s,A,u=(t[29]==t[15].length-1?t[11]+t[0](t[27])+t[12]:t[0](t[27]))+"",l=!1!==t[1]&&eT(t),c=!0===t[3]&&nT(t);return{c:function(){e=Rd("g"),l&&l.c(),n=Vd(),c&&c.c(),r=Rd("text"),i=zd(u),Kd(r,"x",a=t[7]||t[13]?t[14].bandwidth()/2:0),Kd(r,"y",t[8]),Kd(r,"dx",t[9]),Kd(r,"dy",t[10]),Kd(r,"text-anchor",o=t[22](t[27])),Kd(r,"fill",t[5]),Kd(r,"class","svelte-1b8cddl"),Kd(e,"class",s="tick tick-"+t[27]+" svelte-1b8cddl"),Kd(e,"transform",A="translate("+t[14](t[27])+","+Math.max.apply(Math,Di(t[16]))+")")},m:function(t,a){Dd(t,e,a),l&&l.m(e,null),Td(e,n),c&&c.m(e,null),Td(e,r),Td(r,i)},p:function(t,h){!1!==t[1]?l?l.p(t,h):((l=eT(t)).c(),l.m(e,n)):l&&(l.d(1),l=null),!0===t[3]?c?c.p(t,h):((c=nT(t)).c(),c.m(e,r)):c&&(c.d(1),c=null),38913&h&&u!==(u=(t[29]==t[15].length-1?t[11]+t[0](t[27])+t[12]:t[0](t[27]))+"")&&jd(i,u),24704&h&&a!==(a=t[7]||t[13]?t[14].bandwidth()/2:0)&&Kd(r,"x",a),256&h&&Kd(r,"y",t[8]),512&h&&Kd(r,"dx",t[9]),1024&h&&Kd(r,"dy",t[10]),32768&h&&o!==(o=t[22](t[27]))&&Kd(r,"text-anchor",o),32&h&&Kd(r,"fill",t[5]),32768&h&&s!==(s="tick tick-"+t[27]+" svelte-1b8cddl")&&Kd(e,"class",s),114688&h&&A!==(A="translate("+t[14](t[27])+","+Math.max.apply(Math,Di(t[16]))+")")&&Kd(e,"transform",A)},d:function(t){t&&Ld(e),l&&l.d(),c&&c.d()}}}function iT(t){for(var e,n=t[15],r=[],i=0;i<n.length;i+=1)r[i]=rT(tT(t,n,i));return{c:function(){e=Rd("g");for(var n=0;n<r.length;n+=1)r[n].c();Kd(e,"class","axis x-axis svelte-1b8cddl"),Zd(e,"snapTicks",t[6])},m:function(t,n){Dd(t,e,n);for(var i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null)},p:function(t,i){var a=gi(i,1)[0];if(4456383&a){var o;for(n=t[15],o=0;o<n.length;o+=1){var s=tT(t,n,o);r[o]?r[o].p(s,a):(r[o]=rT(s),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}64&a&&Zd(e,"snapTicks",t[6])},i:ad,o:ad,d:function(t){t&&Ld(e),Pd(r,t)}}}var aT=/%(?:[YyBbMmdeHwWSzZNaAgGcpPZcrRUoOFDL]+)/;function oT(t,e,n){var r,i,a,o,s,A,u=ep("LayerCake"),l=u.height,c=u.xScale,h=u.xDomain,f=u.yRange;vd(t,l,(function(t){return n(17,A=t)})),vd(t,c,(function(t){return n(14,o=t)})),vd(t,h,(function(t){return n(26,a=t)})),vd(t,f,(function(t){return n(16,s=t)}));var d=e.gridlines,p=void 0===d||d,v=e.tickDashed,g=void 0!==v&&v,m=e.tickMarks,y=void 0!==m&&m,_=e.tickColor,w=void 0===_?"#b3b3b3":_,x=e.textColor,b=void 0===x?"#707070":x,B=e.formatTick,k=void 0===B?function(t){return t}:B,C=e.formatTickString,F=void 0===C?null:C,E=e.snapTicks,I=void 0!==E&&E,U=e.ticks,S=void 0===U?void 0:U,Q=e.xTick,T=void 0===Q?void 0:Q,M=e.yTick,D=void 0===M?16:M,L=e.forceTicks,P=void 0!==L&&L,O=e.dxTick,R=void 0===O?0:O,z=e.dyTick,H=void 0===z?y?8:0:z,V=e.prefix,N=void 0===V?"":V,K=e.suffix,G=void 0===K?"":K;return F&&F.match(aT)&&(k=function(t){return oU(F)(t)}),t.$$set=function(t){"gridlines"in t&&n(1,p=t.gridlines),"tickDashed"in t&&n(2,g=t.tickDashed),"tickMarks"in t&&n(3,y=t.tickMarks),"tickColor"in t&&n(4,w=t.tickColor),"textColor"in t&&n(5,b=t.textColor),"formatTick"in t&&n(0,k=t.formatTick),"formatTickString"in t&&n(23,F=t.formatTickString),"snapTicks"in t&&n(6,I=t.snapTicks),"ticks"in t&&n(24,S=t.ticks),"xTick"in t&&n(7,T=t.xTick),"yTick"in t&&n(8,D=t.yTick),"forceTicks"in t&&n(25,P=t.forceTicks),"dxTick"in t&&n(9,R=t.dxTick),"dyTick"in t&&n(10,H=t.dyTick),"prefix"in t&&n(11,N=t.prefix),"suffix"in t&&n(12,G=t.suffix)},t.$$.update=function(){16384&t.$$.dirty&&n(13,r="function"==typeof o.bandwidth),50356224&t.$$.dirty&&n(15,i=Array.isArray(S)?S:r?o.domain():"function"==typeof S?S(o.ticks()):"number"==typeof S&&P?function(t,e){if("number"==typeof e[0]&&e.length>1&&e.length<t.length&&e[e.length-1]<t[t.length-1]){var n=t[t.length-1]-e[e.length-1];return e.map((function(t){return t+n}))}return e}(o.ticks(),o.ticks(S)):o.ticks(S))},[k,p,g,y,w,b,I,T,D,R,H,N,G,r,o,i,s,A,l,c,h,f,function(t){if(!0===I){if(t===a[0])return"start";if(t===a[1])return"end"}return"middle"},F,S,P]}var sT=function(t){function e(t){var n;return oi(this,e),Cp(n=XQ(this,e),t,oT,iT,fd,{gridlines:1,tickDashed:2,tickMarks:3,tickColor:4,textColor:5,formatTick:0,formatTickString:23,snapTicks:6,ticks:24,xTick:7,yTick:8,forceTicks:25,dxTick:9,dyTick:10,prefix:11,suffix:12},JQ),n}return ci(e,t),ai(e)}(Fp);function AT(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e.disable){var n=function(t,e){return"number"==typeof t?t:e},r=n(e.width,100),i=n(e.dyAdjust,.05),a=n(e.lineHeightEms,1),o=n(e.lineHeightSquishFactor,1),s=e.splitOnHyphen||!0,A=e.centreVertically||!0;t.getAttribute("x"),t.getAttribute("y");var u=t.getAttribute("text-anchor"),l=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=document.createElementNS("http://www.w3.org/2000/svg",e);return n&&(r.textContent=n),t.append(r),r},c=[];t.textContent.split(/\s+/).forEach((function(t){if(s){for(var e=t.split("-"),n=0;n<e.length-1;n++)c.push(e[n]+"-");c.push(e[e.length-1]+" ")}else c.push(t+" ")})),t.textContent="";for(var h=l(t,"tspan"),f="",d="",p=0,v=0;v<c.length;v++){var g=c[v];d=f,f+=g,++p,h.textContent=f.trim(),h.getComputedTextLength()>r&&p>1&&(h.textContent=d.trim(),d="",f=g,p=1,h=l(t,"tspan",g.trim()))}var m=t.childNodes,y=a;if(m.length>2)for(var _=0;_<m.length;_++)y*=o;var w=0;m.forEach((function(t,e){"end"===u&&0!==e&&(w=-t.getComputedTextLength());var n=0===e?i:1;A&&0===e&&(n-=(m.length-1)*y/2),t.setAttribute("dx",w),t.setAttribute("dy",n+"em"),"end"!==u&&(w=-t.getComputedTextLength())}))}}function uT(t,e,n){return e=ui(e),Ai(t,lT()?Reflect.construct(e,n||[],ui(t).constructor):e.apply(t,n))}function lT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(lT=function(){return!!t})()}function cT(t){Md(t,"svelte-f7wn4m",".tick.svelte-f7wn4m.svelte-f7wn4m{font-size:.8em}.dashed.svelte-f7wn4m.svelte-f7wn4m{stroke-dasharray:2}.tick.tick-0.svelte-f7wn4m line.svelte-f7wn4m{stroke-dasharray:0}")}function hT(t,e,n){var r=t.slice();return r[27]=e[n],r[29]=n,r}function fT(t){var e,n,r;return{c:function(){Kd(e=Rd("line"),"class","gridline svelte-f7wn4m"),Kd(e,"x1","0"),Kd(e,"x2",t[18]),Kd(e,"y1",n=t[8]+(t[14]?t[15].bandwidth()/2:0)),Kd(e,"y2",r=t[8]+(t[14]?t[15].bandwidth()/2:0)),Zd(e,"dashed",t[2]),$d(e,"stroke",t[3]),$d(e,"stroke-width",0===t[27]?1.5:1),$d(e,"filter",0!==t[27]?"contrast(calc(1/3)) brightness(1.5)":null)},m:function(t,n){Dd(t,e,n)},p:function(t,i){262144&i&&Kd(e,"x2",t[18]),49408&i&&n!==(n=t[8]+(t[14]?t[15].bandwidth()/2:0))&&Kd(e,"y1",n),49408&i&&r!==(r=t[8]+(t[14]?t[15].bandwidth()/2:0))&&Kd(e,"y2",r),4&i&&Zd(e,"dashed",t[2]),8&i&&$d(e,"stroke",t[3]),131072&i&&$d(e,"stroke-width",0===t[27]?1.5:1),131072&i&&$d(e,"filter",0!==t[27]?"contrast(calc(1/3)) brightness(1.5)":null)},d:function(t){t&&Ld(e)}}}function dT(t){var e,n,r,i;return{c:function(){Kd(e=Rd("line"),"class","tick-mark svelte-f7wn4m"),Kd(e,"x1","0"),Kd(e,"x2",n=t[14]?-6:6),Kd(e,"y1",r=t[8]+(t[14]?t[15].bandwidth()/2:0)),Kd(e,"y2",i=t[8]+(t[14]?t[15].bandwidth()/2:0)),$d(e,"stroke",t[3]),$d(e,"stroke-width",0===t[27]?1.5:1),$d(e,"filter",0!==t[27]?"contrast(calc(1/3)) brightness(1.5)":null)},m:function(t,n){Dd(t,e,n)},p:function(t,a){16384&a&&n!==(n=t[14]?-6:6)&&Kd(e,"x2",n),49408&a&&r!==(r=t[8]+(t[14]?t[15].bandwidth()/2:0))&&Kd(e,"y1",r),49408&a&&i!==(i=t[8]+(t[14]?t[15].bandwidth()/2:0))&&Kd(e,"y2",i),8&a&&$d(e,"stroke",t[3]),131072&a&&$d(e,"stroke-width",0===t[27]?1.5:1),131072&a&&$d(e,"filter",0!==t[27]?"contrast(calc(1/3)) brightness(1.5)":null)},d:function(t){t&&Ld(e)}}}function pT(t){var e,n,r,i,a,o,s,A,u,l,c,h,f=(t[29]==t[17].length-1?t[12]+t[5](t[27])+t[13]:t[5](t[27]))+"",d=!1!==t[1]&&fT(t),p=!0===t[0]&&dT(t);return{c:function(){e=Rd("g"),d&&d.c(),n=Vd(),p&&p.c(),r=Rd("text"),i=zd(f),Kd(r,"x",a=t[7]+(t[14]?-4:t[9])),Kd(r,"y",o=t[8]+(t[14]?t[15].bandwidth()/2:0)+(t[14]?4:t[10])),Kd(r,"text-anchor",s=t[14]?"end":t[11]),Kd(r,"fill",t[4]),Kd(e,"class",u="tick tick-"+t[27]+" svelte-f7wn4m"),Kd(e,"transform",l="translate("+(t[19][0]+(t[14]?t[16].left:0))+", "+t[15](t[27])+")")},m:function(a,o){Dd(a,e,o),d&&d.m(e,null),Td(e,n),p&&p.m(e,null),Td(e,r),Td(r,i),c||(h=bd(A=AT.call(null,r,{disable:!t[6],width:t[16].left})),c=!0)},p:function(t,c){!1!==t[1]?d?d.p(t,c):((d=fT(t)).c(),d.m(e,n)):d&&(d.d(1),d=null),!0===t[0]?p?p.p(t,c):((p=dT(t)).c(),p.m(e,r)):p&&(p.d(1),p=null),143392&c&&f!==(f=(t[29]==t[17].length-1?t[12]+t[5](t[27])+t[13]:t[5](t[27]))+"")&&jd(i,f),17024&c&&a!==(a=t[7]+(t[14]?-4:t[9]))&&Kd(r,"x",a),50432&c&&o!==(o=t[8]+(t[14]?t[15].bandwidth()/2:0)+(t[14]?4:t[10]))&&Kd(r,"y",o),18432&c&&s!==(s=t[14]?"end":t[11])&&Kd(r,"text-anchor",s),16&c&&Kd(r,"fill",t[4]),A&&hd(A.update)&&65600&c&&A.update.call(null,{disable:!t[6],width:t[16].left}),131072&c&&u!==(u="tick tick-"+t[27]+" svelte-f7wn4m")&&Kd(e,"class",u),770048&c&&l!==(l="translate("+(t[19][0]+(t[14]?t[16].left:0))+", "+t[15](t[27])+")")&&Kd(e,"transform",l)},d:function(t){t&&Ld(e),d&&d.d(),p&&p.d(),c=!1,h()}}}function vT(t){for(var e,n,r=t[17],i=[],a=0;a<r.length;a+=1)i[a]=pT(hT(t,r,a));return{c:function(){e=Rd("g");for(var r=0;r<i.length;r+=1)i[r].c();Kd(e,"class","axis y-axis"),Kd(e,"transform",n="translate("+-t[16].left+", 0)")},m:function(t,n){Dd(t,e,n);for(var r=0;r<i.length;r+=1)i[r]&&i[r].m(e,null)},p:function(t,a){var o=gi(a,1)[0];if(1048575&o){var s;for(r=t[17],s=0;s<r.length;s+=1){var A=hT(t,r,s);i[s]?i[s].p(A,o):(i[s]=pT(A),i[s].c(),i[s].m(e,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=r.length}65536&o&&n!==(n="translate("+-t[16].left+", 0)")&&Kd(e,"transform",n)},i:ad,o:ad,d:function(t){t&&Ld(e),Pd(i,t)}}}function gT(t,e,n){var r,i,a,o,s,A,u,l=ep("LayerCake"),c=l.containerWidth,h=l.padding,f=l.xRange,d=l.yScale;vd(t,c,(function(t){return n(26,A=t)})),vd(t,h,(function(t){return n(16,s=t)})),vd(t,f,(function(t){return n(19,u=t)})),vd(t,d,(function(t){return n(15,o=t)}));var p=e.ticks,v=void 0===p?4:p,g=e.tickMarks,m=void 0!==g&&g,y=e.gridlines,_=void 0===y||y,w=e.trimGridlines,x=void 0!==w&&w,b=e.tickDashed,B=void 0!==b&&b,k=e.tickColor,C=void 0===k?"#b3b3b3":k,F=e.textColor,E=void 0===F?"#707070":F,I=e.formatTick,U=void 0===I?function(t){return t}:I,S=e.wrapTicks,Q=void 0!==S&&S,T=e.xTick,M=void 0===T?0:T,D=e.yTick,L=void 0===D?0:D,P=e.dxTick,O=void 0===P?m?8:0:P,R=e.dyTick,z=void 0===R?-4:R,H=e.textAnchor,V=void 0===H?"start":H,N=e.prefix,K=void 0===N?"":N,G=e.suffix,j=void 0===G?"":G;return t.$$set=function(t){"ticks"in t&&n(24,v=t.ticks),"tickMarks"in t&&n(0,m=t.tickMarks),"gridlines"in t&&n(1,_=t.gridlines),"trimGridlines"in t&&n(25,x=t.trimGridlines),"tickDashed"in t&&n(2,B=t.tickDashed),"tickColor"in t&&n(3,C=t.tickColor),"textColor"in t&&n(4,E=t.textColor),"formatTick"in t&&n(5,U=t.formatTick),"wrapTicks"in t&&n(6,Q=t.wrapTicks),"xTick"in t&&n(7,M=t.xTick),"yTick"in t&&n(8,L=t.yTick),"dxTick"in t&&n(9,O=t.dxTick),"dyTick"in t&&n(10,z=t.dyTick),"textAnchor"in t&&n(11,V=t.textAnchor),"prefix"in t&&n(12,K=t.prefix),"suffix"in t&&n(13,j=t.suffix)},t.$$.update=function(){var e;32768&t.$$.dirty&&n(14,r="function"==typeof o.bandwidth),100745216&t.$$.dirty&&n(18,(e=A,r&&(e-=s.left),x&&(e-=s.right),i=e)),16826368&t.$$.dirty&&n(17,a=Array.isArray(v)?v:r?o.domain():"function"==typeof v?v(o.ticks()):o.ticks(v))},[m,_,B,C,E,U,Q,M,L,O,z,V,K,j,r,o,s,a,i,u,c,h,f,d,v,x,A]}var mT=function(t){function e(t){var n;return oi(this,e),Cp(n=uT(this,e),t,gT,vT,fd,{ticks:24,tickMarks:0,gridlines:1,trimGridlines:25,tickDashed:2,tickColor:3,textColor:4,formatTick:5,wrapTicks:6,xTick:7,yTick:8,dxTick:9,dyTick:10,textAnchor:11,prefix:12,suffix:13},cT),n}return ci(e,t),ai(e)}(Fp);function yT(t,e,n){return e=ui(e),Ai(t,_T()?Reflect.construct(e,n||[],ui(t).constructor):e.apply(t,n))}function _T(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_T=function(){return!!t})()}function wT(t){Md(t,"svelte-nqsavd","ul.legend.svelte-nqsavd.svelte-nqsavd.svelte-nqsavd{margin:0;padding:0}ul.legend.svelte-nqsavd li.svelte-nqsavd.svelte-nqsavd{display:inline;font-size:.8em}ul.legend.svelte-nqsavd li.svelte-nqsavd+li.svelte-nqsavd{margin-left:8px}.bullet.svelte-nqsavd.svelte-nqsavd.svelte-nqsavd{display:inline-block;vertical-align:middle;transform:translateY(-1px)}.round.svelte-nqsavd.svelte-nqsavd.svelte-nqsavd{border-radius:50%}")}function xT(t,e,n){var r=t.slice();return r[10]=e[n],r[12]=n,r}function bT(t){for(var e,n=t[8],r=[],i=0;i<n.length;i+=1)r[i]=BT(xT(t,n,i));return{c:function(){e=Od("ul");for(var t=0;t<r.length;t+=1)r[t].c();Kd(e,"class","legend svelte-nqsavd"),Kd(e,"aria-hidden","true")},m:function(t,n){Dd(t,e,n);for(var i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null)},p:function(t,i){if(511&i){var a;for(n=t[8],a=0;a<n.length;a+=1){var o=xT(t,n,a);r[a]?r[a].p(o,i):(r[a]=BT(o),r[a].c(),r[a].m(e,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length}},d:function(t){t&&Ld(e),Pd(r,t)}}}function BT(t){var e,n,r,i,a,o="".concat(!t[4]&&(t[1]||t[2]&&0!=t[12]||t[3]&&0==t[12])?t[5]:t[6],"px"),s="".concat(t[4]&&(t[1]||t[2]&&0!=t[12]||t[3]&&0==t[12])?t[5]:t[6],"px"),A=t[10]+"";return{c:function(){e=Od("li"),n=Od("div"),r=Hd(),i=zd(A),a=Hd(),Kd(n,"class","bullet svelte-nqsavd"),Zd(n,"round",t[7]),$d(n,"background-color",t[3]?t[0][0]:t[0][t[12]]),$d(n,"width",o),$d(n,"height",s),$d(n,"opacity",t[3]&&1==t[12]?"0.3":null),Kd(e,"class","svelte-nqsavd")},m:function(t,o){Dd(t,e,o),Td(e,n),Td(e,r),Td(e,i),Td(e,a)},p:function(t,e){128&e&&Zd(n,"round",t[7]),9&e&&$d(n,"background-color",t[3]?t[0][0]:t[0][t[12]]),126&e&&o!==(o="".concat(!t[4]&&(t[1]||t[2]&&0!=t[12]||t[3]&&0==t[12])?t[5]:t[6],"px"))&&$d(n,"width",o),126&e&&s!==(s="".concat(t[4]&&(t[1]||t[2]&&0!=t[12]||t[3]&&0==t[12])?t[5]:t[6],"px"))&&$d(n,"height",s),8&e&&$d(n,"opacity",t[3]&&1==t[12]?"0.3":null),256&e&&A!==(A=t[10]+"")&&jd(i,A)},d:function(t){t&&Ld(e)}}}function kT(t){var e,n=Array.isArray(t[8])&&Array.isArray(t[0]),r=n&&bT(t);return{c:function(){r&&r.c(),e=Vd()},m:function(t,n){r&&r.m(t,n),Dd(t,e,n)},p:function(t,i){var a=gi(i,1)[0];257&a&&(n=Array.isArray(t[8])&&Array.isArray(t[0])),n?r?r.p(t,a):((r=bT(t)).c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:ad,o:ad,d:function(t){r&&r.d(t),t&&Ld(e)}}}function CT(t,e,n){var r,i=e.domain,a=void 0===i?null:i,o=e.colors,s=void 0===o?null:o,A=e.line,u=void 0!==A&&A,l=e.comparison,c=void 0!==l&&l,h=e.confidence,f=void 0!==h&&h,d=e.horizontal,p=void 0===d||d,v=e.markerWidth,g=void 0===v?2.5:v,m=e.markerLength,y=void 0===m?13:m,_=e.round,w=void 0!==_&&_;return t.$$set=function(t){"domain"in t&&n(9,a=t.domain),"colors"in t&&n(0,s=t.colors),"line"in t&&n(1,u=t.line),"comparison"in t&&n(2,c=t.comparison),"confidence"in t&&n(3,f=t.confidence),"horizontal"in t&&n(4,p=t.horizontal),"markerWidth"in t&&n(5,g=t.markerWidth),"markerLength"in t&&n(6,y=t.markerLength),"round"in t&&n(7,w=t.round)},t.$$.update=function(){520&t.$$.dirty&&n(8,r=f?["Estimate","Confidence interval"]:a)},[s,u,c,f,p,g,y,w,r,a]}var FT=function(t){function e(t){var n;return oi(this,e),Cp(n=yT(this,e),t,CT,kT,fd,{domain:9,colors:0,line:1,comparison:2,confidence:3,horizontal:4,markerWidth:5,markerLength:6,round:7},wT),n}return ci(e,t),ai(e)}(Fp);function ET(t,e,n){return e=ui(e),Ai(t,IT()?Reflect.construct(e,n||[],ui(t).constructor):e.apply(t,n))}function IT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(IT=function(){return!!t})()}function UT(t){Md(t,"svelte-pvs6ms",".chart-title.svelte-pvs6ms{font-size:1.1em;font-weight:bold;margin-bottom:10px}")}function ST(t){var e,n,r=t[1].default,i=gd(r,t,t[0],null);return{c:function(){e=Od("h3"),i&&i.c(),Kd(e,"class","chart-title svelte-pvs6ms")},m:function(t,r){Dd(t,e,r),i&&i.m(e,null),n=!0},p:function(t,e){var a=gi(e,1)[0];i&&i.p&&(!n||1&a)&&_d(i,r,t,t[0],n?yd(r,t[0],a,null):wd(t[0]),null)},i:function(t){n||(yp(i,t),n=!0)},o:function(t){_p(i,t),n=!1},d:function(t){t&&Ld(e),i&&i.d(t)}}}function QT(t,e,n){var r=e.$$slots,i=void 0===r?{}:r,a=e.$$scope;return t.$$set=function(t){"$$scope"in t&&n(0,a=t.$$scope)},[a,i]}var TT=function(t){function e(t){var n;return oi(this,e),Cp(n=ET(this,e),t,QT,ST,fd,{},UT),n}return ci(e,t),ai(e)}(Fp);function MT(t,e,n){return e=ui(e),Ai(t,DT()?Reflect.construct(e,n||[],ui(t).constructor):e.apply(t,n))}function DT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(DT=function(){return!!t})()}function LT(t){Md(t,"svelte-1clt1zg",".chart-subtitle.svelte-1clt1zg{margin-top:-6px;margin-bottom:10px}")}function PT(t){var e,n,r=t[1].default,i=gd(r,t,t[0],null);return{c:function(){e=Od("div"),i&&i.c(),Kd(e,"class","chart-subtitle svelte-1clt1zg")},m:function(t,r){Dd(t,e,r),i&&i.m(e,null),n=!0},p:function(t,e){var a=gi(e,1)[0];i&&i.p&&(!n||1&a)&&_d(i,r,t,t[0],n?yd(r,t[0],a,null):wd(t[0]),null)},i:function(t){n||(yp(i,t),n=!0)},o:function(t){_p(i,t),n=!1},d:function(t){t&&Ld(e),i&&i.d(t)}}}function OT(t,e,n){var r=e.$$slots,i=void 0===r?{}:r,a=e.$$scope;return t.$$set=function(t){"$$scope"in t&&n(0,a=t.$$scope)},[a,i]}var RT=function(t){function e(t){var n;return oi(this,e),Cp(n=MT(this,e),t,OT,PT,fd,{},LT),n}return ci(e,t),ai(e)}(Fp);function zT(t,e,n){return e=ui(e),Ai(t,HT()?Reflect.construct(e,n||[],ui(t).constructor):e.apply(t,n))}function HT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(HT=function(){return!!t})()}function VT(t){Md(t,"svelte-16332wo",".chart-footer.svelte-16332wo{font-size:.8em;color:grey;margin-top:5px}")}function NT(t){var e,n,r=t[1].default,i=gd(r,t,t[0],null);return{c:function(){e=Od("div"),i&&i.c(),Kd(e,"class","chart-footer svelte-16332wo")},m:function(t,r){Dd(t,e,r),i&&i.m(e,null),n=!0},p:function(t,e){var a=gi(e,1)[0];i&&i.p&&(!n||1&a)&&_d(i,r,t,t[0],n?yd(r,t[0],a,null):wd(t[0]),null)},i:function(t){n||(yp(i,t),n=!0)},o:function(t){_p(i,t),n=!1},d:function(t){t&&Ld(e),i&&i.d(t)}}}function KT(t,e,n){var r=e.$$slots,i=void 0===r?{}:r,a=e.$$scope;return t.$$set=function(t){"$$scope"in t&&n(0,a=t.$$scope)},[a,i]}var GT=function(t){function e(t){var n;return oi(this,e),Cp(n=zT(this,e),t,KT,NT,fd,{},VT),n}return ci(e,t),ai(e)}(Fp);function jT(t,e,n){return e=ui(e),Ai(t,$T()?Reflect.construct(e,n||[],ui(t).constructor):e.apply(t,n))}function $T(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return($T=function(){return!!t})()}function WT(t){Md(t,"svelte-1no2d6c",".chart-export.svelte-1no2d6c{margin-top:10px;font-size:.8em}button.svelte-1no2d6c{color:#206095;text-decoration:underline;text-underline-position:under;background:none;border:none;padding:0 0 1px}button.svelte-1no2d6c:hover{cursor:pointer;color:#003c57;text-decoration-thickness:2px}button.svelte-1no2d6c:focus{color:#222;background-color:#fbc900;text-decoration-thickness:3px}")}function ZT(t){var e,n,r;return{c:function(){(e=Od("button")).textContent="Download data (CSV)",Kd(e,"class","svelte-1no2d6c")},m:function(i,a){Dd(i,e,a),n||(r=Nd(e,"click",t[5]),n=!0)},p:ad,d:function(t){t&&Ld(e),n=!1,r()}}}function qT(t){var e;return{c:function(){e=zd("|")},m:function(t,n){Dd(t,e,n)},d:function(t){t&&Ld(e)}}}function XT(t){var e,n,r;return{c:function(){(e=Od("button")).textContent="Download image (PNG)",Kd(e,"class","svelte-1no2d6c")},m:function(i,a){Dd(i,e,a),n||(r=Nd(e,"click",t[6]),n=!0)},p:ad,d:function(t){t&&Ld(e),n=!1,r()}}}function YT(t){var e,n,r,i=t[4].csv&&ZT(t),a=t[4].csv&&t[4].png&&qT(),o=t[4].png&&XT(t);return{c:function(){e=Od("div"),i&&i.c(),n=Hd(),a&&a.c(),r=Hd(),o&&o.c(),Kd(e,"class","chart-export svelte-1no2d6c")},m:function(t,s){Dd(t,e,s),i&&i.m(e,null),Td(e,n),a&&a.m(e,null),Td(e,r),o&&o.m(e,null)},p:function(t,s){var A=gi(s,1)[0];t[4].csv?i?i.p(t,A):((i=ZT(t)).c(),i.m(e,n)):i&&(i.d(1),i=null),t[4].csv&&t[4].png?a||((a=qT()).c(),a.m(e,r)):a&&(a.d(1),a=null),t[4].png?o?o.p(t,A):((o=XT(t)).c(),o.m(e,null)):o&&(o.d(1),o=null)},i:ad,o:ad,d:function(t){t&&Ld(e),i&&i.d(),a&&a.d(),o&&o.d()}}}function JT(t,e,n){var r=e.el,i=e.data,a=e.keys,o=void 0===a?[]:a,s=e.title,A=void 0===s?null:s,u=e.output,l=void 0===u?{}:u;return t.$$set=function(t){"el"in t&&n(0,r=t.el),"data"in t&&n(1,i=t.data),"keys"in t&&n(2,o=t.keys),"title"in t&&n(3,A=t.title),"output"in t&&n(4,l=t.output)},[r,i,o,A,l,function(){return function(t){var e=arguments.length>2?arguments[2]:void 0,n="",r=[];(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).forEach((function(t){t&&!r.includes(t)&&r.push(t)})),n+=r.join(",")+"\n",t.forEach((function(t){n+=r.map((function(e){return t[e]})).join(",")+"\n"})),VQ("data:text/csv;charset=utf-8,"+encodeURI(n),e+".csv")}(i,o,A||"chart")},function(){return t=A||"chart",void HQ(r).then((function(e){VQ(e.toDataURL(),t+".png")}));var t}]}var tM=function(t){function e(t){var n;return oi(this,e),Cp(n=jT(this,e),t,JT,YT,fd,{el:0,data:1,keys:2,title:3,output:4},WT),n}return ci(e,t),ai(e)}(Fp);function eM(t,e,n){return e=ui(e),Ai(t,nM()?Reflect.construct(e,n||[],ui(t).constructor):e.apply(t,n))}function nM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(nM=function(){return!!t})()}function rM(t,e,n){var r=t.slice();return r[7]=e[n],r}function iM(t,e,n){var r=t.slice();return r[10]=e[n],r}function aM(t,e,n){var r=t.slice();return r[10]=e[n],r}function oM(t){for(var e,n,r,i,a,o=t[1],s=[],A=0;A<o.length;A+=1)s[A]=sM(aM(t,o,A));for(var u=t[0],l=[],c=0;c<u.length;c+=1)l[c]=uM(rM(t,u,c));return{c:function(){e=Od("table"),n=Od("thead"),r=Od("tr");for(var t=0;t<s.length;t+=1)s[t].c();i=Hd(),a=Od("tbody");for(var o=0;o<l.length;o+=1)l[o].c()},m:function(t,o){Dd(t,e,o),Td(e,n),Td(n,r);for(var A=0;A<s.length;A+=1)s[A]&&s[A].m(r,null);Td(e,i),Td(e,a);for(var u=0;u<l.length;u+=1)l[u]&&l[u].m(a,null)},p:function(t,e){if(2&e){var n;for(o=t[1],n=0;n<o.length;n+=1){var i=aM(t,o,n);s[n]?s[n].p(i,e):(s[n]=sM(i),s[n].c(),s[n].m(r,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=o.length}if(3&e){var A;for(u=t[0],A=0;A<u.length;A+=1){var c=rM(t,u,A);l[A]?l[A].p(c,e):(l[A]=uM(c),l[A].c(),l[A].m(a,null))}for(;A<l.length;A+=1)l[A].d(1);l.length=u.length}},d:function(t){t&&Ld(e),Pd(s,t),Pd(l,t)}}}function sM(t){var e,n,r=t[10]+"";return{c:function(){e=Od("th"),n=zd(r)},m:function(t,r){Dd(t,e,r),Td(e,n)},p:function(t,e){2&e&&r!==(r=t[10]+"")&&jd(n,r)},d:function(t){t&&Ld(e)}}}function AM(t){var e,n,r=t[7][t[10]]+"";return{c:function(){e=Od("td"),n=zd(r)},m:function(t,r){Dd(t,e,r),Td(e,n)},p:function(t,e){3&e&&r!==(r=t[7][t[10]]+"")&&jd(n,r)},d:function(t){t&&Ld(e)}}}function uM(t){for(var e,n,r=t[1],i=[],a=0;a<r.length;a+=1)i[a]=AM(iM(t,r,a));return{c:function(){e=Od("tr");for(var t=0;t<i.length;t+=1)i[t].c();n=Hd()},m:function(t,r){Dd(t,e,r);for(var a=0;a<i.length;a+=1)i[a]&&i[a].m(e,null);Td(e,n)},p:function(t,a){if(3&a){var o;for(r=t[1],o=0;o<r.length;o+=1){var s=iM(t,r,o);i[o]?i[o].p(s,a):(i[o]=AM(s),i[o].c(),i[o].m(e,n))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},d:function(t){t&&Ld(e),Pd(i,t)}}}function lM(t){var e,n=t[0]&&t[1]&&oM(t);return{c:function(){n&&n.c(),e=Vd()},m:function(t,r){n&&n.m(t,r),Dd(t,e,r)},p:function(t,r){var i=gi(r,1)[0];t[0]&&t[1]?n?n.p(t,i):((n=oM(t)).c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ad,o:ad,d:function(t){n&&n.d(t),t&&Ld(e)}}}function cM(t,e,n){var r,i=e.data,a=e.key1,o=void 0===a?null:a,s=e.key2,A=void 0===s?null:s,u=e.key3,l=void 0===u?null:u,c=e.key4,h=void 0===c?null:c;return t.$$set=function(t){"data"in t&&n(0,i=t.data),"key1"in t&&n(2,o=t.key1),"key2"in t&&n(3,A=t.key2),"key3"in t&&n(4,l=t.key3),"key4"in t&&n(5,h=t.key4)},t.$$.update=function(){60&t.$$.dirty&&n(1,r=function(t,e,n,r){var i=[];return t&&i.push(t),e&&i.push(e),n&&i.push(n),r&&i.push(r),i}(o,A,l,h))},[i,r,o,A,l,h]}var hM=function(t){function e(t){var n;return oi(this,e),Cp(n=eM(this,e),t,cM,lM,fd,{data:0,key1:2,key2:3,key3:4,key4:5}),n}return ci(e,t),ai(e)}(Fp);function fM(t,e,n){return e=ui(e),Ai(t,dM()?Reflect.construct(e,n||[],ui(t).constructor):e.apply(t,n))}function dM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(dM=function(){return!!t})()}function pM(t){Md(t,"svelte-rh3b33","path.svelte-rh3b33{fill:none;stroke-linejoin:round;stroke-linecap:round}.path-hover.svelte-rh3b33{stroke:rgba(255,255,255,0);stroke-width:7}.path-line.svelte-rh3b33,.path-overlay.svelte-rh3b33{pointer-events:none}")}function vM(t,e,n){var r=t.slice();return r[34]=e[n],r[36]=n,r}function gM(t,e,n){var r=t.slice();return r[34]=e[n],r[36]=n,r}function mM(t){for(var e,n,r=t[6],i=[],a=0;a<r.length;a+=1)i[a]=yM(gM(t,r,a));var o=t[17]&&(t[3]||t[1]||t[5][0])&&_M(t);return{c:function(){e=Rd("g");for(var t=0;t<i.length;t+=1)i[t].c();n=Vd(),o&&o.c(),Kd(e,"class","line-group")},m:function(t,r){Dd(t,e,r);for(var a=0;a<i.length;a+=1)i[a]&&i[a].m(e,null);Td(e,n),o&&o.m(e,null)},p:function(t,a){if(14681052&a[0]){var s;for(r=t[6],s=0;s<r.length;s+=1){var A=gM(t,r,s);i[s]?i[s].p(A,a):(i[s]=yM(A),i[s].c(),i[s].m(e,n))}for(;s<i.length;s+=1)i[s].d(1);i.length=r.length}t[17]&&(t[3]||t[1]||t[5][0])?o?o.p(t,a):((o=_M(t)).c(),o.m(e,null)):o&&(o.d(1),o=null)},d:function(t){t&&Ld(e),Pd(i,t),o&&o.d()}}}function yM(t){var e,n,r,i,a,o,s,A;function u(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t)[25].apply(e,[t[36]].concat(r))}function l(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t)[27].apply(e,[t[36]].concat(r))}function c(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t)[29].apply(e,[t[36]].concat(r))}return{c:function(){e=Rd("path"),i=Rd("path"),Kd(e,"class","path-hover svelte-rh3b33"),Kd(e,"d",n=t[21](t[34])),Kd(e,"tabindex",r=t[3]||t[4]?0:-1),Kd(i,"class","path-line svelte-rh3b33"),Kd(i,"d",a=t[21](t[34])),Kd(i,"stroke",o=t[8].z?t[9](t[7][t[36]][0]):t[8].zRange[0]),Kd(i,"stroke-width",t[2])},m:function(n,r){Dd(n,e,r),Dd(n,i,r),s||(A=[Nd(e,"mouseover",(function(){hd(t[3]?u:null)&&(t[3]?u:null).apply(this,arguments)})),Nd(e,"mouseleave",(function(){hd(t[3]?t[26]:null)&&(t[3]?t[26]:null).apply(this,arguments)})),Nd(e,"focus",(function(){hd(t[4]?l:null)&&(t[4]?l:null).apply(this,arguments)})),Nd(e,"blur",(function(){hd(t[4]?t[28]:null)&&(t[4]?t[28]:null).apply(this,arguments)})),Nd(e,"click",(function(){hd(t[4]?c:null)&&(t[4]?c:null).apply(this,arguments)}))],s=!0)},p:function(s,A){t=s,64&A[0]&&n!==(n=t[21](t[34]))&&Kd(e,"d",n),24&A[0]&&r!==(r=t[3]||t[4]?0:-1)&&Kd(e,"tabindex",r),64&A[0]&&a!==(a=t[21](t[34]))&&Kd(i,"d",a),896&A[0]&&o!==(o=t[8].z?t[9](t[7][t[36]][0]):t[8].zRange[0])&&Kd(i,"stroke",o),4&A[0]&&Kd(i,"stroke-width",t[2])},d:function(t){t&&Ld(e),t&&Ld(i),s=!1,cd(A)}}}function _M(t){for(var e,n=t[6],r=[],i=0;i<n.length;i+=1)r[i]=xM(vM(t,n,i));return{c:function(){for(var t=0;t<r.length;t+=1)r[t].c();e=Vd()},m:function(t,n){for(var i=0;i<r.length;i+=1)r[i]&&r[i].m(t,n);Dd(t,e,n)},p:function(t,i){if(4063463&i[0]){var a;for(n=t[6],a=0;a<n.length;a+=1){var o=vM(t,n,a);r[a]?r[a].p(o,i):(r[a]=xM(o),r[a].c(),r[a].m(e.parentNode,e))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length}},d:function(t){Pd(r,t),t&&Ld(e)}}}function wM(t){var e,n,r,i,a,o,s;return{c:function(){Kd(e=Rd("path"),"class","path-overlay svelte-rh3b33"),Kd(e,"d",n=t[21](t[34])),Kd(e,"stroke",r=t[7][t[36]][0][t[17]]==t[0]?t[18]:t[7][t[36]][0][t[17]]==t[1]?t[19]:t[20]),Kd(e,"stroke-width",i=t[2]+1.5)},m:function(n,r){Dd(n,e,r),o||(s=bd(a=t[24].call(null,e,{disable:t[0]!==t[7][t[36]][0][t[17]]})),o=!0)},p:function(o,s){t=o,64&s[0]&&n!==(n=t[21](t[34]))&&Kd(e,"d",n),131&s[0]&&r!==(r=t[7][t[36]][0][t[17]]==t[0]?t[18]:t[7][t[36]][0][t[17]]==t[1]?t[19]:t[20])&&Kd(e,"stroke",r),4&s[0]&&i!==(i=t[2]+1.5)&&Kd(e,"stroke-width",i),a&&hd(a.update)&&129&s[0]&&a.update.call(null,{disable:t[0]!==t[7][t[36]][0][t[17]]})},d:function(t){t&&Ld(e),o=!1,s()}}}function xM(t){var e,n=[t[0],t[1]].concat(Di(t[5])).includes(t[7][t[36]][0][t[17]]),r=n&&wM(t);return{c:function(){r&&r.c(),e=Vd()},m:function(t,n){r&&r.m(t,n),Dd(t,e,n)},p:function(t,i){163&i[0]&&(n=[t[0],t[1]].concat(Di(t[5])).includes(t[7][t[36]][0][t[17]])),n?r?r.p(t,i):((r=wM(t)).c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d:function(t){r&&r.d(t),t&&Ld(e)}}}function bM(t){var e,n=t[6]&&mM(t);return{c:function(){n&&n.c(),e=Vd()},m:function(t,r){n&&n.m(t,r),Dd(t,e,r)},p:function(t,r){t[6]?n?n.p(t,r):((n=mM(t)).c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ad,o:ad,d:function(t){n&&n.d(t),t&&Ld(e)}}}function BM(t,e,n){var r,i,a,o,s,A,u,l=ep("LayerCake"),c=l.data,h=l.xScale,f=l.yScale,d=l.zGet,p=l.config,v=l.custom;vd(t,c,(function(t){return n(7,s=t)})),vd(t,h,(function(t){return n(31,i=t)})),vd(t,f,(function(t){return n(30,r=t)})),vd(t,d,(function(t){return n(9,u=t)})),vd(t,p,(function(t){return n(8,A=t)})),vd(t,v,(function(t){return n(32,a=t)}));var g=Jd(),m=e.lineWidth,y=void 0===m?2.5:m,_=e.hover,w=void 0!==_&&_,x=e.hovered,b=void 0===x?null:x,B=e.select,k=void 0!==B&&B,C=e.selected,F=void 0===C?null:C,E=e.highlighted,I=void 0===E?[]:E,U=a.coords;vd(t,U,(function(t){return n(6,o=t)}));var S=a.idKey,Q=a.colorHover?a.colorHover:"orange",T=a.colorSelect?a.colorSelect:"#206095",M=a.colorHighlight?a.colorHighlight:"#206095";function D(t,e){w&&(n(0,b=e?e[0][S]:null),g("hover",{id:b,data:e,event:t}))}function L(t,e){k&&(n(1,F=e?e[0][S]:null),g("select",{id:F,data:e,event:t}))}return t.$$set=function(t){"lineWidth"in t&&n(2,y=t.lineWidth),"hover"in t&&n(3,w=t.hover),"hovered"in t&&n(0,b=t.hovered),"select"in t&&n(4,k=t.select),"selected"in t&&n(1,F=t.selected),"highlighted"in t&&n(5,I=t.highlighted)},[b,F,y,w,k,I,o,s,A,u,c,h,f,d,p,v,U,S,Q,T,M,function(t){return"M"+t.map((function(t){return i(t.x)+","+r(t.y)})).join("L")},D,L,function(t){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).disable||EQ(t)},function(t,e){return D(e,s[t])},function(t){return D(t,null)},function(t,e){return D(e,s[t])},function(t){return D(t,null)},function(t,e){return L(e,s[t])}]}var kM=function(t){function e(t){var n;return oi(this,e),Cp(n=fM(this,e),t,BM,bM,fd,{lineWidth:2,hover:3,hovered:0,select:4,selected:1,highlighted:5},pM,[-1,-1]),n}return ci(e,t),ai(e)}(Fp);function CM(t,e,n){return e=ui(e),Ai(t,FM()?Reflect.construct(e,n||[],ui(t).constructor):e.apply(t,n))}function FM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(FM=function(){return!!t})()}function EM(t,e,n){var r=t.slice();return r[19]=e[n],r[21]=n,r}function IM(t){for(var e,n=t[1],r=[],i=0;i<n.length;i+=1)r[i]=UM(EM(t,n,i));return{c:function(){e=Rd("g");for(var t=0;t<r.length;t+=1)r[t].c();Kd(e,"class","area-group")},m:function(t,n){Dd(t,e,n);for(var i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null)},p:function(t,i){if(16447&i){var a;for(n=t[1],a=0;a<n.length;a+=1){var o=EM(t,n,a);r[a]?r[a].p(o,i):(r[a]=UM(o),r[a].c(),r[a].m(e,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length}},d:function(t){t&&Ld(e),Pd(r,t)}}}function UM(t){var e,n,r;return{c:function(){Kd(e=Rd("path"),"class","path-area"),Kd(e,"d",n=t[14](t[19],t[21])),Kd(e,"fill",r=t[2].z?t[3](t[4][t[21]][0]):t[5][0]),Kd(e,"opacity",t[0])},m:function(t,n){Dd(t,e,n)},p:function(t,i){2&i&&n!==(n=t[14](t[19],t[21]))&&Kd(e,"d",n),60&i&&r!==(r=t[2].z?t[3](t[4][t[21]][0]):t[5][0])&&Kd(e,"fill",r),1&i&&Kd(e,"opacity",t[0])},d:function(t){t&&Ld(e)}}}function SM(t){var e,n=t[1]&&IM(t);return{c:function(){n&&n.c(),e=Vd()},m:function(t,r){n&&n.m(t,r),Dd(t,e,r)},p:function(t,r){var i=gi(r,1)[0];t[1]?n?n.p(t,i):((n=IM(t)).c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ad,o:ad,d:function(t){n&&n.d(t),t&&Ld(e)}}}function QM(t,e,n){var r,i,a,o,s,A,u,l,c=ep("LayerCake"),h=c.data,f=c.xScale,d=c.yScale,p=c.zGet,v=c.zRange,g=c.config,m=c.custom;vd(t,h,(function(t){return n(4,u=t)})),vd(t,f,(function(t){return n(16,i=t)})),vd(t,d,(function(t){return n(15,r=t)})),vd(t,p,(function(t){return n(3,A=t)})),vd(t,v,(function(t){return n(5,l=t)})),vd(t,g,(function(t){return n(2,s=t)})),vd(t,m,(function(t){return n(17,o=t)}));var y=e.opacity,_=void 0===y?1:y,w=o.coords;vd(t,w,(function(t){return n(1,a=t)})),o.idKey;return t.$$set=function(t){"opacity"in t&&n(0,_=t.opacity)},[_,a,s,A,u,l,h,f,d,p,v,g,m,w,function(t,e){var n=r.range();return"M"+t.map((function(t){return i(t.x)+","+r(t.y)})).join("L")+(0==e?"L"+t.map((function(t){return i(t.x)+","+n[0]})).reverse().join("L"):"L"+Di(a[e-1]).reverse().map((function(t){return i(t.x)+","+r(t.y)})).join("L"))+"Z"}]}var TM=function(t){function e(t){var n;return oi(this,e),Cp(n=CM(this,e),t,QM,SM,fd,{opacity:0}),n}return ci(e,t),ai(e)}(Fp);function MM(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return DM(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?DM(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function DM(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var LM=function(t){var e,n=[],r=MM(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;for(n.push({size:1,mean:i});n.length>1;){var a=n[n.length-2],o=n[n.length-1];if(a.mean<o.mean)break;a.mean=(a.mean*a.size+o.mean*o.size)/(a.size+o.size),a.size=a.size+o.size,n.pop()}}}catch(t){r.e(t)}finally{r.f()}for(var s=[],A=0,u=n;A<u.length;A++)for(var l=u[A],c=0;c<l.size;c++)s.push(l.mean);return s};function PM(t,e,n){return e=ui(e),Ai(t,OM()?Reflect.construct(e,n||[],ui(t).constructor):e.apply(t,n))}function OM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(OM=function(){return!!t})()}function RM(t){Md(t,"svelte-dqkttw",".chart-label.svelte-dqkttw{font-size:0.8em}")}function zM(t,e,n){var r=t.slice();return r[32]=e[n],r[34]=n,r}function HM(t,e,n){var r=t.slice();return r[32]=e[n],r[34]=n,r}function VM(t){var e,n,r,i,a,o,s,A;function u(t,e){var n,r;return null!==(n=t[7])&&void 0!==n&&null!==(n=n[0])&&void 0!==n&&n.x?KM:null!==(r=t[7])&&void 0!==r&&null!==(r=r[0])&&void 0!==r&&null!==(r=r[0])&&void 0!==r&&r.x?NM:void 0}var l=u(t),c=l&&l(t);return{c:function(){e=Rd("defs"),n=Rd("filter"),r=Rd("feFlood"),i=Rd("feMerge"),a=Rd("feMergeNode"),o=Rd("feMergeNode"),s=Hd(),A=Rd("g"),c&&c.c(),Kd(r,"flood-color","rgba(255,255,255,0.8)"),Kd(r,"result","bg"),Kd(a,"in","bg"),Kd(o,"in","SourceGraphic"),Kd(n,"x","0"),Kd(n,"y","0"),Kd(n,"width","1"),Kd(n,"height","1"),Kd(n,"id","bgfill"),Kd(A,"class","chart-label-group")},m:function(t,u){Dd(t,e,u),Td(e,n),Td(n,r),Td(n,i),Td(i,a),Td(i,o),Dd(t,s,u),Dd(t,A,u),c&&c.m(A,null)},p:function(t,e){l===(l=u(t))&&c?c.p(t,e):(c&&c.d(1),(c=l&&l(t))&&(c.c(),c.m(A,null)))},d:function(t){t&&Ld(e),t&&Ld(s),t&&Ld(A),c&&c.d()}}}function NM(t){for(var e,n=t[7],r=[],i=0;i<n.length;i+=1)r[i]=$M(zM(t,n,i));return{c:function(){for(var t=0;t<r.length;t+=1)r[t].c();e=Vd()},m:function(t,n){for(var i=0;i<r.length;i+=1)r[i]&&r[i].m(t,n);Dd(t,e,n)},p:function(t,i){if(62930943&i[0]){var a;for(n=t[7],a=0;a<n.length;a+=1){var o=zM(t,n,a);r[a]?r[a].p(o,i):(r[a]=$M(o),r[a].c(),r[a].m(e.parentNode,e))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length}},d:function(t){Pd(r,t),t&&Ld(e)}}}function KM(t){for(var e,n=t[7],r=[],i=0;i<n.length;i+=1)r[i]=ZM(HM(t,n,i));return{c:function(){for(var t=0;t<r.length;t+=1)r[t].c();e=Vd()},m:function(t,n){for(var i=0;i<r.length;i+=1)r[i]&&r[i].m(t,n);Dd(t,e,n)},p:function(t,i){if(62922647&i[0]){var a;for(n=t[7],a=0;a<n.length;a+=1){var o=HM(t,n,a);r[a]?r[a].p(o,i):(r[a]=ZM(o),r[a].c(),r[a].m(e.parentNode,e))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length}},d:function(t){Pd(r,t),t&&Ld(e)}}}function GM(t){var e,n,r,i,a,o,s,A,u,l,c=(t[4]?t[4]:t[9][t[34]][0][t[23]])+"",h=t[5]&&jM(t);return{c:function(){h&&h.c(),e=Rd("text"),n=zd(c),Kd(e,"class","chart-label svelte-dqkttw"),Kd(e,"transform",r="translate("+(t[5]?7:4)+",3)"),Kd(e,"filter","url(#bgfill)"),Kd(e,"fill",i=t[2]&&t[10].z?t[11](t[9][t[34]][0]):t[9][t[34]][0][t[22]]===t[0]?t[24]:t[25]),Kd(e,"x",a=t[12](t[32][t[32].length-1].x)),Kd(e,"y",o=t[3]&&t[32][t[32].length-1].ly?t[32][t[32].length-1].ly:t[8](t[32][t[32].length-1].y))},m:function(r,i){h&&h.m(r,i),Dd(r,e,i),Td(e,n),u||(l=[bd(s=AT.call(null,e,{disable:!t[6],width:t[13].right})),bd(A=t[26].call(null,e,{disable:t[9][t[34]][0][t[22]]!==t[0]})),bd(t[27].call(null,e,{first:0===t[34]}))],u=!0)},p:function(u,l){(t=u)[5]?h?h.p(t,l):((h=jM(t)).c(),h.m(e.parentNode,e)):h&&(h.d(1),h=null),528&l[0]&&c!==(c=(t[4]?t[4]:t[9][t[34]][0][t[23]])+"")&&jd(n,c),32&l[0]&&r!==(r="translate("+(t[5]?7:4)+",3)")&&Kd(e,"transform",r),3589&l[0]&&i!==(i=t[2]&&t[10].z?t[11](t[9][t[34]][0]):t[9][t[34]][0][t[22]]===t[0]?t[24]:t[25])&&Kd(e,"fill",i),4224&l[0]&&a!==(a=t[12](t[32][t[32].length-1].x))&&Kd(e,"x",a),392&l[0]&&o!==(o=t[3]&&t[32][t[32].length-1].ly?t[32][t[32].length-1].ly:t[8](t[32][t[32].length-1].y))&&Kd(e,"y",o),s&&hd(s.update)&&8256&l[0]&&s.update.call(null,{disable:!t[6],width:t[13].right}),A&&hd(A.update)&&513&l[0]&&A.update.call(null,{disable:t[9][t[34]][0][t[22]]!==t[0]})},d:function(t){h&&h.d(t),t&&Ld(e),u=!1,cd(l)}}}function jM(t){var e,n,r,i,a,o,s;return{c:function(){Kd(e=Rd("circle"),"cx",n=t[12](t[32][t[32].length-1].x)),Kd(e,"cy",r=t[8](t[32][t[32].length-1].y)),Kd(e,"r","5"),Kd(e,"fill",i=t[2]&&t[10].z?t[11](t[9][t[34]][0]):t[9][t[34]][0][t[22]]===t[0]?t[24]:t[25])},m:function(n,r){Dd(n,e,r),o||(s=bd(a=t[26].call(null,e,{disable:t[9][t[34]][0][t[22]]!==t[0]})),o=!0)},p:function(o,s){t=o,4224&s[0]&&n!==(n=t[12](t[32][t[32].length-1].x))&&Kd(e,"cx",n),384&s[0]&&r!==(r=t[8](t[32][t[32].length-1].y))&&Kd(e,"cy",r),3589&s[0]&&i!==(i=t[2]&&t[10].z?t[11](t[9][t[34]][0]):t[9][t[34]][0][t[22]]===t[0]?t[24]:t[25])&&Kd(e,"fill",i),a&&hd(a.update)&&513&s[0]&&a.update.call(null,{disable:t[9][t[34]][0][t[22]]!==t[0]})},d:function(t){t&&Ld(e),o=!1,s()}}}function $M(t){var e,n=t[2]||[t[0],t[1]].includes(t[9][t[34]][0][t[22]]),r=n&&GM(t);return{c:function(){r&&r.c(),e=Vd()},m:function(t,n){r&&r.m(t,n),Dd(t,e,n)},p:function(t,i){519&i[0]&&(n=t[2]||[t[0],t[1]].includes(t[9][t[34]][0][t[22]])),n?r?r.p(t,i):((r=GM(t)).c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d:function(t){r&&r.d(t),t&&Ld(e)}}}function WM(t){var e,n,r,i,a,o=(t[4]?t[4]:t[9][t[34]][t[23]])+"";return{c:function(){e=Rd("text"),n=zd(o),Kd(e,"class","chart-label svelte-dqkttw"),Kd(e,"transform","translate(5,-5)"),Kd(e,"filter","url(#bgfill)"),Kd(e,"fill",r=t[2]&&t[10].z?t[11](t[9][t[34]]):t[9][t[34]][t[22]]===t[0]?t[24]:t[25]),Kd(e,"x",i=t[12](t[32].x)),Kd(e,"y",a=t[8](t[32].y))},m:function(t,r){Dd(t,e,r),Td(e,n)},p:function(t,s){528&s[0]&&o!==(o=(t[4]?t[4]:t[9][t[34]][t[23]])+"")&&jd(n,o),3589&s[0]&&r!==(r=t[2]&&t[10].z?t[11](t[9][t[34]]):t[9][t[34]][t[22]]===t[0]?t[24]:t[25])&&Kd(e,"fill",r),4224&s[0]&&i!==(i=t[12](t[32].x))&&Kd(e,"x",i),384&s[0]&&a!==(a=t[8](t[32].y))&&Kd(e,"y",a)},d:function(t){t&&Ld(e)}}}function ZM(t){var e,n=t[2]||[t[0],t[1]].includes(t[9][t[34]][t[22]]),r=n&&WM(t);return{c:function(){r&&r.c(),e=Vd()},m:function(t,n){r&&r.m(t,n),Dd(t,e,n)},p:function(t,i){519&i[0]&&(n=t[2]||[t[0],t[1]].includes(t[9][t[34]][t[22]])),n?r?r.p(t,i):((r=WM(t)).c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d:function(t){r&&r.d(t),t&&Ld(e)}}}function qM(t){var e,n=t[7]&&VM(t);return{c:function(){n&&n.c(),e=Vd()},m:function(t,r){n&&n.m(t,r),Dd(t,e,r)},p:function(t,r){t[7]?n?n.p(t,r):((n=VM(t)).c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ad,o:ad,d:function(t){n&&n.d(t),t&&Ld(e)}}}var XM=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/;function YM(t,e,n){var r,i,a,o,s,A,u,l,c,h=ep("LayerCake"),f=h.data,d=h.xScale,p=h.yScale,v=h.zGet,g=h.padding,m=h.config,y=h.custom;vd(t,f,(function(t){return n(9,s=t)})),vd(t,d,(function(t){return n(12,l=t)})),vd(t,p,(function(t){return n(8,a=t)})),vd(t,v,(function(t){return n(11,u=t)})),vd(t,g,(function(t){return n(13,c=t)})),vd(t,m,(function(t){return n(10,A=t)})),vd(t,y,(function(t){return n(30,o=t)}));var _=e.hovered,w=void 0===_?null:_,x=e.selected,b=void 0===x?null:x,B=e.labelAll,k=void 0!==B&&B,C=e.spreadLabels,F=void 0!==C&&C,E=e.content,I=void 0===E?null:E,U=e.marker,S=void 0!==U&&U,Q=e.textWrap,T=void 0!==Q&&Q,M=o.coords;vd(t,M,(function(t){return n(29,i=t)}));var D=o.idKey,L=o.labelKey,P=o.colorHover?o.colorHover:"orange",O=o.colorSelect?o.colorSelect:"#206095",R=8,z=function(t,e){var n=Array.from(t.keys()).sort((function(e,n){return t[n][t[n].length-1].y-t[e][t[e].length-1].y})),r=Array.from(n.keys()).map((function(t){return n.indexOf(t)})),i=t.map((function(e,r){return t[n[r]]})),o=function(t,e){var n=t.map((function(t,n){return t-n*e*2}));return LM(n).map((function(t,n){return t+n*e*2}))}(i.map((function(t){return a(t[t.length-1].y)})),e);return i=i.map((function(t,e){var n=JSON.parse(JSON.stringify(t));return n.forEach((function(t){XM.test(t.x)&&(t.x=new Date(t.x))})),n[n.length-1].ly=o[e],n})),r.map((function(t){return i[t]}))};return t.$$set=function(t){"hovered"in t&&n(0,w=t.hovered),"selected"in t&&n(1,b=t.selected),"labelAll"in t&&n(2,k=t.labelAll),"spreadLabels"in t&&n(3,F=t.spreadLabels),"content"in t&&n(4,I=t.content),"marker"in t&&n(5,S=t.marker),"textWrap"in t&&n(6,T=t.textWrap)},t.$$.update=function(){var e;805306376&t.$$.dirty[0]&&n(7,r=null!==(e=i)&&void 0!==e&&null!==(e=e[0])&&void 0!==e&&null!==(e=e[0])&&void 0!==e&&e.y&&F?z(i,R):i)},[w,b,k,F,I,S,T,r,a,s,A,u,l,c,f,d,p,v,g,m,y,M,D,L,P,O,function(t){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).disable||EQ(t)},function(t){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).first&&n(28,R=t.getBBox().height/2)},R,i]}var JM=function(t){function e(t){var n;return oi(this,e),Cp(n=PM(this,e),t,YM,qM,fd,{hovered:0,selected:1,labelAll:2,spreadLabels:3,content:4,marker:5,textWrap:6},RM,[-1,-1]),n}return ci(e,t),ai(e)}(Fp);function tD(t,e,n){return e=ui(e),Ai(t,eD()?Reflect.construct(e,n||[],ui(t).constructor):e.apply(t,n))}function eD(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(eD=function(){return!!t})()}function nD(t){Md(t,"svelte-1fy6g2i",".chart-container.svelte-1fy6g2i{width:100%}.visuallyhidden.svelte-1fy6g2i{position:absolute;width:1px;height:1px;margin:-1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);border:0}")}var rD=function(t){return{}},iD=function(t){return{}},aD=function(t){return{}},oD=function(t){return{}},sD=function(t){return{}},AD=function(t){return{}},uD=function(t){return{}},lD=function(t){return{}},cD=function(t){return{}},hD=function(t){return{}};function fD(t){var e,n;return e=new TT({props:{$$slots:{default:[dD]},$$scope:{ctx:t}}}),{c:function(){xp(e.$$.fragment)},m:function(t,r){bp(e,t,r),n=!0},p:function(t,n){var r={};134217728&n[0]|4096&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(yp(e.$$.fragment,t),n=!0)},o:function(t){_p(e.$$.fragment,t),n=!1},d:function(t){Bp(e,t)}}}function dD(t){var e;return{c:function(){e=zd(t[27])},m:function(t,n){Dd(t,e,n)},p:function(t,n){134217728&n[0]&&jd(e,t[27])},d:function(t){t&&Ld(e)}}}function pD(t){var e,n;return e=new RT({props:{$$slots:{default:[vD]},$$scope:{ctx:t}}}),{c:function(){xp(e.$$.fragment)},m:function(t,r){bp(e,t,r),n=!0},p:function(t,n){var r={};268435456&n[0]|4096&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(yp(e.$$.fragment,t),n=!0)},o:function(t){_p(e.$$.fragment,t),n=!1},d:function(t){Bp(e,t)}}}function vD(t){var e;return{c:function(){e=zd(t[28])},m:function(t,n){Dd(t,e,n)},p:function(t,n){268435456&n[0]&&jd(e,t[28])},d:function(t){t&&Ld(e)}}}function gD(t){var e,n;return{c:function(){e=Od("h5"),n=zd(t[29]),Kd(e,"class","visuallyhidden svelte-1fy6g2i")},m:function(t,r){Dd(t,e,r),Td(e,n)},p:function(t,e){536870912&e[0]&&jd(n,t[29])},d:function(t){t&&Ld(e)}}}function mD(t){var e,n;return e=new sT({props:{ticks:t[21],formatTick:t[17],snapTicks:t[37],prefix:t[46],suffix:t[47],gridlines:t[25],tickMarks:t[23],forceTicks:t[24],formatTickString:t[18]}}),{c:function(){xp(e.$$.fragment)},m:function(t,r){bp(e,t,r),n=!0},p:function(t,n){var r={};2097152&n[0]&&(r.ticks=t[21]),131072&n[0]&&(r.formatTick=t[17]),64&n[1]&&(r.snapTicks=t[37]),32768&n[1]&&(r.prefix=t[46]),65536&n[1]&&(r.suffix=t[47]),33554432&n[0]&&(r.gridlines=t[25]),8388608&n[0]&&(r.tickMarks=t[23]),16777216&n[0]&&(r.forceTicks=t[24]),262144&n[0]&&(r.formatTickString=t[18]),e.$set(r)},i:function(t){n||(yp(e.$$.fragment,t),n=!0)},o:function(t){_p(e.$$.fragment,t),n=!1},d:function(t){Bp(e,t)}}}function yD(t){var e,n;return e=new mT({props:{ticks:t[22],formatTick:t[16],prefix:t[48],suffix:t[49],trimGridlines:t[35]}}),{c:function(){xp(e.$$.fragment)},m:function(t,r){bp(e,t,r),n=!0},p:function(t,n){var r={};4194304&n[0]&&(r.ticks=t[22]),65536&n[0]&&(r.formatTick=t[16]),131072&n[1]&&(r.prefix=t[48]),262144&n[1]&&(r.suffix=t[49]),16&n[1]&&(r.trimGridlines=t[35]),e.$set(r)},i:function(t){n||(yp(e.$$.fragment,t),n=!0)},o:function(t){_p(e.$$.fragment,t),n=!1},d:function(t){Bp(e,t)}}}function _D(t){var e,n;return e=new TM({props:{mode:t[39],opacity:t[41]}}),{c:function(){xp(e.$$.fragment)},m:function(t,r){bp(e,t,r),n=!0},p:function(t,n){var r={};256&n[1]&&(r.mode=t[39]),1024&n[1]&&(r.opacity=t[41]),e.$set(r)},i:function(t){n||(yp(e.$$.fragment,t),n=!0)},o:function(t){_p(e.$$.fragment,t),n=!1},d:function(t){Bp(e,t)}}}function wD(t){var e,n,r,i;function a(e){t[69](e)}function o(e){t[70](e)}var s={lineWidth:t[44],select:t[52],hover:t[50],highlighted:t[54]};return void 0!==t[1]&&(s.selected=t[1]),void 0!==t[0]&&(s.hovered=t[0]),e=new kM({props:s}),ip.push((function(){return wp(e,"selected",a)})),ip.push((function(){return wp(e,"hovered",o)})),e.$on("hover",t[71]),e.$on("select",t[72]),{c:function(){xp(e.$$.fragment)},m:function(t,n){bp(e,t,n),i=!0},p:function(t,i){var a={};8192&i[1]&&(a.lineWidth=t[44]),2097152&i[1]&&(a.select=t[52]),524288&i[1]&&(a.hover=t[50]),8388608&i[1]&&(a.highlighted=t[54]),!n&&2&i[0]&&(n=!0,a.selected=t[1],lp((function(){return n=!1}))),!r&&1&i[0]&&(r=!0,a.hovered=t[0],lp((function(){return r=!1}))),e.$set(a)},i:function(t){i||(yp(e.$$.fragment,t),i=!0)},o:function(t){_p(e.$$.fragment,t),i=!1},d:function(t){Bp(e,t)}}}function xD(t){var e,n;return e=new JM({props:{hovered:t[0],selected:t[1],labelAll:"all"===t[32],spreadLabels:t[33],marker:t[34],textWrap:t[26]}}),{c:function(){xp(e.$$.fragment)},m:function(t,r){bp(e,t,r),n=!0},p:function(t,n){var r={};1&n[0]&&(r.hovered=t[0]),2&n[0]&&(r.selected=t[1]),2&n[1]&&(r.labelAll="all"===t[32]),4&n[1]&&(r.spreadLabels=t[33]),8&n[1]&&(r.marker=t[34]),67108864&n[0]&&(r.textWrap=t[26]),e.$set(r)},i:function(t){n||(yp(e.$$.fragment,t),n=!0)},o:function(t){_p(e.$$.fragment,t),n=!1},d:function(t){Bp(e,t)}}}function bD(t){var e,n,r,i,a,o,s=t[19]&&mD(t),A=t[20]&&yD(t),u=t[40]&&_D(t),l=t[38]&&wD(t),c=t[32]&&xD(t),h=t[68].svg,f=gd(h,t,t[74],AD);return{c:function(){s&&s.c(),e=Hd(),A&&A.c(),n=Hd(),u&&u.c(),r=Hd(),l&&l.c(),i=Hd(),c&&c.c(),a=Hd(),f&&f.c()},m:function(t,h){s&&s.m(t,h),Dd(t,e,h),A&&A.m(t,h),Dd(t,n,h),u&&u.m(t,h),Dd(t,r,h),l&&l.m(t,h),Dd(t,i,h),c&&c.m(t,h),Dd(t,a,h),f&&f.m(t,h),o=!0},p:function(t,d){t[19]?s?(s.p(t,d),524288&d[0]&&yp(s,1)):((s=mD(t)).c(),yp(s,1),s.m(e.parentNode,e)):s&&(gp(),_p(s,1,1,(function(){s=null})),mp()),t[20]?A?(A.p(t,d),1048576&d[0]&&yp(A,1)):((A=yD(t)).c(),yp(A,1),A.m(n.parentNode,n)):A&&(gp(),_p(A,1,1,(function(){A=null})),mp()),t[40]?u?(u.p(t,d),512&d[1]&&yp(u,1)):((u=_D(t)).c(),yp(u,1),u.m(r.parentNode,r)):u&&(gp(),_p(u,1,1,(function(){u=null})),mp()),t[38]?l?(l.p(t,d),128&d[1]&&yp(l,1)):((l=wD(t)).c(),yp(l,1),l.m(i.parentNode,i)):l&&(gp(),_p(l,1,1,(function(){l=null})),mp()),t[32]?c?(c.p(t,d),2&d[1]&&yp(c,1)):((c=xD(t)).c(),yp(c,1),c.m(a.parentNode,a)):c&&(gp(),_p(c,1,1,(function(){c=null})),mp()),f&&f.p&&(!o||4096&d[2])&&_d(f,h,t,t[74],o?yd(h,t[74],d,sD):wd(t[74]),AD)},i:function(t){o||(yp(s),yp(A),yp(u),yp(l),yp(c),yp(f,t),o=!0)},o:function(t){_p(s),_p(A),_p(u),_p(l),_p(c),_p(f,t),o=!1},d:function(t){s&&s.d(t),t&&Ld(e),A&&A.d(t),t&&Ld(n),u&&u.d(t),t&&Ld(r),l&&l.d(t),t&&Ld(i),c&&c.d(t),t&&Ld(a),f&&f.d(t)}}}function BD(t){var e,n,r,i,a,o;e=new qQ({});var s=t[68].back,A=gd(s,t,t[74],lD);i=new FQ({props:{pointerEvents:t[45],$$slots:{default:[bD]},$$scope:{ctx:t}}});var u=t[68].front,l=gd(u,t,t[74],oD);return{c:function(){xp(e.$$.fragment),n=Hd(),A&&A.c(),r=Hd(),xp(i.$$.fragment),a=Hd(),l&&l.c()},m:function(t,s){bp(e,t,s),Dd(t,n,s),A&&A.m(t,s),Dd(t,r,s),bp(i,t,s),Dd(t,a,s),l&&l.m(t,s),o=!0},p:function(t,e){A&&A.p&&(!o||4096&e[2])&&_d(A,s,t,t[74],o?yd(s,t[74],e,uD):wd(t[74]),lD);var n={};16384&e[1]&&(n.pointerEvents=t[45]),134152195&e[0]|11511774&e[1]|4096&e[2]&&(n.$$scope={dirty:e,ctx:t}),i.$set(n),l&&l.p&&(!o||4096&e[2])&&_d(l,u,t,t[74],o?yd(u,t[74],e,aD):wd(t[74]),oD)},i:function(t){o||(yp(e.$$.fragment,t),yp(A,t),yp(i.$$.fragment,t),yp(l,t),o=!0)},o:function(t){_p(e.$$.fragment,t),_p(A,t),_p(i.$$.fragment,t),_p(l,t),o=!1},d:function(t){Bp(e,t),t&&Ld(n),A&&A.d(t),t&&Ld(r),Bp(i,t),t&&Ld(a),l&&l.d(t)}}}function kD(t){var e,n,r;return n=new hM({props:{data:t[2],key1:t[11],key2:t[9],key3:t[10]}}),{c:function(){e=Od("div"),xp(n.$$.fragment),Kd(e,"class","visuallyhidden svelte-1fy6g2i")},m:function(t,i){Dd(t,e,i),bp(n,e,null),r=!0},p:function(t,e){var r={};4&e[0]&&(r.data=t[2]),2048&e[0]&&(r.key1=t[11]),512&e[0]&&(r.key2=t[9]),1024&e[0]&&(r.key3=t[10]),n.$set(r)},i:function(t){r||(yp(n.$$.fragment,t),r=!0)},o:function(t){_p(n.$$.fragment,t),r=!1},d:function(t){t&&Ld(e),Bp(n)}}}function CD(t){var e,n;return e=new FT({props:{domain:t[57],colors:t[43],line:t[38],markerWidth:t[44]}}),{c:function(){xp(e.$$.fragment)},m:function(t,r){bp(e,t,r),n=!0},p:function(t,n){var r={};67108864&n[1]&&(r.domain=t[57]),4096&n[1]&&(r.colors=t[43]),128&n[1]&&(r.line=t[38]),8192&n[1]&&(r.markerWidth=t[44]),e.$set(r)},i:function(t){n||(yp(e.$$.fragment,t),n=!0)},o:function(t){_p(e.$$.fragment,t),n=!1},d:function(t){Bp(e,t)}}}function FD(t){var e,n;return e=new GT({props:{$$slots:{default:[ED]},$$scope:{ctx:t}}}),{c:function(){xp(e.$$.fragment)},m:function(t,r){bp(e,t,r),n=!0},p:function(t,n){var r={};1073741824&n[0]|4096&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i:function(t){n||(yp(e.$$.fragment,t),n=!0)},o:function(t){_p(e.$$.fragment,t),n=!1},d:function(t){Bp(e,t)}}}function ED(t){var e;return{c:function(){e=zd(t[30])},m:function(t,n){Dd(t,e,n)},p:function(t,n){1073741824&n[0]&&jd(e,t[30])},d:function(t){t&&Ld(e)}}}function ID(t){var e,n;return e=new tM({props:{el:t[58],data:t[2],keys:[t[12],t[9],t[11],t[10]],title:t[27],output:t[56]}}),{c:function(){xp(e.$$.fragment)},m:function(t,r){bp(e,t,r),n=!0},p:function(t,n){var r={};134217728&n[1]&&(r.el=t[58]),4&n[0]&&(r.data=t[2]),7680&n[0]&&(r.keys=[t[12],t[9],t[11],t[10]]),134217728&n[0]&&(r.title=t[27]),33554432&n[1]&&(r.output=t[56]),e.$set(r)},i:function(t){n||(yp(e.$$.fragment,t),n=!0)},o:function(t){_p(e.$$.fragment,t),n=!1},d:function(t){Bp(e,t)}}}function UD(t){var e,n,r,i,a,o,s,A,u,l,c,h,f,d,p=t[27]&&fD(t),v=t[28]&&pD(t),g=t[29]&&gD(t),m=t[68].options,y=gd(m,t,t[74],hD);s=new dQ({props:{padding:t[42],ssr:t[4],height:t[4]?t[6]:null,width:t[4]?t[5]:null,x:t[9],y:t[10],z:t[11],yDomain:t[60],xScale:"function"==typeof t[14]?t[14]():"log"==t[14]?bI().constant(1e4):gI(),yScale:"function"==typeof t[15]?t[15]():"log"==t[15]?bI():gI(),zScale:oI(),zDomain:t[57],zRange:t[43],data:t[59],flatData:t[2],custom:{type:"line",mode:t[39],idKey:t[12],labelKey:t[13],coords:t[61],colorSelect:t[53],colorHover:t[51],colorHighlight:t[55],animation:t[7],duration:t[8]},$$slots:{default:[BD]},$$scope:{ctx:t}}});var _=t[36]&&kD(t),w=t[68].legend,x=gd(w,t,t[74],iD),b=t[31]&&t[57]&&CD(t),B=t[30]&&FD(t),k=t[56]&&ID(t);return{c:function(){e=Od("div"),p&&p.c(),n=Hd(),v&&v.c(),r=Hd(),g&&g.c(),i=Hd(),y&&y.c(),a=Hd(),o=Od("div"),xp(s.$$.fragment),A=Hd(),_&&_.c(),u=Hd(),x&&x.c(),l=Hd(),b&&b.c(),c=Hd(),B&&B.c(),h=Hd(),k&&k.c(),f=Vd(),Kd(o,"class","chart-container svelte-1fy6g2i"),$d(o,"height","number"==typeof t[3]?t[3]+"px":t[3]),Kd(o,"aria-hidden","true")},m:function(m,w){Dd(m,e,w),p&&p.m(e,null),Td(e,n),v&&v.m(e,null),Td(e,r),g&&g.m(e,null),Td(e,i),y&&y.m(e,null),Td(e,a),Td(e,o),bp(s,o,null),Td(e,A),_&&_.m(e,null),Td(e,u),x&&x.m(e,null),Td(e,l),b&&b.m(e,null),Td(e,c),B&&B.m(e,null),t[73](e),Dd(m,h,w),k&&k.m(m,w),Dd(m,f,w),d=!0},p:function(t,a){t[27]?p?(p.p(t,a),134217728&a[0]&&yp(p,1)):((p=fD(t)).c(),yp(p,1),p.m(e,n)):p&&(gp(),_p(p,1,1,(function(){p=null})),mp()),t[28]?v?(v.p(t,a),268435456&a[0]&&yp(v,1)):((v=pD(t)).c(),yp(v,1),v.m(e,r)):v&&(gp(),_p(v,1,1,(function(){v=null})),mp()),t[29]?g?g.p(t,a):((g=gD(t)).c(),g.m(e,i)):g&&(g.d(1),g=null),y&&y.p&&(!d||4096&a[2])&&_d(y,m,t,t[74],d?yd(m,t[74],a,cD):wd(t[74]),hD);var A={};2048&a[1]&&(A.padding=t[42]),16&a[0]&&(A.ssr=t[4]),80&a[0]&&(A.height=t[4]?t[6]:null),48&a[0]&&(A.width=t[4]?t[5]:null),512&a[0]&&(A.x=t[9]),1024&a[0]&&(A.y=t[10]),2048&a[0]&&(A.z=t[11]),536870912&a[1]&&(A.yDomain=t[60]),16384&a[0]&&(A.xScale="function"==typeof t[14]?t[14]():"log"==t[14]?bI().constant(1e4):gI()),32768&a[0]&&(A.yScale="function"==typeof t[15]?t[15]():"log"==t[15]?bI():gI()),67108864&a[1]&&(A.zDomain=t[57]),4096&a[1]&&(A.zRange=t[43]),268435456&a[1]&&(A.data=t[59]),4&a[0]&&(A.flatData=t[2]),12672&a[0]|22020352&a[1]&&(A.custom={type:"line",mode:t[39],idKey:t[12],labelKey:t[13],coords:t[61],colorSelect:t[53],colorHover:t[51],colorHighlight:t[55],animation:t[7],duration:t[8]}),134152195&a[0]|11528158&a[1]|4096&a[2]&&(A.$$scope={dirty:a,ctx:t}),s.$set(A),(!d||8&a[0])&&$d(o,"height","number"==typeof t[3]?t[3]+"px":t[3]),t[36]?_?(_.p(t,a),32&a[1]&&yp(_,1)):((_=kD(t)).c(),yp(_,1),_.m(e,u)):_&&(gp(),_p(_,1,1,(function(){_=null})),mp()),x&&x.p&&(!d||4096&a[2])&&_d(x,w,t,t[74],d?yd(w,t[74],a,rD):wd(t[74]),iD),t[31]&&t[57]?b?(b.p(t,a),67108865&a[1]&&yp(b,1)):((b=CD(t)).c(),yp(b,1),b.m(e,c)):b&&(gp(),_p(b,1,1,(function(){b=null})),mp()),t[30]?B?(B.p(t,a),1073741824&a[0]&&yp(B,1)):((B=FD(t)).c(),yp(B,1),B.m(e,null)):B&&(gp(),_p(B,1,1,(function(){B=null})),mp()),t[56]?k?(k.p(t,a),33554432&a[1]&&yp(k,1)):((k=ID(t)).c(),yp(k,1),k.m(f.parentNode,f)):k&&(gp(),_p(k,1,1,(function(){k=null})),mp())},i:function(t){d||(yp(p),yp(v),yp(y,t),yp(s.$$.fragment,t),yp(_),yp(x,t),yp(b),yp(B),yp(k),d=!0)},o:function(t){_p(p),_p(v),_p(y,t),_p(s.$$.fragment,t),_p(_),_p(x,t),_p(b),_p(B),_p(k),d=!1},d:function(n){n&&Ld(e),p&&p.d(),v&&v.d(),g&&g.d(),y&&y.d(n),Bp(s),_&&_.d(),x&&x.d(n),b&&b.d(),B&&B.d(),t[73](null),n&&Ld(h),k&&k.d(n),n&&Ld(f)}}}function SD(t,e,n){var r,i,a,o,s=e.$$slots,A=void 0===s?{}:s,u=e.$$scope,l=e.data,c=e.height,h=void 0===c?200:c,f=e.ssr,d=void 0!==f&&f,p=e.ssrWidth,v=void 0===p?300:p,g=e.ssrHeight,m=void 0===g?"number"==typeof h?h:200:g,y=e.animation,_=void 0===y||y,w=e.duration,x=void 0===w?800:w,b=e.xKey,B=void 0===b?"x":b,k=e.yKey,C=void 0===k?"y":k,F=e.zKey,E=void 0===F?null:F,I=e.idKey,U=void 0===I?E:I,S=e.labelKey,Q=void 0===S?U:S,T=e.xScale,M=void 0===T?"linear":T,D=e.yScale,L=void 0===D?"linear":D,P=e.yFormatTick,O=void 0===P?NQ:P,R=e.xFormatTick,z=void 0===R?function(t){return t}:R,H=e.xFormatTickString,V=void 0===H?null:H,N=e.yMax,K=void 0===N?null:N,G=e.yMin,j=void 0===G?0:G,$=e.xAxis,W=void 0===$||$,Z=e.yAxis,q=void 0===Z||Z,X=e.xTicks,Y=void 0===X?4:X,J=e.yTicks,tt=void 0===J?4:J,et=e.xTickMarks,nt=void 0===et||et,rt=e.xForceTicks,it=void 0===rt?"number"==typeof Y&&"linear"===M:rt,at=e.xGridlines,ot=void 0!==at&&at,st=e.zDomain,At=void 0===st?null:st,ut=e.labelWrap,lt=void 0===ut||ut,ct=e.title,ht=void 0===ct?null:ct,ft=e.subtitle,dt=void 0===ft?null:ft,pt=e.alt,vt=void 0===pt?null:pt,gt=e.footer,mt=void 0===gt?null:gt,yt=e.legend,_t=void 0!==yt&&yt,wt=e.labels,xt=void 0!==wt&&wt,bt=e.spreadLabels,Bt=void 0===bt?"all"===xt:bt,kt=e.labelMarker,Ct=void 0===kt||kt,Ft=e.yTrimGridlines,Et=void 0===Ft?!1!==xt:Ft,It=e.table,Ut=void 0!==It&&It,St=e.snapTicks,Qt=void 0===St||St,Tt=e.line,Mt=void 0===Tt||Tt,Dt=e.mode,Lt=void 0===Dt?"default":Dt,Pt=e.area,Ot=void 0===Pt?"stacked"===Lt:Pt,Rt=e.areaOpacity,zt=void 0===Rt?1:Rt,Ht=e.padding,Vt=void 0===Ht?{top:0,bottom:28,left:35,right:0}:Ht,Nt=e.color,Kt=void 0===Nt?null:Nt,Gt=e.colors,jt=void 0===Gt?Kt?[Kt]:["#206095","#A8BD3A","#003C57","#27A0CC","#118C7B","#F66068","#746CB1","#22D0B6","lightgrey"]:Gt,$t=e.lineWidth,Wt=void 0===$t?2.5:$t,Zt=e.interactive,qt=void 0===Zt||Zt,Xt=e.xPrefix,Yt=void 0===Xt?"":Xt,Jt=e.xSuffix,te=void 0===Jt?"":Jt,ee=e.yPrefix,ne=void 0===ee?"":ee,re=e.ySuffix,ie=void 0===re?"":re,ae=e.hover,oe=void 0!==ae&&ae,se=e.hovered,Ae=void 0===se?null:se,ue=e.colorHover,le=void 0===ue?"orange":ue,ce=e.select,he=void 0!==ce&&ce,fe=e.selected,de=void 0===fe?null:fe,pe=e.colorSelect,ve=void 0===pe?"#206095":pe,ge=e.highlighted,me=void 0===ge?[]:ge,ye=e.colorHighlight,_e=void 0===ye?"#206095":ye,we=e.output,xe=void 0===we?null:we,be=e.annotations,Be=void 0===be?[]:be,ke={duration:x,easing:IQ},Ce=QQ(void 0,ke),Fe=function(t,e,n){return n.indexOf(t)==e};function Ee(t,e){var n=[];return e.forEach((function(e){var r=t.filter((function(t){return t[B]==e})).map((function(t){return t[C]})).reduce((function(t,e){return t+e}));n.push(r)})),n}var Ie=function(t,e,n,r){return r?[j,r]:"stacked"==e&&n?[j,Math.max.apply(Math,Di(Ee(t,t.map((function(t){return t[B]})).filter(Fe))))]:[Math.min.apply(Math,Di(t.map((function(t){return t[n]})))),Math.max.apply(Math,Di(t.map((function(t){return t[n]}))))]};var Ue=Ie(l,Lt,C,K),Se=QQ(Ue,ke);return vd(t,Se,(function(t){return n(60,a=t)})),t.$$set=function(t){"data"in t&&n(2,l=t.data),"height"in t&&n(3,h=t.height),"ssr"in t&&n(4,d=t.ssr),"ssrWidth"in t&&n(5,v=t.ssrWidth),"ssrHeight"in t&&n(6,m=t.ssrHeight),"animation"in t&&n(7,_=t.animation),"duration"in t&&n(8,x=t.duration),"xKey"in t&&n(9,B=t.xKey),"yKey"in t&&n(10,C=t.yKey),"zKey"in t&&n(11,E=t.zKey),"idKey"in t&&n(12,U=t.idKey),"labelKey"in t&&n(13,Q=t.labelKey),"xScale"in t&&n(14,M=t.xScale),"yScale"in t&&n(15,L=t.yScale),"yFormatTick"in t&&n(16,O=t.yFormatTick),"xFormatTick"in t&&n(17,z=t.xFormatTick),"xFormatTickString"in t&&n(18,V=t.xFormatTickString),"yMax"in t&&n(63,K=t.yMax),"yMin"in t&&n(64,j=t.yMin),"xAxis"in t&&n(19,W=t.xAxis),"yAxis"in t&&n(20,q=t.yAxis),"xTicks"in t&&n(21,Y=t.xTicks),"yTicks"in t&&n(22,tt=t.yTicks),"xTickMarks"in t&&n(23,nt=t.xTickMarks),"xForceTicks"in t&&n(24,it=t.xForceTicks),"xGridlines"in t&&n(25,ot=t.xGridlines),"zDomain"in t&&n(65,At=t.zDomain),"labelWrap"in t&&n(26,lt=t.labelWrap),"title"in t&&n(27,ht=t.title),"subtitle"in t&&n(28,dt=t.subtitle),"alt"in t&&n(29,vt=t.alt),"footer"in t&&n(30,mt=t.footer),"legend"in t&&n(31,_t=t.legend),"labels"in t&&n(32,xt=t.labels),"spreadLabels"in t&&n(33,Bt=t.spreadLabels),"labelMarker"in t&&n(34,Ct=t.labelMarker),"yTrimGridlines"in t&&n(35,Et=t.yTrimGridlines),"table"in t&&n(36,Ut=t.table),"snapTicks"in t&&n(37,Qt=t.snapTicks),"line"in t&&n(38,Mt=t.line),"mode"in t&&n(39,Lt=t.mode),"area"in t&&n(40,Ot=t.area),"areaOpacity"in t&&n(41,zt=t.areaOpacity),"padding"in t&&n(42,Vt=t.padding),"color"in t&&n(66,Kt=t.color),"colors"in t&&n(43,jt=t.colors),"lineWidth"in t&&n(44,Wt=t.lineWidth),"interactive"in t&&n(45,qt=t.interactive),"xPrefix"in t&&n(46,Yt=t.xPrefix),"xSuffix"in t&&n(47,te=t.xSuffix),"yPrefix"in t&&n(48,ne=t.yPrefix),"ySuffix"in t&&n(49,ie=t.ySuffix),"hover"in t&&n(50,oe=t.hover),"hovered"in t&&n(0,Ae=t.hovered),"colorHover"in t&&n(51,le=t.colorHover),"select"in t&&n(52,he=t.select),"selected"in t&&n(1,de=t.selected),"colorSelect"in t&&n(53,ve=t.colorSelect),"highlighted"in t&&n(54,me=t.highlighted),"colorHighlight"in t&&n(55,_e=t.colorHighlight),"output"in t&&n(56,xe=t.output),"annotations"in t&&n(67,Be=t.annotations),"$$scope"in t&&n(74,u=t.$$scope)},t.$$.update=function(){1028&t.$$.dirty[0]|256&t.$$.dirty[1]|2&t.$$.dirty[2]&&function(t,e,n,r){var i=Ie(t,e,n,r);i[0]==Ue[0]&&i[1]==Ue[1]||(Se.set(i,{duration:_?x:0}),Ue=i)}(l,Lt,C,K),2052&t.$$.dirty[0]|8&t.$$.dirty[2]&&n(57,r=Array.isArray(At)?At:E&&"function"==typeof At?l.map((function(t){return t[E]})).filter(Fe).sort(At):E?l.map((function(t){return t[E]})).filter(Fe):null),3076&t.$$.dirty[0]|67109120&t.$$.dirty[1]&&n(59,i="stacked"==Lt?function(t,e,n,r){var i=[],a=JSON.parse(JSON.stringify(t.filter((function(t){return t[r]==e[0]}))));return a.forEach((function(t){return t[n]=0})),e.forEach((function(e){var o=JSON.parse(JSON.stringify(t.filter((function(t){return t[r]==e}))));o.forEach((function(t,e){t[n]+=a[e][n],a[e][n]=t[n]})),i.push(o)})),i}(l,r,C,E):function(t,e,n){var r=[];return n?e.forEach((function(e){r.push(t.filter((function(t){return t[n]==e})))})):r=[t],r}(l,r,E))},[Ae,de,l,h,d,v,m,_,x,B,C,E,U,Q,M,L,O,z,V,W,q,Y,tt,nt,it,ot,lt,ht,dt,vt,mt,_t,xt,Bt,Ct,Et,Ut,Qt,Mt,Lt,Ot,zt,Vt,jt,Wt,qt,Yt,te,ne,ie,oe,le,he,ve,me,_e,xe,r,o,i,a,Ce,Se,K,j,At,Kt,Be,A,function(t){n(1,de=t)},function(t){n(0,Ae=t)},function(e){np.call(this,t,e)},function(e){np.call(this,t,e)},function(t){ip[t?"unshift":"push"]((function(){n(58,o=t)}))},u]}var QD=function(t){function e(t){var n;return oi(this,e),Cp(n=tD(this,e),t,SD,UD,fd,{data:2,height:3,ssr:4,ssrWidth:5,ssrHeight:6,animation:7,duration:8,xKey:9,yKey:10,zKey:11,idKey:12,labelKey:13,xScale:14,yScale:15,yFormatTick:16,xFormatTick:17,xFormatTickString:18,yMax:63,yMin:64,xAxis:19,yAxis:20,xTicks:21,yTicks:22,xTickMarks:23,xForceTicks:24,xGridlines:25,zDomain:65,labelWrap:26,title:27,subtitle:28,alt:29,footer:30,legend:31,labels:32,spreadLabels:33,labelMarker:34,yTrimGridlines:35,table:36,snapTicks:37,line:38,mode:39,area:40,areaOpacity:41,padding:42,color:66,colors:43,lineWidth:44,interactive:45,xPrefix:46,xSuffix:47,yPrefix:48,ySuffix:49,hover:50,hovered:0,colorHover:51,select:52,selected:1,colorSelect:53,highlighted:54,colorHighlight:55,output:56,annotations:67},nD,[-1,-1,-1]),n}return ci(e,t),ai(e,[{key:"data",get:function(){return this.$$.ctx[2]},set:function(t){this.$$set({data:t}),fp()}},{key:"height",get:function(){return this.$$.ctx[3]},set:function(t){this.$$set({height:t}),fp()}},{key:"ssr",get:function(){return this.$$.ctx[4]},set:function(t){this.$$set({ssr:t}),fp()}},{key:"ssrWidth",get:function(){return this.$$.ctx[5]},set:function(t){this.$$set({ssrWidth:t}),fp()}},{key:"ssrHeight",get:function(){return this.$$.ctx[6]},set:function(t){this.$$set({ssrHeight:t}),fp()}},{key:"animation",get:function(){return this.$$.ctx[7]},set:function(t){this.$$set({animation:t}),fp()}},{key:"duration",get:function(){return this.$$.ctx[8]},set:function(t){this.$$set({duration:t}),fp()}},{key:"xKey",get:function(){return this.$$.ctx[9]},set:function(t){this.$$set({xKey:t}),fp()}},{key:"yKey",get:function(){return this.$$.ctx[10]},set:function(t){this.$$set({yKey:t}),fp()}},{key:"zKey",get:function(){return this.$$.ctx[11]},set:function(t){this.$$set({zKey:t}),fp()}},{key:"idKey",get:function(){return this.$$.ctx[12]},set:function(t){this.$$set({idKey:t}),fp()}},{key:"labelKey",get:function(){return this.$$.ctx[13]},set:function(t){this.$$set({labelKey:t}),fp()}},{key:"xScale",get:function(){return this.$$.ctx[14]},set:function(t){this.$$set({xScale:t}),fp()}},{key:"yScale",get:function(){return this.$$.ctx[15]},set:function(t){this.$$set({yScale:t}),fp()}},{key:"yFormatTick",get:function(){return this.$$.ctx[16]},set:function(t){this.$$set({yFormatTick:t}),fp()}},{key:"xFormatTick",get:function(){return this.$$.ctx[17]},set:function(t){this.$$set({xFormatTick:t}),fp()}},{key:"xFormatTickString",get:function(){return this.$$.ctx[18]},set:function(t){this.$$set({xFormatTickString:t}),fp()}},{key:"yMax",get:function(){return this.$$.ctx[63]},set:function(t){this.$$set({yMax:t}),fp()}},{key:"yMin",get:function(){return this.$$.ctx[64]},set:function(t){this.$$set({yMin:t}),fp()}},{key:"xAxis",get:function(){return this.$$.ctx[19]},set:function(t){this.$$set({xAxis:t}),fp()}},{key:"yAxis",get:function(){return this.$$.ctx[20]},set:function(t){this.$$set({yAxis:t}),fp()}},{key:"xTicks",get:function(){return this.$$.ctx[21]},set:function(t){this.$$set({xTicks:t}),fp()}},{key:"yTicks",get:function(){return this.$$.ctx[22]},set:function(t){this.$$set({yTicks:t}),fp()}},{key:"xTickMarks",get:function(){return this.$$.ctx[23]},set:function(t){this.$$set({xTickMarks:t}),fp()}},{key:"xForceTicks",get:function(){return this.$$.ctx[24]},set:function(t){this.$$set({xForceTicks:t}),fp()}},{key:"xGridlines",get:function(){return this.$$.ctx[25]},set:function(t){this.$$set({xGridlines:t}),fp()}},{key:"zDomain",get:function(){return this.$$.ctx[65]},set:function(t){this.$$set({zDomain:t}),fp()}},{key:"labelWrap",get:function(){return this.$$.ctx[26]},set:function(t){this.$$set({labelWrap:t}),fp()}},{key:"title",get:function(){return this.$$.ctx[27]},set:function(t){this.$$set({title:t}),fp()}},{key:"subtitle",get:function(){return this.$$.ctx[28]},set:function(t){this.$$set({subtitle:t}),fp()}},{key:"alt",get:function(){return this.$$.ctx[29]},set:function(t){this.$$set({alt:t}),fp()}},{key:"footer",get:function(){return this.$$.ctx[30]},set:function(t){this.$$set({footer:t}),fp()}},{key:"legend",get:function(){return this.$$.ctx[31]},set:function(t){this.$$set({legend:t}),fp()}},{key:"labels",get:function(){return this.$$.ctx[32]},set:function(t){this.$$set({labels:t}),fp()}},{key:"spreadLabels",get:function(){return this.$$.ctx[33]},set:function(t){this.$$set({spreadLabels:t}),fp()}},{key:"labelMarker",get:function(){return this.$$.ctx[34]},set:function(t){this.$$set({labelMarker:t}),fp()}},{key:"yTrimGridlines",get:function(){return this.$$.ctx[35]},set:function(t){this.$$set({yTrimGridlines:t}),fp()}},{key:"table",get:function(){return this.$$.ctx[36]},set:function(t){this.$$set({table:t}),fp()}},{key:"snapTicks",get:function(){return this.$$.ctx[37]},set:function(t){this.$$set({snapTicks:t}),fp()}},{key:"line",get:function(){return this.$$.ctx[38]},set:function(t){this.$$set({line:t}),fp()}},{key:"mode",get:function(){return this.$$.ctx[39]},set:function(t){this.$$set({mode:t}),fp()}},{key:"area",get:function(){return this.$$.ctx[40]},set:function(t){this.$$set({area:t}),fp()}},{key:"areaOpacity",get:function(){return this.$$.ctx[41]},set:function(t){this.$$set({areaOpacity:t}),fp()}},{key:"padding",get:function(){return this.$$.ctx[42]},set:function(t){this.$$set({padding:t}),fp()}},{key:"color",get:function(){return this.$$.ctx[66]},set:function(t){this.$$set({color:t}),fp()}},{key:"colors",get:function(){return this.$$.ctx[43]},set:function(t){this.$$set({colors:t}),fp()}},{key:"lineWidth",get:function(){return this.$$.ctx[44]},set:function(t){this.$$set({lineWidth:t}),fp()}},{key:"interactive",get:function(){return this.$$.ctx[45]},set:function(t){this.$$set({interactive:t}),fp()}},{key:"xPrefix",get:function(){return this.$$.ctx[46]},set:function(t){this.$$set({xPrefix:t}),fp()}},{key:"xSuffix",get:function(){return this.$$.ctx[47]},set:function(t){this.$$set({xSuffix:t}),fp()}},{key:"yPrefix",get:function(){return this.$$.ctx[48]},set:function(t){this.$$set({yPrefix:t}),fp()}},{key:"ySuffix",get:function(){return this.$$.ctx[49]},set:function(t){this.$$set({ySuffix:t}),fp()}},{key:"hover",get:function(){return this.$$.ctx[50]},set:function(t){this.$$set({hover:t}),fp()}},{key:"hovered",get:function(){return this.$$.ctx[0]},set:function(t){this.$$set({hovered:t}),fp()}},{key:"colorHover",get:function(){return this.$$.ctx[51]},set:function(t){this.$$set({colorHover:t}),fp()}},{key:"select",get:function(){return this.$$.ctx[52]},set:function(t){this.$$set({select:t}),fp()}},{key:"selected",get:function(){return this.$$.ctx[1]},set:function(t){this.$$set({selected:t}),fp()}},{key:"colorSelect",get:function(){return this.$$.ctx[53]},set:function(t){this.$$set({colorSelect:t}),fp()}},{key:"highlighted",get:function(){return this.$$.ctx[54]},set:function(t){this.$$set({highlighted:t}),fp()}},{key:"colorHighlight",get:function(){return this.$$.ctx[55]},set:function(t){this.$$set({colorHighlight:t}),fp()}},{key:"output",get:function(){return this.$$.ctx[56]},set:function(t){this.$$set({output:t}),fp()}},{key:"annotations",get:function(){return this.$$.ctx[67]},set:function(t){this.$$set({annotations:t}),fp()}}])}(Fp);Pe({target:"Math",stat:!0},{fround:Gl}),Pe({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MIN_SAFE_INTEGER:-9007199254740991});var TD=w(TE),MD=w("".slice),DD=Math.ceil,LD=function(t){return function(e,n,r){var i,a,o=je(S(e)),s=pe(n),A=o.length,u=void 0===r?" ":je(r);return s<=A||""===u?o:((a=TD(u,DD((i=s-A)/u.length))).length>i&&(a=MD(a,0,i)),t?o+a:a+o)}},PD={start:LD(!1),end:LD(!0)},OD=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(O),RD=PD.end;Pe({target:"String",proto:!0,forced:OD},{padEnd:function(t){return RD(this,t,arguments.length>1?arguments[1]:void 0)}}),Pe({target:"String",proto:!0,forced:ul("fixed")},{fixed:function(){return Al(this,"tt","","")}}),Pe({target:"String",proto:!0,forced:ul("sub")},{sub:function(){return Al(this,"sub","","")}}),Gc("Int8",(function(t){return function(e,n,r){return t(this,e,n,r)}})),Gc("Int16",(function(t){return function(e,n,r){return t(this,e,n,r)}})),Gc("Uint8",(function(t){return function(e,n,r){return t(this,e,n,r)}}),!0);var zD=vt("iterator"),HD=!s((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n=new URLSearchParams("a=1&a=2&b=3"),r="";return t.pathname="c%20d",e.forEach((function(t,n){e.delete("b"),r+=n+t})),n.delete("a",2),n.delete("b",void 0),!e.size&&!A||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[zD]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://ÑÐµÑÑ").host||"#%D0%B1"!==new URL("http://a#Ð±").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host})),VD=2147483647,ND=/[^\0-\u007E]/,KD=/[.\u3002\uFF0E\uFF61]/g,GD="Overflow: input needs wider integers to process",jD=RangeError,$D=w(KD.exec),WD=Math.floor,ZD=String.fromCharCode,qD=w("".charCodeAt),XD=w([].join),YD=w([].push),JD=w("".replace),tL=w("".split),eL=w("".toLowerCase),nL=function(t){return t+22+75*(t<26)},rL=function(t,e,n){var r=0;for(t=n?WD(t/700):t>>1,t+=WD(t/e);t>455;)t=WD(t/35),r+=36;return WD(r+36*t/(t+38))},iL=function(t){var e=[];t=function(t){for(var e=[],n=0,r=t.length;n<r;){var i=qD(t,n++);if(i>=55296&&i<=56319&&n<r){var a=qD(t,n++);56320==(64512&a)?YD(e,((1023&i)<<10)+(1023&a)+65536):(YD(e,i),n--)}else YD(e,i)}return e}(t);var n,r,i=t.length,a=128,o=0,s=72;for(n=0;n<t.length;n++)(r=t[n])<128&&YD(e,ZD(r));var A=e.length,u=A;for(A&&YD(e,"-");u<i;){var l=VD;for(n=0;n<t.length;n++)(r=t[n])>=a&&r<l&&(l=r);var c=u+1;if(l-a>WD((VD-o)/c))throw new jD(GD);for(o+=(l-a)*c,a=l,n=0;n<t.length;n++){if((r=t[n])<a&&++o>VD)throw new jD(GD);if(r===a){for(var h=o,f=36;;){var d=f<=s?1:f>=s+26?26:f-s;if(h<d)break;var p=h-d,v=36-d;YD(e,ZD(nL(d+p%v))),h=WD(p/v),f+=36}YD(e,ZD(nL(h))),s=rL(o,c,u===A),o=0,u++}}o++,a++}return XD(e,"")},aL=vt("iterator"),oL="URLSearchParams",sL=oL+"Iterator",AL=ie.set,uL=ie.getterFor(oL),lL=ie.getterFor(sL),cL=Ds("fetch"),hL=Ds("Request"),fL=Ds("Headers"),dL=hL&&hL.prototype,pL=fL&&fL.prototype,vL=o.RegExp,gL=o.TypeError,mL=o.decodeURIComponent,yL=o.encodeURIComponent,_L=w("".charAt),wL=w([].join),xL=w([].push),bL=w("".replace),BL=w([].shift),kL=w([].splice),CL=w("".split),FL=w("".slice),EL=/\+/g,IL=Array(4),UL=function(t){return IL[t-1]||(IL[t-1]=vL("((?:%[\\da-f]{2}){"+t+"})","gi"))},SL=function(t){try{return mL(t)}catch(e){return t}},QL=function(t){var e=bL(t,EL," "),n=4;try{return mL(e)}catch(t){for(;n;)e=bL(e,UL(n--),SL);return e}},TL=/[!'()~]|%20/g,ML={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},DL=function(t){return ML[t]},LL=function(t){return bL(yL(t),TL,DL)},PL=La((function(t,e){AL(this,{type:sL,target:uL(t).entries,index:0,kind:e})}),oL,(function(){var t=lL(this),e=t.target,n=t.index++;if(!e||n>=e.length)return t.target=void 0,Xa(void 0,!0);var r=e[n];switch(t.kind){case"keys":return Xa(r.key,!1);case"values":return Xa(r.value,!1)}return Xa([r.key,r.value],!1)}),!0),OL=function(t){this.entries=[],this.url=null,void 0!==t&&(D(t)?this.parseObject(t):this.parseQuery("string"==typeof t?"?"===_L(t,0)?FL(t,1):t:je(t)))};OL.prototype={type:oL,bindURL:function(t){this.url=t,this.update()},parseObject:function(t){var e,n,r,i,a,o,s,A=this.entries,u=ca(t);if(u)for(n=(e=fa(t,u)).next;!(r=c(n,e)).done;){if(a=(i=fa(Ut(r.value))).next,(o=c(a,i)).done||(s=c(a,i)).done||!c(a,i).done)throw new gL("Expected sequence with length 2");xL(A,{key:je(o.value),value:je(s.value)})}else for(var l in t)At(t,l)&&xL(A,{key:l,value:je(t[l])})},parseQuery:function(t){if(t)for(var e,n,r=this.entries,i=CL(t,"&"),a=0;a<i.length;)(e=i[a++]).length&&(n=CL(e,"="),xL(r,{key:QL(BL(n)),value:QL(wL(n,"="))}))},serialize:function(){for(var t,e=this.entries,n=[],r=0;r<e.length;)t=e[r++],xL(n,LL(t.key)+"="+LL(t.value));return wL(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var RL=function(){Zo(this,zL);var t=AL(this,new OL(arguments.length>0?arguments[0]:void 0));A||(this.size=t.entries.length)},zL=RL.prototype;if(Yo(zL,{append:function(t,e){var n=uL(this);gs(arguments.length,2),xL(n.entries,{key:je(t),value:je(e)}),A||this.length++,n.updateURL()},delete:function(t){for(var e=uL(this),n=gs(arguments.length,1),r=e.entries,i=je(t),a=n<2?void 0:arguments[1],o=void 0===a?a:je(a),s=0;s<r.length;){var u=r[s];if(u.key!==i||void 0!==o&&u.value!==o)s++;else if(kL(r,s,1),void 0!==o)break}A||(this.size=r.length),e.updateURL()},get:function(t){var e=uL(this).entries;gs(arguments.length,1);for(var n=je(t),r=0;r<e.length;r++)if(e[r].key===n)return e[r].value;return null},getAll:function(t){var e=uL(this).entries;gs(arguments.length,1);for(var n=je(t),r=[],i=0;i<e.length;i++)e[i].key===n&&xL(r,e[i].value);return r},has:function(t){for(var e=uL(this).entries,n=gs(arguments.length,1),r=je(t),i=n<2?void 0:arguments[1],a=void 0===i?i:je(i),o=0;o<e.length;){var s=e[o++];if(s.key===r&&(void 0===a||s.value===a))return!0}return!1},set:function(t,e){var n=uL(this);gs(arguments.length,1);for(var r,i=n.entries,a=!1,o=je(t),s=je(e),u=0;u<i.length;u++)(r=i[u]).key===o&&(a?kL(i,u--,1):(a=!0,r.value=s));a||xL(i,{key:o,value:s}),A||(this.size=i.length),n.updateURL()},sort:function(){var t=uL(this);po(t.entries,(function(t,e){return t.key>e.key?1:-1})),t.updateURL()},forEach:function(t){for(var e,n=uL(this).entries,r=_n(t,arguments.length>1?arguments[1]:void 0),i=0;i<n.length;)r((e=n[i++]).value,e.key,this)},keys:function(){return new PL(this,"keys")},values:function(){return new PL(this,"values")},entries:function(){return new PL(this,"entries")}},{enumerable:!0}),oe(zL,aL,zL.entries,{name:"entries"}),oe(zL,"toString",(function(){return uL(this).serialize()}),{enumerable:!0}),A&&ln(zL,"size",{get:function(){return uL(this).entries.length},configurable:!0,enumerable:!0}),gn(RL,oL),Pe({global:!0,constructor:!0,forced:!HD},{URLSearchParams:RL}),!HD&&M(fL)){var HL=w(pL.has),VL=w(pL.set),NL=function(t){if(D(t)){var e,n=t.body;if(Ke(n)===oL)return e=t.headers?new fL(t.headers):new fL,HL(e,"content-type")||VL(e,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),an(t,{body:v(0,je(n)),headers:v(0,e)})}return t};if(M(cL)&&Pe({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return cL(t,arguments.length>1?NL(arguments[1]):{})}}),M(hL)){var KL=function(t){return Zo(this,dL),new hL(t,arguments.length>1?NL(arguments[1]):{})};dL.constructor=KL,KL.prototype=dL,Pe({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:KL})}}var GL,jL={URLSearchParams:RL,getState:uL},$L=Fu.codeAt,WL=ie.set,ZL=ie.getterFor("URL"),qL=jL.URLSearchParams,XL=jL.getState,YL=o.URL,JL=o.TypeError,tP=o.parseInt,eP=Math.floor,nP=Math.pow,rP=w("".charAt),iP=w(/./.exec),aP=w([].join),oP=w(1..toString),sP=w([].pop),AP=w([].push),uP=w("".replace),lP=w([].shift),cP=w("".split),hP=w("".slice),fP=w("".toLowerCase),dP=w([].unshift),pP="Invalid scheme",vP="Invalid host",gP="Invalid port",mP=/[a-z]/i,yP=/[\d+-.a-z]/i,_P=/\d/,wP=/^0x/i,xP=/^[0-7]+$/,bP=/^\d+$/,BP=/^[\da-f]+$/i,kP=/[\0\t\n\r #%/:<>?@[\\\]^|]/,CP=/[\0\t\n\r #/:<>?@[\\\]^|]/,FP=/^[\u0000-\u0020]+/,EP=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,IP=/[\t\n\r]/g,UP=function(t){var e,n,r,i;if("number"==typeof t){for(e=[],n=0;n<4;n++)dP(e,t%256),t=eP(t/256);return aP(e,".")}if("object"==typeof t){for(e="",r=function(t){for(var e=null,n=1,r=null,i=0,a=0;a<8;a++)0!==t[a]?(i>n&&(e=r,n=i),r=null,i=0):(null===r&&(r=a),++i);return i>n&&(e=r,n=i),e}(t),n=0;n<8;n++)i&&0===t[n]||(i&&(i=!1),r===n?(e+=n?":":"::",i=!0):(e+=oP(t[n],16),n<7&&(e+=":")));return"["+e+"]"}return t},SP={},QP=As({},SP,{" ":1,'"':1,"<":1,">":1,"`":1}),TP=As({},QP,{"#":1,"?":1,"{":1,"}":1}),MP=As({},TP,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),DP=function(t,e){var n=$L(t,0);return n>32&&n<127&&!At(e,t)?t:encodeURIComponent(t)},LP={ftp:21,file:null,http:80,https:443,ws:80,wss:443},PP=function(t,e){var n;return 2===t.length&&iP(mP,rP(t,0))&&(":"===(n=rP(t,1))||!e&&"|"===n)},OP=function(t){var e;return t.length>1&&PP(hP(t,0,2))&&(2===t.length||"/"===(e=rP(t,2))||"\\"===e||"?"===e||"#"===e)},RP=function(t){return"."===t||"%2e"===fP(t)},zP={},HP={},VP={},NP={},KP={},GP={},jP={},$P={},WP={},ZP={},qP={},XP={},YP={},JP={},tO={},eO={},nO={},rO={},iO={},aO={},oO={},sO=function(t,e,n){var r,i,a,o=je(t);if(e){if(i=this.parse(o))throw new JL(i);this.searchParams=null}else{if(void 0!==n&&(r=new sO(n,!0)),i=this.parse(o,null,r))throw new JL(i);(a=XL(new qL)).bindURL(this),this.searchParams=a}};sO.prototype={type:"URL",parse:function(t,e,n){var r,i,a,o,s,A=this,u=e||zP,l=0,c="",h=!1,f=!1,d=!1;for(t=je(t),e||(A.scheme="",A.username="",A.password="",A.host=null,A.port=null,A.path=[],A.query=null,A.fragment=null,A.cannotBeABaseURL=!1,t=uP(t,FP,""),t=uP(t,EP,"$1")),t=uP(t,IP,""),r=pa(t);l<=r.length;){switch(i=r[l],u){case zP:if(!i||!iP(mP,i)){if(e)return pP;u=VP;continue}c+=fP(i),u=HP;break;case HP:if(i&&(iP(yP,i)||"+"===i||"-"===i||"."===i))c+=fP(i);else{if(":"!==i){if(e)return pP;c="",u=VP,l=0;continue}if(e&&(A.isSpecial()!==At(LP,c)||"file"===c&&(A.includesCredentials()||null!==A.port)||"file"===A.scheme&&!A.host))return;if(A.scheme=c,e)return void(A.isSpecial()&&LP[A.scheme]===A.port&&(A.port=null));c="","file"===A.scheme?u=JP:A.isSpecial()&&n&&n.scheme===A.scheme?u=NP:A.isSpecial()?u=$P:"/"===r[l+1]?(u=KP,l++):(A.cannotBeABaseURL=!0,AP(A.path,""),u=iO)}break;case VP:if(!n||n.cannotBeABaseURL&&"#"!==i)return pP;if(n.cannotBeABaseURL&&"#"===i){A.scheme=n.scheme,A.path=on(n.path),A.query=n.query,A.fragment="",A.cannotBeABaseURL=!0,u=oO;break}u="file"===n.scheme?JP:GP;continue;case NP:if("/"!==i||"/"!==r[l+1]){u=GP;continue}u=WP,l++;break;case KP:if("/"===i){u=ZP;break}u=rO;continue;case GP:if(A.scheme=n.scheme,i===GL)A.username=n.username,A.password=n.password,A.host=n.host,A.port=n.port,A.path=on(n.path),A.query=n.query;else if("/"===i||"\\"===i&&A.isSpecial())u=jP;else if("?"===i)A.username=n.username,A.password=n.password,A.host=n.host,A.port=n.port,A.path=on(n.path),A.query="",u=aO;else{if("#"!==i){A.username=n.username,A.password=n.password,A.host=n.host,A.port=n.port,A.path=on(n.path),A.path.length--,u=rO;continue}A.username=n.username,A.password=n.password,A.host=n.host,A.port=n.port,A.path=on(n.path),A.query=n.query,A.fragment="",u=oO}break;case jP:if(!A.isSpecial()||"/"!==i&&"\\"!==i){if("/"!==i){A.username=n.username,A.password=n.password,A.host=n.host,A.port=n.port,u=rO;continue}u=ZP}else u=WP;break;case $P:if(u=WP,"/"!==i||"/"!==rP(c,l+1))continue;l++;break;case WP:if("/"!==i&&"\\"!==i){u=ZP;continue}break;case ZP:if("@"===i){h&&(c="%40"+c),h=!0,a=pa(c);for(var p=0;p<a.length;p++){var v=a[p];if(":"!==v||d){var g=DP(v,MP);d?A.password+=g:A.username+=g}else d=!0}c=""}else if(i===GL||"/"===i||"?"===i||"#"===i||"\\"===i&&A.isSpecial()){if(h&&""===c)return"Invalid authority";l-=pa(c).length+1,c="",u=qP}else c+=i;break;case qP:case XP:if(e&&"file"===A.scheme){u=eO;continue}if(":"!==i||f){if(i===GL||"/"===i||"?"===i||"#"===i||"\\"===i&&A.isSpecial()){if(A.isSpecial()&&""===c)return vP;if(e&&""===c&&(A.includesCredentials()||null!==A.port))return;if(o=A.parseHost(c))return o;if(c="",u=nO,e)return;continue}"["===i?f=!0:"]"===i&&(f=!1),c+=i}else{if(""===c)return vP;if(o=A.parseHost(c))return o;if(c="",u=YP,e===XP)return}break;case YP:if(!iP(_P,i)){if(i===GL||"/"===i||"?"===i||"#"===i||"\\"===i&&A.isSpecial()||e){if(""!==c){var m=tP(c,10);if(m>65535)return gP;A.port=A.isSpecial()&&m===LP[A.scheme]?null:m,c=""}if(e)return;u=nO;continue}return gP}c+=i;break;case JP:if(A.scheme="file","/"===i||"\\"===i)u=tO;else{if(!n||"file"!==n.scheme){u=rO;continue}switch(i){case GL:A.host=n.host,A.path=on(n.path),A.query=n.query;break;case"?":A.host=n.host,A.path=on(n.path),A.query="",u=aO;break;case"#":A.host=n.host,A.path=on(n.path),A.query=n.query,A.fragment="",u=oO;break;default:OP(aP(on(r,l),""))||(A.host=n.host,A.path=on(n.path),A.shortenPath()),u=rO;continue}}break;case tO:if("/"===i||"\\"===i){u=eO;break}n&&"file"===n.scheme&&!OP(aP(on(r,l),""))&&(PP(n.path[0],!0)?AP(A.path,n.path[0]):A.host=n.host),u=rO;continue;case eO:if(i===GL||"/"===i||"\\"===i||"?"===i||"#"===i){if(!e&&PP(c))u=rO;else if(""===c){if(A.host="",e)return;u=nO}else{if(o=A.parseHost(c))return o;if("localhost"===A.host&&(A.host=""),e)return;c="",u=nO}continue}c+=i;break;case nO:if(A.isSpecial()){if(u=rO,"/"!==i&&"\\"!==i)continue}else if(e||"?"!==i)if(e||"#"!==i){if(i!==GL&&(u=rO,"/"!==i))continue}else A.fragment="",u=oO;else A.query="",u=aO;break;case rO:if(i===GL||"/"===i||"\\"===i&&A.isSpecial()||!e&&("?"===i||"#"===i)){if(".."===(s=fP(s=c))||"%2e."===s||".%2e"===s||"%2e%2e"===s?(A.shortenPath(),"/"===i||"\\"===i&&A.isSpecial()||AP(A.path,"")):RP(c)?"/"===i||"\\"===i&&A.isSpecial()||AP(A.path,""):("file"===A.scheme&&!A.path.length&&PP(c)&&(A.host&&(A.host=""),c=rP(c,0)+":"),AP(A.path,c)),c="","file"===A.scheme&&(i===GL||"?"===i||"#"===i))for(;A.path.length>1&&""===A.path[0];)lP(A.path);"?"===i?(A.query="",u=aO):"#"===i&&(A.fragment="",u=oO)}else c+=DP(i,TP);break;case iO:"?"===i?(A.query="",u=aO):"#"===i?(A.fragment="",u=oO):i!==GL&&(A.path[0]+=DP(i,SP));break;case aO:e||"#"!==i?i!==GL&&("'"===i&&A.isSpecial()?A.query+="%27":A.query+="#"===i?"%23":DP(i,SP)):(A.fragment="",u=oO);break;case oO:i!==GL&&(A.fragment+=DP(i,QP))}l++}},parseHost:function(t){var e,n,r;if("["===rP(t,0)){if("]"!==rP(t,t.length-1))return vP;if(e=function(t){var e,n,r,i,a,o,s,A=[0,0,0,0,0,0,0,0],u=0,l=null,c=0,h=function(){return rP(t,c)};if(":"===h()){if(":"!==rP(t,1))return;c+=2,l=++u}for(;h();){if(8===u)return;if(":"!==h()){for(e=n=0;n<4&&iP(BP,h());)e=16*e+tP(h(),16),c++,n++;if("."===h()){if(0===n)return;if(c-=n,u>6)return;for(r=0;h();){if(i=null,r>0){if(!("."===h()&&r<4))return;c++}if(!iP(_P,h()))return;for(;iP(_P,h());){if(a=tP(h(),10),null===i)i=a;else{if(0===i)return;i=10*i+a}if(i>255)return;c++}A[u]=256*A[u]+i,2!=++r&&4!==r||u++}if(4!==r)return;break}if(":"===h()){if(c++,!h())return}else if(h())return;A[u++]=e}else{if(null!==l)return;c++,l=++u}}if(null!==l)for(o=u-l,u=7;0!==u&&o>0;)s=A[u],A[u--]=A[l+o-1],A[l+--o]=s;else if(8!==u)return;return A}(hP(t,1,-1)),!e)return vP;this.host=e}else if(this.isSpecial()){if(t=function(t){var e,n,r=[],i=tL(JD(eL(t),KD,"."),".");for(e=0;e<i.length;e++)n=i[e],YD(r,$D(ND,n)?"xn--"+iL(n):n);return XD(r,".")}(t),iP(kP,t))return vP;if(e=function(t){var e,n,r,i,a,o,s,A=cP(t,".");if(A.length&&""===A[A.length-1]&&A.length--,(e=A.length)>4)return t;for(n=[],r=0;r<e;r++){if(""===(i=A[r]))return t;if(a=10,i.length>1&&"0"===rP(i,0)&&(a=iP(wP,i)?16:8,i=hP(i,8===a?1:2)),""===i)o=0;else{if(!iP(10===a?bP:8===a?xP:BP,i))return t;o=tP(i,a)}AP(n,o)}for(r=0;r<e;r++)if(o=n[r],r===e-1){if(o>=nP(256,5-e))return null}else if(o>255)return null;for(s=sP(n),r=0;r<n.length;r++)s+=n[r]*nP(256,3-r);return s}(t),null===e)return vP;this.host=e}else{if(iP(CP,t))return vP;for(e="",n=pa(t),r=0;r<n.length;r++)e+=DP(n[r],SP);this.host=e}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"===this.scheme},includesCredentials:function(){return""!==this.username||""!==this.password},isSpecial:function(){return At(LP,this.scheme)},shortenPath:function(){var t=this.path,e=t.length;!e||"file"===this.scheme&&1===e&&PP(t[0],!0)||t.length--},serialize:function(){var t=this,e=t.scheme,n=t.username,r=t.password,i=t.host,a=t.port,o=t.path,s=t.query,A=t.fragment,u=e+":";return null!==i?(u+="//",t.includesCredentials()&&(u+=n+(r?":"+r:"")+"@"),u+=UP(i),null!==a&&(u+=":"+a)):"file"===e&&(u+="//"),u+=t.cannotBeABaseURL?o[0]:o.length?"/"+aP(o,"/"):"",null!==s&&(u+="?"+s),null!==A&&(u+="#"+A),u},setHref:function(t){var e=this.parse(t);if(e)throw new JL(e);this.searchParams.update()},getOrigin:function(){var t=this.scheme,e=this.port;if("blob"===t)try{return new AO(t.path[0]).origin}catch(t){return"null"}return"file"!==t&&this.isSpecial()?t+"://"+UP(this.host)+(null!==e?":"+e:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(t){this.parse(je(t)+":",zP)},getUsername:function(){return this.username},setUsername:function(t){var e=pa(je(t));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<e.length;n++)this.username+=DP(e[n],MP)}},getPassword:function(){return this.password},setPassword:function(t){var e=pa(je(t));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<e.length;n++)this.password+=DP(e[n],MP)}},getHost:function(){var t=this.host,e=this.port;return null===t?"":null===e?UP(t):UP(t)+":"+e},setHost:function(t){this.cannotBeABaseURL||this.parse(t,qP)},getHostname:function(){var t=this.host;return null===t?"":UP(t)},setHostname:function(t){this.cannotBeABaseURL||this.parse(t,XP)},getPort:function(){var t=this.port;return null===t?"":je(t)},setPort:function(t){this.cannotHaveUsernamePasswordPort()||(""===(t=je(t))?this.port=null:this.parse(t,YP))},getPathname:function(){var t=this.path;return this.cannotBeABaseURL?t[0]:t.length?"/"+aP(t,"/"):""},setPathname:function(t){this.cannotBeABaseURL||(this.path=[],this.parse(t,nO))},getSearch:function(){var t=this.query;return t?"?"+t:""},setSearch:function(t){""===(t=je(t))?this.query=null:("?"===rP(t,0)&&(t=hP(t,1)),this.query="",this.parse(t,aO)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var t=this.fragment;return t?"#"+t:""},setHash:function(t){""!==(t=je(t))?("#"===rP(t,0)&&(t=hP(t,1)),this.fragment="",this.parse(t,oO)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var AO=function(t){var e=Zo(this,uO),n=gs(arguments.length,1)>1?arguments[1]:void 0,r=WL(e,new sO(t,!1,n));A||(e.href=r.serialize(),e.origin=r.getOrigin(),e.protocol=r.getProtocol(),e.username=r.getUsername(),e.password=r.getPassword(),e.host=r.getHost(),e.hostname=r.getHostname(),e.port=r.getPort(),e.pathname=r.getPathname(),e.search=r.getSearch(),e.searchParams=r.getSearchParams(),e.hash=r.getHash())},uO=AO.prototype,lO=function(t,e){return{get:function(){return ZL(this)[t]()},set:e&&function(t){return ZL(this)[e](t)},configurable:!0,enumerable:!0}};if(A&&(ln(uO,"href",lO("serialize","setHref")),ln(uO,"origin",lO("getOrigin")),ln(uO,"protocol",lO("getProtocol","setProtocol")),ln(uO,"username",lO("getUsername","setUsername")),ln(uO,"password",lO("getPassword","setPassword")),ln(uO,"host",lO("getHost","setHost")),ln(uO,"hostname",lO("getHostname","setHostname")),ln(uO,"port",lO("getPort","setPort")),ln(uO,"pathname",lO("getPathname","setPathname")),ln(uO,"search",lO("getSearch","setSearch")),ln(uO,"searchParams",lO("getSearchParams")),ln(uO,"hash",lO("getHash","setHash"))),oe(uO,"toJSON",(function(){return ZL(this).serialize()}),{enumerable:!0}),oe(uO,"toString",(function(){return ZL(this).serialize()}),{enumerable:!0}),YL){var cO=YL.createObjectURL,hO=YL.revokeObjectURL;cO&&oe(AO,"createObjectURL",_n(cO,YL)),hO&&oe(AO,"revokeObjectURL",_n(hO,YL))}function fO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function dO(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fO(Object(n),!0).forEach((function(e){hi(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function pO(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return vO(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vO(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function vO(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function gO(t,e,n){return e=ui(e),Ai(t,mO()?Reflect.construct(e,n||[],ui(t).constructor):e.apply(t,n))}function mO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(mO=function(){return!!t})()}function yO(t,e,n){return e=ui(e),Ai(t,_O()?Reflect.construct(e,n||[],ui(t).constructor):e.apply(t,n))}function _O(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_O=function(){return!!t})()}function wO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function xO(t){Md(t,"svelte-1g0va6n","svelte-scroller-foreground{pointer-events:none !important}svelte-scroller-foreground section div{pointer-events:all !important}.chart.svelte-1g0va6n{margin-top:45px;width:calc(100% - 5px)}")}function bO(t){var e;return{c:function(){(e=Od("strong")).textContent="Scroll to begin"},m:function(t,n){Dd(t,e,n)},p:ad,d:function(t){t&&Ld(e)}}}function BO(t){var e,n,r,i,a,o,s;return o=new Sg({props:{color:"black",animation:HO,$$slots:{default:[bO]},$$scope:{ctx:t}}}),{c:function(){(e=Od("h1")).textContent="The last days of the Black-veined white butterfly in Britain",n=Hd(),(r=Od("div")).innerHTML='<p class="text-big"><strong>A genomic history of the the Black-veined white butterfly in Britain from its arrival to its demise in the early twentieth century</strong></p>',i=Hd(),a=Od("div"),xp(o.$$.fragment),$d(e,"margin-top","-100px"),$d(e,"margin-left","0px"),$d(r,"margin-top","5px"),$d(r,"background-color","#fff"),$d(r,"opacity","0.6"),$d(r,"z-index","-1"),$d(r,"margin-left","0px"),$d(a,"margin-top","60px"),$d(a,"margin-left","0px")},m:function(t,A){Dd(t,e,A),Dd(t,n,A),Dd(t,r,A),Dd(t,i,A),Dd(t,a,A),bp(o,a,null),s=!0},p:function(t,e){var n={};16384&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i:function(t){s||(yp(o.$$.fragment,t),s=!0)},o:function(t){_p(o.$$.fragment,t),s=!1},d:function(t){t&&Ld(e),t&&Ld(n),t&&Ld(r),t&&Ld(i),t&&Ld(a),Bp(o)}}}function kO(t){var e,n,r,i,a,o,s;return{c:function(){(e=Od("p")).innerHTML="<strong>By</strong>: Saad Arif",n=Hd(),(r=Od("p")).innerHTML="<strong>Cover Illustration</strong>: Lizzie Harper",i=Hd(),(a=Od("p")).innerHTML="<strong>Based on data from:</strong>",o=Hd(),(s=Od("p")).innerHTML="<small>The last days of Aporia crataegi (L.) in Britain: evaluating genomic erosion in an extirpated butterfly. (2024.)\nRebecca Whitla, Korneel Hens, James Hogan, Geoff Martin, Casper Breuker, Timothy G. Shreeve, Saad Arif\nbioRxiv 2023.12.19.572305; doi: https://doi.org/10.1101/2023.12.19.572305</small>",Kd(e,"class","text-small"),Kd(r,"class","text-small"),Kd(a,"class","text-small"),Kd(s,"class","text-small")},m:function(t,A){Dd(t,e,A),Dd(t,n,A),Dd(t,r,A),Dd(t,i,A),Dd(t,a,A),Dd(t,o,A),Dd(t,s,A)},p:ad,d:function(t){t&&Ld(e),t&&Ld(n),t&&Ld(r),t&&Ld(i),t&&Ld(a),t&&Ld(o),t&&Ld(s)}}}function CO(t){var e,n,r,i,a;return{c:function(){(e=Od("h2")).textContent="A butterfly disappearance, museums and genomics",n=Hd(),(r=Od("p")).innerHTML="The Black-veined white butterfly (<em>Aporia crataegi</em>) is a large butterfly that is common and widespread in the northern hemisphere from Europe \n\t\tto Japan. However, in some places it is in decline and has completely disappeared from the Netherlands, Czechia, and South Korea [Refs]. \n\t\tIt had been recorded in Britain as early as 1667 [REF] but went extinct in the early twentieth century. Prior to its extirpation in Britain, it could be found in southern England and Wales.\n\t\tWhy did the Black-veined white disappear from Britain? Numerous hypothesis have been suggested, including a run of unsually &quot;wet&quot; Autumns, pathogen infection, and predation.\n\t\tGiven that this butterfly disappeared from Britain in the early twentieth century, it is difficult to pinpoint the exact cause of its disappearence. Over the years, there have been various attempts\n\t\tto reintroduce this species to Britain but none have been successful thus far.",i=Hd(),(a=Od("p")).innerHTML="Museums contains large collections of butterflies, some from as early as the 18th century, collected by scientists and butterfly enthusiasts.\n\t   Modern advances in genomics now allow us to interrogate the genomes of these long-dead individuals. To peer into the history of the Black-veined white in Britian, we extracted DNA from musueum specimens dating from the mid-19<sup>th</sup> \n\t   to the early 20<sup>th</sup> century. We applied genomic tools to build a demographic history of this species in Britain, from its arrival to its eventual demise. \n\t   These result also give a snapshot of its &quot;genomic health&quot; around the time of its disappearance,\n\t   which may be useful in understanding the extinction process and aid in the conservation of extant species or populations of insects."},m:function(t,o){Dd(t,e,o),Dd(t,n,o),Dd(t,r,o),Dd(t,i,o),Dd(t,a,o)},p:ad,d:function(t){t&&Ld(e),t&&Ld(n),t&&Ld(r),t&&Ld(i),t&&Ld(a)}}}function FO(t){var e,n,r;return(n=new QD({props:{height:"calc(100vh - 150px)",data:t[1].psmc.Netimes,colors:t[2]?["lightgrey"]:["#003f5c","#ffa600"],legend:!t[2],lineWidth:5,padding:{top:0,bottom:20,left:0,right:0},area:!1,xKey:VO,yKey:NO,zKey:KO,labelKey:"species",xScale:"log",xSuffix:"  years ago",xTicks:[1e3,1e4,5e4,1e5,25e4],highlighted:t[4],colorHighlight:"#999",labels:!0,hover:!0,hovered:t[3],colorHover:"pink",animation:HO}})).$on("hover",t[5]),{c:function(){e=Od("div"),xp(n.$$.fragment),Kd(e,"class","chart svelte-1g0va6n")},m:function(t,i){Dd(t,e,i),bp(n,e,null),r=!0},p:function(t,e){var r={};2&e&&(r.data=t[1].psmc.Netimes),4&e&&(r.colors=t[2]?["lightgrey"]:["#003f5c","#ffa600"]),4&e&&(r.legend=!t[2]),16&e&&(r.highlighted=t[4]),8&e&&(r.hovered=t[3]),n.$set(r)},i:function(t){r||(yp(n.$$.fragment,t),r=!0)},o:function(t){_p(n.$$.fragment,t),r=!1},d:function(t){t&&Ld(e),Bp(n)}}}function EO(t){var e,n,r,i,a=t[1].psmc.Netimes&&FO(t);return{c:function(){e=Od("div"),n=Od("figure"),r=Od("div"),a&&a.c(),Kd(r,"class","col-wide height-full"),Kd(e,"slot","background")},m:function(t,o){Dd(t,e,o),Td(e,n),Td(n,r),a&&a.m(r,null),i=!0},p:function(t,e){t[1].psmc.Netimes?a?(a.p(t,e),2&e&&yp(a,1)):((a=FO(t)).c(),yp(a,1),a.m(r,null)):a&&(gp(),_p(a,1,1,(function(){a=null})),mp())},i:function(t){i||(yp(a),i=!0)},o:function(t){_p(a),i=!1},d:function(t){t&&Ld(e),a&&a.d()}}}function IO(t){var e;return{c:function(){e=zd("highlighted line")},m:function(t,n){Dd(t,e,n)},d:function(t){t&&Ld(e)}}}function UO(t){var e;return{c:function(){e=zd("highlighted line")},m:function(t,n){Dd(t,e,n)},d:function(t){t&&Ld(e)}}}function SO(t){var e;return{c:function(){e=zd("British")},m:function(t,n){Dd(t,e,n)},d:function(t){t&&Ld(e)}}}function QO(t){var e;return{c:function(){e=zd("European")},m:function(t,n){Dd(t,e,n)},d:function(t){t&&Ld(e)}}}function TO(t){var e;return{c:function(){e=zd("Britain")},m:function(t,n){Dd(t,e,n)},d:function(t){t&&Ld(e)}}}function MO(t){var e,n,r,i,a,o,s,A,u,l,c,h,f,d,p,v,g,m,y,_,w,x,b,B,k,C,F,E,I,U,S,Q,T,M,D,L,P,O,R,z;return A=new mm({props:{color:"#999",$$slots:{default:[IO]},$$scope:{ctx:t}}}),g=new mm({props:{color:"#999",$$slots:{default:[UO]},$$scope:{ctx:t}}}),Q=new mm({props:{color:"#003f5c",$$slots:{default:[SO]},$$scope:{ctx:t}}}),M=new mm({props:{color:"#ffa600",$$slots:{default:[QO]},$$scope:{ctx:t}}}),O=new mm({props:{color:"#003f5c",$$slots:{default:[TO]},$$scope:{ctx:t}}}),{c:function(){e=Od("div"),(n=Od("section")).innerHTML='<div class="col-medium"><p>This plot shows the <strong>effective population size</strong> (y-axis) over <strong>time</strong> in years (x-axis). \n\t\t\t\t\tSmall values on the x-axis represent time <strong>closer to the present</strong>! Higher values on the x-axis represent \n\t\t\t\t\thigher <strong>genetic diversity</strong> and thus, higher<strong>population size</strong></p></div>',r=Hd(),i=Od("section"),a=Od("div"),o=Od("p"),s=zd("The "),xp(A.$$.fragment),u=zd(" is the demographic reconstruction of a single individual from northwestern\n\t\t\t\t\t "),(l=Od("strong")).textContent="France",c=zd(" collected in the early 1900s. Its population size is low for most of the last 500,000 years but showing\n\t\t\t\t\t a small peak at roughly 125,000 years ago, corresponding to the penultimate interglacial period (the Eemian interglacial). The population\n\t\t\t\t\t then contracts up till around 12,000 years ago. This time corresponds to the end of the last glacial maximum (LGM). At this point, species of all kinds\n\t\t\t\t\t expanded all over europe from their warm southern refugia and we find the signs of an exponential population increase in the genome of this \n\t\t\t\t\t Black-veined white butterfly from France."),h=Hd(),f=Od("section"),d=Od("div"),p=Od("p"),v=zd("This "),xp(g.$$.fragment),m=zd(" is the demographic reconstruction of a single individual from kent county in eastern\n\t\t\t\t\t "),(y=Od("strong")).textContent="Great Britain",_=zd(" collected in the 1860s. For most of its history, it follows a similar trajectory to the French butterfly, however,\n\t\t\t\t\t it shows no signs of population increase but rather a population "),(w=Od("strong")).textContent="decrease",x=zd(" at the end of the LGM."),b=Hd(),(B=Od("p")).textContent="What happened? This decrease in population size at the end of the LGM is exactly what we would expect to see if butterflies began colonizing the \n\t\t\t\t\tBritish Isles at this time. The British Isles would have been founded by a relatively small number of Black-veined white to those that lived on the mainland.",k=Hd(),C=Od("section"),F=Od("div"),E=Od("p"),I=zd("These demographic recontructions tell us two important things: "),(U=Od("strong")).textContent="(i)",S=Hd(),xp(Q.$$.fragment),T=zd(" Black-veined white have a \n\t\t\t\t\tdistinct demographic history compared to "),xp(M.$$.fragment),D=zd(". Hence, the British black-veined white were long\n\t\t\t\t\tterm residents in the UK, rather than recent migrants\n\t\t\t\t"),(L=Od("strong")).textContent="(ii)",P=zd(" Black-veined white colonizing "),xp(O.$$.fragment),R=zd(", showed reduced genetic diversity,\n\t\t\t\t\t\t presumably as a result of colonization by a small number of indviduals"),Kd(n,"data-id","chart01"),Kd(a,"class","col-medium"),Kd(i,"data-id","chart02"),Kd(d,"class","col-medium"),Kd(f,"data-id","chart03"),Kd(F,"class","col-medium"),Kd(C,"data-id","chart04"),Kd(e,"slot","foreground")},m:function(t,H){Dd(t,e,H),Td(e,n),Td(e,r),Td(e,i),Td(i,a),Td(a,o),Td(o,s),bp(A,o,null),Td(o,u),Td(o,l),Td(o,c),Td(e,h),Td(e,f),Td(f,d),Td(d,p),Td(p,v),bp(g,p,null),Td(p,m),Td(p,y),Td(p,_),Td(p,w),Td(p,x),Td(d,b),Td(d,B),Td(e,k),Td(e,C),Td(C,F),Td(F,E),Td(E,I),Td(E,U),Td(E,S),bp(Q,E,null),Td(E,T),bp(M,E,null),Td(E,D),Td(E,L),Td(E,P),bp(O,E,null),Td(E,R),z=!0},p:function(t,e){var n={};16384&e&&(n.$$scope={dirty:e,ctx:t}),A.$set(n);var r={};16384&e&&(r.$$scope={dirty:e,ctx:t}),g.$set(r);var i={};16384&e&&(i.$$scope={dirty:e,ctx:t}),Q.$set(i);var a={};16384&e&&(a.$$scope={dirty:e,ctx:t}),M.$set(a);var o={};16384&e&&(o.$$scope={dirty:e,ctx:t}),O.$set(o)},i:function(t){z||(yp(A.$$.fragment,t),yp(g.$$.fragment,t),yp(Q.$$.fragment,t),yp(M.$$.fragment,t),yp(O.$$.fragment,t),z=!0)},o:function(t){_p(A.$$.fragment,t),_p(g.$$.fragment,t),_p(Q.$$.fragment,t),_p(M.$$.fragment,t),_p(O.$$.fragment,t),z=!1},d:function(t){t&&Ld(e),Bp(A),Bp(g),Bp(Q),Bp(M),Bp(O)}}}function DO(t){var e;return{c:function(){(e=Od("div")).innerHTML='<figure><div class="col-full height-full" style="background-image: url(&quot;./img/BVW_museum1.png&quot;); background-size: cover;"></div></figure>',Kd(e,"slot","background")},m:function(t,n){Dd(t,e,n)},p:ad,d:function(t){t&&Ld(e)}}}function LO(t){var e;return{c:function(){(e=Od("div")).innerHTML="<section><div><p>This is one section</p></div></section> \n\t\t\t<section><div><p>This is a another section</p></div></section>",Kd(e,"slot","foreground")},m:function(t,n){Dd(t,e,n)},p:ad,d:function(t){t&&Ld(e)}}}function PO(t){var e,n,r;return{c:function(){(e=Od("h2")).textContent="How to use this template",n=Hd(),(r=Od("p")).innerHTML='You can find the source code and documentation on how to use this template in <a href="https://github.com/ONSvisual/svelte-scrolly/" target="_blank">this Github repo</a>.'},m:function(t,i){Dd(t,e,i),Dd(t,n,i),Dd(t,r,i)},p:ad,d:function(t){t&&Ld(e),t&&Ld(n),t&&Ld(r)}}}function OO(t){var e,n,r,i,a,o,s,A,u,l,c,h,f,d,p,v,g,m,y,_,w,x,b,B,k;function C(e){t[6](e)}e=new km({}),r=new Lv({props:{bgfixed:!1,theme:"light",center:!1,short:!0,$$slots:{default:[BO]},$$scope:{ctx:t}}}),a=new fg({props:{theme:"light",short:!0,wide:!0,center:!0,$$slots:{default:[kO]},$$scope:{ctx:t}}}),s=new wg({}),u=new Kv({props:{$$slots:{default:[CO]},$$scope:{ctx:t}}}),c=new wg({}),f=new fg({props:{bgimage:"./img/BVW_museum1.png",theme:"lightblue",short:!0,wide:!0,center:!1}}),p=new wg({});var F={threshold:zO,splitscreen:!0,$$slots:{foreground:[MO],background:[EO]},$$scope:{ctx:t}};return void 0!==t[0].chart&&(F.id=t[0].chart),g=new sg({props:F}),ip.push((function(){return wp(g,"id",C)})),_=new sg({props:{threshold:zO,$$slots:{foreground:[LO],background:[DO]},$$scope:{ctx:t}}}),x=new Kv({props:{$$slots:{default:[PO]},$$scope:{ctx:t}}}),B=new fg({props:{bgimage:"./img/output.png",theme:"lightblue",short:!0,wide:!0,center:!1}}),{c:function(){xp(e.$$.fragment),n=Hd(),xp(r.$$.fragment),i=Hd(),xp(a.$$.fragment),o=Hd(),xp(s.$$.fragment),A=Hd(),xp(u.$$.fragment),l=Hd(),xp(c.$$.fragment),h=Hd(),xp(f.$$.fragment),d=Hd(),xp(p.$$.fragment),v=Hd(),xp(g.$$.fragment),y=Hd(),xp(_.$$.fragment),w=Hd(),xp(x.$$.fragment),b=Hd(),xp(B.$$.fragment)},m:function(t,m){bp(e,t,m),Dd(t,n,m),bp(r,t,m),Dd(t,i,m),bp(a,t,m),Dd(t,o,m),bp(s,t,m),Dd(t,A,m),bp(u,t,m),Dd(t,l,m),bp(c,t,m),Dd(t,h,m),bp(f,t,m),Dd(t,d,m),bp(p,t,m),Dd(t,v,m),bp(g,t,m),Dd(t,y,m),bp(_,t,m),Dd(t,w,m),bp(x,t,m),Dd(t,b,m),bp(B,t,m),k=!0},p:function(t,e){var n=gi(e,1)[0],i={};16384&n&&(i.$$scope={dirty:n,ctx:t}),r.$set(i);var o={};16384&n&&(o.$$scope={dirty:n,ctx:t}),a.$set(o);var s={};16384&n&&(s.$$scope={dirty:n,ctx:t}),u.$set(s);var A={};16414&n&&(A.$$scope={dirty:n,ctx:t}),!m&&1&n&&(m=!0,A.id=t[0].chart,lp((function(){return m=!1}))),g.$set(A);var l={};16384&n&&(l.$$scope={dirty:n,ctx:t}),_.$set(l);var c={};16384&n&&(c.$$scope={dirty:n,ctx:t}),x.$set(c)},i:function(t){k||(yp(e.$$.fragment,t),yp(r.$$.fragment,t),yp(a.$$.fragment,t),yp(s.$$.fragment,t),yp(u.$$.fragment,t),yp(c.$$.fragment,t),yp(f.$$.fragment,t),yp(p.$$.fragment,t),yp(g.$$.fragment,t),yp(_.$$.fragment,t),yp(x.$$.fragment,t),yp(B.$$.fragment,t),k=!0)},o:function(t){_p(e.$$.fragment,t),_p(r.$$.fragment,t),_p(a.$$.fragment,t),_p(s.$$.fragment,t),_p(u.$$.fragment,t),_p(c.$$.fragment,t),_p(f.$$.fragment,t),_p(p.$$.fragment,t),_p(g.$$.fragment,t),_p(_.$$.fragment,t),_p(x.$$.fragment,t),_p(B.$$.fragment,t),k=!1},d:function(t){Bp(e,t),t&&Ld(n),Bp(r,t),t&&Ld(i),Bp(a,t),t&&Ld(o),Bp(s,t),t&&Ld(A),Bp(u,t),t&&Ld(l),Bp(c,t),t&&Ld(h),Bp(f,t),t&&Ld(d),Bp(p,t),t&&Ld(v),Bp(g,t),t&&Ld(y),Bp(_,t),t&&Ld(w),Bp(x,t),t&&Ld(b),Bp(B,t)}}}gn(AO,"URL"),Pe({global:!0,constructor:!0,forced:!HD,sham:!A},{URL:AO}),Pe({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return c(URL.prototype.toString,this)}}),e((function(t,e){t.exports=function(){var t,e,n;function r(r,i){if(t)if(e){var a="var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk);",o={};t(o),n=i(o),"undefined"!=typeof window&&(n.workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"})))}else e=i;else t=i}return r(["exports"],(function(t){function e(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{A(r.next(t))}catch(t){a(t)}}function s(t){try{A(r.throw(t))}catch(t){a(t)}}function A(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}A((r=r.apply(t,e||[])).next())}))}function n(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}"function"==typeof SuppressedError&&SuppressedError;var r=i;function i(t,e){this.x=t,this.y=e}i.prototype={clone:function(){return new i(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=r,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-r*(this.y-e.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(t){return t instanceof i?t:Array.isArray(t)?new i(t[0],t[1]):t};var a=n(r),o=s;function s(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=n,this.p2y=r}s.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(void 0===e&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var n=t,r=0;r<8;r++){var i=this.sampleCurveX(n)-t;if(Math.abs(i)<e)return n;var a=this.sampleCurveDerivativeX(n);if(Math.abs(a)<1e-6)break;n-=i/a}var o=0,s=1;for(n=t,r=0;r<20&&(i=this.sampleCurveX(n),!(Math.abs(i-t)<e));r++)t>i?o=n:s=n,n=.5*(s-o)+o;return n},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}};var A,u,l=n(o);function c(){return null==A&&(A="undefined"!=typeof OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),A}function h(){if(null==u&&(u=!1,c())){var t=5,e=new OffscreenCanvas(t,t).getContext("2d",{willReadFrequently:!0});if(e){for(var n=0;n<t*t;n++){var r=4*n;e.fillStyle="rgb(".concat(r,",").concat(r+1,",").concat(r+2,")"),e.fillRect(n%t,Math.floor(n/t),1,1)}for(var i=e.getImageData(0,0,t,t).data,a=0;a<t*t*4;a++)if(a%4!=3&&i[a]!==a){u=!0;break}}}return u||!1}function f(t,e,n,r){var i=new l(t,e,n,r);return function(t){return i.solve(t)}}var d=f(.25,.1,.25,1);function p(t,e,n){return Math.min(n,Math.max(e,t))}function v(t,e,n){var r=n-e,i=((t-e)%r+r)%r+e;return i===e?n:i}function g(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];for(var s in o)t[s]=o[s]}return t}var m=1;function y(t,e,n){var r={};for(var i in t)r[i]=e.call(n||this,t[i],i,t);return r}function _(t,e,n){var r={};for(var i in t)e.call(n||this,t[i],i,t)&&(r[i]=t[i]);return r}function w(t){return Array.isArray(t)?t.map(w):"object"==ni(t)&&t?y(t,w):t}var x={};function b(t){x[t]||("undefined"!=typeof console&&console.warn(t),x[t]=!0)}function B(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function k(t){for(var e,n,r=0,i=0,a=t.length,o=a-1;i<a;o=i++)e=t[i],r+=((n=t[o]).x-e.x)*(e.y+n.y);return r}function C(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}var F=null;function E(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap}var I,U,S,Q,T="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function M(t,n,r,i,a){return e(this,void 0,void 0,Qp.mark((function e(){var o,s,A,u,l,c;return Qp.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!=typeof VideoFrame){e.next=2;break}throw new Error("VideoFrame not supported");case 2:if(o=new VideoFrame(t,{timestamp:0}),e.prev=3,(s=null==o?void 0:o.format)&&(s.startsWith("BGR")||s.startsWith("RGB"))){e.next=7;break}throw new Error("Unrecognized format ".concat(s));case 7:return A=s.startsWith("BGR"),u=new Uint8ClampedArray(i*a*4),e.next=10,o.copyTo(u,function(t,e,n,r,i){var a=4*Math.max(-e,0),o=(Math.max(0,n)-n)*r*4+a,s=4*r,A=Math.max(0,e),u=Math.max(0,n);return{rect:{x:A,y:u,width:Math.min(t.width,e+r)-A,height:Math.min(t.height,n+i)-u},layout:[{offset:o,stride:s}]}}(t,n,r,i,a));case 10:if(!A){e.next=12;break}for(l=0;l<u.length;l+=4)c=u[l],u[l]=u[l+2],u[l+2]=c;case 12:return e.abrupt("return",u);case 13:return e.prev=13,o.close(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[3,,13,16]])})))}var D={now:"undefined"!=typeof performance&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame:function(t){var e=requestAnimationFrame(t);return{cancel:function(){return cancelAnimationFrame(e)}}},getImageData:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.getImageCanvasContext(t).getImageData(-e,-e,t.width+2*e,t.height+2*e)},getImageCanvasContext:function(t){var e=window.document.createElement("canvas"),n=e.getContext("2d",{willReadFrequently:!0});if(!n)throw new Error("failed to create canvas 2d context");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0,t.width,t.height),n},resolveURL:function(t){return S||(S=document.createElement("a")),S.href=t,S.href},hardwareConcurrency:"undefined"!=typeof navigator&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==Q&&(Q=matchMedia("(prefers-reduced-motion: reduce)")),Q.matches)}},L={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""},P=function(t){function e(t,n,r,i){var a;return oi(this,e),(a=gO(this,e,["AJAXError: ".concat(n," (").concat(t,"): ").concat(r)])).status=t,a.statusText=n,a.url=r,a.body=i,a}return ci(e,t),ai(e)}(Ti(Error)),O=C()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===window.location.protocol?window.parent:window).location.href},R=function(t){return L.REGISTERED_PROTOCOLS[t.substring(0,t.indexOf("://"))]};function z(t,e){var n=new AbortController,r=new Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,cache:t.cache,referrer:O(),signal:n.signal}),i=!1,a=!1;return"json"===t.type&&r.headers.set("Accept","application/json"),a||fetch(r).then((function(n){return n.ok?function(n){("arrayBuffer"===t.type||"image"===t.type?n.arrayBuffer():"json"===t.type?n.json():n.text()).then((function(t){a||(i=!0,e(null,t,n.headers.get("Cache-Control"),n.headers.get("Expires")))})).catch((function(t){a||e(new Error(t.message))}))}(n):n.blob().then((function(r){return e(new P(n.status,n.statusText,t.url,r))}))})).catch((function(t){20!==t.code&&e(new Error(t.message))})),{cancel:function(){a=!0,i||n.abort()}}}var H=function(t,e){if(/:\/\//.test(t.url)&&!/^https?:|^file:/.test(t.url)){if(C()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e);if(!C())return(R(t.url)||z)(t,e)}if(!(/^file:/.test(n=t.url)||/^file:/.test(O())&&!/^\w+:/.test(n))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return z(t,e);if(C()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var n;return function(t,e){var n=new XMLHttpRequest;for(var r in n.open(t.method||"GET",t.url,!0),"arrayBuffer"!==t.type&&"image"!==t.type||(n.responseType="arraybuffer"),t.headers)n.setRequestHeader(r,t.headers[r]);return"json"===t.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===t.credentials,n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){var r=n.response;if("json"===t.type)try{r=JSON.parse(n.response)}catch(t){return e(t)}e(null,r,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else{var i=new Blob([n.response],{type:n.getResponseHeader("Content-Type")});e(new P(n.status,n.statusText,t.url,i))}},n.send(t.body),{cancel:function(){return n.abort()}}}(t,e)},V=function(t,e){return H(g(t,{type:"arrayBuffer"}),e)};function N(t){if(!t||t.indexOf("://")<=0||0===t.indexOf("data:image/")||0===t.indexOf("blob:"))return!0;var e=new URL(t),n=window.location;return e.protocol===n.protocol&&e.host===n.host}function K(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function G(t,e,n){if(n&&n[t]){var r=n[t].indexOf(e);-1!==r&&n[t].splice(r,1)}}var j=ai((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};oi(this,t),g(this,n),this.type=e})),$=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return oi(this,e),gO(this,e,["error",g({error:t},n)])}return ci(e,t),ai(e)}(j),W=function(){function t(){oi(this,t)}return ai(t,[{key:"on",value:function(t,e){return this._listeners=this._listeners||{},K(t,e,this._listeners),this}},{key:"off",value:function(t,e){return G(t,e,this._listeners),G(t,e,this._oneTimeListeners),this}},{key:"once",value:function(t,e){var n=this;return e?(this._oneTimeListeners=this._oneTimeListeners||{},K(t,e,this._oneTimeListeners),this):new Promise((function(e){return n.once(t,e)}))}},{key:"fire",value:function(t,e){"string"==typeof t&&(t=new j(t,e||{}));var n=t.type;if(this.listens(n)){t.target=this;var r,i=pO(this._listeners&&this._listeners[n]?this._listeners[n].slice():[]);try{for(i.s();!(r=i.n()).done;)r.value.call(this,t)}catch(t){i.e(t)}finally{i.f()}var a,o=pO(this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[]);try{for(o.s();!(a=o.n()).done;){var s=a.value;G(n,s,this._oneTimeListeners),s.call(this,t)}}catch(t){o.e(t)}finally{o.f()}var A=this._eventedParent;A&&(g(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),A.fire(t))}else t instanceof $&&console.error(t.error);return this}},{key:"listens",value:function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}},{key:"setEventedParent",value:function(t,e){return this._eventedParent=t,this._eventedParentData=e,this}}])}(),Z={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},q=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function X(t,e){var n={};for(var r in t)"ref"!==r&&(n[r]=t[r]);return q.forEach((function(t){t in e&&(n[t]=e[t])})),n}function Y(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!Y(t[n],e[n]))return!1;return!0}if("object"==ni(t)&&null!==t&&null!==e){if("object"!=ni(e))return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var r in t)if(!Y(t[r],e[r]))return!1;return!0}return t===e}var J={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function tt(t,e,n){n.push({command:J.addSource,args:[t,e[t]]})}function et(t,e,n){e.push({command:J.removeSource,args:[t]}),n[t]=!0}function nt(t,e,n,r){et(t,n,r),tt(t,e,n)}function rt(t,e,n){var r;for(r in t[n])if(Object.prototype.hasOwnProperty.call(t[n],r)&&"data"!==r&&!Y(t[n][r],e[n][r]))return!1;for(r in e[n])if(Object.prototype.hasOwnProperty.call(e[n],r)&&"data"!==r&&!Y(t[n][r],e[n][r]))return!1;return!0}function it(t,e,n,r,i,a){var o;for(o in e=e||{},t=t||{})Object.prototype.hasOwnProperty.call(t,o)&&(Y(t[o],e[o])||n.push({command:a,args:[r,o,e[o],i]}));for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&!Object.prototype.hasOwnProperty.call(t,o)&&(Y(t[o],e[o])||n.push({command:a,args:[r,o,e[o],i]}))}function at(t){return t.id}function ot(t,e){return t[e.id]=e,t}var st=ai((function t(e,n,r,i){oi(this,t),this.message=(e?"".concat(e,": "):"")+r,i&&(this.identifier=i),null!=n&&n.__line__&&(this.line=n.__line__)}));function At(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];for(var s in o)t[s]=o[s]}return t}var ut=function(t){function e(t,n){var r;return oi(this,e),(r=gO(this,e,[n])).message=n,r.key=t,r}return ci(e,t),ai(e)}(Ti(Error)),lt=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];oi(this,t),this.parent=e,this.bindings={};var r,i=pO(n);try{for(i.s();!(r=i.n()).done;){var a=gi(r.value,2),o=a[0],s=a[1];this.bindings[o]=s}}catch(t){i.e(t)}finally{i.f()}}return ai(t,[{key:"concat",value:function(e){return new t(this,e)}},{key:"get",value:function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error("".concat(t," not found in scope."))}},{key:"has",value:function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}])}(),ct={kind:"null"},ht={kind:"number"},ft={kind:"string"},dt={kind:"boolean"},pt={kind:"color"},vt={kind:"object"},gt={kind:"value"},mt={kind:"collator"},yt={kind:"formatted"},_t={kind:"padding"},wt={kind:"resolvedImage"},xt={kind:"variableAnchorOffsetCollection"};function bt(t,e){return{kind:"array",itemType:t,N:e}}function Bt(t){if("array"===t.kind){var e=Bt(t.itemType);return"number"==typeof t.N?"array<".concat(e,", ").concat(t.N,">"):"value"===t.itemType.kind?"array":"array<".concat(e,">")}return t.kind}var kt=[ct,ht,ft,dt,pt,yt,vt,bt(gt),_t,wt,xt];function Ct(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Ct(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var n=0,r=kt;n<r.length;n++)if(!Ct(r[n],e))return null}return"Expected ".concat(Bt(t)," but found ").concat(Bt(e)," instead.")}function Ft(t,e){return e.some((function(e){return e.kind===t.kind}))}function Et(t,e){return e.some((function(e){return"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==ni(t):e===ni(t)}))}function It(t,e){return"array"===t.kind&&"array"===e.kind?t.itemType.kind===e.itemType.kind&&"number"==typeof t.N:t.kind===e.kind}var Ut=.96422,St=.82521,Qt=4/29,Tt=6/29,Mt=3*Tt*Tt,Dt=Tt*Tt*Tt,Lt=Math.PI/180,Pt=180/Math.PI;function Ot(t){return(t%=360)<0&&(t+=360),t}function Rt(t){var e,n,r=gi(t,4),i=r[0],a=r[1],o=r[2],s=r[3],A=Ht((.2225045*(i=zt(i))+.7168786*(a=zt(a))+.0606169*(o=zt(o)))/1);i===a&&a===o?e=n=A:(e=Ht((.4360747*i+.3850649*a+.1430804*o)/Ut),n=Ht((.0139322*i+.0971045*a+.7141733*o)/St));var u=116*A-16;return[u<0?0:u,500*(e-A),200*(A-n),s]}function zt(t){return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ht(t){return t>Dt?Math.pow(t,1/3):t/Mt+Qt}function Vt(t){var e=gi(t,4),n=e[0],r=e[1],i=e[2],a=e[3],o=(n+16)/116,s=isNaN(r)?o:o+r/500,A=isNaN(i)?o:o-i/200;return o=1*Kt(o),[Nt(3.1338561*(s=Ut*Kt(s))-1.6168667*o-.4906146*(A=St*Kt(A))),Nt(-.9787684*s+1.9161415*o+.033454*A),Nt(.0719453*s-.2289914*o+1.4052427*A),a]}function Nt(t){return(t=t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055)<0?0:t>1?1:t}function Kt(t){return t>Tt?t*t*t:Mt*(t-Qt)}function Gt(t){return parseInt(t.padEnd(2,t),16)/255}function jt(t,e){return $t(e?t/100:t,0,1)}function $t(t,e,n){return Math.min(Math.max(e,t),n)}function Wt(t){return!t.some(Number.isNaN)}var Zt={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},qt=function(){function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];oi(this,t),this.r=e,this.g=n,this.b=r,this.a=i,a||(this.r*=i,this.g*=i,this.b*=i,i||this.overwriteGetter("rgb",[e,n,r,i]))}return ai(t,[{key:"rgb",get:function(){var t=this.r,e=this.g,n=this.b,r=this.a,i=r||1/0;return this.overwriteGetter("rgb",[t/i,e/i,n/i,r])}},{key:"hcl",get:function(){return this.overwriteGetter("hcl",function(t){var e=gi(Rt(t),4),n=e[0],r=e[1],i=e[2],a=e[3],o=Math.sqrt(r*r+i*i);return[Math.round(1e4*o)?Ot(Math.atan2(i,r)*Pt):NaN,o,n,a]}(this.rgb))}},{key:"lab",get:function(){return this.overwriteGetter("lab",Rt(this.rgb))}},{key:"overwriteGetter",value:function(t,e){return Object.defineProperty(this,t,{value:e}),e}},{key:"toString",value:function(){var t=gi(this.rgb,4),e=t[0],n=t[1],r=t[2],i=t[3];return"rgba(".concat([e,n,r].map((function(t){return Math.round(255*t)})).join(","),",").concat(i,")")}}],[{key:"parse",value:function(e){if(e instanceof t)return e;if("string"==typeof e){var n=function(t){if("transparent"===(t=t.toLowerCase().trim()))return[0,0,0,0];var e=Zt[t];if(e){var n=gi(e,3);return[n[0]/255,n[1]/255,n[2]/255,1]}if(t.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(t)){var r=t.length<6?1:2,i=1;return[Gt(t.slice(i,i+=r)),Gt(t.slice(i,i+=r)),Gt(t.slice(i,i+=r)),Gt(t.slice(i,i+r)||"ff")]}if(t.startsWith("rgb")){var a=t.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(a){var o=gi(a,12);o[0];var s=o[1],A=o[2],u=o[3],l=o[4],c=o[5],h=o[6],f=o[7],d=o[8],p=o[9],v=o[10],g=o[11],m=[u||" ",h||" ",p].join("");if("  "===m||"  /"===m||",,"===m||",,,"===m){var y=[A,c,d].join(""),_="%%%"===y?100:""===y?255:0;if(_){var w=[$t(+s/_,0,1),$t(+l/_,0,1),$t(+f/_,0,1),v?jt(+v,g):1];if(Wt(w))return w}}return}}var x=t.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){var b=gi(x,9);b[0];var B=b[1],k=b[2],C=b[3],F=b[4],E=b[5],I=b[6],U=b[7],S=b[8],Q=[k||" ",F||" ",I].join("");if("  "===Q||"  /"===Q||",,"===Q||",,,"===Q){var T=[+B,$t(+C,0,100),$t(+E,0,100),U?jt(+U,S):1];if(Wt(T))return function(t){var e=gi(t,4),n=e[0],r=e[1],i=e[2],a=e[3];function o(t){var e=(t+n/30)%12,a=r*Math.min(i,1-i);return i-a*Math.max(-1,Math.min(e-3,9-e,1))}return n=Ot(n),r/=100,i/=100,[o(0),o(8),o(4),a]}(T)}}}(e);return n?Qi(t,Di(n).concat([!1])):void 0}}}])}();qt.black=new qt(0,0,0,1),qt.white=new qt(1,1,1,1),qt.transparent=new qt(0,0,0,0),qt.red=new qt(1,0,0,1);var Xt=function(){function t(e,n,r){oi(this,t),this.sensitivity=e?n?"variant":"case":n?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}return ai(t,[{key:"compare",value:function(t,e){return this.collator.compare(t,e)}},{key:"resolvedLocale",value:function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}])}(),Yt=ai((function t(e,n,r,i,a){oi(this,t),this.text=e,this.image=n,this.scale=r,this.fontStack=i,this.textColor=a})),Jt=function(){function t(e){oi(this,t),this.sections=e}return ai(t,[{key:"isEmpty",value:function(){return 0===this.sections.length||!this.sections.some((function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length}))}},{key:"toString",value:function(){return 0===this.sections.length?"":this.sections.map((function(t){return t.text})).join("")}}],[{key:"fromString",value:function(e){return new t([new Yt(e,null,null,null,null)])}},{key:"factory",value:function(e){return e instanceof t?e:t.fromString(e)}}])}(),te=function(){function t(e){oi(this,t),this.values=e.slice()}return ai(t,[{key:"toString",value:function(){return JSON.stringify(this.values)}}],[{key:"parse",value:function(e){if(e instanceof t)return e;if("number"==typeof e)return new t([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){var n,r=pO(e);try{for(r.s();!(n=r.n()).done;)if("number"!=typeof n.value)return}catch(t){r.e(t)}finally{r.f()}switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]]}return new t(e)}}}])}(),ee=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]),ne=function(){function t(e){oi(this,t),this.values=e.slice()}return ai(t,[{key:"toString",value:function(){return JSON.stringify(this.values)}}],[{key:"parse",value:function(e){if(e instanceof t)return e;if(Array.isArray(e)&&!(e.length<1)&&e.length%2==0){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];if("string"!=typeof r||!ee.has(r))return;if(!Array.isArray(i)||2!==i.length||"number"!=typeof i[0]||"number"!=typeof i[1])return}return new t(e)}}}])}(),re=function(){function t(e){oi(this,t),this.name=e.name,this.available=e.available}return ai(t,[{key:"toString",value:function(){return this.name}}],[{key:"fromString",value:function(e){return e?new t({name:e,available:!1}):null}}])}();function ie(t,e,n,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value [".concat([t,e,n,r].join(", "),"]: 'a' must be between 0 and 1."):"Invalid rgba value [".concat(("number"==typeof r?[t,e,n,r]:[t,e,n]).join(", "),"]: 'r', 'g', and 'b' must be between 0 and 255.")}function ae(t){if(null===t||"string"==typeof t||"boolean"==typeof t||"number"==typeof t||t instanceof qt||t instanceof Xt||t instanceof Jt||t instanceof te||t instanceof ne||t instanceof re)return!0;if(Array.isArray(t)){var e,n=pO(t);try{for(n.s();!(e=n.n()).done;)if(!ae(e.value))return!1}catch(t){n.e(t)}finally{n.f()}return!0}if("object"==ni(t)){for(var r in t)if(!ae(t[r]))return!1;return!0}return!1}function oe(t){if(null===t)return ct;if("string"==typeof t)return ft;if("boolean"==typeof t)return dt;if("number"==typeof t)return ht;if(t instanceof qt)return pt;if(t instanceof Xt)return mt;if(t instanceof Jt)return yt;if(t instanceof te)return _t;if(t instanceof ne)return xt;if(t instanceof re)return wt;if(Array.isArray(t)){var e,n,r=t.length,i=pO(t);try{for(i.s();!(n=i.n()).done;){var a=oe(n.value);if(e){if(e===a)continue;e=gt;break}e=a}}catch(t){i.e(t)}finally{i.f()}return bt(e||gt,r)}return vt}function se(t){var e=ni(t);return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof qt||t instanceof Jt||t instanceof te||t instanceof ne||t instanceof re?t.toString():JSON.stringify(t)}var Ae=function(){function t(e,n){oi(this,t),this.type=e,this.value=n}return ai(t,[{key:"evaluate",value:function(){return this.value}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}}],[{key:"parse",value:function(e,n){if(2!==e.length)return n.error("'literal' expression requires exactly one argument, but found ".concat(e.length-1," instead."));if(!ae(e[1]))return n.error("invalid value");var r=e[1],i=oe(r),a=n.expectedType;return"array"!==i.kind||0!==i.N||!a||"array"!==a.kind||"number"==typeof a.N&&0!==a.N||(i=a),new t(i,r)}}])}(),ue=function(){function t(e){oi(this,t),this.name="ExpressionEvaluationError",this.message=e}return ai(t,[{key:"toJSON",value:function(){return this.message}}])}(),le={string:ft,number:ht,boolean:dt,object:vt},ce=function(){function t(e,n){oi(this,t),this.type=e,this.args=n}return ai(t,[{key:"evaluate",value:function(t){for(var e=0;e<this.args.length;e++){var n=this.args[e].evaluate(t);if(!Ct(this.type,oe(n)))return n;if(e===this.args.length-1)throw new ue("Expected value to be of type ".concat(Bt(this.type),", but found ").concat(Bt(oe(n))," instead."))}throw new Error}},{key:"eachChild",value:function(t){this.args.forEach(t)}},{key:"outputDefined",value:function(){return this.args.every((function(t){return t.outputDefined()}))}}],[{key:"parse",value:function(e,n){if(e.length<2)return n.error("Expected at least one argument.");var r,i=1,a=e[0];if("array"===a){var o,s;if(e.length>2){var A=e[1];if("string"!=typeof A||!(A in le)||"object"===A)return n.error('The item type argument of "array" must be one of string, number, boolean',1);o=le[A],i++}else o=gt;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return n.error('The length argument to "array" must be a positive integer literal',2);s=e[2],i++}r=bt(o,s)}else{if(!le[a])throw new Error("Types doesn't contain name = ".concat(a));r=le[a]}for(var u=[];i<e.length;i++){var l=n.parse(e[i],i,gt);if(!l)return null;u.push(l)}return new t(r,u)}}])}(),he={"to-boolean":dt,"to-color":pt,"to-number":ht,"to-string":ft},fe=function(){function t(e,n){oi(this,t),this.type=e,this.args=n}return ai(t,[{key:"evaluate",value:function(t){switch(this.type.kind){case"boolean":return Boolean(this.args[0].evaluate(t));case"color":var e,n,r,i=pO(this.args);try{for(i.s();!(r=i.n()).done;){if(e=r.value.evaluate(t),n=null,e instanceof qt)return e;if("string"==typeof e){var a=t.parseColor(e);if(a)return a}else if(Array.isArray(e)&&!(n=e.length<3||e.length>4?"Invalid rbga value ".concat(JSON.stringify(e),": expected an array containing either three or four numeric values."):ie(e[0],e[1],e[2],e[3])))return new qt(e[0]/255,e[1]/255,e[2]/255,e[3])}}catch(t){i.e(t)}finally{i.f()}throw new ue(n||"Could not parse color from value '".concat("string"==typeof e?e:JSON.stringify(e),"'"));case"padding":var o,s,A=pO(this.args);try{for(A.s();!(s=A.n()).done;){o=s.value.evaluate(t);var u=te.parse(o);if(u)return u}}catch(t){A.e(t)}finally{A.f()}throw new ue("Could not parse padding from value '".concat("string"==typeof o?o:JSON.stringify(o),"'"));case"variableAnchorOffsetCollection":var l,c,h=pO(this.args);try{for(h.s();!(c=h.n()).done;){l=c.value.evaluate(t);var f=ne.parse(l);if(f)return f}}catch(t){h.e(t)}finally{h.f()}throw new ue("Could not parse variableAnchorOffsetCollection from value '".concat("string"==typeof l?l:JSON.stringify(l),"'"));case"number":var d,p=null,v=pO(this.args);try{for(v.s();!(d=v.n()).done;){if(null===(p=d.value.evaluate(t)))return 0;var g=Number(p);if(!isNaN(g))return g}}catch(t){v.e(t)}finally{v.f()}throw new ue("Could not convert ".concat(JSON.stringify(p)," to number."));case"formatted":return Jt.fromString(se(this.args[0].evaluate(t)));case"resolvedImage":return re.fromString(se(this.args[0].evaluate(t)));default:return se(this.args[0].evaluate(t))}}},{key:"eachChild",value:function(t){this.args.forEach(t)}},{key:"outputDefined",value:function(){return this.args.every((function(t){return t.outputDefined()}))}}],[{key:"parse",value:function(e,n){if(e.length<2)return n.error("Expected at least one argument.");var r=e[0];if(!he[r])throw new Error("Can't parse ".concat(r," as it is not part of the known types"));if(("to-boolean"===r||"to-string"===r)&&2!==e.length)return n.error("Expected one argument.");for(var i=he[r],a=[],o=1;o<e.length;o++){var s=n.parse(e[o],o,gt);if(!s)return null;a.push(s)}return new t(i,a)}}])}(),de=["Unknown","Point","LineString","Polygon"],pe=function(){function t(){oi(this,t),this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}return ai(t,[{key:"id",value:function(){return this.feature&&"id"in this.feature?this.feature.id:null}},{key:"geometryType",value:function(){return this.feature?"number"==typeof this.feature.type?de[this.feature.type]:this.feature.type:null}},{key:"geometry",value:function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}},{key:"canonicalID",value:function(){return this.canonical}},{key:"properties",value:function(){return this.feature&&this.feature.properties||{}}},{key:"parseColor",value:function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=qt.parse(t)),e}}])}(),ve=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new lt,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];oi(this,t),this.registry=e,this.path=r,this.key=r.map((function(t){return"[".concat(t,"]")})).join(""),this.scope=a,this.errors=o,this.expectedType=i,this._isConstant=n}return ai(t,[{key:"parse",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return e?this.concat(e,n,r)._parse(t,i):this._parse(t,i)}},{key:"_parse",value:function(t,e){function n(t,e,n){return"assert"===n?new ce(e,[t]):"coerce"===n?new fe(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=t[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found ".concat(ni(r),' instead. If you wanted a literal array, use ["literal", [...]].'),0),null;var i=this.registry[r];if(i){var a=i.parse(t,this);if(!a)return null;if(this.expectedType){var o=this.expectedType,s=a.type;if("string"!==o.kind&&"number"!==o.kind&&"boolean"!==o.kind&&"object"!==o.kind&&"array"!==o.kind||"value"!==s.kind)if("color"!==o.kind&&"formatted"!==o.kind&&"resolvedImage"!==o.kind||"value"!==s.kind&&"string"!==s.kind)if("padding"!==o.kind||"value"!==s.kind&&"number"!==s.kind&&"array"!==s.kind)if("variableAnchorOffsetCollection"!==o.kind||"value"!==s.kind&&"array"!==s.kind){if(this.checkSubtype(o,s))return null}else a=n(a,o,e.typeAnnotation||"coerce");else a=n(a,o,e.typeAnnotation||"coerce");else a=n(a,o,e.typeAnnotation||"coerce");else a=n(a,o,e.typeAnnotation||"assert")}if(!(a instanceof Ae)&&"resolvedImage"!==a.type.kind&&this._isConstant(a)){var A=new pe;try{a=new Ae(a.type,a.evaluate(A))}catch(t){return this.error(t.message),null}}return a}return this.error('Unknown expression "'.concat(r,'". If you wanted a literal array, use ["literal", [...]].'),0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==ni(t)?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found ".concat(ni(t)," instead."))}},{key:"concat",value:function(e,n,r){var i="number"==typeof e?this.path.concat(e):this.path,a=r?this.scope.concat(r):this.scope;return new t(this.registry,this._isConstant,i,n||null,a,this.errors)}},{key:"error",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i="".concat(this.key).concat(n.map((function(t){return"[".concat(t,"]")})).join(""));this.errors.push(new ut(i,t))}},{key:"checkSubtype",value:function(t,e){var n=Ct(t,e);return n&&this.error(n),n}}])}(),ge=function(){function t(e,n,r){oi(this,t),this.type=mt,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=n}return ai(t,[{key:"evaluate",value:function(t){return new Xt(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}},{key:"eachChild",value:function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}},{key:"outputDefined",value:function(){return!1}}],[{key:"parse",value:function(e,n){if(2!==e.length)return n.error("Expected one argument.");var r=e[1];if("object"!=ni(r)||Array.isArray(r))return n.error("Collator options argument must be an object.");var i=n.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,dt);if(!i)return null;var a=n.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,dt);if(!a)return null;var o=null;return r.locale&&!(o=n.parse(r.locale,1,ft))?null:new t(i,a,o)}}])}(),me=8192;function ye(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function _e(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function we(t,e){var n=(180+t[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,i=Math.pow(2,e.z);return[Math.round(n*i*me),Math.round(r*i*me)]}function xe(t,e,n){var r=t[0]-e[0],i=t[1]-e[1],a=t[0]-n[0],o=t[1]-n[1];return r*o-a*i==0&&r*a<=0&&i*o<=0}function be(t,e){for(var n,r,i,a=!1,o=0,s=e.length;o<s;o++)for(var A=e[o],u=0,l=A.length;u<l-1;u++){if(xe(t,A[u],A[u+1]))return!1;(r=A[u])[1]>(n=t)[1]!=(i=A[u+1])[1]>n[1]&&n[0]<(i[0]-r[0])*(n[1]-r[1])/(i[1]-r[1])+r[0]&&(a=!a)}return a}function Be(t,e){for(var n=0;n<e.length;n++)if(be(t,e[n]))return!0;return!1}function ke(t,e,n,r){var i=r[0]-n[0],a=r[1]-n[1],o=(t[0]-n[0])*a-i*(t[1]-n[1]),s=(e[0]-n[0])*a-i*(e[1]-n[1]);return o>0&&s<0||o<0&&s>0}function Ce(t,e,n){var r,i,a,o,s,A,u,l=pO(n);try{for(l.s();!(r=l.n()).done;)for(var c=r.value,h=0;h<c.length-1;++h)if(0!=(A=[(s=c[h+1])[0]-(o=c[h])[0],s[1]-o[1]])[0]*(u=[(a=e)[0]-(i=t)[0],a[1]-i[1]])[1]-A[1]*u[0]&&ke(i,a,o,s)&&ke(o,s,i,a))return!0}catch(t){l.e(t)}finally{l.f()}return!1}function Fe(t,e){for(var n=0;n<t.length;++n)if(!be(t[n],e))return!1;for(var r=0;r<t.length-1;++r)if(Ce(t[r],t[r+1],e))return!1;return!0}function Ee(t,e){for(var n=0;n<e.length;n++)if(Fe(t,e[n]))return!0;return!1}function Ie(t,e,n){for(var r=[],i=0;i<t.length;i++){for(var a=[],o=0;o<t[i].length;o++){var s=we(t[i][o],n);ye(e,s),a.push(s)}r.push(a)}return r}function Ue(t,e,n){for(var r=[],i=0;i<t.length;i++){var a=Ie(t[i],e,n);r.push(a)}return r}function Se(t,e,n,r){if(t[0]<n[0]||t[0]>n[2]){var i=.5*r,a=t[0]-n[0]>i?-r:n[0]-t[0]>i?r:0;0===a&&(a=t[0]-n[2]>i?-r:n[2]-t[0]>i?r:0),t[0]+=a}ye(e,t)}function Qe(t,e,n,r){var i,a=Math.pow(2,r.z)*me,o=[r.x*me,r.y*me],s=[],A=pO(t);try{for(A.s();!(i=A.n()).done;){var u,l=pO(i.value);try{for(l.s();!(u=l.n()).done;){var c=u.value,h=[c.x+o[0],c.y+o[1]];Se(h,e,n,a),s.push(h)}}catch(t){l.e(t)}finally{l.f()}}}catch(t){A.e(t)}finally{A.f()}return s}function Te(t,e,n,r){var i,a,o=Math.pow(2,r.z)*me,s=[r.x*me,r.y*me],A=[],u=pO(t);try{for(u.s();!(i=u.n()).done;){var l,c=i.value,h=[],f=pO(c);try{for(f.s();!(l=f.n()).done;){var d=l.value,p=[d.x+s[0],d.y+s[1]];ye(e,p),h.push(p)}}catch(t){f.e(t)}finally{f.f()}A.push(h)}}catch(t){u.e(t)}finally{u.f()}if(e[2]-e[0]<=o/2){(a=e)[0]=a[1]=1/0,a[2]=a[3]=-1/0;var v,g=pO(A);try{for(g.s();!(v=g.n()).done;){var m,y=pO(v.value);try{for(y.s();!(m=y.n()).done;)Se(m.value,e,n,o)}catch(t){y.e(t)}finally{y.f()}}}catch(t){g.e(t)}finally{g.f()}}return A}var Me=function(){function t(e,n){oi(this,t),this.type=dt,this.geojson=e,this.geometries=n}return ai(t,[{key:"evaluate",value:function(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){var a=Ie(e.coordinates,r,i),o=Qe(t.geometry(),n,r,i);if(!_e(n,r))return!1;var s,A=pO(o);try{for(A.s();!(s=A.n()).done;)if(!be(s.value,a))return!1}catch(t){A.e(t)}finally{A.f()}}if("MultiPolygon"===e.type){var u=Ue(e.coordinates,r,i),l=Qe(t.geometry(),n,r,i);if(!_e(n,r))return!1;var c,h=pO(l);try{for(h.s();!(c=h.n()).done;)if(!Be(c.value,u))return!1}catch(t){h.e(t)}finally{h.f()}}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){var a=Ie(e.coordinates,r,i),o=Te(t.geometry(),n,r,i);if(!_e(n,r))return!1;var s,A=pO(o);try{for(A.s();!(s=A.n()).done;)if(!Fe(s.value,a))return!1}catch(t){A.e(t)}finally{A.f()}}if("MultiPolygon"===e.type){var u=Ue(e.coordinates,r,i),l=Te(t.geometry(),n,r,i);if(!_e(n,r))return!1;var c,h=pO(l);try{for(h.s();!(c=h.n()).done;)if(!Ee(c.value,u))return!1}catch(t){h.e(t)}finally{h.f()}}return!0}(t,this.geometries)}return!1}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}}],[{key:"parse",value:function(e,n){if(2!==e.length)return n.error("'within' expression requires exactly one argument, but found ".concat(e.length-1," instead."));if(ae(e[1])){var r=e[1];if("FeatureCollection"===r.type)for(var i=0;i<r.features.length;++i){var a=r.features[i].geometry.type;if("Polygon"===a||"MultiPolygon"===a)return new t(r,r.features[i].geometry)}else if("Feature"===r.type){var o=r.geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new t(r,r.geometry)}else if("Polygon"===r.type||"MultiPolygon"===r.type)return new t(r,r)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}}])}(),De=function(){function t(e,n){oi(this,t),this.type=n.type,this.name=e,this.boundExpression=n}return ai(t,[{key:"evaluate",value:function(t){return this.boundExpression.evaluate(t)}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!1}}],[{key:"parse",value:function(e,n){if(2!==e.length||"string"!=typeof e[1])return n.error("'var' expression requires exactly one string literal argument.");var r=e[1];return n.scope.has(r)?new t(r,n.scope.get(r)):n.error('Unknown variable "'.concat(r,'". Make sure "').concat(r,'" has been bound in an enclosing "let" expression before using it.'),1)}}])}(),Le=function(){function t(e,n,r,i){oi(this,t),this.name=e,this.type=n,this._evaluate=r,this.args=i}return ai(t,[{key:"evaluate",value:function(t){return this._evaluate(t,this.args)}},{key:"eachChild",value:function(t){this.args.forEach(t)}},{key:"outputDefined",value:function(){return!1}}],[{key:"parse",value:function(e,n){var r,i=e[0],a=t.definitions[i];if(!a)return n.error('Unknown expression "'.concat(i,'". If you wanted a literal array, use ["literal", [...]].'),0);var o,s=Array.isArray(a)?a[0]:a.type,A=Array.isArray(a)?[[a[1],a[2]]]:a.overloads,u=A.filter((function(t){var n=gi(t,1)[0];return!Array.isArray(n)||n.length===e.length-1})),l=null,c=pO(u);try{for(c.s();!(o=c.n()).done;){var h=gi(o.value,2),f=h[0],d=h[1];l=new ve(n.registry,Pe,n.path,null,n.scope);for(var p=[],v=!1,g=1;g<e.length;g++){var m=e[g],y=Array.isArray(f)?f[g-1]:f.type,_=l.parse(m,1+p.length,y);if(!_){v=!0;break}p.push(_)}if(!v)if(Array.isArray(f)&&f.length!==p.length)l.error("Expected ".concat(f.length," arguments, but found ").concat(p.length," instead."));else{for(var w=0;w<p.length;w++){var x=Array.isArray(f)?f[w]:f.type,b=p[w];l.concat(w+1).checkSubtype(x,b.type)}if(0===l.errors.length)return new t(i,s,d,p)}}}catch(t){c.e(t)}finally{c.f()}if(1===u.length)(r=n.errors).push.apply(r,Di(l.errors));else{for(var B=(u.length?u:A).map((function(t){var e;return e=gi(t,1)[0],Array.isArray(e)?"(".concat(e.map(Bt).join(", "),")"):"(".concat(Bt(e.type),"...)")})).join(" | "),k=[],C=1;C<e.length;C++){var F=n.parse(e[C],1+k.length);if(!F)return null;k.push(Bt(F.type))}n.error("Expected arguments of type ".concat(B,", but found (").concat(k.join(", "),") instead."))}return null}},{key:"register",value:function(e,n){for(var r in t.definitions=n,n)e[r]=t}}])}();function Pe(t){if(t instanceof De)return Pe(t.boundExpression);if(t instanceof Le&&"error"===t.name)return!1;if(t instanceof ge)return!1;if(t instanceof Me)return!1;var e=t instanceof fe||t instanceof ce,n=!0;return t.eachChild((function(t){n=e?n&&Pe(t):n&&t instanceof Ae})),!!n&&Oe(t)&&ze(t,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Oe(t){if(t instanceof Le){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof Me)return!1;var e=!0;return t.eachChild((function(t){e&&!Oe(t)&&(e=!1)})),e}function Re(t){if(t instanceof Le&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild((function(t){e&&!Re(t)&&(e=!1)})),e}function ze(t,e){if(t instanceof Le&&e.indexOf(t.name)>=0)return!1;var n=!0;return t.eachChild((function(t){n&&!ze(t,e)&&(n=!1)})),n}function He(t,e){for(var n,r,i=t.length-1,a=0,o=i,s=0;a<=o;)if(n=t[s=Math.floor((a+o)/2)],r=t[s+1],n<=e){if(s===i||e<r)return s;a=s+1}else{if(!(n>e))throw new ue("Input is not a number.");o=s-1}return 0}var Ve=function(){function t(e,n,r){oi(this,t),this.type=e,this.input=n,this.labels=[],this.outputs=[];var i,a=pO(r);try{for(a.s();!(i=a.n()).done;){var o=gi(i.value,2),s=o[0],A=o[1];this.labels.push(s),this.outputs.push(A)}}catch(t){a.e(t)}finally{a.f()}}return ai(t,[{key:"evaluate",value:function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var i=e.length;return r>=e[i-1]?n[i-1].evaluate(t):n[He(e,r)].evaluate(t)}},{key:"eachChild",value:function(t){t(this.input);var e,n=pO(this.outputs);try{for(n.s();!(e=n.n()).done;)t(e.value)}catch(t){n.e(t)}finally{n.f()}}},{key:"outputDefined",value:function(){return this.outputs.every((function(t){return t.outputDefined()}))}}],[{key:"parse",value:function(e,n){if(e.length-1<4)return n.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if((e.length-1)%2!=0)return n.error("Expected an even number of arguments.");var r=n.parse(e[1],1,ht);if(!r)return null;var i=[],a=null;n.expectedType&&"value"!==n.expectedType.kind&&(a=n.expectedType);for(var o=1;o<e.length;o+=2){var s=1===o?-1/0:e[o],A=e[o+1],u=o,l=o+1;if("number"!=typeof s)return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(i.length&&i[i.length-1][0]>=s)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var c=n.parse(A,l,a);if(!c)return null;a=a||c.type,i.push([s,c])}return new t(a,r,i)}}])}();function Ne(t,e,n){return t+n*(e-t)}function Ke(t,e,n){return t.map((function(t,r){return Ne(t,e[r],n)}))}var Ge={number:Ne,color:function(t,e,n){switch(arguments.length>3&&void 0!==arguments[3]?arguments[3]:"rgb"){case"rgb":var r=gi(Ke(t.rgb,e.rgb,n),4),i=r[0],a=r[1],o=r[2],s=r[3];return new qt(i,a,o,s,!1);case"hcl":var A,u,l=gi(t.hcl,4),c=l[0],h=l[1],f=l[2],d=l[3],p=gi(e.hcl,4),v=p[0],g=p[1],m=p[2],y=p[3];if(isNaN(c)||isNaN(v))isNaN(c)?isNaN(v)?A=NaN:(A=v,1!==f&&0!==f||(u=g)):(A=c,1!==m&&0!==m||(u=h));else{var _=v-c;v>c&&_>180?_-=360:v<c&&c-v>180&&(_+=360),A=c+n*_}var w=function(t){var e=gi(t,4),n=e[0],r=e[1],i=e[2],a=e[3];return n=isNaN(n)?0:n*Lt,Vt([i,Math.cos(n)*r,Math.sin(n)*r,a])}([A,null!=u?u:Ne(h,g,n),Ne(f,m,n),Ne(d,y,n)]),x=gi(w,4),b=x[0],B=x[1],k=x[2],C=x[3];return new qt(b,B,k,C,!1);case"lab":var F=gi(Vt(Ke(t.lab,e.lab,n)),4),E=F[0],I=F[1],U=F[2],S=F[3];return new qt(E,I,U,S,!1)}},array:Ke,padding:function(t,e,n){return new te(Ke(t.values,e.values,n))},variableAnchorOffsetCollection:function(t,e,n){var r=t.values,i=e.values;if(r.length!==i.length)throw new ue("Cannot interpolate values of different length. from: ".concat(t.toString(),", to: ").concat(e.toString()));for(var a=[],o=0;o<r.length;o+=2){if(r[o]!==i[o])throw new ue("Cannot interpolate values containing mismatched anchors. from[".concat(o,"]: ").concat(r[o],", to[").concat(o,"]: ").concat(i[o]));a.push(r[o]);var s=gi(r[o+1],2),A=s[0],u=s[1],l=gi(i[o+1],2),c=l[0],h=l[1];a.push([Ne(A,c,n),Ne(u,h,n)])}return new ne(a)}},je=function(){function t(e,n,r,i,a){oi(this,t),this.type=e,this.operator=n,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];var o,s=pO(a);try{for(s.s();!(o=s.n()).done;){var A=gi(o.value,2),u=A[0],l=A[1];this.labels.push(u),this.outputs.push(l)}}catch(t){s.e(t)}finally{s.f()}}return ai(t,[{key:"evaluate",value:function(e){var n=this.labels,r=this.outputs;if(1===n.length)return r[0].evaluate(e);var i=this.input.evaluate(e);if(i<=n[0])return r[0].evaluate(e);var a=n.length;if(i>=n[a-1])return r[a-1].evaluate(e);var o=He(n,i),s=t.interpolationFactor(this.interpolation,i,n[o],n[o+1]),A=r[o].evaluate(e),u=r[o+1].evaluate(e);switch(this.operator){case"interpolate":return Ge[this.type.kind](A,u,s);case"interpolate-hcl":return Ge.color(A,u,s,"hcl");case"interpolate-lab":return Ge.color(A,u,s,"lab")}}},{key:"eachChild",value:function(t){t(this.input);var e,n=pO(this.outputs);try{for(n.s();!(e=n.n()).done;)t(e.value)}catch(t){n.e(t)}finally{n.f()}}},{key:"outputDefined",value:function(){return this.outputs.every((function(t){return t.outputDefined()}))}}],[{key:"interpolationFactor",value:function(t,e,n,r){var i=0;if("exponential"===t.name)i=$e(e,t.base,n,r);else if("linear"===t.name)i=$e(e,1,n,r);else if("cubic-bezier"===t.name){var a=t.controlPoints;i=new l(a[0],a[1],a[2],a[3]).solve($e(e,1,n,r))}return i}},{key:"parse",value:function(e,n){var r=function(t){return fi(t)||Mi(t)||pi(t)||vi()}(e),i=r[0],a=r[1],o=r[2],s=r.slice(3);if(!Array.isArray(a)||0===a.length)return n.error("Expected an interpolation type expression.",1);if("linear"===a[0])a={name:"linear"};else if("exponential"===a[0]){var A=a[1];if("number"!=typeof A)return n.error("Exponential interpolation requires a numeric base.",1,1);a={name:"exponential",base:A}}else{if("cubic-bezier"!==a[0])return n.error("Unknown interpolation type ".concat(String(a[0])),1,0);var u=a.slice(1);if(4!==u.length||u.some((function(t){return"number"!=typeof t||t<0||t>1})))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);a={name:"cubic-bezier",controlPoints:u}}if(e.length-1<4)return n.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if((e.length-1)%2!=0)return n.error("Expected an even number of arguments.");if(!(o=n.parse(o,2,ht)))return null;var l=[],c=null;"interpolate-hcl"===i||"interpolate-lab"===i?c=pt:n.expectedType&&"value"!==n.expectedType.kind&&(c=n.expectedType);for(var h=0;h<s.length;h+=2){var f=s[h],d=s[h+1],p=h+3,v=h+4;if("number"!=typeof f)return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',p);if(l.length&&l[l.length-1][0]>=f)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',p);var g=n.parse(d,v,c);if(!g)return null;c=c||g.type,l.push([f,g])}return It(c,ht)||It(c,pt)||It(c,_t)||It(c,xt)||It(c,bt(ht))?new t(c,i,a,o,l):n.error("Type ".concat(Bt(c)," is not interpolatable."))}}])}();function $e(t,e,n,r){var i=r-n,a=t-n;return 0===i?0:1===e?a/i:(Math.pow(e,a)-1)/(Math.pow(e,i)-1)}var We=function(){function t(e,n){oi(this,t),this.type=e,this.args=n}return ai(t,[{key:"evaluate",value:function(t){var e,n,r=null,i=0,a=pO(this.args);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(i++,(r=o.evaluate(t))&&r instanceof re&&!r.available&&(e||(e=r.name),r=null,i===this.args.length&&(r=e)),null!==r)break}}catch(t){a.e(t)}finally{a.f()}return r}},{key:"eachChild",value:function(t){this.args.forEach(t)}},{key:"outputDefined",value:function(){return this.args.every((function(t){return t.outputDefined()}))}}],[{key:"parse",value:function(e,n){if(e.length<2)return n.error("Expectected at least one argument.");var r=null,i=n.expectedType;i&&"value"!==i.kind&&(r=i);var a,o=[],s=pO(e.slice(1));try{for(s.s();!(a=s.n()).done;){var A=a.value,u=n.parse(A,1+o.length,r,void 0,{typeAnnotation:"omit"});if(!u)return null;r=r||u.type,o.push(u)}}catch(t){s.e(t)}finally{s.f()}if(!r)throw new Error("No output type");var l=i&&o.some((function(t){return Ct(i,t.type)}));return new t(l?gt:r,o)}}])}(),Ze=function(){function t(e,n){oi(this,t),this.type=n.type,this.bindings=[].concat(e),this.result=n}return ai(t,[{key:"evaluate",value:function(t){return this.result.evaluate(t)}},{key:"eachChild",value:function(t){var e,n=pO(this.bindings);try{for(n.s();!(e=n.n()).done;)t(e.value[1])}catch(t){n.e(t)}finally{n.f()}t(this.result)}},{key:"outputDefined",value:function(){return this.result.outputDefined()}}],[{key:"parse",value:function(e,n){if(e.length<4)return n.error("Expected at least 3 arguments, but found ".concat(e.length-1," instead."));for(var r=[],i=1;i<e.length-1;i+=2){var a=e[i];if("string"!=typeof a)return n.error("Expected string, but found ".concat(ni(a)," instead."),i);if(/[^a-zA-Z0-9_]/.test(a))return n.error("Variable names must contain only alphanumeric characters or '_'.",i);var o=n.parse(e[i+1],i+1);if(!o)return null;r.push([a,o])}var s=n.parse(e[e.length-1],e.length-1,n.expectedType,r);return s?new t(r,s):null}}])}(),qe=function(){function t(e,n,r){oi(this,t),this.type=e,this.index=n,this.input=r}return ai(t,[{key:"evaluate",value:function(t){var e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new ue("Array index out of bounds: ".concat(e," < 0."));if(e>=n.length)throw new ue("Array index out of bounds: ".concat(e," > ").concat(n.length-1,"."));if(e!==Math.floor(e))throw new ue("Array index must be an integer, but found ".concat(e," instead."));return n[e]}},{key:"eachChild",value:function(t){t(this.index),t(this.input)}},{key:"outputDefined",value:function(){return!1}}],[{key:"parse",value:function(e,n){if(3!==e.length)return n.error("Expected 2 arguments, but found ".concat(e.length-1," instead."));var r=n.parse(e[1],1,ht),i=n.parse(e[2],2,bt(n.expectedType||gt));return r&&i?new t(i.type.itemType,r,i):null}}])}(),Xe=function(){function t(e,n){oi(this,t),this.type=dt,this.needle=e,this.haystack=n}return ai(t,[{key:"evaluate",value:function(t){var e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!n)return!1;if(!Et(e,["boolean","string","number","null"]))throw new ue("Expected first argument to be of type boolean, string, number or null, but found ".concat(Bt(oe(e))," instead."));if(!Et(n,["string","array"]))throw new ue("Expected second argument to be of type array or string, but found ".concat(Bt(oe(n))," instead."));return n.indexOf(e)>=0}},{key:"eachChild",value:function(t){t(this.needle),t(this.haystack)}},{key:"outputDefined",value:function(){return!0}}],[{key:"parse",value:function(e,n){if(3!==e.length)return n.error("Expected 2 arguments, but found ".concat(e.length-1," instead."));var r=n.parse(e[1],1,gt),i=n.parse(e[2],2,gt);return r&&i?Ft(r.type,[dt,ft,ht,ct,gt])?new t(r,i):n.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(Bt(r.type)," instead")):null}}])}(),Ye=function(){function t(e,n,r){oi(this,t),this.type=ht,this.needle=e,this.haystack=n,this.fromIndex=r}return ai(t,[{key:"evaluate",value:function(t){var e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!Et(e,["boolean","string","number","null"]))throw new ue("Expected first argument to be of type boolean, string, number or null, but found ".concat(Bt(oe(e))," instead."));if(!Et(n,["string","array"]))throw new ue("Expected second argument to be of type array or string, but found ".concat(Bt(oe(n))," instead."));if(this.fromIndex){var r=this.fromIndex.evaluate(t);return n.indexOf(e,r)}return n.indexOf(e)}},{key:"eachChild",value:function(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}},{key:"outputDefined",value:function(){return!1}}],[{key:"parse",value:function(e,n){if(e.length<=2||e.length>=5)return n.error("Expected 3 or 4 arguments, but found ".concat(e.length-1," instead."));var r=n.parse(e[1],1,gt),i=n.parse(e[2],2,gt);if(!r||!i)return null;if(!Ft(r.type,[dt,ft,ht,ct,gt]))return n.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(Bt(r.type)," instead"));if(4===e.length){var a=n.parse(e[3],3,ht);return a?new t(r,i,a):null}return new t(r,i)}}])}(),Je=function(){function t(e,n,r,i,a,o){oi(this,t),this.inputType=e,this.type=n,this.input=r,this.cases=i,this.outputs=a,this.otherwise=o}return ai(t,[{key:"evaluate",value:function(t){var e=this.input.evaluate(t);return(oe(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}},{key:"eachChild",value:function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}},{key:"outputDefined",value:function(){return this.outputs.every((function(t){return t.outputDefined()}))&&this.otherwise.outputDefined()}}],[{key:"parse",value:function(e,n){if(e.length<5)return n.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if(e.length%2!=1)return n.error("Expected an even number of arguments.");var r,i;n.expectedType&&"value"!==n.expectedType.kind&&(i=n.expectedType);for(var a={},o=[],s=2;s<e.length-1;s+=2){var A=e[s],u=e[s+1];Array.isArray(A)||(A=[A]);var l=n.concat(s);if(0===A.length)return l.error("Expected at least one branch label.");var c,h=pO(A);try{for(h.s();!(c=h.n()).done;){var f=c.value;if("number"!=typeof f&&"string"!=typeof f)return l.error("Branch labels must be numbers or strings.");if("number"==typeof f&&Math.abs(f)>Number.MAX_SAFE_INTEGER)return l.error("Branch labels must be integers no larger than ".concat(Number.MAX_SAFE_INTEGER,"."));if("number"==typeof f&&Math.floor(f)!==f)return l.error("Numeric branch labels must be integer values.");if(r){if(l.checkSubtype(r,oe(f)))return null}else r=oe(f);if(void 0!==a[String(f)])return l.error("Branch labels must be unique.");a[String(f)]=o.length}}catch(t){h.e(t)}finally{h.f()}var d=n.parse(u,s,i);if(!d)return null;i=i||d.type,o.push(d)}var p=n.parse(e[1],1,gt);if(!p)return null;var v=n.parse(e[e.length-1],e.length-1,i);return v?"value"!==p.type.kind&&n.concat(1).checkSubtype(r,p.type)?null:new t(r,i,p,a,o,v):null}}])}(),tn=function(){function t(e,n,r){oi(this,t),this.type=e,this.branches=n,this.otherwise=r}return ai(t,[{key:"evaluate",value:function(t){var e,n=pO(this.branches);try{for(n.s();!(e=n.n()).done;){var r=gi(e.value,2),i=r[0],a=r[1];if(i.evaluate(t))return a.evaluate(t)}}catch(t){n.e(t)}finally{n.f()}return this.otherwise.evaluate(t)}},{key:"eachChild",value:function(t){var e,n=pO(this.branches);try{for(n.s();!(e=n.n()).done;){var r=gi(e.value,2),i=r[0],a=r[1];t(i),t(a)}}catch(t){n.e(t)}finally{n.f()}t(this.otherwise)}},{key:"outputDefined",value:function(){return this.branches.every((function(t){var e=gi(t,2);return e[0],e[1].outputDefined()}))&&this.otherwise.outputDefined()}}],[{key:"parse",value:function(e,n){if(e.length<4)return n.error("Expected at least 3 arguments, but found only ".concat(e.length-1,"."));if(e.length%2!=0)return n.error("Expected an odd number of arguments.");var r;n.expectedType&&"value"!==n.expectedType.kind&&(r=n.expectedType);for(var i=[],a=1;a<e.length-1;a+=2){var o=n.parse(e[a],a,dt);if(!o)return null;var s=n.parse(e[a+1],a+1,r);if(!s)return null;i.push([o,s]),r=r||s.type}var A=n.parse(e[e.length-1],e.length-1,r);if(!A)return null;if(!r)throw new Error("Can't infer output type");return new t(r,i,A)}}])}(),en=function(){function t(e,n,r,i){oi(this,t),this.type=e,this.input=n,this.beginIndex=r,this.endIndex=i}return ai(t,[{key:"evaluate",value:function(t){var e=this.input.evaluate(t),n=this.beginIndex.evaluate(t);if(!Et(e,["string","array"]))throw new ue("Expected first argument to be of type array or string, but found ".concat(Bt(oe(e))," instead."));if(this.endIndex){var r=this.endIndex.evaluate(t);return e.slice(n,r)}return e.slice(n)}},{key:"eachChild",value:function(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}},{key:"outputDefined",value:function(){return!1}}],[{key:"parse",value:function(e,n){if(e.length<=2||e.length>=5)return n.error("Expected 3 or 4 arguments, but found ".concat(e.length-1," instead."));var r=n.parse(e[1],1,gt),i=n.parse(e[2],2,ht);if(!r||!i)return null;if(!Ft(r.type,[bt(gt),ft,gt]))return n.error("Expected first argument to be of type array or string, but found ".concat(Bt(r.type)," instead"));if(4===e.length){var a=n.parse(e[3],3,ht);return a?new t(r.type,r,i,a):null}return new t(r.type,r,i)}}])}();function nn(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function rn(t,e,n,r){return 0===r.compare(e,n)}function an(t,e,n){var r="=="!==t&&"!="!==t;return function(){function i(t,e,n){oi(this,i),this.type=dt,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return ai(i,[{key:"evaluate",value:function(i){var a=this.lhs.evaluate(i),o=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){var s=oe(a),A=oe(o);if(s.kind!==A.kind||"string"!==s.kind&&"number"!==s.kind)throw new ue('Expected arguments for "'.concat(t,'" to be (string, string) or (number, number), but found (').concat(s.kind,", ").concat(A.kind,") instead."))}if(this.collator&&!r&&this.hasUntypedArgument){var u=oe(a),l=oe(o);if("string"!==u.kind||"string"!==l.kind)return e(i,a,o)}return this.collator?n(i,a,o,this.collator.evaluate(i)):e(i,a,o)}},{key:"eachChild",value:function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}},{key:"outputDefined",value:function(){return!0}}],[{key:"parse",value:function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var n=t[0],a=e.parse(t[1],1,gt);if(!a)return null;if(!nn(n,a.type))return e.concat(1).error('"'.concat(n,"\" comparisons are not supported for type '").concat(Bt(a.type),"'."));var o=e.parse(t[2],2,gt);if(!o)return null;if(!nn(n,o.type))return e.concat(2).error('"'.concat(n,"\" comparisons are not supported for type '").concat(Bt(o.type),"'."));if(a.type.kind!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return e.error("Cannot compare types '".concat(Bt(a.type),"' and '").concat(Bt(o.type),"'."));r&&("value"===a.type.kind&&"value"!==o.type.kind?a=new ce(o.type,[a]):"value"!==a.type.kind&&"value"===o.type.kind&&(o=new ce(a.type,[o])));var s=null;if(4===t.length){if("string"!==a.type.kind&&"string"!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,mt)))return null}return new i(a,o,s)}}])}()}var on=an("==",(function(t,e,n){return e===n}),rn),sn=an("!=",(function(t,e,n){return e!==n}),(function(t,e,n,r){return!rn(0,e,n,r)})),An=an("<",(function(t,e,n){return e<n}),(function(t,e,n,r){return r.compare(e,n)<0})),un=an(">",(function(t,e,n){return e>n}),(function(t,e,n,r){return r.compare(e,n)>0})),ln=an("<=",(function(t,e,n){return e<=n}),(function(t,e,n,r){return r.compare(e,n)<=0})),cn=an(">=",(function(t,e,n){return e>=n}),(function(t,e,n,r){return r.compare(e,n)>=0})),hn=function(){function t(e,n,r,i,a){oi(this,t),this.type=ft,this.number=e,this.locale=n,this.currency=r,this.minFractionDigits=i,this.maxFractionDigits=a}return ai(t,[{key:"evaluate",value:function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}},{key:"eachChild",value:function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}},{key:"outputDefined",value:function(){return!1}}],[{key:"parse",value:function(e,n){if(3!==e.length)return n.error("Expected two arguments.");var r=n.parse(e[1],1,ht);if(!r)return null;var i=e[2];if("object"!=ni(i)||Array.isArray(i))return n.error("NumberFormat options argument must be an object.");var a=null;if(i.locale&&!(a=n.parse(i.locale,1,ft)))return null;var o=null;if(i.currency&&!(o=n.parse(i.currency,1,ft)))return null;var s=null;if(i["min-fraction-digits"]&&!(s=n.parse(i["min-fraction-digits"],1,ht)))return null;var A=null;return i["max-fraction-digits"]&&!(A=n.parse(i["max-fraction-digits"],1,ht))?null:new t(r,a,o,s,A)}}])}(),fn=function(){function t(e){oi(this,t),this.type=yt,this.sections=e}return ai(t,[{key:"evaluate",value:function(t){return new Jt(this.sections.map((function(e){var n=e.content.evaluate(t);return oe(n)===wt?new Yt("",n,null,null,null):new Yt(se(n),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))}},{key:"eachChild",value:function(t){var e,n=pO(this.sections);try{for(n.s();!(e=n.n()).done;){var r=e.value;t(r.content),r.scale&&t(r.scale),r.font&&t(r.font),r.textColor&&t(r.textColor)}}catch(t){n.e(t)}finally{n.f()}}},{key:"outputDefined",value:function(){return!1}}],[{key:"parse",value:function(e,n){if(e.length<2)return n.error("Expected at least one argument.");var r=e[1];if(!Array.isArray(r)&&"object"==ni(r))return n.error("First argument must be an image or text section.");for(var i=[],a=!1,o=1;o<=e.length-1;++o){var s=e[o];if(a&&"object"==ni(s)&&!Array.isArray(s)){a=!1;var A=null;if(s["font-scale"]&&!(A=n.parse(s["font-scale"],1,ht)))return null;var u=null;if(s["text-font"]&&!(u=n.parse(s["text-font"],1,bt(ft))))return null;var l=null;if(s["text-color"]&&!(l=n.parse(s["text-color"],1,pt)))return null;var c=i[i.length-1];c.scale=A,c.font=u,c.textColor=l}else{var h=n.parse(e[o],1,gt);if(!h)return null;var f=h.type.kind;if("string"!==f&&"value"!==f&&"null"!==f&&"resolvedImage"!==f)return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");a=!0,i.push({content:h,scale:null,font:null,textColor:null})}}return new t(i)}}])}(),dn=function(){function t(e){oi(this,t),this.type=wt,this.input=e}return ai(t,[{key:"evaluate",value:function(t){var e=this.input.evaluate(t),n=re.fromString(e);return n&&t.availableImages&&(n.available=t.availableImages.indexOf(e)>-1),n}},{key:"eachChild",value:function(t){t(this.input)}},{key:"outputDefined",value:function(){return!1}}],[{key:"parse",value:function(e,n){if(2!==e.length)return n.error("Expected two arguments.");var r=n.parse(e[1],1,ft);return r?new t(r):n.error("No image name provided.")}}])}(),pn=function(){function t(e){oi(this,t),this.type=ht,this.input=e}return ai(t,[{key:"evaluate",value:function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new ue("Expected value to be of type string or array, but found ".concat(Bt(oe(e))," instead."))}},{key:"eachChild",value:function(t){t(this.input)}},{key:"outputDefined",value:function(){return!1}}],[{key:"parse",value:function(e,n){if(2!==e.length)return n.error("Expected 1 argument, but found ".concat(e.length-1," instead."));var r=n.parse(e[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?n.error("Expected argument of type string or array, but found ".concat(Bt(r.type)," instead.")):new t(r):null}}])}(),vn={"==":on,"!=":sn,">":un,"<":An,">=":cn,"<=":ln,array:ce,at:qe,boolean:ce,case:tn,coalesce:We,collator:ge,format:fn,image:dn,in:Xe,"index-of":Ye,interpolate:je,"interpolate-hcl":je,"interpolate-lab":je,length:pn,let:Ze,literal:Ae,match:Je,number:ce,"number-format":hn,object:ce,slice:en,step:Ve,string:ce,"to-boolean":fe,"to-color":fe,"to-number":fe,"to-string":fe,var:De,within:Me};function gn(t,e){var n=gi(e,4),r=n[0],i=n[1],a=n[2],o=n[3];r=r.evaluate(t),i=i.evaluate(t),a=a.evaluate(t);var s=o?o.evaluate(t):1,A=ie(r,i,a,s);if(A)throw new ue(A);return new qt(r/255,i/255,a/255,s,!1)}function mn(t,e){return t in e}function yn(t,e){var n=e[t];return void 0===n?null:n}function _n(t){return{type:t}}function wn(t){return{result:"success",value:t}}function xn(t){return{result:"error",value:t}}function bn(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function Bn(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function kn(t){return!!t.expression&&t.expression.interpolated}function Cn(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":ni(t)}function Fn(t){return"object"==ni(t)&&null!==t&&!Array.isArray(t)}function En(t){return t}function In(t,e){var n,r,i,a,o="color"===e.type,s=t.stops&&"object"==ni(t.stops[0][0]),A=s||!(s||void 0!==t.property),u=t.type||(kn(e)?"exponential":"interval");if(o||"padding"===e.type){var l=o?qt.parse:te.parse;(t=At({},t)).stops&&(t.stops=t.stops.map((function(t){return[t[0],l(t[1])]}))),t.default=l(t.default?t.default:e.default)}if(t.colorSpace&&"rgb"!==(n=t.colorSpace)&&"hcl"!==n&&"lab"!==n)throw new Error('Unknown color space: "'.concat(t.colorSpace,'"'));if("exponential"===u)r=Tn;else if("interval"===u)r=Qn;else if("categorical"===u){r=Sn,i=Object.create(null);var c,h=pO(t.stops);try{for(h.s();!(c=h.n()).done;){var f=c.value;i[f[0]]=f[1]}}catch(t){h.e(t)}finally{h.f()}a=ni(t.stops[0][0])}else{if("identity"!==u)throw new Error('Unknown function type "'.concat(u,'"'));r=Mn}if(s){for(var d={},p=[],v=0;v<t.stops.length;v++){var g=t.stops[v],m=g[0].zoom;void 0===d[m]&&(d[m]={zoom:m,type:t.type,property:t.property,default:t.default,stops:[]},p.push(m)),d[m].stops.push([g[0].value,g[1]])}for(var y=[],_=0,w=p;_<w.length;_++){var x=w[_];y.push([d[x].zoom,In(d[x],e)])}var b={name:"linear"};return{kind:"composite",interpolationType:b,interpolationFactor:je.interpolationFactor.bind(void 0,b),zoomStops:y.map((function(t){return t[0]})),evaluate:function(n,r){var i=n.zoom;return Tn({stops:y,base:t.base},e,i).evaluate(i,r)}}}if(A){var B="exponential"===u?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:B,interpolationFactor:je.interpolationFactor.bind(void 0,B),zoomStops:t.stops.map((function(t){return t[0]})),evaluate:function(n){var o=n.zoom;return r(t,e,o,i,a)}}}return{kind:"source",evaluate:function(n,o){var s=o&&o.properties?o.properties[t.property]:void 0;return void 0===s?Un(t.default,e.default):r(t,e,s,i,a)}}}function Un(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function Sn(t,e,n,r,i){return Un(ni(n)===i?r[n]:void 0,t.default,e.default)}function Qn(t,e,n){if("number"!==Cn(n))return Un(t.default,e.default);var r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];var i=He(t.stops.map((function(t){return t[0]})),n);return t.stops[i][1]}function Tn(t,e,n){var r=void 0!==t.base?t.base:1;if("number"!==Cn(n))return Un(t.default,e.default);var i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];var a=He(t.stops.map((function(t){return t[0]})),n),o=function(t,e,n,r){var i=r-n,a=t-n;return 0===i?0:1===e?a/i:(Math.pow(e,a)-1)/(Math.pow(e,i)-1)}(n,r,t.stops[a][0],t.stops[a+1][0]),s=t.stops[a][1],A=t.stops[a+1][1],u=Ge[e.type]||En;return"function"==typeof s.evaluate?{evaluate:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=s.evaluate.apply(void 0,n),a=A.evaluate.apply(void 0,n);if(void 0!==i&&void 0!==a)return u(i,a,o,t.colorSpace)}}:u(s,A,o,t.colorSpace)}function Mn(t,e,n){switch(e.type){case"color":n=qt.parse(n);break;case"formatted":n=Jt.fromString(n.toString());break;case"resolvedImage":n=re.fromString(n.toString());break;case"padding":n=te.parse(n);break;default:Cn(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0)}return Un(n,t.default,e.default)}Le.register(vn,{error:[{kind:"error"},[ft],function(t,e){var n=gi(e,1)[0];throw new ue(n.evaluate(t))}],typeof:[ft,[gt],function(t,e){return Bt(oe(gi(e,1)[0].evaluate(t)))}],"to-rgba":[bt(ht,4),[pt],function(t,e){var n=gi(e,1),r=gi(n[0].evaluate(t).rgb,4);return[255*r[0],255*r[1],255*r[2],r[3]]}],rgb:[pt,[ht,ht,ht],gn],rgba:[pt,[ht,ht,ht,ht],gn],has:{type:dt,overloads:[[[ft],function(t,e){return mn(gi(e,1)[0].evaluate(t),t.properties())}],[[ft,vt],function(t,e){var n=gi(e,2),r=n[0],i=n[1];return mn(r.evaluate(t),i.evaluate(t))}]]},get:{type:gt,overloads:[[[ft],function(t,e){return yn(gi(e,1)[0].evaluate(t),t.properties())}],[[ft,vt],function(t,e){var n=gi(e,2),r=n[0],i=n[1];return yn(r.evaluate(t),i.evaluate(t))}]]},"feature-state":[gt,[ft],function(t,e){return yn(gi(e,1)[0].evaluate(t),t.featureState||{})}],properties:[vt,[],function(t){return t.properties()}],"geometry-type":[ft,[],function(t){return t.geometryType()}],id:[gt,[],function(t){return t.id()}],zoom:[ht,[],function(t){return t.globals.zoom}],"heatmap-density":[ht,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[ht,[],function(t){return t.globals.lineProgress||0}],accumulated:[gt,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[ht,_n(ht),function(t,e){var n,r=0,i=pO(e);try{for(i.s();!(n=i.n()).done;)r+=n.value.evaluate(t)}catch(t){i.e(t)}finally{i.f()}return r}],"*":[ht,_n(ht),function(t,e){var n,r=1,i=pO(e);try{for(i.s();!(n=i.n()).done;)r*=n.value.evaluate(t)}catch(t){i.e(t)}finally{i.f()}return r}],"-":{type:ht,overloads:[[[ht,ht],function(t,e){var n=gi(e,2),r=n[0],i=n[1];return r.evaluate(t)-i.evaluate(t)}],[[ht],function(t,e){return-gi(e,1)[0].evaluate(t)}]]},"/":[ht,[ht,ht],function(t,e){var n=gi(e,2),r=n[0],i=n[1];return r.evaluate(t)/i.evaluate(t)}],"%":[ht,[ht,ht],function(t,e){var n=gi(e,2),r=n[0],i=n[1];return r.evaluate(t)%i.evaluate(t)}],ln2:[ht,[],function(){return Math.LN2}],pi:[ht,[],function(){return Math.PI}],e:[ht,[],function(){return Math.E}],"^":[ht,[ht,ht],function(t,e){var n=gi(e,2),r=n[0],i=n[1];return Math.pow(r.evaluate(t),i.evaluate(t))}],sqrt:[ht,[ht],function(t,e){var n=gi(e,1)[0];return Math.sqrt(n.evaluate(t))}],log10:[ht,[ht],function(t,e){var n=gi(e,1)[0];return Math.log(n.evaluate(t))/Math.LN10}],ln:[ht,[ht],function(t,e){var n=gi(e,1)[0];return Math.log(n.evaluate(t))}],log2:[ht,[ht],function(t,e){var n=gi(e,1)[0];return Math.log(n.evaluate(t))/Math.LN2}],sin:[ht,[ht],function(t,e){var n=gi(e,1)[0];return Math.sin(n.evaluate(t))}],cos:[ht,[ht],function(t,e){var n=gi(e,1)[0];return Math.cos(n.evaluate(t))}],tan:[ht,[ht],function(t,e){var n=gi(e,1)[0];return Math.tan(n.evaluate(t))}],asin:[ht,[ht],function(t,e){var n=gi(e,1)[0];return Math.asin(n.evaluate(t))}],acos:[ht,[ht],function(t,e){var n=gi(e,1)[0];return Math.acos(n.evaluate(t))}],atan:[ht,[ht],function(t,e){var n=gi(e,1)[0];return Math.atan(n.evaluate(t))}],min:[ht,_n(ht),function(t,e){return Math.min.apply(Math,Di(e.map((function(e){return e.evaluate(t)}))))}],max:[ht,_n(ht),function(t,e){return Math.max.apply(Math,Di(e.map((function(e){return e.evaluate(t)}))))}],abs:[ht,[ht],function(t,e){var n=gi(e,1)[0];return Math.abs(n.evaluate(t))}],round:[ht,[ht],function(t,e){var n=gi(e,1)[0].evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[ht,[ht],function(t,e){var n=gi(e,1)[0];return Math.floor(n.evaluate(t))}],ceil:[ht,[ht],function(t,e){var n=gi(e,1)[0];return Math.ceil(n.evaluate(t))}],"filter-==":[dt,[ft,gt],function(t,e){var n=gi(e,2),r=n[0],i=n[1];return t.properties()[r.value]===i.value}],"filter-id-==":[dt,[gt],function(t,e){var n=gi(e,1)[0];return t.id()===n.value}],"filter-type-==":[dt,[ft],function(t,e){var n=gi(e,1)[0];return t.geometryType()===n.value}],"filter-<":[dt,[ft,gt],function(t,e){var n=gi(e,2),r=n[0],i=n[1],a=t.properties()[r.value],o=i.value;return ni(a)==ni(o)&&a<o}],"filter-id-<":[dt,[gt],function(t,e){var n=gi(e,1)[0],r=t.id(),i=n.value;return ni(r)==ni(i)&&r<i}],"filter->":[dt,[ft,gt],function(t,e){var n=gi(e,2),r=n[0],i=n[1],a=t.properties()[r.value],o=i.value;return ni(a)==ni(o)&&a>o}],"filter-id->":[dt,[gt],function(t,e){var n=gi(e,1)[0],r=t.id(),i=n.value;return ni(r)==ni(i)&&r>i}],"filter-<=":[dt,[ft,gt],function(t,e){var n=gi(e,2),r=n[0],i=n[1],a=t.properties()[r.value],o=i.value;return ni(a)==ni(o)&&a<=o}],"filter-id-<=":[dt,[gt],function(t,e){var n=gi(e,1)[0],r=t.id(),i=n.value;return ni(r)==ni(i)&&r<=i}],"filter->=":[dt,[ft,gt],function(t,e){var n=gi(e,2),r=n[0],i=n[1],a=t.properties()[r.value],o=i.value;return ni(a)==ni(o)&&a>=o}],"filter-id->=":[dt,[gt],function(t,e){var n=gi(e,1)[0],r=t.id(),i=n.value;return ni(r)==ni(i)&&r>=i}],"filter-has":[dt,[gt],function(t,e){return gi(e,1)[0].value in t.properties()}],"filter-has-id":[dt,[],function(t){return null!==t.id()&&void 0!==t.id()}],"filter-type-in":[dt,[bt(ft)],function(t,e){return gi(e,1)[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[dt,[bt(gt)],function(t,e){return gi(e,1)[0].value.indexOf(t.id())>=0}],"filter-in-small":[dt,[ft,bt(gt)],function(t,e){var n=gi(e,2),r=n[0];return n[1].value.indexOf(t.properties()[r.value])>=0}],"filter-in-large":[dt,[ft,bt(gt)],function(t,e){var n=gi(e,2),r=n[0],i=n[1];return function(t,e,n,r){for(;n<=r;){var i=n+r>>1;if(e[i]===t)return!0;e[i]>t?r=i-1:n=i+1}return!1}(t.properties()[r.value],i.value,0,i.value.length-1)}],all:{type:dt,overloads:[[[dt,dt],function(t,e){var n=gi(e,2),r=n[0],i=n[1];return r.evaluate(t)&&i.evaluate(t)}],[_n(dt),function(t,e){var n,r=pO(e);try{for(r.s();!(n=r.n()).done;)if(!n.value.evaluate(t))return!1}catch(t){r.e(t)}finally{r.f()}return!0}]]},any:{type:dt,overloads:[[[dt,dt],function(t,e){var n=gi(e,2),r=n[0],i=n[1];return r.evaluate(t)||i.evaluate(t)}],[_n(dt),function(t,e){var n,r=pO(e);try{for(r.s();!(n=r.n()).done;)if(n.value.evaluate(t))return!0}catch(t){r.e(t)}finally{r.f()}return!1}]]},"!":[dt,[dt],function(t,e){return!gi(e,1)[0].evaluate(t)}],"is-supported-script":[dt,[ft],function(t,e){var n=gi(e,1)[0],r=t.globals&&t.globals.isSupportedScript;return!r||r(n.evaluate(t))}],upcase:[ft,[ft],function(t,e){return gi(e,1)[0].evaluate(t).toUpperCase()}],downcase:[ft,[ft],function(t,e){return gi(e,1)[0].evaluate(t).toLowerCase()}],concat:[ft,_n(gt),function(t,e){return e.map((function(e){return se(e.evaluate(t))})).join("")}],"resolved-locale":[ft,[mt],function(t,e){return gi(e,1)[0].evaluate(t).resolvedLocale()}]});var Dn=function(){function t(e,n){var r;oi(this,t),this.expression=e,this._warningHistory={},this._evaluator=new pe,this._defaultValue=n?"color"===(r=n).type&&Fn(r.default)?new qt(0,0,0,0):"color"===r.type?qt.parse(r.default)||null:"padding"===r.type?te.parse(r.default)||null:"variableAnchorOffsetCollection"===r.type?ne.parse(r.default)||null:void 0===r.default?null:r.default:null,this._enumValues=n&&"enum"===n.type?n.values:null}return ai(t,[{key:"evaluateWithoutErrorHandling",value:function(t,e,n,r,i,a){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=a,this.expression.evaluate(this._evaluator)}},{key:"evaluate",value:function(t,e,n,r,i,a){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=a||null;try{var o=this.expression.evaluate(this._evaluator);if(null==o||"number"==typeof o&&o!=o)return this._defaultValue;if(this._enumValues&&!(o in this._enumValues))throw new ue("Expected value to be one of ".concat(Object.keys(this._enumValues).map((function(t){return JSON.stringify(t)})).join(", "),", but found ").concat(JSON.stringify(o)," instead."));return o}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}])}();function Ln(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in vn}function Pn(t,e){var n=new ve(vn,Pe,[],e?function(t){var e={color:pt,string:ft,number:ht,enum:ft,boolean:dt,formatted:yt,padding:_t,resolvedImage:wt,variableAnchorOffsetCollection:xt};return"array"===t.type?bt(e[t.value]||gt,t.length):e[t.type]}(e):void 0),r=n.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return r?wn(new Dn(r,e)):xn(n.errors)}var On=function(){function t(e,n){oi(this,t),this.kind=e,this._styleExpression=n,this.isStateDependent="constant"!==e&&!Re(n.expression)}return ai(t,[{key:"evaluateWithoutErrorHandling",value:function(t,e,n,r,i,a){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,a)}},{key:"evaluate",value:function(t,e,n,r,i,a){return this._styleExpression.evaluate(t,e,n,r,i,a)}}])}(),Rn=function(){function t(e,n,r,i){oi(this,t),this.kind=e,this.zoomStops=r,this._styleExpression=n,this.isStateDependent="camera"!==e&&!Re(n.expression),this.interpolationType=i}return ai(t,[{key:"evaluateWithoutErrorHandling",value:function(t,e,n,r,i,a){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,a)}},{key:"evaluate",value:function(t,e,n,r,i,a){return this._styleExpression.evaluate(t,e,n,r,i,a)}},{key:"interpolationFactor",value:function(t,e,n){return this.interpolationType?je.interpolationFactor(this.interpolationType,t,e,n):0}}])}();function zn(t,e){var n=Pn(t,e);if("error"===n.result)return n;var r=n.value.expression,i=Oe(r);if(!i&&!bn(e))return xn([new ut("","data expressions not supported")]);var a=ze(r,["zoom"]);if(!a&&!Bn(e))return xn([new ut("","zoom expressions not supported")]);var o=Vn(r);return o||a?o instanceof ut?xn([o]):o instanceof je&&!kn(e)?xn([new ut("",'"interpolate" expressions cannot be used with this property')]):wn(o?new Rn(i?"camera":"composite",n.value,o.labels,o instanceof je?o.interpolation:void 0):new On(i?"constant":"source",n.value)):xn([new ut("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}var Hn=function(){function t(e,n){oi(this,t),this._parameters=e,this._specification=n,At(this,In(this._parameters,this._specification))}return ai(t,null,[{key:"deserialize",value:function(e){return new t(e._parameters,e._specification)}},{key:"serialize",value:function(t){return{_parameters:t._parameters,_specification:t._specification}}}])}();function Vn(t){var e=null;if(t instanceof Ze)e=Vn(t.result);else if(t instanceof We){var n,r=pO(t.args);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(e=Vn(i))break}}catch(t){r.e(t)}finally{r.f()}}else(t instanceof Ve||t instanceof je)&&t.input instanceof Le&&"zoom"===t.input.name&&(e=t);return e instanceof ut||t.eachChild((function(t){var n=Vn(t);n instanceof ut?e=n:!e&&n?e=new ut("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&n&&e!==n&&(e=new ut("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}function Nn(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":var e,n=pO(t.slice(1));try{for(n.s();!(e=n.n()).done;){var r=e.value;if(!Nn(r)&&"boolean"!=typeof r)return!1}}catch(t){n.e(t)}finally{n.f()}return!0;default:return!0}}var Kn={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Gn(t){if(null==t)return{filter:function(){return!0},needGeometry:!1};Nn(t)||(t=Wn(t));var e=Pn(t,Kn);if("error"===e.result)throw new Error(e.value.map((function(t){return"".concat(t.key,": ").concat(t.message)})).join(", "));return{filter:function(t,n,r){return e.value.evaluate(t,n,{},r)},needGeometry:$n(t)}}function jn(t,e){return t<e?-1:t>e?1:0}function $n(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(var e=1;e<t.length;e++)if($n(t[e]))return!0;return!1}function Wn(t){if(!t)return!0;var e,n=t[0];return t.length<=1?"any"!==n:"=="===n?Zn(t[1],t[2],"=="):"!="===n?Yn(Zn(t[1],t[2],"==")):"<"===n||">"===n||"<="===n||">="===n?Zn(t[1],t[2],n):"any"===n?(e=t.slice(1),["any"].concat(e.map(Wn))):"all"===n?["all"].concat(t.slice(1).map(Wn)):"none"===n?["all"].concat(t.slice(1).map(Wn).map(Yn)):"in"===n?qn(t[1],t.slice(2)):"!in"===n?Yn(qn(t[1],t.slice(2))):"has"===n?Xn(t[1]):"!has"===n?Yn(Xn(t[1])):"within"!==n||t}function Zn(t,e,n){switch(t){case"$type":return["filter-type-".concat(n),e];case"$id":return["filter-id-".concat(n),e];default:return["filter-".concat(n),t,e]}}function qn(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((function(t){return ni(t)!=ni(e[0])}))?["filter-in-large",t,["literal",e.sort(jn)]]:["filter-in-small",t,["literal",e]]}}function Xn(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function Yn(t){return["!",t]}function Jn(t){var e=ni(t);if("number"===e||"boolean"===e||"string"===e||null==t)return JSON.stringify(t);if(Array.isArray(t)){var n,r="[",i=pO(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;r+="".concat(Jn(a),",")}}catch(t){i.e(t)}finally{i.f()}return"".concat(r,"]")}for(var o=Object.keys(t).sort(),s="{",A=0;A<o.length;A++)s+="".concat(JSON.stringify(o[A]),":").concat(Jn(t[o[A]]),",");return"".concat(s,"}")}function tr(t){for(var e="",n=0,r=q;n<r.length;n++){var i=r[n];e+="/".concat(Jn(t[i]))}return e}function er(t){var e=t.value;return e?[new st(t.key,e,"constants have been deprecated as of v8")]:[]}function nr(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function rr(t){if(Array.isArray(t))return t.map(rr);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var n in t)e[n]=rr(t[n]);return e}return nr(t)}function ir(t){var e=t.key,n=t.value,r=t.valueSpec||{},i=t.objectElementValidators||{},a=t.style,o=t.styleSpec,s=t.validateSpec,A=[],u=Cn(n);if("object"!==u)return[new st(e,n,"object expected, ".concat(u," found"))];for(var l in n){var c=l.split(".")[0],h=r[c]||r["*"],f=void 0;if(i[c])f=i[c];else if(r[c])f=s;else if(i["*"])f=i["*"];else{if(!r["*"]){A.push(new st(e,n[l],'unknown property "'.concat(l,'"')));continue}f=s}A=A.concat(f({key:(e?"".concat(e,"."):e)+l,value:n[l],valueSpec:h,style:a,styleSpec:o,object:n,objectKey:l,validateSpec:s},n))}for(var d in r)i[d]||r[d].required&&void 0===r[d].default&&void 0===n[d]&&A.push(new st(e,n,'missing required property "'.concat(d,'"')));return A}function ar(t){var e=t.value,n=t.valueSpec,r=t.style,i=t.styleSpec,a=t.key,o=t.arrayElementValidator||t.validateSpec;if("array"!==Cn(e))return[new st(a,e,"array expected, ".concat(Cn(e)," found"))];if(n.length&&e.length!==n.length)return[new st(a,e,"array length ".concat(n.length," expected, length ").concat(e.length," found"))];if(n["min-length"]&&e.length<n["min-length"])return[new st(a,e,"array length at least ".concat(n["min-length"]," expected, length ").concat(e.length," found"))];var s={type:n.value,values:n.values};i.$version<7&&(s.function=n.function),"object"===Cn(n.value)&&(s=n.value);for(var A=[],u=0;u<e.length;u++)A=A.concat(o({array:e,arrayIndex:u,value:e[u],valueSpec:s,validateSpec:t.validateSpec,style:r,styleSpec:i,key:"".concat(a,"[").concat(u,"]")}));return A}function or(t){var e=t.key,n=t.value,r=t.valueSpec,i=Cn(n);return"number"===i&&n!=n&&(i="NaN"),"number"!==i?[new st(e,n,"number expected, ".concat(i," found"))]:"minimum"in r&&n<r.minimum?[new st(e,n,"".concat(n," is less than the minimum value ").concat(r.minimum))]:"maximum"in r&&n>r.maximum?[new st(e,n,"".concat(n," is greater than the maximum value ").concat(r.maximum))]:[]}function sr(t){var e,n,r,i=t.valueSpec,a=nr(t.value.type),o={},s="categorical"!==a&&void 0===t.value.property,A=!s,u="array"===Cn(t.value.stops)&&"array"===Cn(t.value.stops[0])&&"object"===Cn(t.value.stops[0][0]),l=ir({key:t.key,value:t.value,valueSpec:t.styleSpec.function,validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===a)return[new st(t.key,t.value,'identity function may not have a "stops" property')];var e=[],n=t.value;return e=e.concat(ar({key:t.key,value:n,valueSpec:t.valueSpec,validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:c})),"array"===Cn(n)&&0===n.length&&e.push(new st(t.key,n,"array must have at least one stop")),e},default:function(t){return t.validateSpec({key:t.key,value:t.value,valueSpec:i,validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===a&&s&&l.push(new st(t.key,t.value,'missing required property "property"')),"identity"===a||t.value.stops||l.push(new st(t.key,t.value,'missing required property "stops"')),"exponential"===a&&t.valueSpec.expression&&!kn(t.valueSpec)&&l.push(new st(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(A&&!bn(t.valueSpec)?l.push(new st(t.key,t.value,"property functions not supported")):s&&!Bn(t.valueSpec)&&l.push(new st(t.key,t.value,"zoom functions not supported"))),"categorical"!==a&&!u||void 0!==t.value.property||l.push(new st(t.key,t.value,'"property" property is required')),l;function c(t){var e=[],a=t.value,s=t.key;if("array"!==Cn(a))return[new st(s,a,"array expected, ".concat(Cn(a)," found"))];if(2!==a.length)return[new st(s,a,"array length 2 expected, length ".concat(a.length," found"))];if(u){if("object"!==Cn(a[0]))return[new st(s,a,"object expected, ".concat(Cn(a[0])," found"))];if(void 0===a[0].zoom)return[new st(s,a,"object stop key must have zoom")];if(void 0===a[0].value)return[new st(s,a,"object stop key must have value")];if(r&&r>nr(a[0].zoom))return[new st(s,a[0].zoom,"stop zoom values must appear in ascending order")];nr(a[0].zoom)!==r&&(r=nr(a[0].zoom),n=void 0,o={}),e=e.concat(ir({key:"".concat(s,"[0]"),value:a[0],valueSpec:{zoom:{}},validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:or,value:h}}))}else e=e.concat(h({key:"".concat(s,"[0]"),value:a[0],valueSpec:{},validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec},a));return Ln(rr(a[1]))?e.concat([new st("".concat(s,"[1]"),a[1],"expressions are not allowed in function stops.")]):e.concat(t.validateSpec({key:"".concat(s,"[1]"),value:a[1],valueSpec:i,validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec}))}function h(t,r){var s=Cn(t.value),A=nr(t.value),u=null!==t.value?t.value:r;if(e){if(s!==e)return[new st(t.key,u,"".concat(s," stop domain type must match previous stop domain type ").concat(e))]}else e=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new st(t.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==a){var l="number expected, ".concat(s," found");return bn(i)&&void 0===a&&(l+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new st(t.key,u,l)]}return"categorical"!==a||"number"!==s||isFinite(A)&&Math.floor(A)===A?"categorical"!==a&&"number"===s&&void 0!==n&&A<n?[new st(t.key,u,"stop domain values must appear in ascending order")]:(n=A,"categorical"===a&&A in o?[new st(t.key,u,"stop domain values must be unique")]:(o[A]=!0,[])):[new st(t.key,u,"integer expected, found ".concat(A))]}}function Ar(t){var e=("property"===t.expressionContext?zn:Pn)(rr(t.value),t.valueSpec);if("error"===e.result)return e.value.map((function(e){return new st("".concat(t.key).concat(e.key),t.value,e.message)}));var n=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!n.outputDefined())return[new st(t.key,t.value,'Invalid data expression for "'.concat(t.propertyKey,'". Output values must be contained as literals within the expression.'))];if("property"===t.expressionContext&&"layout"===t.propertyType&&!Re(n))return[new st(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!Re(n))return[new st(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!ze(n,["zoom","feature-state"]))return[new st(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!Oe(n))return[new st(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ur(t){var e=t.key,n=t.value,r=t.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(nr(n))&&i.push(new st(e,n,"expected one of [".concat(r.values.join(", "),"], ").concat(JSON.stringify(n)," found"))):-1===Object.keys(r.values).indexOf(nr(n))&&i.push(new st(e,n,"expected one of [".concat(Object.keys(r.values).join(", "),"], ").concat(JSON.stringify(n)," found"))),i}function lr(t){return Nn(rr(t.value))?Ar(At({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):cr(t)}function cr(t){var e=t.value,n=t.key;if("array"!==Cn(e))return[new st(n,e,"array expected, ".concat(Cn(e)," found"))];var r,i=t.styleSpec,a=[];if(e.length<1)return[new st(n,e,"filter array must have at least 1 element")];switch(a=a.concat(ur({key:"".concat(n,"[0]"),value:e[0],valueSpec:i.filter_operator,style:t.style,styleSpec:t.styleSpec})),nr(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===nr(e[1])&&a.push(new st(n,e,'"$type" cannot be use with operator "'.concat(e[0],'"')));case"==":case"!=":3!==e.length&&a.push(new st(n,e,'filter array for operator "'.concat(e[0],'" must have 3 elements')));case"in":case"!in":e.length>=2&&"string"!==(r=Cn(e[1]))&&a.push(new st("".concat(n,"[1]"),e[1],"string expected, ".concat(r," found")));for(var o=2;o<e.length;o++)r=Cn(e[o]),"$type"===nr(e[1])?a=a.concat(ur({key:"".concat(n,"[").concat(o,"]"),value:e[o],valueSpec:i.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==r&&"number"!==r&&"boolean"!==r&&a.push(new st("".concat(n,"[").concat(o,"]"),e[o],"string, number, or boolean expected, ".concat(r," found")));break;case"any":case"all":case"none":for(var s=1;s<e.length;s++)a=a.concat(cr({key:"".concat(n,"[").concat(s,"]"),value:e[s],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":r=Cn(e[1]),2!==e.length?a.push(new st(n,e,'filter array for "'.concat(e[0],'" operator must have 2 elements'))):"string"!==r&&a.push(new st("".concat(n,"[1]"),e[1],"string expected, ".concat(r," found")));break;case"within":r=Cn(e[1]),2!==e.length?a.push(new st(n,e,'filter array for "'.concat(e[0],'" operator must have 2 elements'))):"object"!==r&&a.push(new st("".concat(n,"[1]"),e[1],"object expected, ".concat(r," found")))}return a}function hr(t,e){var n=t.key,r=t.validateSpec,i=t.style,a=t.styleSpec,o=t.value,s=t.objectKey,A=a["".concat(e,"_").concat(t.layerType)];if(!A)return[];var u=s.match(/^(.*)-transition$/);if("paint"===e&&u&&A[u[1]]&&A[u[1]].transition)return r({key:n,value:o,valueSpec:a.transition,style:i,styleSpec:a});var l,c=t.valueSpec||A[s];if(!c)return[new st(n,o,'unknown property "'.concat(s,'"'))];if("string"===Cn(o)&&bn(c)&&!c.tokens&&(l=/^{([^}]+)}$/.exec(o)))return[new st(n,o,'"'.concat(s,'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": ').concat(JSON.stringify(l[1])," }`."))];var h=[];return"symbol"===t.layerType&&("text-field"===s&&i&&!i.glyphs&&h.push(new st(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===s&&Fn(rr(o))&&"identity"===nr(o.type)&&h.push(new st(n,o,'"text-font" does not support identity functions'))),h.concat(r({key:t.key,value:o,valueSpec:c,style:i,styleSpec:a,expressionContext:"property",propertyType:e,propertyKey:s}))}function fr(t){return hr(t,"paint")}function dr(t){return hr(t,"layout")}function pr(t){var e=[],n=t.value,r=t.key,i=t.style,a=t.styleSpec;n.type||n.ref||e.push(new st(r,n,'either "type" or "ref" is required'));var o,s=nr(n.type),A=nr(n.ref);if(n.id)for(var u=nr(n.id),l=0;l<t.arrayIndex;l++){var c=i.layers[l];nr(c.id)===u&&e.push(new st(r,n.id,'duplicate layer id "'.concat(n.id,'", previously used at line ').concat(c.id.__line__)))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach((function(t){t in n&&e.push(new st(r,n[t],'"'.concat(t,'" is prohibited for ref layers')))})),i.layers.forEach((function(t){nr(t.id)===A&&(o=t)})),o?o.ref?e.push(new st(r,n.ref,"ref cannot reference another ref layer")):s=nr(o.type):e.push(new st(r,n.ref,'ref layer "'.concat(A,'" not found')));else if("background"!==s)if(n.source){var h=i.sources&&i.sources[n.source],f=h&&nr(h.type);h?"vector"===f&&"raster"===s?e.push(new st(r,n.source,'layer "'.concat(n.id,'" requires a raster source'))):"raster-dem"!==f&&"hillshade"===s?e.push(new st(r,n.source,'layer "'.concat(n.id,'" requires a raster-dem source'))):"raster"===f&&"raster"!==s?e.push(new st(r,n.source,'layer "'.concat(n.id,'" requires a vector source'))):"vector"!==f||n["source-layer"]?"raster-dem"===f&&"hillshade"!==s?e.push(new st(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]||"geojson"===f&&h.lineMetrics||e.push(new st(r,n,'layer "'.concat(n.id,'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.'))):e.push(new st(r,n,'layer "'.concat(n.id,'" must specify a "source-layer"'))):e.push(new st(r,n.source,'source "'.concat(n.source,'" not found')))}else e.push(new st(r,n,'missing required property "source"'));return e=e.concat(ir({key:r,value:n,valueSpec:a.layer,style:t.style,styleSpec:t.styleSpec,validateSpec:t.validateSpec,objectElementValidators:{"*":function(){return[]},type:function(){return t.validateSpec({key:"".concat(r,".type"),value:n.type,valueSpec:a.layer.type,style:t.style,styleSpec:t.styleSpec,validateSpec:t.validateSpec,object:n,objectKey:"type"})},filter:lr,layout:function(t){return ir({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,validateSpec:t.validateSpec,objectElementValidators:{"*":function(t){return dr(At({layerType:s},t))}}})},paint:function(t){return ir({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,validateSpec:t.validateSpec,objectElementValidators:{"*":function(t){return fr(At({layerType:s},t))}}})}}}))}function vr(t){var e=t.value,n=t.key,r=Cn(e);return"string"!==r?[new st(n,e,"string expected, ".concat(r," found"))]:[]}var gr={promoteId:function(t){var e=t.key,n=t.value;if("string"===Cn(n))return vr({key:e,value:n});var r=[];for(var i in n)r.push.apply(r,Di(vr({key:"".concat(e,".").concat(i),value:n[i]})));return r}};function mr(t){var e=t.value,n=t.key,r=t.styleSpec,i=t.style,a=t.validateSpec;if(!e.type)return[new st(n,e,'"type" is required')];var o,s=nr(e.type);switch(s){case"vector":case"raster":return o=ir({key:n,value:e,valueSpec:r["source_".concat(s.replace("-","_"))],style:t.style,styleSpec:r,objectElementValidators:gr,validateSpec:a});case"raster-dem":return o=function(t){var e,n=null!==(e=t.sourceName)&&void 0!==e?e:"",r=t.value,i=t.styleSpec,a=i.source_raster_dem,o=t.style,s=[],A=Cn(r);if(void 0===r)return s;if("object"!==A)return s.push(new st("source_raster_dem",r,"object expected, ".concat(A," found"))),s;var u="custom"===nr(r.encoding),l=["redFactor","greenFactor","blueFactor","baseShift"],c=t.value.encoding?'"'.concat(t.value.encoding,'"'):"Default";for(var h in r)!u&&l.includes(h)?s.push(new st(h,r[h],'In "'.concat(n,'": "').concat(h,'" is only valid when "encoding" is set to "custom". ').concat(c," encoding found"))):a[h]?s=s.concat(t.validateSpec({key:h,value:r[h],valueSpec:a[h],validateSpec:t.validateSpec,style:o,styleSpec:i})):s.push(new st(h,r[h],'unknown property "'.concat(h,'"')));return s}({sourceName:n,value:e,style:t.style,styleSpec:r,validateSpec:a}),o;case"geojson":if(o=ir({key:n,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r,validateSpec:a,objectElementValidators:gr}),e.cluster)for(var A in e.clusterProperties){var u,l,c=gi(e.clusterProperties[A],2),h=c[0],f=c[1],d="string"==typeof h?[h,["accumulated"],["get",A]]:h;(u=o).push.apply(u,Di(Ar({key:"".concat(n,".").concat(A,".map"),value:f,validateSpec:a,expressionContext:"cluster-map"}))),(l=o).push.apply(l,Di(Ar({key:"".concat(n,".").concat(A,".reduce"),value:d,validateSpec:a,expressionContext:"cluster-reduce"})))}return o;case"video":return ir({key:n,value:e,valueSpec:r.source_video,style:i,validateSpec:a,styleSpec:r});case"image":return ir({key:n,value:e,valueSpec:r.source_image,style:i,validateSpec:a,styleSpec:r});case"canvas":return[new st(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ur({key:"".concat(n,".type"),value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,validateSpec:a,styleSpec:r})}}function yr(t){var e=t.value,n=t.styleSpec,r=n.light,i=t.style,a=[],o=Cn(e);if(void 0===e)return a;if("object"!==o)return a=a.concat([new st("light",e,"object expected, ".concat(o," found"))]);for(var s in e){var A=s.match(/^(.*)-transition$/);a=a.concat(A&&r[A[1]]&&r[A[1]].transition?t.validateSpec({key:s,value:e[s],valueSpec:n.transition,validateSpec:t.validateSpec,style:i,styleSpec:n}):r[s]?t.validateSpec({key:s,value:e[s],valueSpec:r[s],validateSpec:t.validateSpec,style:i,styleSpec:n}):[new st(s,e[s],'unknown property "'.concat(s,'"'))])}return a}function _r(t){var e=t.value,n=t.styleSpec,r=n.terrain,i=t.style,a=[],o=Cn(e);if(void 0===e)return a;if("object"!==o)return a=a.concat([new st("terrain",e,"object expected, ".concat(o," found"))]);for(var s in e)a=a.concat(r[s]?t.validateSpec({key:s,value:e[s],valueSpec:r[s],validateSpec:t.validateSpec,style:i,styleSpec:n}):[new st(s,e[s],'unknown property "'.concat(s,'"'))]);return a}function wr(t){var e=[],n=t.value,r=t.key;if(Array.isArray(n)){var i=[],a=[];for(var o in n)n[o].id&&i.includes(n[o].id)&&e.push(new st(r,n,"all the sprites' ids must be unique, but ".concat(n[o].id," is duplicated"))),i.push(n[o].id),n[o].url&&a.includes(n[o].url)&&e.push(new st(r,n,"all the sprites' URLs must be unique, but ".concat(n[o].url," is duplicated"))),a.push(n[o].url),e=e.concat(ir({key:"".concat(r,"[").concat(o,"]"),value:n[o],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:t.validateSpec}));return e}return vr({key:r,value:n})}var xr={"*":function(){return[]},array:ar,boolean:function(t){var e=t.value,n=t.key,r=Cn(e);return"boolean"!==r?[new st(n,e,"boolean expected, ".concat(r," found"))]:[]},number:or,color:function(t){var e=t.key,n=t.value,r=Cn(n);return"string"!==r?[new st(e,n,"color expected, ".concat(r," found"))]:qt.parse(String(n))?[]:[new st(e,n,'color expected, "'.concat(n,'" found'))]},constants:er,enum:ur,filter:lr,function:sr,layer:pr,object:ir,source:mr,light:yr,terrain:_r,string:vr,formatted:function(t){return 0===vr(t).length?[]:Ar(t)},resolvedImage:function(t){return 0===vr(t).length?[]:Ar(t)},padding:function(t){var e=t.key,n=t.value;if("array"===Cn(n)){if(n.length<1||n.length>4)return[new st(e,n,"padding requires 1 to 4 values; ".concat(n.length," values found"))];for(var r={type:"number"},i=[],a=0;a<n.length;a++)i=i.concat(t.validateSpec({key:"".concat(e,"[").concat(a,"]"),value:n[a],validateSpec:t.validateSpec,valueSpec:r}));return i}return or({key:e,value:n,valueSpec:{}})},variableAnchorOffsetCollection:function(t){var e=t.key,n=t.value,r=Cn(n),i=t.styleSpec;if("array"!==r||n.length<1||n.length%2!=0)return[new st(e,n,"variableAnchorOffsetCollection requires a non-empty array of even length")];for(var a=[],o=0;o<n.length;o+=2)a=(a=a.concat(ur({key:"".concat(e,"[").concat(o,"]"),value:n[o],valueSpec:i.layout_symbol["text-anchor"]}))).concat(ar({key:"".concat(e,"[").concat(o+1,"]"),value:n[o+1],valueSpec:{length:2,value:"number"},validateSpec:t.validateSpec,style:t.style,styleSpec:i}));return a},sprite:wr};function br(t){var e=t.value,n=t.valueSpec,r=t.styleSpec;return t.validateSpec=br,n.expression&&Fn(nr(e))?sr(t):n.expression&&Ln(rr(e))?Ar(t):n.type&&xr[n.type]?xr[n.type](t):ir(At({},t,{valueSpec:n.type?r[n.type]:n}))}function Br(t){var e=t.value,n=t.key,r=vr(t);return r.length||(-1===e.indexOf("{fontstack}")&&r.push(new st(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new st(n,e,'"glyphs" url must include a "{range}" token'))),r}function kr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Z,n=[];return n=n.concat(br({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,validateSpec:br,objectElementValidators:{glyphs:Br,"*":function(){return[]}}})),t.constants&&(n=n.concat(er({key:"constants",value:t.constants,style:t,styleSpec:e,validateSpec:br}))),Fr(n)}function Cr(t){return function(e){return t(dO(dO({},e),{},{validateSpec:br}))}}function Fr(t){return[].concat(t).sort((function(t,e){return t.line-e.line}))}function Er(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Fr(t.apply(this,n))}}kr.source=Er(Cr(mr)),kr.sprite=Er(Cr(wr)),kr.glyphs=Er(Cr(Br)),kr.light=Er(Cr(yr)),kr.terrain=Er(Cr(_r)),kr.layer=Er(Cr(pr)),kr.filter=Er(Cr(lr)),kr.paintProperty=Er(Cr(fr)),kr.layoutProperty=Er(Cr(dr));var Ir=kr,Ur=Ir.light,Sr=Ir.paintProperty,Qr=Ir.layoutProperty;function Tr(t,e){var n=!1;if(e&&e.length){var r,i=pO(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;t.fire(new $(new Error(a.message))),n=!0}}catch(t){i.e(t)}finally{i.f()}}return n}var Mr=function(){function t(e,n,r){oi(this,t);var i=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var a=new Int32Array(this.arrayBuffer);e=a[0],this.d=(n=a[1])+2*(r=a[2]);for(var o=0;o<this.d*this.d;o++){var s=a[3+o],A=a[3+o+1];i.push(s===A?null:a.subarray(s,A))}var u=a[3+i.length+1];this.keys=a.subarray(a[3+i.length],u),this.bboxes=a.subarray(u),this.insert=this._insertReadonly}else{this.d=n+2*r;for(var l=0;l<this.d*this.d;l++)i.push([]);this.keys=[],this.bboxes=[]}this.n=n,this.extent=e,this.padding=r,this.scale=n/e,this.uid=0;var c=r/n*e;this.min=-c,this.max=e+c}return ai(t,[{key:"insert",value:function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}},{key:"_insertReadonly",value:function(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}},{key:"_insertCell",value:function(t,e,n,r,i,a){this.cells[i].push(a)}},{key:"query",value:function(t,e,n,r,i){var a=this.min,o=this.max;if(t<=a&&e<=a&&o<=n&&o<=r&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,n,r,this._queryCell,s,{},i),s}},{key:"_queryCell",value:function(t,e,n,r,i,a,o,s){var A=this.cells[i];if(null!==A)for(var u=this.keys,l=this.bboxes,c=0;c<A.length;c++){var h=A[c];if(void 0===o[h]){var f=4*h;(s?s(l[f+0],l[f+1],l[f+2],l[f+3]):t<=l[f+2]&&e<=l[f+3]&&n>=l[f+0]&&r>=l[f+1])?(o[h]=!0,a.push(u[h])):o[h]=!1}}}},{key:"_forEachCell",value:function(t,e,n,r,i,a,o,s){for(var A=this._convertToCellCoord(t),u=this._convertToCellCoord(e),l=this._convertToCellCoord(n),c=this._convertToCellCoord(r),h=A;h<=l;h++)for(var f=u;f<=c;f++){var d=this.d*f+h;if((!s||s(this._convertFromCellCoord(h),this._convertFromCellCoord(f),this._convertFromCellCoord(h+1),this._convertFromCellCoord(f+1)))&&i.call(this,t,e,n,r,d,a,o,s))return}}},{key:"_convertFromCellCoord",value:function(t){return(t-this.padding)/this.scale}},{key:"_convertToCellCoord",value:function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}},{key:"toArrayBuffer",value:function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(e+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var a=e,o=0;o<t.length;o++){var s=t[o];i[3+o]=a,i.set(s,a),a+=s.length}return i[3+t.length]=a,i.set(this.keys,a),a+=this.keys.length,i[3+t.length+1]=a,i.set(this.bboxes,a),a+=this.bboxes.length,i.buffer}}],[{key:"serialize",value:function(t,e){var n=t.toArrayBuffer();return e&&e.push(n),{buffer:n}}},{key:"deserialize",value:function(e){return new t(e.buffer)}}])}(),Dr={};function Lr(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Dr[t])throw new Error("".concat(t," is already registered."));Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Dr[t]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}}for(var Pr in Lr("Object",Object),Lr("TransferableGridIndex",Mr),Lr("Color",qt),Lr("Error",Error),Lr("AJAXError",P),Lr("ResolvedImage",re),Lr("StylePropertyFunction",Hn),Lr("StyleExpression",Dn,{omit:["_evaluator"]}),Lr("ZoomDependentExpression",Rn),Lr("ZoomConstantExpression",On),Lr("CompoundExpression",Le,{omit:["_evaluate"]}),vn)vn[Pr]._classRegistryKey||Lr("Expression_".concat(Pr),vn[Pr]);function Or(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Rr(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof Blob)return t;if(Or(t))return e&&e.push(t),t;if(E(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var n=t;return e&&e.push(n.buffer),n}if(t instanceof ImageData)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){var r,i=[],a=pO(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;i.push(Rr(o,e))}}catch(t){a.e(t)}finally{a.f()}return i}if("object"==ni(t)){var s=t.constructor,A=s._classRegistryKey;if(!A)throw new Error("can't serialize object of unregistered class");if(!Dr[A])throw new Error("".concat(A," is not registered."));var u=s.serialize?s.serialize(t,e):{};if(s.serialize){if(e&&u===e[e.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(var l in t)if(t.hasOwnProperty(l)&&!(Dr[A].omit.indexOf(l)>=0)){var c=t[l];u[l]=Dr[A].shallow.indexOf(l)>=0?c:Rr(c,e)}t instanceof Error&&(u.message=t.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==A&&(u.$name=A),u}throw new Error("can't serialize object of type "+ni(t))}function zr(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof Blob||Or(t)||E(t)||ArrayBuffer.isView(t)||t instanceof ImageData)return t;if(Array.isArray(t))return t.map(zr);if("object"==ni(t)){var e=t.$name||"Object";if(!Dr[e])throw new Error("can't deserialize unregistered class ".concat(e));var n=Dr[e].klass;if(!n)throw new Error("can't deserialize unregistered class ".concat(e));if(n.deserialize)return n.deserialize(t);for(var r=Object.create(n.prototype),i=0,a=Object.keys(t);i<a.length;i++){var o=a[i];if("$name"!==o){var s=t[o];r[o]=Dr[e].shallow.indexOf(o)>=0?s:zr(s)}}return r}throw new Error("can't deserialize object of type "+ni(t))}var Hr=function(){function t(){oi(this,t),this.first=!0}return ai(t,[{key:"update",value:function(t,e){var n=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=n,!0))}}])}(),Vr={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};function Nr(t){var e,n=pO(t);try{for(n.s();!(e=n.n()).done;)if(jr(e.value.charCodeAt(0)))return!0}catch(t){n.e(t)}finally{n.f()}return!1}function Kr(t){var e,n=pO(t);try{for(n.s();!(e=n.n()).done;)if(!Gr(e.value.charCodeAt(0)))return!1}catch(t){n.e(t)}finally{n.f()}return!0}function Gr(t){return!(Vr.Arabic(t)||Vr["Arabic Supplement"](t)||Vr["Arabic Extended-A"](t)||Vr["Arabic Presentation Forms-A"](t)||Vr["Arabic Presentation Forms-B"](t))}function jr(t){return!(746!==t&&747!==t&&(t<4352||!(Vr["Bopomofo Extended"](t)||Vr.Bopomofo(t)||Vr["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||Vr["CJK Compatibility Ideographs"](t)||Vr["CJK Compatibility"](t)||Vr["CJK Radicals Supplement"](t)||Vr["CJK Strokes"](t)||!(!Vr["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||Vr["CJK Unified Ideographs Extension A"](t)||Vr["CJK Unified Ideographs"](t)||Vr["Enclosed CJK Letters and Months"](t)||Vr["Hangul Compatibility Jamo"](t)||Vr["Hangul Jamo Extended-A"](t)||Vr["Hangul Jamo Extended-B"](t)||Vr["Hangul Jamo"](t)||Vr["Hangul Syllables"](t)||Vr.Hiragana(t)||Vr["Ideographic Description Characters"](t)||Vr.Kanbun(t)||Vr["Kangxi Radicals"](t)||Vr["Katakana Phonetic Extensions"](t)||Vr.Katakana(t)&&12540!==t||!(!Vr["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!Vr["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||Vr["Unified Canadian Aboriginal Syllabics"](t)||Vr["Unified Canadian Aboriginal Syllabics Extended"](t)||Vr["Vertical Forms"](t)||Vr["Yijing Hexagram Symbols"](t)||Vr["Yi Syllables"](t)||Vr["Yi Radicals"](t))))}function $r(t){return!(jr(t)||function(t){return!!(Vr["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||Vr["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||Vr["Letterlike Symbols"](t)||Vr["Number Forms"](t)||Vr["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||Vr["Control Pictures"](t)&&9251!==t||Vr["Optical Character Recognition"](t)||Vr["Enclosed Alphanumerics"](t)||Vr["Geometric Shapes"](t)||Vr["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Vr["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Vr["CJK Symbols and Punctuation"](t)||Vr.Katakana(t)||Vr["Private Use Area"](t)||Vr["CJK Compatibility Forms"](t)||Vr["Small Form Variants"](t)||Vr["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function Wr(t){return t>=1424&&t<=2303||Vr["Arabic Presentation Forms-A"](t)||Vr["Arabic Presentation Forms-B"](t)}function Zr(t,e){return!(!e&&Wr(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||Vr.Khmer(t))}function qr(t){var e,n=pO(t);try{for(n.s();!(e=n.n()).done;)if(Wr(e.value.charCodeAt(0)))return!0}catch(t){n.e(t)}finally{n.f()}return!1}var Xr="deferred",Yr="loading",Jr="loaded",ti=null,ei="unavailable",ri=null,ii=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(ei="error"),ti&&ti(t)};function Ai(){li.fire(new j("pluginStateChange",{pluginStatus:ei,pluginURL:ri}))}var li=new W,hi=function(){return ei},di=function(){if(ei!==Xr||!ri)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ei=Yr,Ai(),ri&&V({url:ri},(function(t){t?ii(t):(ei=Jr,Ai())}))},mi={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return ei===Jr||null!=mi.applyArabicShaping},isLoading:function(){return ei===Yr},setState:function(t){if(!C())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");ei=t.pluginStatus,ri=t.pluginURL},isParsed:function(){if(!C())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return null!=mi.applyArabicShaping&&null!=mi.processBidirectionalText&&null!=mi.processStyledBidirectionalText},getPluginURL:function(){if(!C())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return ri}},yi=function(){function t(e,n){oi(this,t),this.zoom=e,n?(this.now=n.now,this.fadeDuration=n.fadeDuration,this.zoomHistory=n.zoomHistory,this.transition=n.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Hr,this.transition={})}return ai(t,[{key:"isSupportedScript",value:function(t){return function(t,e){var n,r=pO(t);try{for(r.s();!(n=r.n()).done;)if(!Zr(n.value.charCodeAt(0),e))return!1}catch(t){r.e(t)}finally{r.f()}return!0}(t,mi.isLoaded())}},{key:"crossFadingFactor",value:function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}},{key:"getCrossfadeParameters",value:function(){var t=this.zoom,e=t-Math.floor(t),n=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*e}}}])}(),_i=function(){function t(e,n){oi(this,t),this.property=e,this.value=n,this.expression=function(t,e){if(Fn(t))return new Hn(t,e);if(Ln(t)){var n=zn(t,e);if("error"===n.result)throw new Error(n.value.map((function(t){return"".concat(t.key,": ").concat(t.message)})).join(", "));return n.value}var r=t;return"color"===e.type&&"string"==typeof t?r=qt.parse(t):"padding"!==e.type||"number"!=typeof t&&!Array.isArray(t)?"variableAnchorOffsetCollection"===e.type&&Array.isArray(t)&&(r=ne.parse(t)):r=te.parse(t),{kind:"constant",evaluate:function(){return r}}}(void 0===n?e.specification.default:n,e.specification)}return ai(t,[{key:"isDataDriven",value:function(){return"source"===this.expression.kind||"composite"===this.expression.kind}},{key:"possiblyEvaluate",value:function(t,e,n){return this.property.possiblyEvaluate(this,t,e,n)}}])}(),wi=function(){function t(e){oi(this,t),this.property=e,this.value=new _i(e,void 0)}return ai(t,[{key:"transitioned",value:function(t,e){return new bi(this.property,this.value,e,g({},t.transition,this.transition),t.now)}},{key:"untransitioned",value:function(){return new bi(this.property,this.value,null,{},0)}}])}(),xi=function(){function t(e){oi(this,t),this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}return ai(t,[{key:"getValue",value:function(t){return w(this._values[t].value.value)}},{key:"setValue",value:function(t,e){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new wi(this._values[t].property)),this._values[t].value=new _i(this._values[t].property,null===e?void 0:w(e))}},{key:"getTransition",value:function(t){return w(this._values[t].transition)}},{key:"setTransition",value:function(t,e){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new wi(this._values[t].property)),this._values[t].transition=w(e)||void 0}},{key:"serialize",value:function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e++){var r=n[e],i=this.getValue(r);void 0!==i&&(t[r]=i);var a=this.getTransition(r);void 0!==a&&(t["".concat(r,"-transition")]=a)}return t}},{key:"transitioned",value:function(t,e){for(var n=new Bi(this._properties),r=0,i=Object.keys(this._values);r<i.length;r++){var a=i[r];n._values[a]=this._values[a].transitioned(t,e._values[a])}return n}},{key:"untransitioned",value:function(){for(var t=new Bi(this._properties),e=0,n=Object.keys(this._values);e<n.length;e++){var r=n[e];t._values[r]=this._values[r].untransitioned()}return t}}])}(),bi=function(){function t(e,n,r,i,a){oi(this,t),this.property=e,this.value=n,this.begin=a+i.delay||0,this.end=this.begin+i.duration||0,e.specification.transition&&(i.delay||i.duration)&&(this.prior=r)}return ai(t,[{key:"possiblyEvaluate",value:function(t,e,n){var r=t.now||0,i=this.value.possiblyEvaluate(t,e,n),a=this.prior;if(a){if(r>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(r<this.begin)return a.possiblyEvaluate(t,e,n);var o=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(a.possiblyEvaluate(t,e,n),i,function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}(o))}return i}}])}(),Bi=function(){function t(e){oi(this,t),this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}return ai(t,[{key:"possiblyEvaluate",value:function(t,e,n){for(var r=new Fi(this._properties),i=0,a=Object.keys(this._values);i<a.length;i++){var o=a[i];r._values[o]=this._values[o].possiblyEvaluate(t,e,n)}return r}},{key:"hasTransition",value:function(){for(var t=0,e=Object.keys(this._values);t<e.length;t++){var n=e[t];if(this._values[n].prior)return!0}return!1}}])}(),ki=function(){function t(e){oi(this,t),this._properties=e,this._values=Object.create(e.defaultPropertyValues)}return ai(t,[{key:"hasValue",value:function(t){return void 0!==this._values[t].value}},{key:"getValue",value:function(t){return w(this._values[t].value)}},{key:"setValue",value:function(t,e){this._values[t]=new _i(this._values[t].property,null===e?void 0:w(e))}},{key:"serialize",value:function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e++){var r=n[e],i=this.getValue(r);void 0!==i&&(t[r]=i)}return t}},{key:"possiblyEvaluate",value:function(t,e,n){for(var r=new Fi(this._properties),i=0,a=Object.keys(this._values);i<a.length;i++){var o=a[i];r._values[o]=this._values[o].possiblyEvaluate(t,e,n)}return r}}])}(),Ci=function(){function t(e,n,r){oi(this,t),this.property=e,this.value=n,this.parameters=r}return ai(t,[{key:"isConstant",value:function(){return"constant"===this.value.kind}},{key:"constantOr",value:function(t){return"constant"===this.value.kind?this.value.value:t}},{key:"evaluate",value:function(t,e,n,r){return this.property.evaluate(this.value,this.parameters,t,e,n,r)}}])}(),Fi=function(){function t(e){oi(this,t),this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}return ai(t,[{key:"get",value:function(t){return this._values[t]}}])}(),Ei=function(){function t(e){oi(this,t),this.specification=e}return ai(t,[{key:"possiblyEvaluate",value:function(t,e){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(e)}},{key:"interpolate",value:function(t,e,n){var r=Ge[this.specification.type];return r?r(t,e,n):t}}])}(),Ii=function(){function t(e,n){oi(this,t),this.specification=e,this.overrides=n}return ai(t,[{key:"possiblyEvaluate",value:function(t,e,n,r){return new Ci(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},n,r)}:t.expression,e)}},{key:"interpolate",value:function(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new Ci(this,{kind:"constant",value:void 0},t.parameters);var r=Ge[this.specification.type];if(r){var i=r(t.value.value,e.value.value,n);return new Ci(this,{kind:"constant",value:i},t.parameters)}return t}},{key:"evaluate",value:function(t,e,n,r,i,a){return"constant"===t.kind?t.value:t.evaluate(e,n,r,i,a)}}])}(),Ui=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"possiblyEvaluate",value:function(t,e,n,r){if(void 0===t.value)return new Ci(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var i=t.expression.evaluate(e,null,{},n,r),a="resolvedImage"===t.property.specification.type&&"string"!=typeof i?i.name:i,o=this._calculate(a,a,a,e);return new Ci(this,{kind:"constant",value:o},e)}if("camera"===t.expression.kind){var s=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new Ci(this,{kind:"constant",value:s},e)}return new Ci(this,t.expression,e)}},{key:"evaluate",value:function(t,e,n,r,i,a){if("source"===t.kind){var o=t.evaluate(e,n,r,i,a);return this._calculate(o,o,o,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},n,r),t.evaluate({zoom:Math.floor(e.zoom)},n,r),t.evaluate({zoom:Math.floor(e.zoom)+1},n,r),e):t.value}},{key:"_calculate",value:function(t,e,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}}},{key:"interpolate",value:function(t){return t}}])}(Ii),Si=function(){function t(e){oi(this,t),this.specification=e}return ai(t,[{key:"possiblyEvaluate",value:function(t,e,n,r){if(void 0!==t.value){if("constant"===t.expression.kind){var i=t.expression.evaluate(e,null,{},n,r);return this._calculate(i,i,i,e)}return this._calculate(t.expression.evaluate(new yi(Math.floor(e.zoom-1),e)),t.expression.evaluate(new yi(Math.floor(e.zoom),e)),t.expression.evaluate(new yi(Math.floor(e.zoom+1),e)),e)}}},{key:"_calculate",value:function(t,e,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}}},{key:"interpolate",value:function(t){return t}}])}(),Pi=function(){function t(e){oi(this,t),this.specification=e}return ai(t,[{key:"possiblyEvaluate",value:function(t,e,n,r){return!!t.expression.evaluate(e,null,{},n,r)}},{key:"interpolate",value:function(){return!1}}])}(),Oi=ai((function t(e){for(var n in oi(this,t),this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){var r=e[n];r.specification.overridable&&this.overridableProperties.push(n);var i=this.defaultPropertyValues[n]=new _i(r,void 0),a=this.defaultTransitionablePropertyValues[n]=new wi(r);this.defaultTransitioningPropertyValues[n]=a.untransitioned(),this.defaultPossiblyEvaluatedValues[n]=i.possiblyEvaluate({})}}));Lr("DataDrivenProperty",Ii),Lr("DataConstantProperty",Ei),Lr("CrossFadedDataDrivenProperty",Ui),Lr("CrossFadedProperty",Si),Lr("ColorRampProperty",Pi);var Ri="-transition",zi=function(t){function e(t,n){var r;if(oi(this,e),(r=gO(this,e)).id=t.id,r.type=t.type,r._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==t.type&&(r.metadata=t.metadata,r.minzoom=t.minzoom,r.maxzoom=t.maxzoom,"background"!==t.type&&(r.source=t.source,r.sourceLayer=t["source-layer"],r.filter=t.filter),n.layout&&(r._unevaluatedLayout=new ki(n.layout)),n.paint)){for(var i in r._transitionablePaint=new xi(n.paint),t.paint)r.setPaintProperty(i,t.paint[i],{validate:!1});for(var a in t.layout)r.setLayoutProperty(a,t.layout[a],{validate:!1});r._transitioningPaint=r._transitionablePaint.untransitioned(),r.paint=new Fi(n.paint)}return si(r)}return ci(e,t),ai(e,[{key:"getCrossfadeParameters",value:function(){return this._crossfadeParameters}},{key:"getLayoutProperty",value:function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)}},{key:"setLayoutProperty",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null!=e&&this._validate(Qr,"layers.".concat(this.id,".layout.").concat(t),t,e,n)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)}},{key:"getPaintProperty",value:function(t){return t.endsWith(Ri)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}},{key:"setPaintProperty",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=e&&this._validate(Sr,"layers.".concat(this.id,".paint.").concat(t),t,e,n))return!1;if(t.endsWith(Ri))return this._transitionablePaint.setTransition(t.slice(0,-11),e||void 0),!1;var r=this._transitionablePaint._values[t],i="cross-faded-data-driven"===r.property.specification["property-type"],a=r.value.isDataDriven(),o=r.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);var s=this._transitionablePaint._values[t].value;return s.isDataDriven()||a||i||this._handleOverridablePaintPropertyUpdate(t,o,s)}},{key:"_handleSpecialPaintPropertyUpdate",value:function(t){}},{key:"_handleOverridablePaintPropertyUpdate",value:function(t,e,n){return!1}},{key:"isHidden",value:function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility}},{key:"updateTransitions",value:function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}},{key:"hasTransition",value:function(){return this._transitioningPaint.hasTransition()}},{key:"recalculate",value:function(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)}},{key:"serialize",value:function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),_(t,(function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)}))}},{key:"_validate",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!i||!1!==i.validate)&&Tr(this,t.call(Ir,{key:e,layerType:this.type,objectKey:n,value:r,styleSpec:Z,style:{glyphs:!0,sprite:!0}}))}},{key:"is3D",value:function(){return!1}},{key:"isTileClipped",value:function(){return!1}},{key:"hasOffscreenPass",value:function(){return!1}},{key:"resize",value:function(){}},{key:"isStateDependent",value:function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof Ci&&bn(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1}}])}(W),Hi={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Vi=ai((function t(e,n){oi(this,t),this._structArray=e,this._pos1=n*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8})),Ni=function(){function t(){oi(this,t),this.isTransferred=!1,this.capacity=-1,this.resize(0)}return ai(t,[{key:"_trim",value:function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}},{key:"clear",value:function(){this.length=0}},{key:"resize",value:function(t){this.reserve(t),this.length=t}},{key:"reserve",value:function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}}},{key:"_refreshViews",value:function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}],[{key:"serialize",value:function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}},{key:"deserialize",value:function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e}}])}();function Ki(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,r=0;return{members:t.map((function(t){var i=Hi[t.type].BYTES_PER_ELEMENT,a=n=Gi(n,Math.max(e,i)),o=t.components||1;return r=Math.max(r,i),n+=i*o,{name:t.name,type:t.type,components:o,offset:a}})),size:Gi(n,Math.max(r,e)),alignment:e}}function Gi(t,e){return Math.ceil(t/e)*e}var ji=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)}},{key:"emplace",value:function(t,e,n){var r=2*t;return this.int16[r+0]=e,this.int16[r+1]=n,t}}])}(Ni);ji.prototype.bytesPerElement=4,Lr("StructArrayLayout2i4",ji);var $i=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}},{key:"emplace",value:function(t,e,n,r){var i=3*t;return this.int16[i+0]=e,this.int16[i+1]=n,this.int16[i+2]=r,t}}])}(Ni);$i.prototype.bytesPerElement=6,Lr("StructArrayLayout3i6",$i);var Wi=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}},{key:"emplace",value:function(t,e,n,r,i){var a=4*t;return this.int16[a+0]=e,this.int16[a+1]=n,this.int16[a+2]=r,this.int16[a+3]=i,t}}])}(Ni);Wi.prototype.bytesPerElement=8,Lr("StructArrayLayout4i8",Wi);var Zi=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r,i,a){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,r,i,a)}},{key:"emplace",value:function(t,e,n,r,i,a,o){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=a,this.int16[s+5]=o,t}}])}(Ni);Zi.prototype.bytesPerElement=12,Lr("StructArrayLayout2i4i12",Zi);var qi=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r,i,a){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,r,i,a)}},{key:"emplace",value:function(t,e,n,r,i,a,o){var s=4*t,A=8*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.uint8[A+4]=r,this.uint8[A+5]=i,this.uint8[A+6]=a,this.uint8[A+7]=o,t}}])}(Ni);qi.prototype.bytesPerElement=8,Lr("StructArrayLayout2i4ub8",qi);var Xi=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)}},{key:"emplace",value:function(t,e,n){var r=2*t;return this.float32[r+0]=e,this.float32[r+1]=n,t}}])}(Ni);Xi.prototype.bytesPerElement=8,Lr("StructArrayLayout2f8",Xi);var Yi=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r,i,a,o,s,A,u){var l=this.length;return this.resize(l+1),this.emplace(l,t,e,n,r,i,a,o,s,A,u)}},{key:"emplace",value:function(t,e,n,r,i,a,o,s,A,u,l){var c=10*t;return this.uint16[c+0]=e,this.uint16[c+1]=n,this.uint16[c+2]=r,this.uint16[c+3]=i,this.uint16[c+4]=a,this.uint16[c+5]=o,this.uint16[c+6]=s,this.uint16[c+7]=A,this.uint16[c+8]=u,this.uint16[c+9]=l,t}}])}(Ni);Yi.prototype.bytesPerElement=20,Lr("StructArrayLayout10ui20",Yi);var Ji=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r,i,a,o,s,A,u,l,c){var h=this.length;return this.resize(h+1),this.emplace(h,t,e,n,r,i,a,o,s,A,u,l,c)}},{key:"emplace",value:function(t,e,n,r,i,a,o,s,A,u,l,c,h){var f=12*t;return this.int16[f+0]=e,this.int16[f+1]=n,this.int16[f+2]=r,this.int16[f+3]=i,this.uint16[f+4]=a,this.uint16[f+5]=o,this.uint16[f+6]=s,this.uint16[f+7]=A,this.int16[f+8]=u,this.int16[f+9]=l,this.int16[f+10]=c,this.int16[f+11]=h,t}}])}(Ni);Ji.prototype.bytesPerElement=24,Lr("StructArrayLayout4i4ui4i24",Ji);var ta=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}},{key:"emplace",value:function(t,e,n,r){var i=3*t;return this.float32[i+0]=e,this.float32[i+1]=n,this.float32[i+2]=r,t}}])}(Ni);ta.prototype.bytesPerElement=12,Lr("StructArrayLayout3f12",ta);var ea=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)}},{key:"emplace",value:function(t,e){return this.uint32[1*t+0]=e,t}}])}(Ni);ea.prototype.bytesPerElement=4,Lr("StructArrayLayout1ul4",ea);var na=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r,i,a,o,s,A){var u=this.length;return this.resize(u+1),this.emplace(u,t,e,n,r,i,a,o,s,A)}},{key:"emplace",value:function(t,e,n,r,i,a,o,s,A,u){var l=10*t,c=5*t;return this.int16[l+0]=e,this.int16[l+1]=n,this.int16[l+2]=r,this.int16[l+3]=i,this.int16[l+4]=a,this.int16[l+5]=o,this.uint32[c+3]=s,this.uint16[l+8]=A,this.uint16[l+9]=u,t}}])}(Ni);na.prototype.bytesPerElement=20,Lr("StructArrayLayout6i1ul2ui20",na);var ra=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r,i,a){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,r,i,a)}},{key:"emplace",value:function(t,e,n,r,i,a,o){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=a,this.int16[s+5]=o,t}}])}(Ni);ra.prototype.bytesPerElement=12,Lr("StructArrayLayout2i2i2i12",ra);var ia=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r,i){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i)}},{key:"emplace",value:function(t,e,n,r,i,a){var o=4*t,s=8*t;return this.float32[o+0]=e,this.float32[o+1]=n,this.float32[o+2]=r,this.int16[s+6]=i,this.int16[s+7]=a,t}}])}(Ni);ia.prototype.bytesPerElement=16,Lr("StructArrayLayout2f1f2i16",ia);var aa=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}},{key:"emplace",value:function(t,e,n,r,i){var a=12*t,o=3*t;return this.uint8[a+0]=e,this.uint8[a+1]=n,this.float32[o+1]=r,this.float32[o+2]=i,t}}])}(Ni);aa.prototype.bytesPerElement=12,Lr("StructArrayLayout2ub2f12",aa);var oa=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}},{key:"emplace",value:function(t,e,n,r){var i=3*t;return this.uint16[i+0]=e,this.uint16[i+1]=n,this.uint16[i+2]=r,t}}])}(Ni);oa.prototype.bytesPerElement=6,Lr("StructArrayLayout3ui6",oa);var sa=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r,i,a,o,s,A,u,l,c,h,f,d,p,v){var g=this.length;return this.resize(g+1),this.emplace(g,t,e,n,r,i,a,o,s,A,u,l,c,h,f,d,p,v)}},{key:"emplace",value:function(t,e,n,r,i,a,o,s,A,u,l,c,h,f,d,p,v,g){var m=24*t,y=12*t,_=48*t;return this.int16[m+0]=e,this.int16[m+1]=n,this.uint16[m+2]=r,this.uint16[m+3]=i,this.uint32[y+2]=a,this.uint32[y+3]=o,this.uint32[y+4]=s,this.uint16[m+10]=A,this.uint16[m+11]=u,this.uint16[m+12]=l,this.float32[y+7]=c,this.float32[y+8]=h,this.uint8[_+36]=f,this.uint8[_+37]=d,this.uint8[_+38]=p,this.uint32[y+10]=v,this.int16[m+22]=g,t}}])}(Ni);sa.prototype.bytesPerElement=48,Lr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",sa);var Aa=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r,i,a,o,s,A,u,l,c,h,f,d,p,v,g,m,y,_,w,x,b,B,k,C,F){var E=this.length;return this.resize(E+1),this.emplace(E,t,e,n,r,i,a,o,s,A,u,l,c,h,f,d,p,v,g,m,y,_,w,x,b,B,k,C,F)}},{key:"emplace",value:function(t,e,n,r,i,a,o,s,A,u,l,c,h,f,d,p,v,g,m,y,_,w,x,b,B,k,C,F,E){var I=32*t,U=16*t;return this.int16[I+0]=e,this.int16[I+1]=n,this.int16[I+2]=r,this.int16[I+3]=i,this.int16[I+4]=a,this.int16[I+5]=o,this.int16[I+6]=s,this.int16[I+7]=A,this.uint16[I+8]=u,this.uint16[I+9]=l,this.uint16[I+10]=c,this.uint16[I+11]=h,this.uint16[I+12]=f,this.uint16[I+13]=d,this.uint16[I+14]=p,this.uint16[I+15]=v,this.uint16[I+16]=g,this.uint16[I+17]=m,this.uint16[I+18]=y,this.uint16[I+19]=_,this.uint16[I+20]=w,this.uint16[I+21]=x,this.uint16[I+22]=b,this.uint32[U+12]=B,this.float32[U+13]=k,this.float32[U+14]=C,this.uint16[I+30]=F,this.uint16[I+31]=E,t}}])}(Ni);Aa.prototype.bytesPerElement=64,Lr("StructArrayLayout8i15ui1ul2f2ui64",Aa);var ua=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)}},{key:"emplace",value:function(t,e){return this.float32[1*t+0]=e,t}}])}(Ni);ua.prototype.bytesPerElement=4,Lr("StructArrayLayout1f4",ua);var la=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}},{key:"emplace",value:function(t,e,n,r){var i=3*t;return this.uint16[6*t+0]=e,this.float32[i+1]=n,this.float32[i+2]=r,t}}])}(Ni);la.prototype.bytesPerElement=12,Lr("StructArrayLayout1ui2f12",la);var ca=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}},{key:"emplace",value:function(t,e,n,r){var i=4*t;return this.uint32[2*t+0]=e,this.uint16[i+2]=n,this.uint16[i+3]=r,t}}])}(Ni);ca.prototype.bytesPerElement=8,Lr("StructArrayLayout1ul2ui8",ca);var ha=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)}},{key:"emplace",value:function(t,e,n){var r=2*t;return this.uint16[r+0]=e,this.uint16[r+1]=n,t}}])}(Ni);ha.prototype.bytesPerElement=4,Lr("StructArrayLayout2ui4",ha);var fa=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)}},{key:"emplace",value:function(t,e){return this.uint16[1*t+0]=e,t}}])}(Ni);fa.prototype.bytesPerElement=2,Lr("StructArrayLayout1ui2",fa);var da=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(t,e,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}},{key:"emplace",value:function(t,e,n,r,i){var a=4*t;return this.float32[a+0]=e,this.float32[a+1]=n,this.float32[a+2]=r,this.float32[a+3]=i,t}}])}(Ni);da.prototype.bytesPerElement=16,Lr("StructArrayLayout4f16",da);var pa=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"anchorPointX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"anchorPointY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"x1",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"y1",get:function(){return this._structArray.int16[this._pos2+3]}},{key:"x2",get:function(){return this._structArray.int16[this._pos2+4]}},{key:"y2",get:function(){return this._structArray.int16[this._pos2+5]}},{key:"featureIndex",get:function(){return this._structArray.uint32[this._pos4+3]}},{key:"sourceLayerIndex",get:function(){return this._structArray.uint16[this._pos2+8]}},{key:"bucketIndex",get:function(){return this._structArray.uint16[this._pos2+9]}},{key:"anchorPoint",get:function(){return new a(this.anchorPointX,this.anchorPointY)}}])}(Vi);pa.prototype.size=20;var va=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"get",value:function(t){return new pa(this,t)}}])}(na);Lr("CollisionBoxArray",va);var ga=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"anchorX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"anchorY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"glyphStartIndex",get:function(){return this._structArray.uint16[this._pos2+2]}},{key:"numGlyphs",get:function(){return this._structArray.uint16[this._pos2+3]}},{key:"vertexStartIndex",get:function(){return this._structArray.uint32[this._pos4+2]}},{key:"lineStartIndex",get:function(){return this._structArray.uint32[this._pos4+3]}},{key:"lineLength",get:function(){return this._structArray.uint32[this._pos4+4]}},{key:"segment",get:function(){return this._structArray.uint16[this._pos2+10]}},{key:"lowerSize",get:function(){return this._structArray.uint16[this._pos2+11]}},{key:"upperSize",get:function(){return this._structArray.uint16[this._pos2+12]}},{key:"lineOffsetX",get:function(){return this._structArray.float32[this._pos4+7]}},{key:"lineOffsetY",get:function(){return this._structArray.float32[this._pos4+8]}},{key:"writingMode",get:function(){return this._structArray.uint8[this._pos1+36]}},{key:"placedOrientation",get:function(){return this._structArray.uint8[this._pos1+37]},set:function(t){this._structArray.uint8[this._pos1+37]=t}},{key:"hidden",get:function(){return this._structArray.uint8[this._pos1+38]},set:function(t){this._structArray.uint8[this._pos1+38]=t}},{key:"crossTileID",get:function(){return this._structArray.uint32[this._pos4+10]},set:function(t){this._structArray.uint32[this._pos4+10]=t}},{key:"associatedIconIndex",get:function(){return this._structArray.int16[this._pos2+22]}}])}(Vi);ga.prototype.size=48;var ma=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"get",value:function(t){return new ga(this,t)}}])}(sa);Lr("PlacedSymbolArray",ma);var ya=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"anchorX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"anchorY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"rightJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"centerJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+3]}},{key:"leftJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+4]}},{key:"verticalPlacedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+5]}},{key:"placedIconSymbolIndex",get:function(){return this._structArray.int16[this._pos2+6]}},{key:"verticalPlacedIconSymbolIndex",get:function(){return this._structArray.int16[this._pos2+7]}},{key:"key",get:function(){return this._structArray.uint16[this._pos2+8]}},{key:"textBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+9]}},{key:"textBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+10]}},{key:"verticalTextBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+11]}},{key:"verticalTextBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+12]}},{key:"iconBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+13]}},{key:"iconBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+14]}},{key:"verticalIconBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+15]}},{key:"verticalIconBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+16]}},{key:"featureIndex",get:function(){return this._structArray.uint16[this._pos2+17]}},{key:"numHorizontalGlyphVertices",get:function(){return this._structArray.uint16[this._pos2+18]}},{key:"numVerticalGlyphVertices",get:function(){return this._structArray.uint16[this._pos2+19]}},{key:"numIconVertices",get:function(){return this._structArray.uint16[this._pos2+20]}},{key:"numVerticalIconVertices",get:function(){return this._structArray.uint16[this._pos2+21]}},{key:"useRuntimeCollisionCircles",get:function(){return this._structArray.uint16[this._pos2+22]}},{key:"crossTileID",get:function(){return this._structArray.uint32[this._pos4+12]},set:function(t){this._structArray.uint32[this._pos4+12]=t}},{key:"textBoxScale",get:function(){return this._structArray.float32[this._pos4+13]}},{key:"collisionCircleDiameter",get:function(){return this._structArray.float32[this._pos4+14]}},{key:"textAnchorOffsetStartIndex",get:function(){return this._structArray.uint16[this._pos2+30]}},{key:"textAnchorOffsetEndIndex",get:function(){return this._structArray.uint16[this._pos2+31]}}])}(Vi);ya.prototype.size=64;var _a=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"get",value:function(t){return new ya(this,t)}}])}(Aa);Lr("SymbolInstanceArray",_a);var wa=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"getoffsetX",value:function(t){return this.float32[1*t+0]}}])}(ua);Lr("GlyphOffsetArray",wa);var xa=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"getx",value:function(t){return this.int16[3*t+0]}},{key:"gety",value:function(t){return this.int16[3*t+1]}},{key:"gettileUnitDistanceFromAnchor",value:function(t){return this.int16[3*t+2]}}])}($i);Lr("SymbolLineVertexArray",xa);var ba=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"textAnchor",get:function(){return this._structArray.uint16[this._pos2+0]}},{key:"textOffset0",get:function(){return this._structArray.float32[this._pos4+1]}},{key:"textOffset1",get:function(){return this._structArray.float32[this._pos4+2]}}])}(Vi);ba.prototype.size=12;var Ba=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"get",value:function(t){return new ba(this,t)}}])}(la);Lr("TextAnchorOffsetArray",Ba);var ka=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"featureIndex",get:function(){return this._structArray.uint32[this._pos4+0]}},{key:"sourceLayerIndex",get:function(){return this._structArray.uint16[this._pos2+2]}},{key:"bucketIndex",get:function(){return this._structArray.uint16[this._pos2+3]}}])}(Vi);ka.prototype.size=8;var Ca=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"get",value:function(t){return new ka(this,t)}}])}(ca);Lr("FeatureIndexArray",Ca);var Fa=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e)}(ji),Ea=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e)}(ji),Ia=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e)}(ji),Ua=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e)}(Zi),Sa=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e)}(qi),Qa=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e)}(Xi),Ta=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e)}(Yi),Ma=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e)}(Ji),Da=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e)}(ta),La=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e)}(ea),Pa=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e)}(ra),Oa=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e)}(aa),Ra=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e)}(oa),za=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e)}(ha),Ha=Ki([{name:"a_pos",components:2,type:"Int16"}],4).members,Va=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];oi(this,t),this.segments=e}return ai(t,[{key:"prepareSegment",value:function(e,n,r,i){var a=this.segments[this.segments.length-1];return e>t.MAX_VERTEX_ARRAY_LENGTH&&b("Max vertices per segment is ".concat(t.MAX_VERTEX_ARRAY_LENGTH,": bucket requested ").concat(e)),(!a||a.vertexLength+e>t.MAX_VERTEX_ARRAY_LENGTH||a.sortKey!==i)&&(a={vertexOffset:n.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},void 0!==i&&(a.sortKey=i),this.segments.push(a)),a}},{key:"get",value:function(){return this.segments}},{key:"destroy",value:function(){var t,e=pO(this.segments);try{for(e.s();!(t=e.n()).done;){var n=t.value;for(var r in n.vaos)n.vaos[r].destroy()}}catch(t){e.e(t)}finally{e.f()}}}],[{key:"simpleSegment",value:function(e,n,r,i){return new t([{vertexOffset:e,primitiveOffset:n,vertexLength:r,primitiveLength:i,vaos:{},sortKey:0}])}}])}();function Na(t,e){return 256*(t=p(Math.floor(t),0,255))+p(Math.floor(e),0,255)}Va.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Lr("SegmentVector",Va);var Ka=Ki([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Ga={exports:{}},ja={exports:{}};ja.exports=function(t,e){var n,r,i,a,o,s,A,u;for(r=t.length-(n=3&t.length),i=e,o=3432918353,s=461845907,u=0;u<r;)A=255&t.charCodeAt(u)|(255&t.charCodeAt(++u))<<8|(255&t.charCodeAt(++u))<<16|(255&t.charCodeAt(++u))<<24,++u,i=27492+(65535&(a=5*(65535&(i=(i^=A=(65535&(A=(A=(65535&A)*o+(((A>>>16)*o&65535)<<16)&4294967295)<<15|A>>>17))*s+(((A>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(a>>>16)&65535)<<16);switch(A=0,n){case 3:A^=(255&t.charCodeAt(u+2))<<16;case 2:A^=(255&t.charCodeAt(u+1))<<8;case 1:i^=A=(65535&(A=(A=(65535&(A^=255&t.charCodeAt(u)))*o+(((A>>>16)*o&65535)<<16)&4294967295)<<15|A>>>17))*s+(((A>>>16)*s&65535)<<16)&4294967295}return i^=t.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0};var $a=ja.exports,Wa={exports:{}};Wa.exports=function(t,e){for(var n,r=t.length,i=e^r,a=0;r>=4;)n=1540483477*(65535&(n=255&t.charCodeAt(a)|(255&t.charCodeAt(++a))<<8|(255&t.charCodeAt(++a))<<16|(255&t.charCodeAt(++a))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++a;switch(r){case 3:i^=(255&t.charCodeAt(a+2))<<16;case 2:i^=(255&t.charCodeAt(a+1))<<8;case 1:i=1540483477*(65535&(i^=255&t.charCodeAt(a)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0};var Za=$a,qa=Wa.exports;Ga.exports=Za,Ga.exports.murmur3=Za,Ga.exports.murmur2=qa;var Xa=n(Ga.exports),Ya=function(){function t(){oi(this,t),this.ids=[],this.positions=[],this.indexed=!1}return ai(t,[{key:"add",value:function(t,e,n,r){this.ids.push(Ja(t)),this.positions.push(e,n,r)}},{key:"getPositions",value:function(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");for(var e=Ja(t),n=0,r=this.ids.length-1;n<r;){var i=n+r>>1;this.ids[i]>=e?r=i:n=i+1}for(var a=[];this.ids[n]===e;)a.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return a}}],[{key:"serialize",value:function(t,e){var n=new Float64Array(t.ids),r=new Uint32Array(t.positions);return to(n,r,0,n.length-1),e&&e.push(n.buffer,r.buffer),{ids:n,positions:r}}},{key:"deserialize",value:function(e){var n=new t;return n.ids=e.ids,n.positions=e.positions,n.indexed=!0,n}}])}();function Ja(t){var e=+t;return!isNaN(e)&&e<=Number.MAX_SAFE_INTEGER?e:Xa(String(t))}function to(t,e,n,r){for(;n<r;){for(var i=t[n+r>>1],a=n-1,o=r+1;;){do{a++}while(t[a]<i);do{o--}while(t[o]>i);if(a>=o)break;eo(t,a,o),eo(e,3*a,3*o),eo(e,3*a+1,3*o+1),eo(e,3*a+2,3*o+2)}o-n<r-o?(to(t,e,n,o),n=o+1):(to(t,e,o+1,r),r=o)}}function eo(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}Lr("FeaturePositionMap",Ya);var no=ai((function t(e,n){oi(this,t),this.gl=e.gl,this.location=n})),ro=function(t){function e(t,n){var r;return oi(this,e),(r=gO(this,e,[t,n])).current=0,r}return ci(e,t),ai(e,[{key:"set",value:function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}])}(no),io=function(t){function e(t,n){var r;return oi(this,e),(r=gO(this,e,[t,n])).current=[0,0,0,0],r}return ci(e,t),ai(e,[{key:"set",value:function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}])}(no),ao=function(t){function e(t,n){var r;return oi(this,e),(r=gO(this,e,[t,n])).current=qt.transparent,r}return ci(e,t),ai(e,[{key:"set",value:function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}])}(no),oo=new Float32Array(16);function so(t){return[Na(255*t.r,255*t.g),Na(255*t.b,255*t.a)]}var Ao=function(){function t(e,n,r){oi(this,t),this.value=e,this.uniformNames=n.map((function(t){return"u_".concat(t)})),this.type=r}return ai(t,[{key:"setUniform",value:function(t,e,n){t.set(n.constantOr(this.value))}},{key:"getBinding",value:function(t,e,n){return"color"===this.type?new ao(t,e):new ro(t,e)}}])}(),uo=function(){function t(e,n){oi(this,t),this.uniformNames=n.map((function(t){return"u_".concat(t)})),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}return ai(t,[{key:"setConstantPatternPositions",value:function(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tlbr,this.patternTo=t.tlbr}},{key:"setUniform",value:function(t,e,n,r){var i="u_pattern_to"===r?this.patternTo:"u_pattern_from"===r?this.patternFrom:"u_pixel_ratio_to"===r?this.pixelRatioTo:"u_pixel_ratio_from"===r?this.pixelRatioFrom:null;i&&t.set(i)}},{key:"getBinding",value:function(t,e,n){return"u_pattern"===n.substr(0,9)?new io(t,e):new ro(t,e)}}])}(),lo=function(){function t(e,n,r,i){oi(this,t),this.expression=e,this.type=r,this.maxValue=0,this.paintVertexAttributes=n.map((function(t){return{name:"a_".concat(t),type:"Float32",components:"color"===r?2:1,offset:0}})),this.paintVertexArray=new i}return ai(t,[{key:"populatePaintArray",value:function(t,e,n,r,i){var a=this.paintVertexArray.length,o=this.expression.evaluate(new yi(0),e,{},r,[],i);this.paintVertexArray.resize(t),this._setPaintValue(a,t,o)}},{key:"updatePaintArray",value:function(t,e,n,r){var i=this.expression.evaluate({zoom:0},n,r);this._setPaintValue(t,e,i)}},{key:"_setPaintValue",value:function(t,e,n){if("color"===this.type)for(var r=so(n),i=t;i<e;i++)this.paintVertexArray.emplace(i,r[0],r[1]);else{for(var a=t;a<e;a++)this.paintVertexArray.emplace(a,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}},{key:"upload",value:function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}])}(),co=function(){function t(e,n,r,i,a,o){oi(this,t),this.expression=e,this.uniformNames=n.map((function(t){return"u_".concat(t,"_t")})),this.type=r,this.useIntegerZoom=i,this.zoom=a,this.maxValue=0,this.paintVertexAttributes=n.map((function(t){return{name:"a_".concat(t),type:"Float32",components:"color"===r?4:2,offset:0}})),this.paintVertexArray=new o}return ai(t,[{key:"populatePaintArray",value:function(t,e,n,r,i){var a=this.expression.evaluate(new yi(this.zoom),e,{},r,[],i),o=this.expression.evaluate(new yi(this.zoom+1),e,{},r,[],i),s=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(s,t,a,o)}},{key:"updatePaintArray",value:function(t,e,n,r){var i=this.expression.evaluate({zoom:this.zoom},n,r),a=this.expression.evaluate({zoom:this.zoom+1},n,r);this._setPaintValue(t,e,i,a)}},{key:"_setPaintValue",value:function(t,e,n,r){if("color"===this.type)for(var i=so(n),a=so(r),o=t;o<e;o++)this.paintVertexArray.emplace(o,i[0],i[1],a[0],a[1]);else{for(var s=t;s<e;s++)this.paintVertexArray.emplace(s,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}}},{key:"upload",value:function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}},{key:"setUniform",value:function(t,e){var n=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,r=p(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);t.set(r)}},{key:"getBinding",value:function(t,e,n){return new ro(t,e)}}])}(),ho=function(){function t(e,n,r,i,a,o){oi(this,t),this.expression=e,this.type=n,this.useIntegerZoom=r,this.zoom=i,this.layerId=o,this.zoomInPaintVertexArray=new a,this.zoomOutPaintVertexArray=new a}return ai(t,[{key:"populatePaintArray",value:function(t,e,n){var r=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(r,t,e.patterns&&e.patterns[this.layerId],n)}},{key:"updatePaintArray",value:function(t,e,n,r,i){this._setPaintValues(t,e,n.patterns&&n.patterns[this.layerId],i)}},{key:"_setPaintValues",value:function(t,e,n,r){if(r&&n){var i=n.min,a=n.mid,o=n.max,s=r[i],A=r[a],u=r[o];if(s&&A&&u)for(var l=t;l<e;l++)this.zoomInPaintVertexArray.emplace(l,A.tl[0],A.tl[1],A.br[0],A.br[1],s.tl[0],s.tl[1],s.br[0],s.br[1],A.pixelRatio,s.pixelRatio),this.zoomOutPaintVertexArray.emplace(l,A.tl[0],A.tl[1],A.br[0],A.br[1],u.tl[0],u.tl[1],u.br[0],u.br[1],A.pixelRatio,u.pixelRatio)}}},{key:"upload",value:function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,Ka.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,Ka.members,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}])}(),fo=function(){function t(e,n,r){oi(this,t),this.binders={},this._buffers=[];var i=[];for(var a in e.paint._values)if(r(a)){var o=e.paint.get(a);if(o instanceof Ci&&bn(o.property.specification)){var s=vo(a,e.type),A=o.value,u=o.property.specification.type,l=o.property.useIntegerZoom,c=o.property.specification["property-type"],h="cross-faded"===c||"cross-faded-data-driven"===c;if("constant"===A.kind)this.binders[a]=h?new uo(A.value,s):new Ao(A.value,s,u),i.push("/u_".concat(a));else if("source"===A.kind||h){var f=go(a,u,"source");this.binders[a]=h?new ho(A,u,l,n,f,e.id):new lo(A,s,u,f),i.push("/a_".concat(a))}else{var d=go(a,u,"composite");this.binders[a]=new co(A,s,u,l,n,d),i.push("/z_".concat(a))}}}this.cacheKey=i.sort().join("")}return ai(t,[{key:"getMaxValue",value:function(t){var e=this.binders[t];return e instanceof lo||e instanceof co?e.maxValue:0}},{key:"populatePaintArrays",value:function(t,e,n,r,i){for(var a in this.binders){var o=this.binders[a];(o instanceof lo||o instanceof co||o instanceof ho)&&o.populatePaintArray(t,e,n,r,i)}}},{key:"setConstantPatternPositions",value:function(t,e){for(var n in this.binders){var r=this.binders[n];r instanceof uo&&r.setConstantPatternPositions(t,e)}}},{key:"updatePaintArrays",value:function(t,e,n,r,i){var a=!1;for(var o in t){var s,A=pO(e.getPositions(o));try{for(A.s();!(s=A.n()).done;){var u=s.value,l=n.feature(u.index);for(var c in this.binders){var h=this.binders[c];if((h instanceof lo||h instanceof co||h instanceof ho)&&!0===h.expression.isStateDependent){var f=r.paint.get(c);h.expression=f.value,h.updatePaintArray(u.start,u.end,l,t[o],i),a=!0}}}}catch(t){A.e(t)}finally{A.f()}}return a}},{key:"defines",value:function(){var t=[];for(var e in this.binders){var n=this.binders[e];(n instanceof Ao||n instanceof uo)&&t.push.apply(t,Di(n.uniformNames.map((function(t){return"#define HAS_UNIFORM_".concat(t)}))))}return t}},{key:"getBinderAttributes",value:function(){var t=[];for(var e in this.binders){var n=this.binders[e];if(n instanceof lo||n instanceof co)for(var r=0;r<n.paintVertexAttributes.length;r++)t.push(n.paintVertexAttributes[r].name);else if(n instanceof ho)for(var i=0;i<Ka.members.length;i++)t.push(Ka.members[i].name)}return t}},{key:"getBinderUniforms",value:function(){var t=[];for(var e in this.binders){var n=this.binders[e];if(n instanceof Ao||n instanceof uo||n instanceof co){var r,i=pO(n.uniformNames);try{for(i.s();!(r=i.n()).done;){var a=r.value;t.push(a)}}catch(t){i.e(t)}finally{i.f()}}}return t}},{key:"getPaintVertexBuffers",value:function(){return this._buffers}},{key:"getUniforms",value:function(t,e){var n=[];for(var r in this.binders){var i=this.binders[r];if(i instanceof Ao||i instanceof uo||i instanceof co){var a,o=pO(i.uniformNames);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(e[s]){var A=i.getBinding(t,e[s],s);n.push({name:s,property:r,binding:A})}}}catch(t){o.e(t)}finally{o.f()}}}return n}},{key:"setUniforms",value:function(t,e,n,r){var i,a=pO(e);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=o.name,A=o.property,u=o.binding;this.binders[A].setUniform(u,r,n.get(A),s)}}catch(t){a.e(t)}finally{a.f()}}},{key:"updatePaintBuffers",value:function(t){for(var e in this._buffers=[],this.binders){var n=this.binders[e];if(t&&n instanceof ho){var r=2===t.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;r&&this._buffers.push(r)}else(n instanceof lo||n instanceof co)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}}},{key:"upload",value:function(t){for(var e in this.binders){var n=this.binders[e];(n instanceof lo||n instanceof co||n instanceof ho)&&n.upload(t)}this.updatePaintBuffers()}},{key:"destroy",value:function(){for(var t in this.binders){var e=this.binders[t];(e instanceof lo||e instanceof co||e instanceof ho)&&e.destroy()}}}])}(),po=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0};oi(this,t),this.programConfigurations={};var i,a=pO(e);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.programConfigurations[o.id]=new fo(o,n,r)}}catch(t){a.e(t)}finally{a.f()}this.needsUpload=!1,this._featureMap=new Ya,this._bufferOffset=0}return ai(t,[{key:"populatePaintArrays",value:function(t,e,n,r,i,a){for(var o in this.programConfigurations)this.programConfigurations[o].populatePaintArrays(t,e,r,i,a);void 0!==e.id&&this._featureMap.add(e.id,n,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}},{key:"updatePaintArrays",value:function(t,e,n,r){var i,a=pO(n);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(t,this._featureMap,e,o,r)||this.needsUpload}}catch(t){a.e(t)}finally{a.f()}}},{key:"get",value:function(t){return this.programConfigurations[t]}},{key:"upload",value:function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}}},{key:"destroy",value:function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()}}])}();function vo(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[t]||[t.replace("".concat(e,"-"),"").replace(/-/g,"_")]}function go(t,e,n){var r={color:{source:Xi,composite:da},number:{source:ua,composite:Xi}},i=function(t){return{"line-pattern":{source:Ta,composite:Ta},"fill-pattern":{source:Ta,composite:Ta},"fill-extrusion-pattern":{source:Ta,composite:Ta}}[t]}(t);return i&&i[n]||r[e][n]}Lr("ConstantBinder",Ao),Lr("CrossFadedConstantBinder",uo),Lr("SourceExpressionBinder",lo),Lr("CrossFadedCompositeBinder",ho),Lr("CompositeExpressionBinder",co),Lr("ProgramConfiguration",fo,{omit:["_buffers"]}),Lr("ProgramConfigurationSet",po);var mo=8192,yo=Math.pow(2,14)-1,_o=-yo-1;function wo(t){for(var e=mo/t.extent,n=t.loadGeometry(),r=0;r<n.length;r++)for(var i=n[r],a=0;a<i.length;a++){var o=i[a],s=Math.round(o.x*e),A=Math.round(o.y*e);o.x=p(s,_o,yo),o.y=p(A,_o,yo),(s<o.x||s>o.x+1||A<o.y||A>o.y+1)&&b("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}function xo(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?wo(t):[]}}function bo(t,e,n,r,i){t.emplaceBack(2*e+(r+1)/2,2*n+(i+1)/2)}var Bo,ko,Co=function(){function t(e){oi(this,t),this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Ea,this.indexArray=new Ra,this.segments=new Va,this.programConfigurations=new po(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))}return ai(t,[{key:"populate",value:function(t,e,n){var r=this.layers[0],i=[],a=null,o=!1;"circle"===r.type&&(o=!(a=r.layout.get("circle-sort-key")).isConstant());var s,A=pO(t);try{for(A.s();!(s=A.n()).done;){var u=s.value,l=u.feature,c=u.id,h=u.index,f=u.sourceLayerIndex,d=this.layers[0]._featureFilter.needGeometry,p=xo(l,d);if(this.layers[0]._featureFilter.filter(new yi(this.zoom),p,n)){var v=o?a.evaluate(p,{},n):void 0,g={id:c,properties:l.properties,type:l.type,sourceLayerIndex:f,index:h,geometry:d?p.geometry:wo(l),patterns:{},sortKey:v};i.push(g)}}}catch(t){A.e(t)}finally{A.f()}o&&i.sort((function(t,e){return t.sortKey-e.sortKey}));for(var m=0,y=i;m<y.length;m++){var _=y[m],w=_.geometry,x=_.index,b=_.sourceLayerIndex,B=t[x].feature;this.addFeature(_,w,x,n),e.featureIndex.insert(B,w,x,b,this.index)}}},{key:"update",value:function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ha),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}},{key:"addFeature",value:function(t,e,n,r){var i,a=pO(e);try{for(a.s();!(i=a.n()).done;){var o,s=pO(i.value);try{for(s.s();!(o=s.n()).done;){var A=o.value,u=A.x,l=A.y;if(!(u<0||u>=mo||l<0||l>=mo)){var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),h=c.vertexLength;bo(this.layoutVertexArray,u,l,-1,-1),bo(this.layoutVertexArray,u,l,1,-1),bo(this.layoutVertexArray,u,l,1,1),bo(this.layoutVertexArray,u,l,-1,1),this.indexArray.emplaceBack(h,h+1,h+2),this.indexArray.emplaceBack(h,h+3,h+2),c.vertexLength+=4,c.primitiveLength+=2}}}catch(t){s.e(t)}finally{s.f()}}}catch(t){a.e(t)}finally{a.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,{},r)}}])}();function Fo(t,e){for(var n=0;n<t.length;n++)if(Lo(e,t[n]))return!0;for(var r=0;r<e.length;r++)if(Lo(t,e[r]))return!0;return!!So(t,e)}function Eo(t,e,n){return!!Lo(t,e)||!!To(e,t,n)}function Io(t,e){if(1===t.length)return Do(e,t[0]);for(var n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.length;i++)if(Lo(t,r[i]))return!0;for(var a=0;a<t.length;a++)if(Do(e,t[a]))return!0;for(var o=0;o<e.length;o++)if(So(t,e[o]))return!0;return!1}function Uo(t,e,n){if(t.length>1){if(So(t,e))return!0;for(var r=0;r<e.length;r++)if(To(e[r],t,n))return!0}for(var i=0;i<t.length;i++)if(To(t[i],e,n))return!0;return!1}function So(t,e){if(0===t.length||0===e.length)return!1;for(var n=0;n<t.length-1;n++)for(var r=t[n],i=t[n+1],a=0;a<e.length-1;a++)if(Qo(r,i,e[a],e[a+1]))return!0;return!1}function Qo(t,e,n,r){return B(t,n,r)!==B(e,n,r)&&B(t,e,n)!==B(t,e,r)}function To(t,e,n){var r=n*n;if(1===e.length)return t.distSqr(e[0])<r;for(var i=1;i<e.length;i++)if(Mo(t,e[i-1],e[i])<r)return!0;return!1}function Mo(t,e,n){var r=e.distSqr(n);if(0===r)return t.distSqr(e);var i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;return t.distSqr(i<0?e:i>1?n:n.sub(e)._mult(i)._add(e))}function Do(t,e){for(var n,r,i,a=!1,o=0;o<t.length;o++)for(var s=0,A=(n=t[o]).length-1;s<n.length;A=s++)r=n[s],i=n[A],r.y>e.y!=i.y>e.y&&e.x<(i.x-r.x)*(e.y-r.y)/(i.y-r.y)+r.x&&(a=!a);return a}function Lo(t,e){for(var n=!1,r=0,i=t.length-1;r<t.length;i=r++){var a=t[r],o=t[i];a.y>e.y!=o.y>e.y&&e.x<(o.x-a.x)*(e.y-a.y)/(o.y-a.y)+a.x&&(n=!n)}return n}function Po(t,e,n){var r=n[0],i=n[2];if(t.x<r.x&&e.x<r.x||t.x>i.x&&e.x>i.x||t.y<r.y&&e.y<r.y||t.y>i.y&&e.y>i.y)return!1;var a=B(t,e,n[0]);return a!==B(t,e,n[1])||a!==B(t,e,n[2])||a!==B(t,e,n[3])}function Oo(t,e,n){var r=e.paint.get(t).value;return"constant"===r.kind?r.value:n.programConfigurations.get(e.id).getMaxValue(t)}function Ro(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function zo(t,e,n,r,i){if(!e[0]&&!e[1])return t;var o=a.convert(e)._mult(i);"viewport"===n&&o._rotate(-r);for(var s=[],A=0;A<t.length;A++)s.push(t[A].sub(o));return s}Lr("CircleBucket",Co,{omit:["layers"]});var Ho={get paint(){return ko=ko||new Oi({"circle-radius":new Ii(Z.paint_circle["circle-radius"]),"circle-color":new Ii(Z.paint_circle["circle-color"]),"circle-blur":new Ii(Z.paint_circle["circle-blur"]),"circle-opacity":new Ii(Z.paint_circle["circle-opacity"]),"circle-translate":new Ei(Z.paint_circle["circle-translate"]),"circle-translate-anchor":new Ei(Z.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ei(Z.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ei(Z.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ii(Z.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ii(Z.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ii(Z.paint_circle["circle-stroke-opacity"])})},get layout(){return Bo=Bo||new Oi({"circle-sort-key":new Ii(Z.layout_circle["circle-sort-key"])})}},Vo=1e-6,No="undefined"!=typeof Float32Array?Float32Array:Array;function Ko(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Go(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],A=e[5],u=e[6],l=e[7],c=e[8],h=e[9],f=e[10],d=e[11],p=e[12],v=e[13],g=e[14],m=e[15],y=n[0],_=n[1],w=n[2],x=n[3];return t[0]=y*r+_*s+w*c+x*p,t[1]=y*i+_*A+w*h+x*v,t[2]=y*a+_*u+w*f+x*g,t[3]=y*o+_*l+w*d+x*m,t[4]=(y=n[4])*r+(_=n[5])*s+(w=n[6])*c+(x=n[7])*p,t[5]=y*i+_*A+w*h+x*v,t[6]=y*a+_*u+w*f+x*g,t[7]=y*o+_*l+w*d+x*m,t[8]=(y=n[8])*r+(_=n[9])*s+(w=n[10])*c+(x=n[11])*p,t[9]=y*i+_*A+w*h+x*v,t[10]=y*a+_*u+w*f+x*g,t[11]=y*o+_*l+w*d+x*m,t[12]=(y=n[12])*r+(_=n[13])*s+(w=n[14])*c+(x=n[15])*p,t[13]=y*i+_*A+w*h+x*v,t[14]=y*a+_*u+w*f+x*g,t[15]=y*o+_*l+w*d+x*m,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var jo,$o=Go;function Wo(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,t[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,t[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,t[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,t}jo=new No(4),No!=Float32Array&&(jo[0]=0,jo[1]=0,jo[2]=0,jo[3]=0);var Zo=function(t){function e(t){return oi(this,e),gO(this,e,[t,Ho])}return ci(e,t),ai(e,[{key:"createBucket",value:function(t){return new Co(t)}},{key:"queryRadius",value:function(t){var e=t;return Oo("circle-radius",this,e)+Oo("circle-stroke-width",this,e)+Ro(this.paint.get("circle-translate"))}},{key:"queryIntersectsFeature",value:function(t,e,n,r,i,a,o,s){var A,u=zo(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),a.angle,o),l=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n),c="map"===this.paint.get("circle-pitch-alignment"),h=c?u:function(t,e){return t.map((function(t){return qo(t,e)}))}(u,s),f=c?l*o:l,d=pO(r);try{for(d.s();!(A=d.n()).done;){var p,v=pO(A.value);try{for(v.s();!(p=v.n()).done;){var g=p.value,m=c?g:qo(g,s),y=f,_=Wo([],[g.x,g.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?y*=_[3]/a.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(y*=a.cameraToCenterDistance/_[3]),Eo(h,m,y))return!0}}catch(t){v.e(t)}finally{v.f()}}}catch(t){d.e(t)}finally{d.f()}return!1}}])}(zi);function qo(t,e){var n=Wo([],[t.x,t.y,0,1],e);return new a(n[0]/n[3],n[1]/n[3])}var Xo,Yo=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e)}(Co);Lr("HeatmapBucket",Yo,{omit:["layers"]});var Jo={get paint(){return Xo=Xo||new Oi({"heatmap-radius":new Ii(Z.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ii(Z.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ei(Z.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Pi(Z.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ei(Z.paint_heatmap["heatmap-opacity"])})}};function ts(t,e,n,r){var i=e.width,a=e.height;if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==i*a*n)throw new RangeError("mismatched image size. expected: ".concat(r.length," but got: ").concat(i*a*n))}else r=new Uint8Array(i*a*n);return t.width=i,t.height=a,t.data=r,t}function es(t,e,n){var r=e.width,i=e.height;if(r!==t.width||i!==t.height){var a=ts({},{width:r,height:i},n);ns(t,a,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,r),height:Math.min(t.height,i)},n),t.width=r,t.height=i,t.data=a.data}}function ns(t,e,n,r,i,a){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||n.x>t.width-i.width||n.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");var o=t.data,s=e.data;if(o===s)throw new Error("srcData equals dstData, so image is already copied");for(var A=0;A<i.height;A++)for(var u=((n.y+A)*t.width+n.x)*a,l=((r.y+A)*e.width+r.x)*a,c=0;c<i.width*a;c++)s[l+c]=o[u+c];return e}var rs=function(){function t(e,n){oi(this,t),ts(this,e,1,n)}return ai(t,[{key:"resize",value:function(t){es(this,t,1)}},{key:"clone",value:function(){return new t({width:this.width,height:this.height},new Uint8Array(this.data))}}],[{key:"copy",value:function(t,e,n,r,i){ns(t,e,n,r,i,1)}}])}(),is=function(){function t(e,n){oi(this,t),ts(this,e,4,n)}return ai(t,[{key:"resize",value:function(t){es(this,t,4)}},{key:"replace",value:function(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}},{key:"clone",value:function(){return new t({width:this.width,height:this.height},new Uint8Array(this.data))}}],[{key:"copy",value:function(t,e,n,r,i){ns(t,e,n,r,i,4)}}])}();function as(t){var e={},n=t.resolution||256,r=t.clips?t.clips.length:1,i=t.image||new is({width:n,height:r});if(Math.log(n)/Math.LN2%1!=0)throw new Error("width is not a power of 2 - ".concat(n));var a=function(n,r,a){e[t.evaluationKey]=a;var o=t.expression.evaluate(e);i.data[n+r+0]=Math.floor(255*o.r/o.a),i.data[n+r+1]=Math.floor(255*o.g/o.a),i.data[n+r+2]=Math.floor(255*o.b/o.a),i.data[n+r+3]=Math.floor(255*o.a)};if(t.clips)for(var o=0,s=0;o<r;++o,s+=4*n)for(var A=0,u=0;A<n;A++,u+=4){var l=A/(n-1),c=t.clips[o];a(s,u,c.start*(1-l)+c.end*l)}else for(var h=0,f=0;h<n;h++,f+=4)a(0,f,h/(n-1));return i}Lr("AlphaImage",rs),Lr("RGBAImage",is);var os,ss=function(t){function e(t){var n;return oi(this,e),(n=gO(this,e,[t,Jo]))._updateColorRamp(),n}return ci(e,t),ai(e,[{key:"createBucket",value:function(t){return new Yo(t)}},{key:"_handleSpecialPaintPropertyUpdate",value:function(t){"heatmap-color"===t&&this._updateColorRamp()}},{key:"_updateColorRamp",value:function(){this.colorRamp=as({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}},{key:"resize",value:function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}},{key:"queryRadius",value:function(){return 0}},{key:"queryIntersectsFeature",value:function(){return!1}},{key:"hasOffscreenPass",value:function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}}])}(zi),As={get paint(){return os=os||new Oi({"hillshade-illumination-direction":new Ei(Z.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ei(Z.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ei(Z.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ei(Z.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ei(Z.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ei(Z.paint_hillshade["hillshade-accent-color"])})}},us=function(t){function e(t){return oi(this,e),gO(this,e,[t,As])}return ci(e,t),ai(e,[{key:"hasOffscreenPass",value:function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}}])}(zi),ls=Ki([{name:"a_pos",components:2,type:"Int16"}],4).members,cs={exports:{}};function hs(t,e,n){n=n||2;var r,i,a,o,s,A,u,l=e&&e.length,c=l?e[0]*n:t.length,h=fs(t,0,c,n,!0),f=[];if(!h||h.next===h.prev)return f;if(l&&(h=function(t,e,n,r){var i,a,o,s=[];for(i=0,a=e.length;i<a;i++)(o=fs(t,e[i]*r,i<a-1?e[i+1]*r:t.length,r,!1))===o.next&&(o.steiner=!0),s.push(Bs(o));for(s.sort(_s),i=0;i<s.length;i++)n=ws(s[i],n);return n}(t,e,h,n)),t.length>80*n){r=a=t[0],i=o=t[1];for(var d=n;d<c;d+=n)(s=t[d])<r&&(r=s),(A=t[d+1])<i&&(i=A),s>a&&(a=s),A>o&&(o=A);u=0!==(u=Math.max(a-r,o-i))?32767/u:0}return ps(h,f,n,r,i,u,0),f}function fs(t,e,n,r,i){var a,o;if(i===Ps(t,e,n,r)>0)for(a=e;a<n;a+=r)o=Ms(a,t[a],t[a+1],o);else for(a=n-r;a>=e;a-=r)o=Ms(a,t[a],t[a+1],o);return o&&Es(o,o.next)&&(Ds(o),o=o.next),o}function ds(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!Es(r,r.next)&&0!==Fs(r.prev,r,r.next))r=r.next;else{if(Ds(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function ps(t,e,n,r,i,a,o){if(t){!o&&a&&function(t,e,n,r){var i=t;do{0===i.z&&(i.z=bs(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,a,o,s,A,u=1;do{for(n=t,t=null,a=null,o=0;n;){for(o++,r=n,s=0,e=0;e<u&&(s++,r=r.nextZ);e++);for(A=u;s>0||A>0&&r;)0!==s&&(0===A||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,A--),a?a.nextZ=i:t=i,i.prevZ=a,a=i;n=r}a.nextZ=null,u*=2}while(o>1)}(i)}(t,r,i,a);for(var s,A,u=t;t.prev!==t.next;)if(s=t.prev,A=t.next,a?gs(t,r,i,a):vs(t))e.push(s.i/n|0),e.push(t.i/n|0),e.push(A.i/n|0),Ds(t),t=A.next,u=A.next;else if((t=A)===u){o?1===o?ps(t=ms(ds(t),e,n),e,n,r,i,a,2):2===o&&ys(t,e,n,r,i,a):ps(ds(t),e,n,r,i,a,1);break}}}function vs(t){var e=t.prev,n=t,r=t.next;if(Fs(e,n,r)>=0)return!1;for(var i=e.x,a=n.x,o=r.x,s=e.y,A=n.y,u=r.y,l=i<a?i<o?i:o:a<o?a:o,c=s<A?s<u?s:u:A<u?A:u,h=i>a?i>o?i:o:a>o?a:o,f=s>A?s>u?s:u:A>u?A:u,d=r.next;d!==e;){if(d.x>=l&&d.x<=h&&d.y>=c&&d.y<=f&&ks(i,s,a,A,o,u,d.x,d.y)&&Fs(d.prev,d,d.next)>=0)return!1;d=d.next}return!0}function gs(t,e,n,r){var i=t.prev,a=t,o=t.next;if(Fs(i,a,o)>=0)return!1;for(var s=i.x,A=a.x,u=o.x,l=i.y,c=a.y,h=o.y,f=s<A?s<u?s:u:A<u?A:u,d=l<c?l<h?l:h:c<h?c:h,p=s>A?s>u?s:u:A>u?A:u,v=l>c?l>h?l:h:c>h?c:h,g=bs(f,d,e,n,r),m=bs(p,v,e,n,r),y=t.prevZ,_=t.nextZ;y&&y.z>=g&&_&&_.z<=m;){if(y.x>=f&&y.x<=p&&y.y>=d&&y.y<=v&&y!==i&&y!==o&&ks(s,l,A,c,u,h,y.x,y.y)&&Fs(y.prev,y,y.next)>=0)return!1;if(y=y.prevZ,_.x>=f&&_.x<=p&&_.y>=d&&_.y<=v&&_!==i&&_!==o&&ks(s,l,A,c,u,h,_.x,_.y)&&Fs(_.prev,_,_.next)>=0)return!1;_=_.nextZ}for(;y&&y.z>=g;){if(y.x>=f&&y.x<=p&&y.y>=d&&y.y<=v&&y!==i&&y!==o&&ks(s,l,A,c,u,h,y.x,y.y)&&Fs(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;_&&_.z<=m;){if(_.x>=f&&_.x<=p&&_.y>=d&&_.y<=v&&_!==i&&_!==o&&ks(s,l,A,c,u,h,_.x,_.y)&&Fs(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function ms(t,e,n){var r=t;do{var i=r.prev,a=r.next.next;!Es(i,a)&&Is(i,r,r.next,a)&&Qs(i,a)&&Qs(a,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(a.i/n|0),Ds(r),Ds(r.next),r=t=a),r=r.next}while(r!==t);return ds(r)}function ys(t,e,n,r,i,a){var o=t;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Cs(o,s)){var A=Ts(o,s);return o=ds(o,o.next),A=ds(A,A.next),ps(o,e,n,r,i,a,0),void ps(A,e,n,r,i,a,0)}s=s.next}o=o.next}while(o!==t)}function _s(t,e){return t.x-e.x}function ws(t,e){var n=function(t,e){var n,r=e,i=t.x,a=t.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>o&&(o=s,n=r.x<r.next.x?r:r.next,s===i))return n}r=r.next}while(r!==e);if(!n)return null;var A,u=n,l=n.x,c=n.y,h=1/0;r=n;do{i>=r.x&&r.x>=l&&i!==r.x&&ks(a<c?i:o,a,l,c,a<c?o:i,a,r.x,r.y)&&(A=Math.abs(a-r.y)/(i-r.x),Qs(r,t)&&(A<h||A===h&&(r.x>n.x||r.x===n.x&&xs(n,r)))&&(n=r,h=A)),r=r.next}while(r!==u);return n}(t,e);if(!n)return e;var r=Ts(n,t);return ds(r,r.next),ds(n,n.next)}function xs(t,e){return Fs(t.prev,t,e.prev)<0&&Fs(e.next,t,t.next)<0}function bs(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Bs(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function ks(t,e,n,r,i,a,o,s){return(i-o)*(e-s)>=(t-o)*(a-s)&&(t-o)*(r-s)>=(n-o)*(e-s)&&(n-o)*(a-s)>=(i-o)*(r-s)}function Cs(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Is(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(Qs(t,e)&&Qs(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,a=(t.y+e.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(Fs(t.prev,t,e.prev)||Fs(t,e.prev,e))||Es(t,e)&&Fs(t.prev,t,t.next)>0&&Fs(e.prev,e,e.next)>0)}function Fs(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Es(t,e){return t.x===e.x&&t.y===e.y}function Is(t,e,n,r){var i=Ss(Fs(t,e,n)),a=Ss(Fs(t,e,r)),o=Ss(Fs(n,r,t)),s=Ss(Fs(n,r,e));return i!==a&&o!==s||!(0!==i||!Us(t,n,e))||!(0!==a||!Us(t,r,e))||!(0!==o||!Us(n,t,r))||!(0!==s||!Us(n,e,r))}function Us(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Ss(t){return t>0?1:t<0?-1:0}function Qs(t,e){return Fs(t.prev,t,t.next)<0?Fs(t,e,t.next)>=0&&Fs(t,t.prev,e)>=0:Fs(t,e,t.prev)<0||Fs(t,t.next,e)<0}function Ts(t,e){var n=new Ls(t.i,t.x,t.y),r=new Ls(e.i,e.x,e.y),i=t.next,a=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function Ms(t,e,n,r){var i=new Ls(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Ds(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Ls(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ps(t,e,n,r){for(var i=0,a=e,o=n-r;a<n;a+=r)i+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return i}cs.exports=hs,cs.exports.default=hs,hs.deviation=function(t,e,n,r){var i=e&&e.length,a=Math.abs(Ps(t,0,i?e[0]*n:t.length,n));if(i)for(var o=0,s=e.length;o<s;o++)a-=Math.abs(Ps(t,e[o]*n,o<s-1?e[o+1]*n:t.length,n));var A=0;for(o=0;o<r.length;o+=3){var u=r[o]*n,l=r[o+1]*n,c=r[o+2]*n;A+=Math.abs((t[u]-t[c])*(t[l+1]-t[u+1])-(t[u]-t[l])*(t[c+1]-t[u+1]))}return 0===a&&0===A?0:Math.abs((A-a)/a)},hs.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var a=0;a<t[i].length;a++)for(var o=0;o<e;o++)n.vertices.push(t[i][a][o]);i>0&&n.holes.push(r+=t[i-1].length)}return n};var Os=n(cs.exports);function Rs(t,e,n,r,i){zs(t,e,n||0,r||t.length-1,i||Vs)}function zs(t,e,n,r,i){for(;r>n;){if(r-n>600){var a=r-n+1,o=e-n+1,s=Math.log(a),A=.5*Math.exp(2*s/3),u=.5*Math.sqrt(s*A*(a-A)/a)*(o-a/2<0?-1:1);zs(t,e,Math.max(n,Math.floor(e-o*A/a+u)),Math.min(r,Math.floor(e+(a-o)*A/a+u)),i)}var l=t[e],c=n,h=r;for(Hs(t,n,e),i(t[r],l)>0&&Hs(t,n,r);c<h;){for(Hs(t,c,h),c++,h--;i(t[c],l)<0;)c++;for(;i(t[h],l)>0;)h--}0===i(t[n],l)?Hs(t,n,h):Hs(t,++h,r),h<=e&&(n=h+1),e<=h&&(r=h-1)}}function Hs(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Vs(t,e){return t<e?-1:t>e?1:0}function Ns(t,e){var n=t.length;if(n<=1)return[t];for(var r,i,a=[],o=0;o<n;o++){var s=k(t[o]);0!==s&&(t[o].area=Math.abs(s),void 0===i&&(i=s<0),i===s<0?(r&&a.push(r),r=[t[o]]):r.push(t[o]))}if(r&&a.push(r),e>1)for(var A=0;A<a.length;A++)a[A].length<=e||(Rs(a[A],e,1,a[A].length-1,Ks),a[A]=a[A].slice(0,e));return a}function Ks(t,e){return e.area-t.area}function Gs(t,e,n){var r,i=n.patternDependencies,a=!1,o=pO(e);try{for(o.s();!(r=o.n()).done;){var s=r.value.paint.get("".concat(t,"-pattern"));s.isConstant()||(a=!0);var A=s.constantOr(null);A&&(a=!0,i[A.to]=!0,i[A.from]=!0)}}catch(t){o.e(t)}finally{o.f()}return a}function js(t,e,n,r,i){var a,o=i.patternDependencies,s=pO(e);try{for(s.s();!(a=s.n()).done;){var A=a.value,u=A.paint.get("".concat(t,"-pattern")).value;if("constant"!==u.kind){var l=u.evaluate({zoom:r-1},n,{},i.availableImages),c=u.evaluate({zoom:r},n,{},i.availableImages),h=u.evaluate({zoom:r+1},n,{},i.availableImages);l=l&&l.name?l.name:l,c=c&&c.name?c.name:c,h=h&&h.name?h.name:h,o[l]=!0,o[c]=!0,o[h]=!0,n.patterns[A.id]={min:l,mid:c,max:h}}}}catch(t){s.e(t)}finally{s.f()}return n}var $s,Ws,Zs=function(){function t(e){oi(this,t),this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ia,this.indexArray=new Ra,this.indexArray2=new za,this.programConfigurations=new po(e.layers,e.zoom),this.segments=new Va,this.segments2=new Va,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))}return ai(t,[{key:"populate",value:function(t,e,n){this.hasPattern=Gs("fill",this.layers,e);var r,i=this.layers[0].layout.get("fill-sort-key"),a=!i.isConstant(),o=[],s=pO(t);try{for(s.s();!(r=s.n()).done;){var A=r.value,u=A.feature,l=A.id,c=A.index,h=A.sourceLayerIndex,f=this.layers[0]._featureFilter.needGeometry,d=xo(u,f);if(this.layers[0]._featureFilter.filter(new yi(this.zoom),d,n)){var p=a?i.evaluate(d,{},n,e.availableImages):void 0,v={id:l,properties:u.properties,type:u.type,sourceLayerIndex:h,index:c,geometry:f?d.geometry:wo(u),patterns:{},sortKey:p};o.push(v)}}}catch(t){s.e(t)}finally{s.f()}a&&o.sort((function(t,e){return t.sortKey-e.sortKey}));for(var g=0,m=o;g<m.length;g++){var y=m[g],_=y.geometry,w=y.index,x=y.sourceLayerIndex;if(this.hasPattern){var b=js("fill",this.layers,y,this.zoom,e);this.patternFeatures.push(b)}else this.addFeature(y,_,w,n,{});e.featureIndex.insert(t[w].feature,_,w,x,this.index)}}},{key:"update",value:function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)}},{key:"addFeatures",value:function(t,e,n){var r,i=pO(this.patternFeatures);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.addFeature(a,a.geometry,a.index,e,n)}}catch(t){i.e(t)}finally{i.f()}}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ls),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}},{key:"addFeature",value:function(t,e,n,r,i){var a,o=pO(Ns(e,500));try{for(o.s();!(a=o.n()).done;){var s,A=a.value,u=0,l=pO(A);try{for(l.s();!(s=l.n()).done;)u+=s.value.length}catch(t){l.e(t)}finally{l.f()}var c,h=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray),f=h.vertexLength,d=[],p=[],v=pO(A);try{for(v.s();!(c=v.n()).done;){var g=c.value;if(0!==g.length){g!==A[0]&&p.push(d.length/2);var m=this.segments2.prepareSegment(g.length,this.layoutVertexArray,this.indexArray2),y=m.vertexLength;this.layoutVertexArray.emplaceBack(g[0].x,g[0].y),this.indexArray2.emplaceBack(y+g.length-1,y),d.push(g[0].x),d.push(g[0].y);for(var _=1;_<g.length;_++)this.layoutVertexArray.emplaceBack(g[_].x,g[_].y),this.indexArray2.emplaceBack(y+_-1,y+_),d.push(g[_].x),d.push(g[_].y);m.vertexLength+=g.length,m.primitiveLength+=g.length}}}catch(t){v.e(t)}finally{v.f()}for(var w=Os(d,p),x=0;x<w.length;x+=3)this.indexArray.emplaceBack(f+w[x],f+w[x+1],f+w[x+2]);h.vertexLength+=u,h.primitiveLength+=w.length/3}}catch(t){o.e(t)}finally{o.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,r)}}])}();Lr("FillBucket",Zs,{omit:["layers","patternFeatures"]});var qs={get paint(){return Ws=Ws||new Oi({"fill-antialias":new Ei(Z.paint_fill["fill-antialias"]),"fill-opacity":new Ii(Z.paint_fill["fill-opacity"]),"fill-color":new Ii(Z.paint_fill["fill-color"]),"fill-outline-color":new Ii(Z.paint_fill["fill-outline-color"]),"fill-translate":new Ei(Z.paint_fill["fill-translate"]),"fill-translate-anchor":new Ei(Z.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ui(Z.paint_fill["fill-pattern"])})},get layout(){return $s=$s||new Oi({"fill-sort-key":new Ii(Z.layout_fill["fill-sort-key"])})}},Xs=function(t){function e(t){return oi(this,e),gO(this,e,[t,qs])}return ci(e,t),ai(e,[{key:"recalculate",value:function(t,n){Li(ui(e.prototype),"recalculate",this).call(this,t,n);var r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}},{key:"createBucket",value:function(t){return new Zs(t)}},{key:"queryRadius",value:function(){return Ro(this.paint.get("fill-translate"))}},{key:"queryIntersectsFeature",value:function(t,e,n,r,i,a,o){return Io(zo(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),a.angle,o),r)}},{key:"isTileClipped",value:function(){return!0}}])}(zi),Ys=Ki([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Js=Ki([{name:"a_centroid",components:2,type:"Int16"}],4),tA=Ys.members,eA={},nA=r,rA=iA;function iA(t,e,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=i,t.readFields(aA,this,e)}function aA(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function oA(t){for(var e,n,r=0,i=0,a=t.length,o=a-1;i<a;o=i++)r+=((n=t[o]).x-(e=t[i]).x)*(e.y+n.y);return r}iA.types=["Unknown","Point","LineString","Polygon"],iA.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,r=1,i=0,a=0,o=0,s=[];t.pos<n;){if(i<=0){var A=t.readVarint();r=7&A,i=A>>3}if(i--,1===r||2===r)a+=t.readSVarint(),o+=t.readSVarint(),1===r&&(e&&s.push(e),e=[]),e.push(new nA(a,o));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&s.push(e),s},iA.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,r=0,i=0,a=0,o=1/0,s=-1/0,A=1/0,u=-1/0;t.pos<e;){if(r<=0){var l=t.readVarint();n=7&l,r=l>>3}if(r--,1===n||2===n)(i+=t.readSVarint())<o&&(o=i),i>s&&(s=i),(a+=t.readSVarint())<A&&(A=a),a>u&&(u=a);else if(7!==n)throw new Error("unknown command "+n)}return[o,A,s,u]},iA.prototype.toGeoJSON=function(t,e,n){var r,i,a=this.extent*Math.pow(2,n),o=this.extent*t,s=this.extent*e,A=this.loadGeometry(),u=iA.types[this.type];function l(t){for(var e=0;e<t.length;e++){var n=t[e];t[e]=[360*(n.x+o)/a-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/a)*Math.PI/180))-90]}}switch(this.type){case 1:var c=[];for(r=0;r<A.length;r++)c[r]=A[r][0];l(A=c);break;case 2:for(r=0;r<A.length;r++)l(A[r]);break;case 3:for(A=function(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],a=0;a<e;a++){var o=oA(t[a]);0!==o&&(void 0===r&&(r=o<0),r===o<0?(n&&i.push(n),n=[t[a]]):n.push(t[a]))}return n&&i.push(n),i}(A),r=0;r<A.length;r++)for(i=0;i<A[r].length;i++)l(A[r][i])}1===A.length?A=A[0]:u="Multi"+u;var h={type:"Feature",geometry:{type:u,coordinates:A},properties:this.properties};return"id"in this&&(h.id=this.id),h};var sA=rA,AA=uA;function uA(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(lA,this,e),this.length=this._features.length}function lA(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(n))}uA.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new sA(this._pbf,e,this.extent,this._keys,this._values)};var cA=AA;function hA(t,e,n){if(3===t){var r=new cA(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}eA.VectorTile=function(t,e){this.layers=t.readFields(hA,{},e)},eA.VectorTileFeature=rA,eA.VectorTileLayer=AA;var fA=eA.VectorTileFeature.types,dA=Math.pow(2,13);function pA(t,e,n,r,i,a,o,s){t.emplaceBack(e,n,2*Math.floor(r*dA)+o,i*dA*2,a*dA*2,Math.round(s))}var vA,gA=function(){function t(e){oi(this,t),this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Ua,this.centroidVertexArray=new Fa,this.indexArray=new Ra,this.programConfigurations=new po(e.layers,e.zoom),this.segments=new Va,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))}return ai(t,[{key:"populate",value:function(t,e,n){this.features=[],this.hasPattern=Gs("fill-extrusion",this.layers,e);var r,i=pO(t);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=a.feature,s=a.id,A=a.index,u=a.sourceLayerIndex,l=this.layers[0]._featureFilter.needGeometry,c=xo(o,l);if(this.layers[0]._featureFilter.filter(new yi(this.zoom),c,n)){var h={id:s,sourceLayerIndex:u,index:A,geometry:l?c.geometry:wo(o),properties:o.properties,type:o.type,patterns:{}};this.hasPattern?this.features.push(js("fill-extrusion",this.layers,h,this.zoom,e)):this.addFeature(h,h.geometry,A,n,{}),e.featureIndex.insert(o,h.geometry,A,u,this.index,!0)}}}catch(t){i.e(t)}finally{i.f()}}},{key:"addFeatures",value:function(t,e,n){var r,i=pO(this.features);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=a.geometry;this.addFeature(a,o,a.index,e,n)}}catch(t){i.e(t)}finally{i.f()}}},{key:"update",value:function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,tA),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,Js.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}},{key:"addFeature",value:function(t,e,n,r,i){var a,o={x:0,y:0,vertexCount:0},s=pO(Ns(e,500));try{for(s.s();!(a=s.n()).done;){var A,u=a.value,l=0,c=pO(u);try{for(c.s();!(A=c.n()).done;)l+=A.value.length}catch(t){c.e(t)}finally{c.f()}var h,f=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),d=pO(u);try{for(d.s();!(h=d.n()).done;){var p=h.value;if(0!==p.length&&!yA(p))for(var v=0,g=0;g<p.length;g++){var m=p[g];if(g>=1){var y=p[g-1];if(!mA(m,y)){f.vertexLength+4>Va.MAX_VERTEX_ARRAY_LENGTH&&(f=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var _=m.sub(y)._perp()._unit(),w=y.dist(m);v+w>32768&&(v=0),pA(this.layoutVertexArray,m.x,m.y,_.x,_.y,0,0,v),pA(this.layoutVertexArray,m.x,m.y,_.x,_.y,0,1,v),o.x+=2*m.x,o.y+=2*m.y,o.vertexCount+=2,v+=w,pA(this.layoutVertexArray,y.x,y.y,_.x,_.y,0,0,v),pA(this.layoutVertexArray,y.x,y.y,_.x,_.y,0,1,v),o.x+=2*y.x,o.y+=2*y.y,o.vertexCount+=2;var x=f.vertexLength;this.indexArray.emplaceBack(x,x+2,x+1),this.indexArray.emplaceBack(x+1,x+2,x+3),f.vertexLength+=4,f.primitiveLength+=2}}}}}catch(t){d.e(t)}finally{d.f()}if(f.vertexLength+l>Va.MAX_VERTEX_ARRAY_LENGTH&&(f=this.segments.prepareSegment(l,this.layoutVertexArray,this.indexArray)),"Polygon"===fA[t.type]){var b,B=[],k=[],C=f.vertexLength,F=pO(u);try{for(F.s();!(b=F.n()).done;){var E=b.value;if(0!==E.length){E!==u[0]&&k.push(B.length/2);for(var I=0;I<E.length;I++){var U=E[I];pA(this.layoutVertexArray,U.x,U.y,0,0,1,1,0),o.x+=U.x,o.y+=U.y,o.vertexCount+=1,B.push(U.x),B.push(U.y)}}}}catch(t){F.e(t)}finally{F.f()}for(var S=Os(B,k),Q=0;Q<S.length;Q+=3)this.indexArray.emplaceBack(C+S[Q],C+S[Q+2],C+S[Q+1]);f.primitiveLength+=S.length/3,f.vertexLength+=l}}}catch(t){s.e(t)}finally{s.f()}for(var T=0;T<o.vertexCount;T++)this.centroidVertexArray.emplaceBack(Math.floor(o.x/o.vertexCount),Math.floor(o.y/o.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,r)}}])}();function mA(t,e){return t.x===e.x&&(t.x<0||t.x>mo)||t.y===e.y&&(t.y<0||t.y>mo)}function yA(t){return t.every((function(t){return t.x<0}))||t.every((function(t){return t.x>mo}))||t.every((function(t){return t.y<0}))||t.every((function(t){return t.y>mo}))}Lr("FillExtrusionBucket",gA,{omit:["layers","features"]});var _A={get paint(){return vA=vA||new Oi({"fill-extrusion-opacity":new Ei(Z["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ii(Z["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ei(Z["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ei(Z["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ui(Z["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ii(Z["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ii(Z["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ei(Z["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}},wA=function(t){function e(t){return oi(this,e),gO(this,e,[t,_A])}return ci(e,t),ai(e,[{key:"createBucket",value:function(t){return new gA(t)}},{key:"queryRadius",value:function(){return Ro(this.paint.get("fill-extrusion-translate"))}},{key:"is3D",value:function(){return!0}},{key:"queryIntersectsFeature",value:function(t,e,n,r,i,o,s,A){var u=zo(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,s),l=this.paint.get("fill-extrusion-height").evaluate(e,n),c=this.paint.get("fill-extrusion-base").evaluate(e,n),h=function(t,e,n,r){var i,o=[],s=pO(t);try{for(s.s();!(i=s.n()).done;){var A=i.value,u=[A.x,A.y,0,1];Wo(u,u,e),o.push(new a(u[0]/u[3],u[1]/u[3]))}}catch(t){s.e(t)}finally{s.f()}return o}(u,A),f=function(t,e,n,r){var i,o=[],s=[],A=r[8]*e,u=r[9]*e,l=r[10]*e,c=r[11]*e,h=r[8]*n,f=r[9]*n,d=r[10]*n,p=r[11]*n,v=pO(t);try{for(v.s();!(i=v.n()).done;){var g,m=i.value,y=[],_=[],w=pO(m);try{for(w.s();!(g=w.n()).done;){var x=g.value,b=x.x,B=x.y,k=r[0]*b+r[4]*B+r[12],C=r[1]*b+r[5]*B+r[13],F=r[2]*b+r[6]*B+r[14],E=r[3]*b+r[7]*B+r[15],I=F+l,U=E+c,S=k+h,Q=C+f,T=F+d,M=E+p,D=new a((k+A)/U,(C+u)/U);D.z=I/U,y.push(D);var L=new a(S/M,Q/M);L.z=T/M,_.push(L)}}catch(t){w.e(t)}finally{w.f()}o.push(y),s.push(_)}}catch(t){v.e(t)}finally{v.f()}return[o,s]}(r,c,l,A);return function(t,e,n){var r=1/0;Io(n,e)&&(r=bA(n,e[0]));for(var i=0;i<e.length;i++)for(var a=e[i],o=t[i],s=0;s<a.length-1;s++){var A=a[s],u=[A,a[s+1],o[s+1],o[s],A];Fo(n,u)&&(r=Math.min(r,bA(n,u)))}return r!==1/0&&r}(f[0],f[1],h)}}])}(zi);function xA(t,e){return t.x*e.x+t.y*e.y}function bA(t,e){if(1===t.length){for(var n,r=0,i=e[r++];!n||i.equals(n);)if(!(n=e[r++]))return 1/0;for(;r<e.length;r++){var a=e[r],o=t[0],s=n.sub(i),A=a.sub(i),u=o.sub(i),l=xA(s,s),c=xA(s,A),h=xA(A,A),f=xA(u,s),d=xA(u,A),p=l*h-c*c,v=(h*f-c*d)/p,g=(l*d-c*f)/p,m=i.z*(1-v-g)+n.z*v+a.z*g;if(isFinite(m))return m}return 1/0}var y,_=1/0,w=pO(e);try{for(w.s();!(y=w.n()).done;){var x=y.value;_=Math.min(_,x.z)}}catch(t){w.e(t)}finally{w.f()}return _}var BA,kA,CA=Ki([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,FA=Ki([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,EA=eA.VectorTileFeature.types,IA=Math.cos(Math.PI/180*37.5),UA=Math.pow(2,14)/.5,SA=function(){function t(e){var n=this;oi(this,t),this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((function(t){n.gradients[t.id]={}})),this.layoutVertexArray=new Sa,this.layoutVertexArray2=new Qa,this.indexArray=new Ra,this.programConfigurations=new po(e.layers,e.zoom),this.segments=new Va,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))}return ai(t,[{key:"populate",value:function(t,e,n){this.hasPattern=Gs("line",this.layers,e);var r,i=this.layers[0].layout.get("line-sort-key"),a=!i.isConstant(),o=[],s=pO(t);try{for(s.s();!(r=s.n()).done;){var A=r.value,u=A.feature,l=A.id,c=A.index,h=A.sourceLayerIndex,f=this.layers[0]._featureFilter.needGeometry,d=xo(u,f);if(this.layers[0]._featureFilter.filter(new yi(this.zoom),d,n)){var p=a?i.evaluate(d,{},n):void 0,v={id:l,properties:u.properties,type:u.type,sourceLayerIndex:h,index:c,geometry:f?d.geometry:wo(u),patterns:{},sortKey:p};o.push(v)}}}catch(t){s.e(t)}finally{s.f()}a&&o.sort((function(t,e){return t.sortKey-e.sortKey}));for(var g=0,m=o;g<m.length;g++){var y=m[g],_=y.geometry,w=y.index,x=y.sourceLayerIndex;if(this.hasPattern){var b=js("line",this.layers,y,this.zoom,e);this.patternFeatures.push(b)}else this.addFeature(y,_,w,n,{});e.featureIndex.insert(t[w].feature,_,w,x,this.index)}}},{key:"update",value:function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)}},{key:"addFeatures",value:function(t,e,n){var r,i=pO(this.patternFeatures);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.addFeature(a,a.geometry,a.index,e,n)}}catch(t){i.e(t)}finally{i.f()}}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,FA)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,CA),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}},{key:"lineFeatureClips",value:function(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}},{key:"addFeature",value:function(t,e,n,r,i){var a=this.layers[0].layout,o=a.get("line-join").evaluate(t,{}),s=a.get("line-cap"),A=a.get("line-miter-limit"),u=a.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);var l,c=pO(e);try{for(c.s();!(l=c.n()).done;){var h=l.value;this.addLine(h,t,o,s,A,u)}}catch(t){c.e(t)}finally{c.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,r)}},{key:"addLine",value:function(t,e,n,r,i,a){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var o=0;o<t.length-1;o++)this.totalDistance+=t[o].dist(t[o+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var s="Polygon"===EA[e.type],A=t.length;A>=2&&t[A-1].equals(t[A-2]);)A--;for(var u=0;u<A-1&&t[u].equals(t[u+1]);)u++;if(!(A<(s?3:2))){"bevel"===n&&(i=1.05);var l,c,h,f,d,p=this.overscaling<=16?15*mo/(512*this.overscaling):0,v=this.segments.prepareSegment(10*A,this.layoutVertexArray,this.indexArray);this.e1=this.e2=-1,s&&(l=t[A-2],d=t[u].sub(l)._unit()._perp());for(var g=u;g<A;g++)if(!(h=g===A-1?s?t[u+1]:void 0:t[g+1])||!t[g].equals(h)){d&&(f=d),l&&(c=l),l=t[g],d=h?h.sub(l)._unit()._perp():f;var m=(f=f||d).add(d);0===m.x&&0===m.y||m._unit();var y=f.x*d.x+f.y*d.y,_=m.x*d.x+m.y*d.y,w=0!==_?1/_:1/0,x=2*Math.sqrt(2-2*_),b=_<IA&&c&&h,B=f.x*d.y-f.y*d.x>0;if(b&&g>u){var k=l.dist(c);if(k>2*p){var C=l.sub(l.sub(c)._mult(p/k)._round());this.updateDistance(c,C),this.addCurrentVertex(C,f,0,0,v),c=C}}var F=c&&h,E=F?n:s?"butt":r;if(F&&"round"===E&&(w<a?E="miter":w<=2&&(E="fakeround")),"miter"===E&&w>i&&(E="bevel"),"bevel"===E&&(w>2&&(E="flipbevel"),w<i&&(E="miter")),c&&this.updateDistance(c,l),"miter"===E)m._mult(w),this.addCurrentVertex(l,m,0,0,v);else if("flipbevel"===E){if(w>100)m=d.mult(-1);else{var I=w*f.add(d).mag()/f.sub(d).mag();m._perp()._mult(I*(B?-1:1))}this.addCurrentVertex(l,m,0,0,v),this.addCurrentVertex(l,m.mult(-1),0,0,v)}else if("bevel"===E||"fakeround"===E){var U=-Math.sqrt(w*w-1),S=B?U:0,Q=B?0:U;if(c&&this.addCurrentVertex(l,f,S,Q,v),"fakeround"===E)for(var T=Math.round(180*x/Math.PI/20),M=1;M<T;M++){var D=M/T;if(.5!==D){var L=D-.5;D+=D*L*(D-1)*((1.0904+y*(y*(3.55645-1.43519*y)-3.2452))*L*L+(.848013+y*(.215638*y-1.06021)))}var P=d.sub(f)._mult(D)._add(f)._unit()._mult(B?-1:1);this.addHalfVertex(l,P.x,P.y,!1,B,0,v)}h&&this.addCurrentVertex(l,d,-S,-Q,v)}else if("butt"===E)this.addCurrentVertex(l,m,0,0,v);else if("square"===E){var O=c?1:-1;this.addCurrentVertex(l,m,O,O,v)}else"round"===E&&(c&&(this.addCurrentVertex(l,f,0,0,v),this.addCurrentVertex(l,f,1,1,v,!0)),h&&(this.addCurrentVertex(l,d,-1,-1,v,!0),this.addCurrentVertex(l,d,0,0,v)));if(b&&g<A-1){var R=l.dist(h);if(R>2*p){var z=l.add(h.sub(l)._mult(p/R)._round());this.updateDistance(l,z),this.addCurrentVertex(z,d,0,0,v),l=z}}}}}},{key:"addCurrentVertex",value:function(t,e,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=e.y*r-e.x,s=-e.y-e.x*r;this.addHalfVertex(t,e.x+e.y*n,e.y-e.x*n,a,!1,n,i),this.addHalfVertex(t,o,s,a,!0,-r,i),this.distance>UA/2&&0===this.totalDistance&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(t,e,n,r,i,a))}},{key:"addHalfVertex",value:function(t,e,n,r,i,a,o){var s=t.x,A=t.y,u=.5*(this.lineClips?this.scaledDistance*(UA-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s<<1)+(r?1:0),(A<<1)+(i?1:0),Math.round(63*e)+128,Math.round(63*n)+128,1+(0===a?0:a<0?-1:1)|(63&u)<<2,u>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var l=o.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),o.primitiveLength++),i?this.e2=l:this.e1=l}},{key:"updateScaledDistance",value:function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}},{key:"updateDistance",value:function(t,e){this.distance+=t.dist(e),this.updateScaledDistance()}}])}();Lr("LineBucket",SA,{omit:["layers","patternFeatures"]});var QA,TA={get paint(){return kA=kA||new Oi({"line-opacity":new Ii(Z.paint_line["line-opacity"]),"line-color":new Ii(Z.paint_line["line-color"]),"line-translate":new Ei(Z.paint_line["line-translate"]),"line-translate-anchor":new Ei(Z.paint_line["line-translate-anchor"]),"line-width":new Ii(Z.paint_line["line-width"]),"line-gap-width":new Ii(Z.paint_line["line-gap-width"]),"line-offset":new Ii(Z.paint_line["line-offset"]),"line-blur":new Ii(Z.paint_line["line-blur"]),"line-dasharray":new Si(Z.paint_line["line-dasharray"]),"line-pattern":new Ui(Z.paint_line["line-pattern"]),"line-gradient":new Pi(Z.paint_line["line-gradient"])})},get layout(){return BA=BA||new Oi({"line-cap":new Ei(Z.layout_line["line-cap"]),"line-join":new Ii(Z.layout_line["line-join"]),"line-miter-limit":new Ei(Z.layout_line["line-miter-limit"]),"line-round-limit":new Ei(Z.layout_line["line-round-limit"]),"line-sort-key":new Ii(Z.layout_line["line-sort-key"])})}},MA=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"possiblyEvaluate",value:function(t,n){return n=new yi(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),Li(ui(e.prototype),"possiblyEvaluate",this).call(this,t,n)}},{key:"evaluate",value:function(t,n,r,i){return n=g({},n,{zoom:Math.floor(n.zoom)}),Li(ui(e.prototype),"evaluate",this).call(this,t,n,r,i)}}])}(Ii),DA=function(t){function e(t){var n;return oi(this,e),(n=gO(this,e,[t,TA])).gradientVersion=0,QA||((QA=new MA(TA.paint.properties["line-width"].specification)).useIntegerZoom=!0),n}return ci(e,t),ai(e,[{key:"_handleSpecialPaintPropertyUpdate",value:function(t){if("line-gradient"===t){var e=this.gradientExpression();this.stepInterpolant=!!function(t){return void 0!==t._styleExpression}(e)&&e._styleExpression.expression instanceof Ve,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}},{key:"gradientExpression",value:function(){return this._transitionablePaint._values["line-gradient"].value.expression}},{key:"recalculate",value:function(t,n){Li(ui(e.prototype),"recalculate",this).call(this,t,n),this.paint._values["line-floorwidth"]=QA.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}},{key:"createBucket",value:function(t){return new SA(t)}},{key:"queryRadius",value:function(t){var e=t,n=LA(Oo("line-width",this,e),Oo("line-gap-width",this,e)),r=Oo("line-offset",this,e);return n/2+Math.abs(r)+Ro(this.paint.get("line-translate"))}},{key:"queryIntersectsFeature",value:function(t,e,n,r,i,o,s){var A=zo(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,s),u=s/2*LA(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),l=this.paint.get("line-offset").evaluate(e,n);return l&&(r=function(t,e){for(var n=[],r=0;r<t.length;r++){for(var i=t[r],o=[],s=0;s<i.length;s++){var A=i[s-1],u=i[s],l=i[s+1],c=0===s?new a(0,0):u.sub(A)._unit()._perp(),h=s===i.length-1?new a(0,0):l.sub(u)._unit()._perp(),f=c._add(h)._unit(),d=f.x*h.x+f.y*h.y;0!==d&&f._mult(1/d),o.push(f._mult(e)._add(u))}n.push(o)}return n}(r,l*s)),function(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];if(t.length>=3)for(var a=0;a<i.length;a++)if(Lo(t,i[a]))return!0;if(Uo(t,i,n))return!0}return!1}(A,r,u)}},{key:"isTileClipped",value:function(){return!0}}])}(zi);function LA(t,e){return e>0?e+2*t:t}var PA=Ki([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),OA=Ki([{name:"a_projected_pos",components:3,type:"Float32"}],4);Ki([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var RA=Ki([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Ki([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var zA=Ki([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),HA=Ki([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function VA(t,e,n){return t.sections.forEach((function(t){t.text=function(t,e,n){var r=e.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?t=t.toLocaleUpperCase():"lowercase"===r&&(t=t.toLocaleLowerCase()),mi.applyArabicShaping&&(t=mi.applyArabicShaping(t)),t}(t.text,e,n)})),t}Ki([{name:"triangle",components:3,type:"Uint16"}]),Ki([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ki([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Ki([{type:"Float32",name:"offsetX"}]),Ki([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Ki([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);var NA={"!":"ï¸","#":"ï¼",$:"ï¼","%":"ï¼","&":"ï¼","(":"ï¸µ",")":"ï¸¶","*":"ï¼","+":"ï¼",",":"ï¸","-":"ï¸²",".":"ã»","/":"ï¼",":":"ï¸",";":"ï¸","<":"ï¸¿","=":"ï¼",">":"ï¹","?":"ï¸","@":"ï¼ ","[":"ï¹","\\":"ï¼¼","]":"ï¹","^":"ï¼¾",_:"ï¸³","`":"ï½","{":"ï¸·","|":"â","}":"ï¸¸","~":"ï½","Â¢":"ï¿ ","Â£":"ï¿¡","Â¥":"ï¿¥","Â¦":"ï¿¤","Â¬":"ï¿¢","Â¯":"ï¿£","â":"ï¸²","â":"ï¸±","â":"ï¹","â":"ï¹","â":"ï¹","â":"ï¹","â¦":"ï¸","â§":"ã»","â©":"ï¿¦","ã":"ï¸","ã":"ï¸","ã":"ï¸¿","ã":"ï¹","ã":"ï¸½","ã":"ï¸¾","ã":"ï¹","ã":"ï¹","ã":"ï¹","ã":"ï¹","ã":"ï¸»","ã":"ï¸¼","ã":"ï¸¹","ã":"ï¸º","ã":"ï¸","ã":"ï¸","ï¼":"ï¸","ï¼":"ï¸µ","ï¼":"ï¸¶","ï¼":"ï¸","ï¼":"ï¸²","ï¼":"ã»","ï¼":"ï¸","ï¼":"ï¸","ï¼":"ï¸¿","ï¼":"ï¹","ï¼":"ï¸","ï¼»":"ï¹","ï¼½":"ï¹","ï¼¿":"ï¸³","ï½":"ï¸·","ï½":"â","ï½":"ï¸¸","ï½":"ï¸µ","ï½ ":"ï¸¶","ï½¡":"ï¸","ï½¢":"ï¹","ï½£":"ï¹"},KA=24,GA=WA,jA=function(t,e,n,r,i){var a,o,s=8*i-r-1,A=(1<<s)-1,u=A>>1,l=-7,c=n?i-1:0,h=n?-1:1,f=t[e+c];for(c+=h,a=f&(1<<-l)-1,f>>=-l,l+=s;l>0;a=256*a+t[e+c],c+=h,l-=8);for(o=a&(1<<-l)-1,a>>=-l,l+=r;l>0;o=256*o+t[e+c],c+=h,l-=8);if(0===a)a=1-u;else{if(a===A)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,r),a-=u}return(f?-1:1)*o*Math.pow(2,a-r)},$A=function(t,e,n,r,i,a){var o,s,A,u=8*a-i-1,l=(1<<u)-1,c=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:a-1,d=r?1:-1,p=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(A=Math.pow(2,-o))<1&&(o--,A*=2),(e+=o+c>=1?h/A:h*Math.pow(2,1-c))*A>=2&&(o++,A/=2),o+c>=l?(s=0,o=l):o+c>=1?(s=(e*A-1)*Math.pow(2,i),o+=c):(s=e*Math.pow(2,c-1)*Math.pow(2,i),o=0));i>=8;t[n+f]=255&s,f+=d,s/=256,i-=8);for(o=o<<i|s,u+=i;u>0;t[n+f]=255&o,f+=d,o/=256,u-=8);t[n+f-d]|=128*p};function WA(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}WA.Varint=0,WA.Fixed64=1,WA.Bytes=2,WA.Fixed32=5;var ZA=4294967296,qA=1/ZA,XA="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function YA(t){return t.type===WA.Bytes?t.readVarint()+t.pos:t.pos+1}function JA(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function tu(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function eu(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function nu(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function ru(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function iu(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function au(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function ou(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function su(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function Au(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function uu(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function lu(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function cu(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function hu(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}WA.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,a=this.pos;this.type=7&r,t(i,e,this),this.pos===a&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=lu(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=hu(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=lu(this.buf,this.pos)+lu(this.buf,this.pos+4)*ZA;return this.pos+=8,t},readSFixed64:function(){var t=lu(this.buf,this.pos)+hu(this.buf,this.pos+4)*ZA;return this.pos+=8,t},readFloat:function(){var t=jA(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=jA(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return e=127&(n=r[this.pos++]),n<128?e:(e|=(127&(n=r[this.pos++]))<<7,n<128?e:(e|=(127&(n=r[this.pos++]))<<14,n<128?e:(e|=(127&(n=r[this.pos++]))<<21,n<128?e:function(t,e,n){var r,i,a=n.buf;if(r=(112&(i=a[n.pos++]))>>4,i<128)return JA(t,r,e);if(r|=(127&(i=a[n.pos++]))<<3,i<128)return JA(t,r,e);if(r|=(127&(i=a[n.pos++]))<<10,i<128)return JA(t,r,e);if(r|=(127&(i=a[n.pos++]))<<17,i<128)return JA(t,r,e);if(r|=(127&(i=a[n.pos++]))<<24,i<128)return JA(t,r,e);if(r|=(1&(i=a[n.pos++]))<<31,i<128)return JA(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&XA?function(t,e,n){return XA.decode(t.subarray(e,n))}(this.buf,e,t):function(t,e,n){for(var r="",i=e;i<n;){var a,o,s,A=t[i],u=null,l=A>239?4:A>223?3:A>191?2:1;if(i+l>n)break;1===l?A<128&&(u=A):2===l?128==(192&(a=t[i+1]))&&(u=(31&A)<<6|63&a)<=127&&(u=null):3===l?(o=t[i+2],128==(192&(a=t[i+1]))&&128==(192&o)&&((u=(15&A)<<12|(63&a)<<6|63&o)<=2047||u>=55296&&u<=57343)&&(u=null)):4===l&&(o=t[i+2],s=t[i+3],128==(192&(a=t[i+1]))&&128==(192&o)&&128==(192&s)&&((u=(15&A)<<18|(63&a)<<12|(63&o)<<6|63&s)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,l=1):u>65535&&(u-=65536,r+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),r+=String.fromCharCode(u),i+=l}return r}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==WA.Bytes)return t.push(this.readVarint(e));var n=YA(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==WA.Bytes)return t.push(this.readSVarint());var e=YA(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==WA.Bytes)return t.push(this.readBoolean());var e=YA(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==WA.Bytes)return t.push(this.readFloat());var e=YA(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==WA.Bytes)return t.push(this.readDouble());var e=YA(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==WA.Bytes)return t.push(this.readFixed32());var e=YA(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==WA.Bytes)return t.push(this.readSFixed32());var e=YA(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==WA.Bytes)return t.push(this.readFixed64());var e=YA(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==WA.Bytes)return t.push(this.readSFixed64());var e=YA(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===WA.Varint)for(;this.buf[this.pos++]>127;);else if(e===WA.Bytes)this.pos=this.readVarint()+this.pos;else if(e===WA.Fixed32)this.pos+=4;else{if(e!==WA.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),cu(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),cu(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),cu(this.buf,-1&t,this.pos),cu(this.buf,Math.floor(t*qA),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),cu(this.buf,-1&t,this.pos),cu(this.buf,Math.floor(t*qA),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,n.buf[n.pos]=127&(t>>>=7)}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var r,i,a=0;a<e.length;a++){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){r>56319||a+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&tu(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),$A(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),$A(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&tu(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,WA.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,eu,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,nu,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,au,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,ru,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,iu,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,ou,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,su,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,Au,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,uu,e)},writeBytesField:function(t,e){this.writeTag(t,WA.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,WA.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,WA.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,WA.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,WA.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,WA.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,WA.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,WA.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,WA.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,WA.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var fu=n(GA),du=3;function pu(t,e,n){1===t&&n.readMessage(vu,e)}function vu(t,e,n){if(3===t){var r=n.readMessage(gu,{}),i=r.id,a=r.bitmap,o=r.width,s=r.height,A=r.left,u=r.top,l=r.advance;e.push({id:i,bitmap:new rs({width:o+2*du,height:s+2*du},a),metrics:{width:o,height:s,left:A,top:u,advance:l}})}}function gu(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}var mu=du;function yu(t){var e,n=0,r=0,i=pO(t);try{for(i.s();!(e=i.n()).done;){var a=e.value;n+=a.w*a.h,r=Math.max(r,a.w)}}catch(t){i.e(t)}finally{i.f()}t.sort((function(t,e){return e.h-t.h}));var o,s=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),r),h:1/0}],A=0,u=0,l=pO(t);try{for(l.s();!(o=l.n()).done;)for(var c=o.value,h=s.length-1;h>=0;h--){var f=s[h];if(!(c.w>f.w||c.h>f.h)){if(c.x=f.x,c.y=f.y,u=Math.max(u,c.y+c.h),A=Math.max(A,c.x+c.w),c.w===f.w&&c.h===f.h){var d=s.pop();h<s.length&&(s[h]=d)}else c.h===f.h?(f.x+=c.w,f.w-=c.w):c.w===f.w?(f.y+=c.h,f.h-=c.h):(s.push({x:f.x+c.w,y:f.y,w:f.w-c.w,h:c.h}),f.y+=c.h,f.h-=c.h);break}}}catch(t){l.e(t)}finally{l.f()}return{w:A,h:u,fill:n/(A*u)||0}}var _u,wu=1,xu=function(){function t(e,n){var r=n.pixelRatio,i=n.version,a=n.stretchX,o=n.stretchY,s=n.content;oi(this,t),this.paddedRect=e,this.pixelRatio=r,this.stretchX=a,this.stretchY=o,this.content=s,this.version=i}return ai(t,[{key:"tl",get:function(){return[this.paddedRect.x+wu,this.paddedRect.y+wu]}},{key:"br",get:function(){return[this.paddedRect.x+this.paddedRect.w-wu,this.paddedRect.y+this.paddedRect.h-wu]}},{key:"tlbr",get:function(){return this.tl.concat(this.br)}},{key:"displaySize",get:function(){return[(this.paddedRect.w-2*wu)/this.pixelRatio,(this.paddedRect.h-2*wu)/this.pixelRatio]}}])}(),bu=function(){function t(e,n){oi(this,t);var r={},i={};this.haveRenderCallbacks=[];var a=[];this.addImages(e,r,a),this.addImages(n,i,a);var o=yu(a),s=o.w,A=o.h,u=new is({width:s||1,height:A||1});for(var l in e){var c=e[l],h=r[l].paddedRect;is.copy(c.data,u,{x:0,y:0},{x:h.x+wu,y:h.y+wu},c.data)}for(var f in n){var d=n[f],p=i[f].paddedRect,v=p.x+wu,g=p.y+wu,m=d.data.width,y=d.data.height;is.copy(d.data,u,{x:0,y:0},{x:v,y:g},d.data),is.copy(d.data,u,{x:0,y:y-1},{x:v,y:g-1},{width:m,height:1}),is.copy(d.data,u,{x:0,y:0},{x:v,y:g+y},{width:m,height:1}),is.copy(d.data,u,{x:m-1,y:0},{x:v-1,y:g},{width:1,height:y}),is.copy(d.data,u,{x:0,y:0},{x:v+m,y:g},{width:1,height:y})}this.image=u,this.iconPositions=r,this.patternPositions=i}return ai(t,[{key:"addImages",value:function(t,e,n){for(var r in t){var i=t[r],a={x:0,y:0,w:i.data.width+2*wu,h:i.data.height+2*wu};n.push(a),e[r]=new xu(a,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(r)}}},{key:"patchUpdatedImages",value:function(t,e){for(var n in t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[n],t.getImage(n),e),this.patchUpdatedImage(this.patternPositions[n],t.getImage(n),e)}},{key:"patchUpdatedImage",value:function(t,e,n){if(t&&e&&t.version!==e.version){t.version=e.version;var r=gi(t.tl,2),i=r[0],a=r[1];n.update(e.data,void 0,{x:i,y:a})}}}])}();Lr("ImagePosition",xu),Lr("ImageAtlas",bu),t.ai=void 0,(_u=t.ai||(t.ai={}))[_u.none=0]="none",_u[_u.horizontal=1]="horizontal",_u[_u.vertical=2]="vertical",_u[_u.horizontalOnly=3]="horizontalOnly";var Bu=-17,ku=function(){function t(){oi(this,t),this.scale=1,this.fontStack="",this.imageName=null}return ai(t,null,[{key:"forText",value:function(e,n){var r=new t;return r.scale=e||1,r.fontStack=n,r}},{key:"forImage",value:function(e){var n=new t;return n.imageName=e,n}}])}(),Cu=function(){function t(){oi(this,t),this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}return ai(t,[{key:"length",value:function(){return this.text.length}},{key:"getSection",value:function(t){return this.sections[this.sectionIndex[t]]}},{key:"getSectionIndex",value:function(t){return this.sectionIndex[t]}},{key:"getCharCode",value:function(t){return this.text.charCodeAt(t)}},{key:"verticalizePunctuation",value:function(){this.text=function(t){for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n+1)||null,i=t.charCodeAt(n-1)||null;e+=r&&$r(r)&&!NA[t[n+1]]||i&&$r(i)&&!NA[t[n-1]]||!NA[t[n]]?t[n]:NA[t[n]]}return e}(this.text)}},{key:"trim",value:function(){for(var t=0,e=0;e<this.text.length&&Eu[this.text.charCodeAt(e)];e++)t++;for(var n=this.text.length,r=this.text.length-1;r>=0&&r>=t&&Eu[this.text.charCodeAt(r)];r--)n--;this.text=this.text.substring(t,n),this.sectionIndex=this.sectionIndex.slice(t,n)}},{key:"substring",value:function(e,n){var r=new t;return r.text=this.text.substring(e,n),r.sectionIndex=this.sectionIndex.slice(e,n),r.sections=this.sections,r}},{key:"toString",value:function(){return this.text}},{key:"getMaxScale",value:function(){var t=this;return this.sectionIndex.reduce((function(e,n){return Math.max(e,t.sections[n].scale)}),0)}},{key:"addTextSection",value:function(t,e){this.text+=t.text,this.sections.push(ku.forText(t.scale,t.fontStack||e));for(var n=this.sections.length-1,r=0;r<t.text.length;++r)this.sectionIndex.push(n)}},{key:"addImageSection",value:function(t){var e=t.image?t.image.name:"";if(0!==e.length){var n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(ku.forImage(e)),this.sectionIndex.push(this.sections.length-1)):b("Reached maximum number of images 6401")}else b("Can't add FormattedSection with an empty image.")}},{key:"getNextImageSectionCharCode",value:function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}],[{key:"fromFeature",value:function(e,n){for(var r=new t,i=0;i<e.sections.length;i++){var a=e.sections[i];a.image?r.addImageSection(a):r.addTextSection(a,n)}return r}}])}();function Fu(e,n,r,i,a,o,s,A,u,l,c,h,f,d,p,v){var g,m=Cu.fromFeature(e,a);h===t.ai.vertical&&m.verticalizePunctuation();var y=mi.processBidirectionalText,_=mi.processStyledBidirectionalText;if(y&&1===m.sections.length){g=[];var w,x=pO(y(m.toString(),Du(m,l,o,n,i,d,p)));try{for(x.s();!(w=x.n()).done;){var b=w.value,B=new Cu;B.text=b,B.sections=m.sections;for(var k=0;k<b.length;k++)B.sectionIndex.push(0);g.push(B)}}catch(t){x.e(t)}finally{x.f()}}else if(_){g=[];var C,F=pO(_(m.text,m.sectionIndex,Du(m,l,o,n,i,d,p)));try{for(F.s();!(C=F.n()).done;){var E=C.value,I=new Cu;I.text=E[0],I.sectionIndex=E[1],I.sections=m.sections,g.push(I)}}catch(t){F.e(t)}finally{F.f()}}else g=function(t,e){var n,r=[],i=t.text,a=0,o=pO(e);try{for(o.s();!(n=o.n()).done;){var s=n.value;r.push(t.substring(a,s)),a=s}}catch(t){o.e(t)}finally{o.f()}return a<i.length&&r.push(t.substring(a,i.length)),r}(m,Du(m,l,o,n,i,d,p));var U=[],S={positionedLines:U,text:m.toString(),top:c[1],bottom:c[1],left:c[0],right:c[0],writingMode:h,iconsInText:!1,verticalizable:!1};return function(e,n,r,i,a,o,s,A,u,l,c,h){var f,d,p=0,v=Bu,g=0,m=0,y="right"===A?1:"left"===A?0:.5,_=0,w=pO(a);try{for(w.s();!(f=w.n()).done;){var x=f.value;x.trim();var b=x.getMaxScale(),B=(b-1)*KA,k={positionedGlyphs:[],lineOffset:0};e.positionedLines[_]=k;var C=k.positionedGlyphs,F=0;if(x.length()){for(var E=0;E<x.length();E++){var I=x.getSection(E),U=x.getSectionIndex(E),S=x.getCharCode(E),Q=0,T=null,M=null,D=null,L=KA,P=!(u===t.ai.horizontal||!c&&!jr(S)||c&&(Eu[S]||(d=S,Vr.Arabic(d)||Vr["Arabic Supplement"](d)||Vr["Arabic Extended-A"](d)||Vr["Arabic Presentation Forms-A"](d)||Vr["Arabic Presentation Forms-B"](d))));if(I.imageName){var O=i[I.imageName];if(!O)continue;D=I.imageName,e.iconsInText=e.iconsInText||!0,M=O.paddedRect;var R=O.displaySize;I.scale=I.scale*KA/h,T={width:R[0],height:R[1],left:wu,top:-mu,advance:P?R[1]:R[0]},Q=B+(KA-R[1]*I.scale),L=T.advance;var z=P?R[0]*I.scale-KA*b:R[1]*I.scale-KA*b;z>0&&z>F&&(F=z)}else{var H=r[I.fontStack],V=H&&H[S];if(V&&V.rect)M=V.rect,T=V.metrics;else{var N=n[I.fontStack],K=N&&N[S];if(!K)continue;T=K.metrics}Q=(b-I.scale)*KA}P?(e.verticalizable=!0,C.push({glyph:S,imageName:D,x:p,y:v+Q,vertical:P,scale:I.scale,fontStack:I.fontStack,sectionIndex:U,metrics:T,rect:M}),p+=L*I.scale+l):(C.push({glyph:S,imageName:D,x:p,y:v+Q,vertical:P,scale:I.scale,fontStack:I.fontStack,sectionIndex:U,metrics:T,rect:M}),p+=T.advance*I.scale+l)}0!==C.length&&(g=Math.max(p-l,g),Pu(C,0,C.length-1,y,F)),p=0;var G=o*b+F;k.lineOffset=Math.max(F,B),v+=G,m=Math.max(G,m),++_}else v+=o,++_}}catch(t){w.e(t)}finally{w.f()}var j=v-Bu,$=Lu(s),W=$.horizontalAlign,Z=$.verticalAlign;(function(t,e,n,r,i,a,o,s,A){var u=(e-n)*i,l=0;l=a!==o?-s*r-Bu:(-r*A+.5)*o;var c,h=pO(t);try{for(h.s();!(c=h.n()).done;){var f,d=pO(c.value.positionedGlyphs);try{for(d.s();!(f=d.n()).done;){var p=f.value;p.x+=u,p.y+=l}}catch(t){d.e(t)}finally{d.f()}}}catch(t){h.e(t)}finally{h.f()}})(e.positionedLines,y,W,Z,g,m,o,j,a.length),e.top+=-Z*j,e.bottom=e.top+j,e.left+=-W*g,e.right=e.left+g}(S,n,r,i,g,s,A,u,h,l,f,v),!function(t){var e,n=pO(t);try{for(n.s();!(e=n.n()).done;)if(0!==e.value.positionedGlyphs.length)return!1}catch(t){n.e(t)}finally{n.f()}return!0}(U)&&S}var Eu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Iu={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Uu(t,e,n,r,i,a){if(e.imageName){var o=r[e.imageName];return o?o.displaySize[0]*e.scale*KA/a+i:0}var s=n[e.fontStack],A=s&&s[t];return A?A.metrics.advance*e.scale+i:0}function Su(t,e,n,r){var i=Math.pow(t-e,2);return r?t<e?i/2:2*i:i+Math.abs(n)*n}function Qu(t,e,n){var r=0;return 10===t&&(r-=1e4),n&&(r+=150),40!==t&&65288!==t||(r+=50),41!==e&&65289!==e||(r+=50),r}function Tu(t,e,n,r,i,a){var o,s=null,A=Su(e,n,i,a),u=pO(r);try{for(u.s();!(o=u.n()).done;){var l=o.value,c=Su(e-l.x,n,i,a)+l.badness;c<=A&&(s=l,A=c)}}catch(t){u.e(t)}finally{u.f()}return{index:t,x:e,priorBreak:s,badness:A}}function Mu(t){return t?Mu(t.priorBreak).concat(t.index):[]}function Du(t,e,n,r,i,a,o){if("point"!==a)return[];if(!t)return[];for(var s,A=[],u=function(t,e,n,r,i,a){for(var o=0,s=0;s<t.length();s++){var A=t.getSection(s);o+=Uu(t.getCharCode(s),A,r,i,e,a)}return o/Math.max(1,Math.ceil(o/n))}(t,e,n,r,i,o),l=t.text.indexOf("â")>=0,c=0,h=0;h<t.length();h++){var f=t.getSection(h),d=t.getCharCode(h);if(Eu[d]||(c+=Uu(d,f,r,i,e,o)),h<t.length()-1){var p=!((s=d)<11904||!(Vr["Bopomofo Extended"](s)||Vr.Bopomofo(s)||Vr["CJK Compatibility Forms"](s)||Vr["CJK Compatibility Ideographs"](s)||Vr["CJK Compatibility"](s)||Vr["CJK Radicals Supplement"](s)||Vr["CJK Strokes"](s)||Vr["CJK Symbols and Punctuation"](s)||Vr["CJK Unified Ideographs Extension A"](s)||Vr["CJK Unified Ideographs"](s)||Vr["Enclosed CJK Letters and Months"](s)||Vr["Halfwidth and Fullwidth Forms"](s)||Vr.Hiragana(s)||Vr["Ideographic Description Characters"](s)||Vr["Kangxi Radicals"](s)||Vr["Katakana Phonetic Extensions"](s)||Vr.Katakana(s)||Vr["Vertical Forms"](s)||Vr["Yi Radicals"](s)||Vr["Yi Syllables"](s)));(Iu[d]||p||f.imageName)&&A.push(Tu(h+1,c,u,A,Qu(d,t.getCharCode(h+1),p&&l),!1))}}return Mu(Tu(t.length(),c,u,A,0,!0))}function Lu(t){var e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function Pu(t,e,n,r,i){if(r||i)for(var a=t[n],o=(t[n].x+a.metrics.advance*a.scale)*r,s=e;s<=n;s++)t[s].x-=o,t[s].y+=i}function Ou(t,e,n){var r=Lu(n),i=r.horizontalAlign,a=r.verticalAlign,o=e[0]-t.displaySize[0]*i,s=e[1]-t.displaySize[1]*a;return{image:t,top:s,bottom:s+t.displaySize[1],left:o,right:o+t.displaySize[0]}}function Ru(t,e,n,r,i,a){var o,s=t.image;if(s.content){var A=s.content,u=s.pixelRatio||1;o=[A[0]/u,A[1]/u,s.displaySize[0]-A[2]/u,s.displaySize[1]-A[3]/u]}var l,c,h,f,d=e.left*a,p=e.right*a;"width"===n||"both"===n?(f=i[0]+d-r[3],c=i[0]+p+r[1]):c=(f=i[0]+(d+p-s.displaySize[0])/2)+s.displaySize[0];var v=e.top*a,g=e.bottom*a;return"height"===n||"both"===n?(l=i[1]+v-r[0],h=i[1]+g+r[2]):h=(l=i[1]+(v+g-s.displaySize[1])/2)+s.displaySize[1],{image:s,top:l,right:c,bottom:h,left:f,collisionPadding:o}}var zu=255,Hu=128,Vu=zu*Hu;function Nu(t,e){var n=e.expression;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new yi(t+1))};if("source"===n.kind)return{kind:"source"};for(var r=n.zoomStops,i=n.interpolationType,a=0;a<r.length&&r[a]<=t;)a++;for(var o=a=Math.max(0,a-1);o<r.length&&r[o]<t+1;)o++;o=Math.min(r.length-1,o);var s=r[a],A=r[o];return"composite"===n.kind?{kind:"composite",minZoom:s,maxZoom:A,interpolationType:i}:{kind:"camera",minZoom:s,maxZoom:A,minSize:n.evaluate(new yi(s)),maxSize:n.evaluate(new yi(A)),interpolationType:i}}function Ku(t,e,n){var r="never",i=t.get(e);return i?r=i:t.get(n)&&(r="always"),r}var Gu=eA.VectorTileFeature.types,ju=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function $u(t,e,n,r,i,a,o,s,A,u,l,c,h){var f=s?Math.min(Vu,Math.round(s[0])):0,d=s?Math.min(Vu,Math.round(s[1])):0;t.emplaceBack(e,n,Math.round(32*r),Math.round(32*i),a,o,(f<<1)+(A?1:0),d,16*u,16*l,256*c,256*h)}function Wu(t,e,n){t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n)}function Zu(t){var e,n=pO(t.sections);try{for(n.s();!(e=n.n()).done;)if(qr(e.value.text))return!0}catch(t){n.e(t)}finally{n.f()}return!1}var qu=function(){function t(e){oi(this,t),this.layoutVertexArray=new Ma,this.indexArray=new Ra,this.programConfigurations=e,this.segments=new Va,this.dynamicLayoutVertexArray=new Da,this.opacityVertexArray=new La,this.hasVisibleVertices=!1,this.placedSymbolArray=new ma}return ai(t,[{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}},{key:"upload",value:function(t,e,n,r){this.isEmpty()||(n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,PA.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,OA.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,ju,!0),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(t))}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}])}();Lr("SymbolBuffers",qu);var Xu=function(){function t(e,n,r){oi(this,t),this.layoutVertexArray=new e,this.layoutAttributes=n,this.indexArray=new r,this.segments=new Va,this.collisionVertexArray=new Oa}return ai(t,[{key:"upload",value:function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,RA.members,!0)}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}])}();Lr("CollisionBuffers",Xu);var Yu,Ju,tl=function(){function e(n){oi(this,e),this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ko([]),this.placementViewportMatrix=Ko([]);var r=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Nu(this.zoom,r["text-size"]),this.iconSizeData=Nu(this.zoom,r["icon-size"]);var i=this.layers[0].layout,a=i.get("symbol-sort-key"),o=i.get("symbol-z-order");this.canOverlap="never"!==Ku(i,"text-overlap","text-allow-overlap")||"never"!==Ku(i,"icon-overlap","icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==o&&!a.isConstant(),this.sortFeaturesByY=("viewport-y"===o||"auto"===o&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===i.get("symbol-placement")&&(this.writingModes=i.get("text-writing-mode").map((function(e){return t.ai[e]}))),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id})),this.sourceID=n.sourceID}return ai(e,[{key:"createArrays",value:function(){this.text=new qu(new po(this.layers,this.zoom,(function(t){return/^text/.test(t)}))),this.icon=new qu(new po(this.layers,this.zoom,(function(t){return/^icon/.test(t)}))),this.glyphOffsetArray=new wa,this.lineVertexArray=new xa,this.symbolInstances=new _a,this.textAnchorOffsets=new Ba}},{key:"calculateGlyphDependencies",value:function(t,e,n,r,i){for(var a=0;a<t.length;a++)if(e[t.charCodeAt(a)]=!0,(n||r)&&i){var o=NA[t.charAt(a)];o&&(e[o.charCodeAt(0)]=!0)}}},{key:"populate",value:function(e,n,r){var i=this.layers[0],a=i.layout,o=a.get("text-font"),s=a.get("text-field"),A=a.get("icon-image"),u=("constant"!==s.value.kind||s.value.value instanceof Jt&&!s.value.value.isEmpty()||s.value.value.toString().length>0)&&("constant"!==o.value.kind||o.value.value.length>0),l="constant"!==A.value.kind||!!A.value.value||Object.keys(A.parameters).length>0,c=a.get("symbol-sort-key");if(this.features=[],u||l){var h,f=n.iconDependencies,d=n.glyphDependencies,p=n.availableImages,v=new yi(this.zoom),g=pO(e);try{for(g.s();!(h=g.n()).done;){var m=h.value,y=m.feature,_=m.id,w=m.index,x=m.sourceLayerIndex,b=i._featureFilter.needGeometry,B=xo(y,b);if(i._featureFilter.filter(v,B,r)){var k=void 0,C=void 0;if(b||(B.geometry=wo(y)),u){var F=i.getValueAndResolveTokens("text-field",B,r,p),E=Jt.factory(F);Zu(E)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===hi()||this.hasRTLText&&mi.isParsed())&&(k=VA(E,i,B))}if(l){var I=i.getValueAndResolveTokens("icon-image",B,r,p);C=I instanceof re?I:re.fromString(I)}if(k||C){var U=this.sortFeaturesByKey?c.evaluate(B,{},r):void 0;if(this.features.push({id:_,text:k,icon:C,index:w,sourceLayerIndex:x,geometry:B.geometry,properties:y.properties,type:Gu[y.type],sortKey:U}),C&&(f[C.name]=!0),k){var S=o.evaluate(B,{},r).join(","),Q="viewport"!==a.get("text-rotation-alignment")&&"point"!==a.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(t.ai.vertical)>=0;var T,M=pO(k.sections);try{for(M.s();!(T=M.n()).done;){var D=T.value;if(D.image)f[D.image.name]=!0;else{var L=Nr(k.toString()),P=D.fontStack||S,O=d[P]=d[P]||{};this.calculateGlyphDependencies(D.text,O,Q,this.allowVerticalPlacement,L)}}}catch(t){M.e(t)}finally{M.f()}}}}}}catch(t){g.e(t)}finally{g.f()}"line"===a.get("symbol-placement")&&(this.features=function(t){var e={},n={},r=[],i=0;function a(e){r.push(t[e]),i++}function o(t,e,i){var a=n[t];return delete n[t],n[e]=a,r[a].geometry[0].pop(),r[a].geometry[0]=r[a].geometry[0].concat(i[0]),a}function s(t,n,i){var a=e[n];return delete e[n],e[t]=a,r[a].geometry[0].shift(),r[a].geometry[0]=i[0].concat(r[a].geometry[0]),a}function A(t,e,n){var r=n?e[0][e[0].length-1]:e[0][0];return"".concat(t,":").concat(r.x,":").concat(r.y)}for(var u=0;u<t.length;u++){var l=t[u],c=l.geometry,h=l.text?l.text.toString():null;if(h){var f=A(h,c),d=A(h,c,!0);if(f in n&&d in e&&n[f]!==e[d]){var p=s(f,d,c),v=o(f,d,r[p].geometry);delete e[f],delete n[d],n[A(h,r[v].geometry,!0)]=v,r[p].geometry=null}else f in n?o(f,d,c):d in e?s(f,d,c):(a(u),e[f]=i-1,n[d]=i-1)}else a(u)}return r.filter((function(t){return t.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(t,e){return t.sortKey-e.sortKey}))}}},{key:"update",value:function(t,e,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,n),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,n))}},{key:"isEmpty",value:function(){return 0===this.symbolInstances.length&&!this.hasRTLText}},{key:"uploadPending",value:function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}},{key:"upload",value:function(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}},{key:"destroyDebugData",value:function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}},{key:"destroy",value:function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}},{key:"addToLineVertexArray",value:function(t,e){var n=this.lineVertexArray.length;if(void 0!==t.segment){for(var r=t.dist(e[t.segment+1]),i=t.dist(e[t.segment]),a={},o=t.segment+1;o<e.length;o++)a[o]={x:e[o].x,y:e[o].y,tileUnitDistanceFromAnchor:r},o<e.length-1&&(r+=e[o+1].dist(e[o]));for(var s=t.segment||0;s>=0;s--)a[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:i},s>0&&(i+=e[s-1].dist(e[s]));for(var A=0;A<e.length;A++){var u=a[A];this.lineVertexArray.emplaceBack(u.x,u.y,u.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}},{key:"addSymbols",value:function(e,n,r,i,a,o,s,A,u,l,c,h){for(var f=e.indexArray,d=e.layoutVertexArray,p=e.segments.prepareSegment(4*n.length,d,f,this.canOverlap?o.sortKey:void 0),v=this.glyphOffsetArray.length,g=p.vertexLength,m=this.allowVerticalPlacement&&s===t.ai.vertical?Math.PI/2:0,y=o.text&&o.text.sections,_=0;_<n.length;_++){var w=n[_],x=w.tl,b=w.tr,B=w.bl,k=w.br,C=w.tex,F=w.pixelOffsetTL,E=w.pixelOffsetBR,I=w.minFontScaleX,U=w.minFontScaleY,S=w.glyphOffset,Q=w.isSDF,T=w.sectionIndex,M=p.vertexLength,D=S[1];$u(d,A.x,A.y,x.x,D+x.y,C.x,C.y,r,Q,F.x,F.y,I,U),$u(d,A.x,A.y,b.x,D+b.y,C.x+C.w,C.y,r,Q,E.x,F.y,I,U),$u(d,A.x,A.y,B.x,D+B.y,C.x,C.y+C.h,r,Q,F.x,E.y,I,U),$u(d,A.x,A.y,k.x,D+k.y,C.x+C.w,C.y+C.h,r,Q,E.x,E.y,I,U),Wu(e.dynamicLayoutVertexArray,A,m),f.emplaceBack(M,M+1,M+2),f.emplaceBack(M+1,M+2,M+3),p.vertexLength+=4,p.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(S[0]),_!==n.length-1&&T===n[_+1].sectionIndex||e.programConfigurations.populatePaintArrays(d.length,o,o.index,{},h,y&&y[T])}e.placedSymbolArray.emplaceBack(A.x,A.y,v,this.glyphOffsetArray.length-v,g,u,l,A.segment,r?r[0]:0,r?r[1]:0,i[0],i[1],s,0,!1,0,c)}},{key:"_addCollisionDebugVertex",value:function(t,e,n,r,i,a){return e.emplaceBack(0,0),t.emplaceBack(n.x,n.y,r,i,Math.round(a.x),Math.round(a.y))}},{key:"addCollisionDebugVertices",value:function(t,e,n,r,i,o,s){var A=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),u=A.vertexLength,l=i.layoutVertexArray,c=i.collisionVertexArray,h=s.anchorX,f=s.anchorY;this._addCollisionDebugVertex(l,c,o,h,f,new a(t,e)),this._addCollisionDebugVertex(l,c,o,h,f,new a(n,e)),this._addCollisionDebugVertex(l,c,o,h,f,new a(n,r)),this._addCollisionDebugVertex(l,c,o,h,f,new a(t,r)),A.vertexLength+=4;var d=i.indexArray;d.emplaceBack(u,u+1),d.emplaceBack(u+1,u+2),d.emplaceBack(u+2,u+3),d.emplaceBack(u+3,u),A.primitiveLength+=4}},{key:"addDebugCollisionBoxes",value:function(t,e,n,r){for(var i=t;i<e;i++){var a=this.collisionBoxArray.get(i);this.addCollisionDebugVertices(a.x1,a.y1,a.x2,a.y2,r?this.textCollisionBox:this.iconCollisionBox,a.anchorPoint,n)}}},{key:"generateCollisionDebugBuffers",value:function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Xu(Pa,zA.members,za),this.iconCollisionBox=new Xu(Pa,zA.members,za);for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}}},{key:"_deserializeCollisionBoxesForSymbol",value:function(t,e,n,r,i,a,o,s,A){for(var u={},l=e;l<n;l++){var c=t.get(l);u.textBox={x1:c.x1,y1:c.y1,x2:c.x2,y2:c.y2,anchorPointX:c.anchorPointX,anchorPointY:c.anchorPointY},u.textFeatureIndex=c.featureIndex;break}for(var h=r;h<i;h++){var f=t.get(h);u.verticalTextBox={x1:f.x1,y1:f.y1,x2:f.x2,y2:f.y2,anchorPointX:f.anchorPointX,anchorPointY:f.anchorPointY},u.verticalTextFeatureIndex=f.featureIndex;break}for(var d=a;d<o;d++){var p=t.get(d);u.iconBox={x1:p.x1,y1:p.y1,x2:p.x2,y2:p.y2,anchorPointX:p.anchorPointX,anchorPointY:p.anchorPointY},u.iconFeatureIndex=p.featureIndex;break}for(var v=s;v<A;v++){var g=t.get(v);u.verticalIconBox={x1:g.x1,y1:g.y1,x2:g.x2,y2:g.y2,anchorPointX:g.anchorPointX,anchorPointY:g.anchorPointY},u.verticalIconFeatureIndex=g.featureIndex;break}return u}},{key:"deserializeCollisionBoxes",value:function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var n=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}},{key:"hasTextData",value:function(){return this.text.segments.get().length>0}},{key:"hasIconData",value:function(){return this.icon.segments.get().length>0}},{key:"hasDebugData",value:function(){return this.textCollisionBox&&this.iconCollisionBox}},{key:"hasTextCollisionBoxData",value:function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}},{key:"hasIconCollisionBoxData",value:function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}},{key:"addIndicesForPlacedSymbol",value:function(t,e){for(var n=t.placedSymbolArray.get(e),r=n.vertexStartIndex+4*n.numGlyphs,i=n.vertexStartIndex;i<r;i+=4)t.indexArray.emplaceBack(i,i+1,i+2),t.indexArray.emplaceBack(i+1,i+2,i+3)}},{key:"getSortedSymbolIndexes",value:function(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var e=Math.sin(t),n=Math.cos(t),r=[],i=[],a=[],o=0;o<this.symbolInstances.length;++o){a.push(o);var s=this.symbolInstances.get(o);r.push(0|Math.round(e*s.anchorX+n*s.anchorY)),i.push(s.featureIndex)}return a.sort((function(t,e){return r[t]-r[e]||i[e]-i[t]})),a}},{key:"addToSortKeyRanges",value:function(t,e){var n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===e?n.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})}},{key:"sortFeatures",value:function(t){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];var n,r=pO(this.symbolInstanceIndexes);try{for(r.s();!(n=r.n()).done;){var i=n.value,a=this.symbolInstances.get(i);this.featureSortOrder.push(a.featureIndex),[a.rightJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.leftJustifiedTextSymbolIndex].forEach((function(t,n,r){t>=0&&r.indexOf(t)===n&&e.addIndicesForPlacedSymbol(e.text,t)})),a.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,a.verticalPlacedTextSymbolIndex),a.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,a.placedIconSymbolIndex),a.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,a.verticalPlacedIconSymbolIndex)}}catch(t){r.e(t)}finally{r.f()}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}])}();Lr("SymbolBucket",tl,{omit:["layers","collisionBoxArray","features","compareText"]}),tl.MAX_GLYPHS=65535,tl.addDynamicAttributes=Wu;var el={get paint(){return Ju=Ju||new Oi({"icon-opacity":new Ii(Z.paint_symbol["icon-opacity"]),"icon-color":new Ii(Z.paint_symbol["icon-color"]),"icon-halo-color":new Ii(Z.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ii(Z.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ii(Z.paint_symbol["icon-halo-blur"]),"icon-translate":new Ei(Z.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ei(Z.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ii(Z.paint_symbol["text-opacity"]),"text-color":new Ii(Z.paint_symbol["text-color"],{runtimeType:pt,getOverride:function(t){return t.textColor},hasOverride:function(t){return!!t.textColor}}),"text-halo-color":new Ii(Z.paint_symbol["text-halo-color"]),"text-halo-width":new Ii(Z.paint_symbol["text-halo-width"]),"text-halo-blur":new Ii(Z.paint_symbol["text-halo-blur"]),"text-translate":new Ei(Z.paint_symbol["text-translate"]),"text-translate-anchor":new Ei(Z.paint_symbol["text-translate-anchor"])})},get layout(){return Yu=Yu||new Oi({"symbol-placement":new Ei(Z.layout_symbol["symbol-placement"]),"symbol-spacing":new Ei(Z.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ei(Z.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ii(Z.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ei(Z.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ei(Z.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Ei(Z.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Ei(Z.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ei(Z.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ei(Z.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ii(Z.layout_symbol["icon-size"]),"icon-text-fit":new Ei(Z.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ei(Z.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ii(Z.layout_symbol["icon-image"]),"icon-rotate":new Ii(Z.layout_symbol["icon-rotate"]),"icon-padding":new Ii(Z.layout_symbol["icon-padding"]),"icon-keep-upright":new Ei(Z.layout_symbol["icon-keep-upright"]),"icon-offset":new Ii(Z.layout_symbol["icon-offset"]),"icon-anchor":new Ii(Z.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ei(Z.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ei(Z.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ei(Z.layout_symbol["text-rotation-alignment"]),"text-field":new Ii(Z.layout_symbol["text-field"]),"text-font":new Ii(Z.layout_symbol["text-font"]),"text-size":new Ii(Z.layout_symbol["text-size"]),"text-max-width":new Ii(Z.layout_symbol["text-max-width"]),"text-line-height":new Ei(Z.layout_symbol["text-line-height"]),"text-letter-spacing":new Ii(Z.layout_symbol["text-letter-spacing"]),"text-justify":new Ii(Z.layout_symbol["text-justify"]),"text-radial-offset":new Ii(Z.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ei(Z.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Ii(Z.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Ii(Z.layout_symbol["text-anchor"]),"text-max-angle":new Ei(Z.layout_symbol["text-max-angle"]),"text-writing-mode":new Ei(Z.layout_symbol["text-writing-mode"]),"text-rotate":new Ii(Z.layout_symbol["text-rotate"]),"text-padding":new Ei(Z.layout_symbol["text-padding"]),"text-keep-upright":new Ei(Z.layout_symbol["text-keep-upright"]),"text-transform":new Ii(Z.layout_symbol["text-transform"]),"text-offset":new Ii(Z.layout_symbol["text-offset"]),"text-allow-overlap":new Ei(Z.layout_symbol["text-allow-overlap"]),"text-overlap":new Ei(Z.layout_symbol["text-overlap"]),"text-ignore-placement":new Ei(Z.layout_symbol["text-ignore-placement"]),"text-optional":new Ei(Z.layout_symbol["text-optional"])})}},nl=function(){function t(e){if(oi(this,t),void 0===e.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=e.property.overrides?e.property.overrides.runtimeType:ct,this.defaultValue=e}return ai(t,[{key:"evaluate",value:function(t){if(t.formattedSection){var e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}},{key:"eachChild",value:function(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return null}}])}();Lr("FormatSectionOverride",nl,{omit:["defaultValue"]});var rl,il,al=function(t){function e(t){return oi(this,e),gO(this,e,[t,el])}return ci(e,t),ai(e,[{key:"recalculate",value:function(t,n){if(Li(ui(e.prototype),"recalculate",this).call(this,t,n),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var r=this.layout.get("text-writing-mode");if(r){var i,a=[],o=pO(r);try{for(o.s();!(i=o.n()).done;){var s=i.value;a.indexOf(s)<0&&a.push(s)}}catch(t){o.e(t)}finally{o.f()}this.layout._values["text-writing-mode"]=a}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}},{key:"getValueAndResolveTokens",value:function(t,e,n,r){var i=this.layout.get(t).evaluate(e,{},n,r),a=this._unevaluatedLayout._values[t];return a.isDataDriven()||Ln(a.value)||!i?i:function(t,e){return e.replace(/{([^{}]+)}/g,(function(e,n){return t&&n in t?String(t[n]):""}))}(e.properties,i)}},{key:"createBucket",value:function(t){return new tl(t)}},{key:"queryRadius",value:function(){return 0}},{key:"queryIntersectsFeature",value:function(){throw new Error("Should take a different path in FeatureIndex")}},{key:"_setPaintOverrides",value:function(){var t,n=pO(el.paint.overridableProperties);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e.hasPaintOverride(this.layout,r)){var i=this.paint.get(r),a=new nl(i),o=new Dn(a,i.property.specification),s=null;s="constant"===i.value.kind||"source"===i.value.kind?new On("source",o):new Rn("composite",o,i.value.zoomStops),this.paint._values[r]=new Ci(i.property,s,i.parameters)}}}catch(t){n.e(t)}finally{n.f()}}},{key:"_handleOverridablePaintPropertyUpdate",value:function(t,n,r){return!(!this.layout||n.isDataDriven()||r.isDataDriven())&&e.hasPaintOverride(this.layout,t)}}],[{key:"hasPaintOverride",value:function(t,e){var n=t.get("text-field"),r=el.paint.properties[e],i=!1,a=function(t){var e,n=pO(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;if(r.overrides&&r.overrides.hasOverride(a))return void(i=!0)}}catch(t){n.e(t)}finally{n.f()}};if("constant"===n.value.kind&&n.value.value instanceof Jt)a(n.value.value.sections);else if("source"===n.value.kind){var o=function t(e){i||(e instanceof Ae&&oe(e.value)===yt?a(e.value.sections):e instanceof fn?a(e.sections):e.eachChild(t))},s=n.value;s._styleExpression&&o(s._styleExpression.expression)}return i}}])}(zi),ol={get paint(){return rl=rl||new Oi({"background-color":new Ei(Z.paint_background["background-color"]),"background-pattern":new Si(Z.paint_background["background-pattern"]),"background-opacity":new Ei(Z.paint_background["background-opacity"])})}},sl=function(t){function e(t){return oi(this,e),gO(this,e,[t,ol])}return ci(e,t),ai(e)}(zi),Al={get paint(){return il=il||new Oi({"raster-opacity":new Ei(Z.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ei(Z.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ei(Z.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ei(Z.paint_raster["raster-brightness-max"]),"raster-saturation":new Ei(Z.paint_raster["raster-saturation"]),"raster-contrast":new Ei(Z.paint_raster["raster-contrast"]),"raster-resampling":new Ei(Z.paint_raster["raster-resampling"]),"raster-fade-duration":new Ei(Z.paint_raster["raster-fade-duration"])})}},ul=function(t){function e(t){return oi(this,e),gO(this,e,[t,Al])}return ci(e,t),ai(e)}(zi),ll=function(t){function e(t){var n;return oi(this,e),(n=gO(this,e,[t,{}])).onAdd=function(t){n.implementation.onAdd&&n.implementation.onAdd(t,t.painter.context.gl)},n.onRemove=function(t){n.implementation.onRemove&&n.implementation.onRemove(t,t.painter.context.gl)},n.implementation=t,n}return ci(e,t),ai(e,[{key:"is3D",value:function(){return"3d"===this.implementation.renderingMode}},{key:"hasOffscreenPass",value:function(){return void 0!==this.implementation.prerender}},{key:"recalculate",value:function(){}},{key:"updateTransitions",value:function(){}},{key:"hasTransition",value:function(){return!1}},{key:"serialize",value:function(){throw new Error("Custom layers cannot be serialized")}}])}(zi),cl=function(){function t(e){var n=this;oi(this,t),this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){n._triggered=!1,n._callback()})}return ai(t,[{key:"trigger",value:function(){var t=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){t._triggered=!1,t._callback()}),0))}},{key:"remove",value:function(){delete this._channel,this._callback=function(){}}}])}(),hl=6371008.8,fl=function(){function t(e,n){if(oi(this,t),isNaN(e)||isNaN(n))throw new Error("Invalid LngLat object: (".concat(e,", ").concat(n,")"));if(this.lng=+e,this.lat=+n,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}return ai(t,[{key:"wrap",value:function(){return new t(v(this.lng,-180,180),this.lat)}},{key:"toArray",value:function(){return[this.lng,this.lat]}},{key:"toString",value:function(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}},{key:"distanceTo",value:function(t){var e=Math.PI/180,n=this.lat*e,r=t.lat*e,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((t.lng-this.lng)*e);return hl*Math.acos(Math.min(i,1))}}],[{key:"convert",value:function(e){if(e instanceof t)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new t(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==ni(e)&&null!==e)return new t(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}])}(),dl=2*Math.PI*hl;function pl(t){return dl*Math.cos(t*Math.PI/180)}function vl(t){return(180+t)/360}function gl(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function ml(t,e){return t/pl(e)}function yl(t){return 360*t-180}function _l(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}var wl=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;oi(this,t),this.x=+e,this.y=+n,this.z=+r}return ai(t,[{key:"toLngLat",value:function(){return new fl(yl(this.x),_l(this.y))}},{key:"toAltitude",value:function(){return this.z*pl(_l(this.y))}},{key:"meterInMercatorCoordinateUnits",value:function(){return 1/dl*(t=_l(this.y),1/Math.cos(t*Math.PI/180));var t}}],[{key:"fromLngLat",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=fl.convert(e);return new t(vl(r.lng),gl(r.lat),ml(n,r.lat))}}])}();function xl(t,e,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}var bl=function(){function t(e,n,r){if(oi(this,t),e<0||e>25||r<0||r>=Math.pow(2,e)||n<0||n>=Math.pow(2,e))throw new Error("x=".concat(n,", y=").concat(r,", z=").concat(e," outside of bounds. 0<=x<").concat(Math.pow(2,e),", 0<=y<").concat(Math.pow(2,e)," 0<=z<=25 "));this.z=e,this.x=n,this.y=r,this.key=Cl(0,e,e,n,r)}return ai(t,[{key:"equals",value:function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}},{key:"url",value:function(t,e,n){var r,i,a,o,s,A=(i=this.y,a=this.z,o=xl(256*(r=this.x),256*(i=Math.pow(2,a)-i-1),a),s=xl(256*(r+1),256*(i+1),a),o[0]+","+o[1]+","+s[0]+","+s[1]),u=function(t,e,n){for(var r,i="",a=t;a>0;a--)i+=(e&(r=1<<a-1)?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===n?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,e>1?"@2x":"").replace(/{quadkey}/g,u).replace(/{bbox-epsg-3857}/g,A)}},{key:"isChildOf",value:function(t){var e=this.z-t.z;return e>0&&t.x===this.x>>e&&t.y===this.y>>e}},{key:"getTilePoint",value:function(t){var e=Math.pow(2,this.z);return new a((t.x*e-this.x)*mo,(t.y*e-this.y)*mo)}},{key:"toString",value:function(){return"".concat(this.z,"/").concat(this.x,"/").concat(this.y)}}])}(),Bl=ai((function t(e,n){oi(this,t),this.wrap=e,this.canonical=n,this.key=Cl(e,n.z,n.z,n.x,n.y)})),kl=function(){function t(e,n,r,i,a){if(oi(this,t),e<r)throw new Error("overscaledZ should be >= z; overscaledZ = ".concat(e,"; z = ").concat(r));this.overscaledZ=e,this.wrap=n,this.canonical=new bl(r,+i,+a),this.key=Cl(n,e,r,i,a)}return ai(t,[{key:"clone",value:function(){return new t(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}},{key:"equals",value:function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}},{key:"scaledTo",value:function(e){if(e>this.overscaledZ)throw new Error("targetZ > this.overscaledZ; targetZ = ".concat(e,"; overscaledZ = ").concat(this.overscaledZ));var n=this.canonical.z-e;return e>this.canonical.z?new t(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new t(e,this.wrap,e,this.canonical.x>>n,this.canonical.y>>n)}},{key:"calculateScaledKey",value:function(t,e){if(t>this.overscaledZ)throw new Error("targetZ > this.overscaledZ; targetZ = ".concat(t,"; overscaledZ = ").concat(this.overscaledZ));var n=this.canonical.z-t;return t>this.canonical.z?Cl(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y):Cl(this.wrap*+e,t,t,this.canonical.x>>n,this.canonical.y>>n)}},{key:"isChildOf",value:function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e}},{key:"children",value:function(e){if(this.overscaledZ>=e)return[new t(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var n=this.canonical.z+1,r=2*this.canonical.x,i=2*this.canonical.y;return[new t(n,this.wrap,n,r,i),new t(n,this.wrap,n,r+1,i),new t(n,this.wrap,n,r,i+1),new t(n,this.wrap,n,r+1,i+1)]}},{key:"isLessThan",value:function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}},{key:"wrapped",value:function(){return new t(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}},{key:"unwrapTo",value:function(e){return new t(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}},{key:"overscaleFactor",value:function(){return Math.pow(2,this.overscaledZ-this.canonical.z)}},{key:"toUnwrapped",value:function(){return new Bl(this.wrap,this.canonical)}},{key:"toString",value:function(){return"".concat(this.overscaledZ,"/").concat(this.canonical.x,"/").concat(this.canonical.y)}},{key:"getTilePoint",value:function(t){return this.canonical.getTilePoint(new wl(t.x-this.wrap,t.y))}}])}();function Cl(t,e,n,r,i){(t*=2)<0&&(t=-1*t-1);var a=1<<n;return(a*a*t+a*i+r).toString(36)+n.toString(36)+e.toString(36)}Lr("CanonicalTileID",bl),Lr("OverscaledTileID",kl,{omit:["posMatrix"]});var Fl=function(){function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;if(oi(this,t),this.uid=e,n.height!==n.width)throw new RangeError("DEM tiles must be square");if(!r||["mapbox","terrarium","custom"].includes(r)){this.stride=n.height;var A=this.dim=n.height-2;switch(this.data=new Uint32Array(n.data.buffer),r){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=i,this.greenFactor=a,this.blueFactor=o,this.baseShift=s;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(var u=0;u<A;u++)this.data[this._idx(-1,u)]=this.data[this._idx(0,u)],this.data[this._idx(A,u)]=this.data[this._idx(A-1,u)],this.data[this._idx(u,-1)]=this.data[this._idx(u,0)],this.data[this._idx(u,A)]=this.data[this._idx(u,A-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(A,-1)]=this.data[this._idx(A-1,0)],this.data[this._idx(-1,A)]=this.data[this._idx(0,A-1)],this.data[this._idx(A,A)]=this.data[this._idx(A-1,A-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(var l=0;l<A;l++)for(var c=0;c<A;c++){var h=this.get(l,c);h>this.max&&(this.max=h),h<this.min&&(this.min=h)}}else b('"'.concat(r,'" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".'))}return ai(t,[{key:"get",value:function(t,e){var n=new Uint8Array(this.data.buffer),r=4*this._idx(t,e);return this.unpack(n[r],n[r+1],n[r+2])}},{key:"getUnpackVector",value:function(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}},{key:"_idx",value:function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)}},{key:"unpack",value:function(t,e,n){return t*this.redFactor+e*this.greenFactor+n*this.blueFactor-this.baseShift}},{key:"getPixels",value:function(){return new is({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}},{key:"backfillBorder",value:function(t,e,n){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var r=e*this.dim,i=e*this.dim+this.dim,a=n*this.dim,o=n*this.dim+this.dim;switch(e){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:a=o-1;break;case 1:o=a+1}for(var s=-e*this.dim,A=-n*this.dim,u=a;u<o;u++)for(var l=r;l<i;l++)this.data[this._idx(l,u)]=t.data[this._idx(l+s,u+A)]}}])}();Lr("DEMData",Fl);var El=function(){function t(e){oi(this,t),this._stringToNumber={},this._numberToString=[];for(var n=0;n<e.length;n++){var r=e[n];this._stringToNumber[r]=n,this._numberToString[n]=r}}return ai(t,[{key:"encode",value:function(t){return this._stringToNumber[t]}},{key:"decode",value:function(t){if(t>=this._numberToString.length)throw new Error("Out of bounds. Index requested n=".concat(t," can't be >= this._numberToString.length ").concat(this._numberToString.length));return this._numberToString[t]}}])}(),Il=function(){function t(e,n,r,i,a){oi(this,t),this.type="Feature",this._vectorTileFeature=e,e._z=n,e._x=r,e._y=i,this.properties=e.properties,this.id=a}return ai(t,[{key:"geometry",get:function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},set:function(t){this._geometry=t}},{key:"toJSON",value:function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t}}])}(),Ul=function(){function t(e,n){oi(this,t),this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Mr(mo,16,0),this.grid3D=new Mr(mo,16,0),this.featureIndexArray=new Ca,this.promoteId=n}return ai(t,[{key:"insert",value:function(t,e,n,r,i,a){var o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i);for(var s=a?this.grid3D:this.grid,A=0;A<e.length;A++){for(var u=e[A],l=[1/0,1/0,-1/0,-1/0],c=0;c<u.length;c++){var h=u[c];l[0]=Math.min(l[0],h.x),l[1]=Math.min(l[1],h.y),l[2]=Math.max(l[2],h.x),l[3]=Math.max(l[3],h.y)}l[0]<mo&&l[1]<mo&&l[2]>=0&&l[3]>=0&&s.insert(o,l[0],l[1],l[2],l[3])}}},{key:"loadVTLayers",value:function(){return this.vtLayers||(this.vtLayers=new eA.VectorTile(new fu(this.rawTileData)).layers,this.sourceLayerCoder=new El(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}},{key:"query",value:function(t,e,n,r){var i=this;this.loadVTLayers();var o,s=t.params||{},A=mo/t.tileSize/t.scale,u=Gn(s.filter),l=t.queryGeometry,c=t.queryPadding*A,h=Ql(l),f=this.grid.query(h.minX-c,h.minY-c,h.maxX+c,h.maxY+c),d=Ql(t.cameraQueryGeometry),p=this.grid3D.query(d.minX-c,d.minY-c,d.maxX+c,d.maxY+c,(function(e,n,r,i){return function(t,e,n,r,i){var o,s=pO(t);try{for(s.s();!(o=s.n()).done;){var A=o.value;if(e<=A.x&&n<=A.y&&r>=A.x&&i>=A.y)return!0}}catch(t){s.e(t)}finally{s.f()}var u=[new a(e,n),new a(e,i),new a(r,i),new a(r,n)];if(t.length>2){var l,c=pO(u);try{for(c.s();!(l=c.n()).done;)if(Lo(t,l.value))return!0}catch(t){c.e(t)}finally{c.f()}}for(var h=0;h<t.length-1;h++)if(Po(t[h],t[h+1],u))return!0;return!1}(t.cameraQueryGeometry,e-c,n-c,r+c,i+c)})),v=pO(p);try{for(v.s();!(o=v.n()).done;){var g=o.value;f.push(g)}}catch(t){v.e(t)}finally{v.f()}f.sort(Tl);for(var m,y={},_=function(){var a=f[w];if(a===m)return 1;m=a;var o=i.featureIndexArray.get(a),c=null;i.loadMatchingFeature(y,o.bucketIndex,o.sourceLayerIndex,o.featureIndex,u,s.layers,s.availableImages,e,n,r,(function(e,n,r){return c||(c=wo(e)),n.queryIntersectsFeature(l,e,r,c,i.z,t.transform,A,t.pixelPosMatrix)}))},w=0;w<f.length;w++)_();return y}},{key:"loadMatchingFeature",value:function(t,e,n,r,i,a,o,s,A,u,l){var c=this.bucketLayerIDs[e];if(!a||function(t,e){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}(a,c)){var h=this.sourceLayerCoder.decode(n),f=this.vtLayers[h].feature(r);if(i.needGeometry){var d=xo(f,!0);if(!i.filter(new yi(this.tileID.overscaledZ),d,this.tileID.canonical))return}else if(!i.filter(new yi(this.tileID.overscaledZ),f))return;for(var p=this.getId(f,h),v=0;v<c.length;v++){var m=c[v];if(!(a&&a.indexOf(m)<0)){var y=s[m];if(y){var _={};p&&u&&(_=u.getState(y.sourceLayer||"_geojsonTileLayer",p));var w=g({},A[m]);w.paint=Sl(w.paint,y.paint,f,_,o),w.layout=Sl(w.layout,y.layout,f,_,o);var x=!l||l(f,y,_);if(x){var b=new Il(f,this.z,this.x,this.y,p);b.layer=w;var B=t[m];void 0===B&&(B=t[m]=[]),B.push({featureIndex:r,feature:b,intersectionZ:x})}}}}}}},{key:"lookupSymbolFeatures",value:function(t,e,n,r,i,a,o,s){var A={};this.loadVTLayers();var u,l=Gn(i),c=pO(t);try{for(c.s();!(u=c.n()).done;){var h=u.value;this.loadMatchingFeature(A,n,r,h,l,a,o,s,e)}}catch(t){c.e(t)}finally{c.f()}return A}},{key:"hasLayer",value:function(t){var e,n=pO(this.bucketLayerIDs);try{for(n.s();!(e=n.n()).done;){var r,i=pO(e.value);try{for(i.s();!(r=i.n()).done;)if(t===r.value)return!0}catch(t){i.e(t)}finally{i.f()}}}catch(t){n.e(t)}finally{n.f()}return!1}},{key:"getId",value:function(t,e){var n=t.id;return this.promoteId&&"boolean"==typeof(n=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]])&&(n=Number(n)),n}}])}();function Sl(t,e,n,r,i){return y(t,(function(t,a){var o=e instanceof Fi?e.get(a):null;return o&&o.evaluate?o.evaluate(n,r,i):o}))}function Ql(t){var e,n=1/0,r=1/0,i=-1/0,a=-1/0,o=pO(t);try{for(o.s();!(e=o.n()).done;){var s=e.value;n=Math.min(n,s.x),r=Math.min(r,s.y),i=Math.max(i,s.x),a=Math.max(a,s.y)}}catch(t){o.e(t)}finally{o.f()}return{minX:n,minY:r,maxX:i,maxY:a}}function Tl(t,e){return e-t}function Ml(t,e,n,r,i){for(var o=[],s=0;s<t.length;s++)for(var A=t[s],u=void 0,l=0;l<A.length-1;l++){var c=A[l],h=A[l+1];c.x<e&&h.x<e||(c.x<e?c=new a(e,c.y+(e-c.x)/(h.x-c.x)*(h.y-c.y))._round():h.x<e&&(h=new a(e,c.y+(e-c.x)/(h.x-c.x)*(h.y-c.y))._round()),c.y<n&&h.y<n||(c.y<n?c=new a(c.x+(n-c.y)/(h.y-c.y)*(h.x-c.x),n)._round():h.y<n&&(h=new a(c.x+(n-c.y)/(h.y-c.y)*(h.x-c.x),n)._round()),c.x>=r&&h.x>=r||(c.x>=r?c=new a(r,c.y+(r-c.x)/(h.x-c.x)*(h.y-c.y))._round():h.x>=r&&(h=new a(r,c.y+(r-c.x)/(h.x-c.x)*(h.y-c.y))._round()),c.y>=i&&h.y>=i||(c.y>=i?c=new a(c.x+(i-c.y)/(h.y-c.y)*(h.x-c.x),i)._round():h.y>=i&&(h=new a(c.x+(i-c.y)/(h.y-c.y)*(h.x-c.x),i)._round()),u&&c.equals(u[u.length-1])||(u=[c],o.push(u)),u.push(h)))))}return o}Lr("FeatureIndex",Ul,{omit:["rawTileData","sourceLayerCoder"]});var Dl=function(t){function e(t,n,r,i){var a;return oi(this,e),(a=gO(this,e,[t,n])).angle=r,void 0!==i&&(a.segment=i),a}return ci(e,t),ai(e,[{key:"clone",value:function(){return new e(this.x,this.y,this.angle,this.segment)}}])}(a);function Ll(t,e,n,r,i){if(void 0===e.segment||0===n)return!0;for(var a=e,o=e.segment+1,s=0;s>-n/2;){if(--o<0)return!1;s-=t[o].dist(a),a=t[o]}s+=t[o].dist(t[o+1]),o++;for(var A=[],u=0;s<n/2;){var l=t[o],c=t[o+1];if(!c)return!1;var h=t[o-1].angleTo(l)-l.angleTo(c);for(h=Math.abs((h+3*Math.PI)%(2*Math.PI)-Math.PI),A.push({distance:s,angleDelta:h}),u+=h;s-A[0].distance>r;)u-=A.shift().angleDelta;if(u>i)return!1;o++,s+=l.dist(c)}return!0}function Pl(t){for(var e=0,n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function Ol(t,e,n){return t?.6*e*n:0}function Rl(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function zl(t,e,n,r,i,a){for(var o=Ol(n,i,a),s=Rl(n,r)*a,A=0,u=Pl(t)/2,l=0;l<t.length-1;l++){var c=t[l],h=t[l+1],f=c.dist(h);if(A+f>u){var d=(u-A)/f,p=Ge.number(c.x,h.x,d),v=Ge.number(c.y,h.y,d),g=new Dl(p,v,h.angleTo(c),l);return g._round(),!o||Ll(t,g,s,o,e)?g:void 0}A+=f}}function Hl(t,e,n,r,i,a,o,s,A){var u=Ol(r,a,o),l=Rl(r,i),c=l*o,h=0===t[0].x||t[0].x===A||0===t[0].y||t[0].y===A;return e-c<e/4&&(e=c+e/4),Vl(t,h?e/2*s%e:(l/2+2*a)*o*s%e,e,u,n,c,h,!1,A)}function Vl(t,e,n,r,i,a,o,s,A){for(var u=a/2,l=Pl(t),c=0,h=e-n,f=[],d=0;d<t.length-1;d++){for(var p=t[d],v=t[d+1],g=p.dist(v),m=v.angleTo(p);h+n<c+g;){var y=((h+=n)-c)/g,_=Ge.number(p.x,v.x,y),w=Ge.number(p.y,v.y,y);if(_>=0&&_<A&&w>=0&&w<A&&h-u>=0&&h+u<=l){var x=new Dl(_,w,m,d);x._round(),r&&!Ll(t,x,a,r,i)||f.push(x)}}c+=g}return s||f.length||o||(f=Vl(t,c/2,n,r,i,a,o,!0,A)),f}Lr("Anchor",Dl);var Nl=wu;function Kl(t,e,n,r){var i=[],o=t.image,s=o.pixelRatio,A=o.paddedRect.w-2*Nl,u=o.paddedRect.h-2*Nl,l=t.right-t.left,c=t.bottom-t.top,h=o.stretchX||[[0,A]],f=o.stretchY||[[0,u]],d=function(t,e){return t+e[1]-e[0]},p=h.reduce(d,0),v=f.reduce(d,0),g=A-p,m=u-v,y=0,_=p,w=0,x=v,b=0,B=g,k=0,C=m;if(o.content&&r){var F=o.content;y=Gl(h,0,F[0]),w=Gl(f,0,F[1]),_=Gl(h,F[0],F[2]),x=Gl(f,F[1],F[3]),b=F[0]-y,k=F[1]-w,B=F[2]-F[0]-_,C=F[3]-F[1]-x}var E=function(r,i,A,u){var h=$l(r.stretch-y,_,l,t.left),f=Wl(r.fixed-b,B,r.stretch,p),d=$l(i.stretch-w,x,c,t.top),g=Wl(i.fixed-k,C,i.stretch,v),m=$l(A.stretch-y,_,l,t.left),F=Wl(A.fixed-b,B,A.stretch,p),E=$l(u.stretch-w,x,c,t.top),I=Wl(u.fixed-k,C,u.stretch,v),U=new a(h,d),S=new a(m,d),Q=new a(m,E),T=new a(h,E),M=new a(f/s,g/s),D=new a(F/s,I/s),L=e*Math.PI/180;if(L){var P=Math.sin(L),O=Math.cos(L),R=[O,-P,P,O];U._matMult(R),S._matMult(R),T._matMult(R),Q._matMult(R)}var z=r.stretch+r.fixed,H=i.stretch+i.fixed;return{tl:U,tr:S,bl:T,br:Q,tex:{x:o.paddedRect.x+Nl+z,y:o.paddedRect.y+Nl+H,w:A.stretch+A.fixed-z,h:u.stretch+u.fixed-H},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:M,pixelOffsetBR:D,minFontScaleX:B/s/l,minFontScaleY:C/s/c,isSDF:n}};if(r&&(o.stretchX||o.stretchY))for(var I=jl(h,g,p),U=jl(f,m,v),S=0;S<I.length-1;S++)for(var Q=I[S],T=I[S+1],M=0;M<U.length-1;M++)i.push(E(Q,U[M],T,U[M+1]));else i.push(E({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:A+1},{fixed:0,stretch:u+1}));return i}function Gl(t,e,n){var r,i=0,a=pO(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;i+=Math.max(e,Math.min(n,o[1]))-Math.max(e,Math.min(n,o[0]))}}catch(t){a.e(t)}finally{a.f()}return i}function jl(t,e,n){var r,i=[{fixed:-Nl,stretch:0}],a=pO(t);try{for(a.s();!(r=a.n()).done;){var o=gi(r.value,2),s=o[0],A=o[1],u=i[i.length-1];i.push({fixed:s-u.stretch,stretch:u.stretch}),i.push({fixed:s-u.stretch,stretch:u.stretch+(A-s)})}}catch(t){a.e(t)}finally{a.f()}return i.push({fixed:e+Nl,stretch:n}),i}function $l(t,e,n,r){return t/e*n+r}function Wl(t,e,n,r){return t-e*n/r}var Zl,ql=ai((function t(e,n,r,i,o,s,A,u,l,c){if(oi(this,t),this.boxStartIndex=e.length,l){var h=s.top,f=s.bottom,d=s.collisionPadding;d&&(h-=d[1],f+=d[3]);var p=f-h;p>0&&(p=Math.max(10,p),this.circleDiameter=p)}else{var v=s.top*A-u[0],g=s.bottom*A+u[2],m=s.left*A-u[3],y=s.right*A+u[1],_=s.collisionPadding;if(_&&(m-=_[0]*A,v-=_[1]*A,y+=_[2]*A,g+=_[3]*A),c){var w=new a(m,v),x=new a(y,v),b=new a(m,g),B=new a(y,g),k=c*Math.PI/180;w._rotate(k),x._rotate(k),b._rotate(k),B._rotate(k),m=Math.min(w.x,x.x,b.x,B.x),y=Math.max(w.x,x.x,b.x,B.x),v=Math.min(w.y,x.y,b.y,B.y),g=Math.max(w.y,x.y,b.y,B.y)}e.emplaceBack(n.x,n.y,m,v,y,g,r,i,o)}this.boxEndIndex=e.length})),Xl=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Yl;if(oi(this,t),this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)}return ai(t,[{key:"push",value:function(t){this.data.push(t),this.length++,this._up(this.length-1)}},{key:"pop",value:function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}}},{key:"peek",value:function(){return this.data[0]}},{key:"_up",value:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,a=e[i];if(n(r,a)>=0)break;e[t]=a,t=i}e[t]=r}},{key:"_down",value:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var a=1+(t<<1),o=e[a],s=a+1;if(s<this.length&&n(e[s],o)<0&&(a=s,o=e[s]),n(o,i)>=0)break;e[t]=o,t=a}e[t]=i}}])}();function Yl(t,e){return t<e?-1:t>e?1:0}function Jl(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=1/0,i=1/0,o=-1/0,s=-1/0,A=t[0],u=0;u<A.length;u++){var l=A[u];(!u||l.x<r)&&(r=l.x),(!u||l.y<i)&&(i=l.y),(!u||l.x>o)&&(o=l.x),(!u||l.y>s)&&(s=l.y)}var c=Math.min(o-r,s-i),h=c/2,f=new Xl([],tc);if(0===c)return new a(r,i);for(var d=r;d<o;d+=c)for(var p=i;p<s;p+=c)f.push(new ec(d+h,p+h,h,t));for(var v=function(t){for(var e=0,n=0,r=0,i=t[0],a=0,o=i.length,s=o-1;a<o;s=a++){var A=i[a],u=i[s],l=A.x*u.y-u.x*A.y;n+=(A.x+u.x)*l,r+=(A.y+u.y)*l,e+=3*l}return new ec(n/e,r/e,0,t)}(t),g=f.length;f.length;){var m=f.pop();(m.d>v.d||!v.d)&&(v=m,n&&console.log("found best %d after %d probes",Math.round(1e4*m.d)/1e4,g)),m.max-v.d<=e||(h=m.h/2,f.push(new ec(m.p.x-h,m.p.y-h,h,t)),f.push(new ec(m.p.x+h,m.p.y-h,h,t)),f.push(new ec(m.p.x-h,m.p.y+h,h,t)),f.push(new ec(m.p.x+h,m.p.y+h,h,t)),g+=4)}return n&&(console.log("num probes: ".concat(g)),console.log("best distance: ".concat(v.d))),v.p}function tc(t,e){return e.max-t.max}function ec(t,e,n,r){this.p=new a(t,e),this.h=n,this.d=function(t,e){for(var n=!1,r=1/0,i=0;i<e.length;i++)for(var a=e[i],o=0,s=a.length,A=s-1;o<s;A=o++){var u=a[o],l=a[A];u.y>t.y!=l.y>t.y&&t.x<(l.x-u.x)*(t.y-u.y)/(l.y-u.y)+u.x&&(n=!n),r=Math.min(r,Mo(t,u,l))}return(n?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}t.aq=void 0,(Zl=t.aq||(t.aq={}))[Zl.center=1]="center",Zl[Zl.left=2]="left",Zl[Zl.right=3]="right",Zl[Zl.top=4]="top",Zl[Zl.bottom=5]="bottom",Zl[Zl["top-left"]=6]="top-left",Zl[Zl["top-right"]=7]="top-right",Zl[Zl["bottom-left"]=8]="bottom-left",Zl[Zl["bottom-right"]=9]="bottom-right";var nc=7,rc=Number.POSITIVE_INFINITY;function ic(t,e){return e[1]!==rc?function(t,e,n){var r=0,i=0;switch(e=Math.abs(e),n=Math.abs(n),t){case"top-right":case"top-left":case"top":i=n-nc;break;case"bottom-right":case"bottom-left":case"bottom":i=-n+nc}switch(t){case"top-right":case"bottom-right":case"right":r=-e;break;case"top-left":case"bottom-left":case"left":r=e}return[r,i]}(t,e[0],e[1]):function(t,e){var n=0,r=0;e<0&&(e=0);var i=e/Math.SQRT2;switch(t){case"top-right":case"top-left":r=i-nc;break;case"bottom-right":case"bottom-left":r=-i+nc;break;case"bottom":r=-e+nc;break;case"top":r=e-nc}switch(t){case"top-right":case"bottom-right":n=-i;break;case"top-left":case"bottom-left":n=i;break;case"left":n=e;break;case"right":n=-e}return[n,r]}(t,e[0])}function ac(t,e,n){var r,i=t.layout,a=null===(r=i.get("text-variable-anchor-offset"))||void 0===r?void 0:r.evaluate(e,{},n);if(a){for(var o=a.values,s=[],A=0;A<o.length;A+=2){var u=s[A]=o[A],l=o[A+1].map((function(t){return t*KA}));u.startsWith("top")?l[1]-=nc:u.startsWith("bottom")&&(l[1]+=nc),s[A+1]=l}return new ne(s)}var c=i.get("text-variable-anchor");if(c){var h;h=void 0!==t._unevaluatedLayout.getValue("text-radial-offset")?[i.get("text-radial-offset").evaluate(e,{},n)*KA,rc]:i.get("text-offset").evaluate(e,{},n).map((function(t){return t*KA}));var f,d=[],p=pO(c);try{for(p.s();!(f=p.n()).done;){var v=f.value;d.push(v,ic(v,h))}}catch(t){p.e(t)}finally{p.f()}return new ne(d)}return null}function oc(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function sc(e,n,r,i,a,o,s,A,u,l,c){var h=o.textMaxSize.evaluate(n,{});void 0===h&&(h=s);var f,d=e.layers[0].layout,p=d.get("icon-offset").evaluate(n,{},c),v=uc(r.horizontal),g=s/24,m=e.tilePixelRatio*g,y=e.tilePixelRatio*h/24,_=e.tilePixelRatio*A,w=e.tilePixelRatio*d.get("symbol-spacing"),x=d.get("text-padding")*e.tilePixelRatio,B=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=t.get("icon-padding").evaluate(e,{},n),a=i&&i.values;return[a[0]*r,a[1]*r,a[2]*r,a[3]*r]}(d,n,c,e.tilePixelRatio),k=d.get("text-max-angle")/180*Math.PI,C="viewport"!==d.get("text-rotation-alignment")&&"point"!==d.get("symbol-placement"),F="map"===d.get("icon-rotation-alignment")&&"point"!==d.get("symbol-placement"),E=d.get("symbol-placement"),I=w/2,U=d.get("icon-text-fit");i&&"none"!==U&&(e.allowVerticalPlacement&&r.vertical&&(f=Ru(i,r.vertical,U,d.get("icon-text-fit-padding"),p,g)),v&&(i=Ru(i,v,U,d.get("icon-text-fit-padding"),p,g)));var S=function(A,h){h.x<0||h.x>=mo||h.y<0||h.y>=mo||function(e,n,r,i,a,o,s,A,u,l,c,h,f,d,p,v,g,m,y,_,w,x,B,k,C){var F,E,I,U,S=e.addToLineVertexArray(n,r),Q=0,T=0,M=0,D=0,L=-1,P=-1,O={},R=Xa("");if(e.allowVerticalPlacement&&i.vertical){var z=A.layout.get("text-rotate").evaluate(w,{},k)+90;I=new ql(u,n,l,c,h,i.vertical,f,d,p,z),s&&(U=new ql(u,n,l,c,h,s,g,m,p,z))}if(a){var H=A.layout.get("icon-rotate").evaluate(w,{}),V="none"!==A.layout.get("icon-text-fit"),N=Kl(a,H,B,V),K=s?Kl(s,H,B,V):void 0;E=new ql(u,n,l,c,h,a,g,m,!1,H),Q=4*N.length;var G=e.iconSizeData,j=null;"source"===G.kind?(j=[Hu*A.layout.get("icon-size").evaluate(w,{})])[0]>Vu&&b("".concat(e.layerIds[0],': Value for "icon-size" is >= ').concat(zu,'. Reduce your "icon-size".')):"composite"===G.kind&&((j=[Hu*x.compositeIconSizes[0].evaluate(w,{},k),Hu*x.compositeIconSizes[1].evaluate(w,{},k)])[0]>Vu||j[1]>Vu)&&b("".concat(e.layerIds[0],': Value for "icon-size" is >= ').concat(zu,'. Reduce your "icon-size".')),e.addSymbols(e.icon,N,j,_,y,w,t.ai.none,n,S.lineStartIndex,S.lineLength,-1,k),L=e.icon.placedSymbolArray.length-1,K&&(T=4*K.length,e.addSymbols(e.icon,K,j,_,y,w,t.ai.vertical,n,S.lineStartIndex,S.lineLength,-1,k),P=e.icon.placedSymbolArray.length-1)}for(var $=Object.keys(i.horizontal),W=0,Z=$;W<Z.length;W++){var q=Z[W],X=i.horizontal[q];if(!F){R=Xa(X.text);var Y=A.layout.get("text-rotate").evaluate(w,{},k);F=new ql(u,n,l,c,h,X,f,d,p,Y)}var J=1===X.positionedLines.length;if(M+=Ac(e,n,X,o,A,p,w,v,S,i.vertical?t.ai.horizontal:t.ai.horizontalOnly,J?$:[q],O,L,x,k),J)break}i.vertical&&(D+=Ac(e,n,i.vertical,o,A,p,w,v,S,t.ai.vertical,["vertical"],O,P,x,k));var tt=F?F.boxStartIndex:e.collisionBoxArray.length,et=F?F.boxEndIndex:e.collisionBoxArray.length,nt=I?I.boxStartIndex:e.collisionBoxArray.length,rt=I?I.boxEndIndex:e.collisionBoxArray.length,it=E?E.boxStartIndex:e.collisionBoxArray.length,at=E?E.boxEndIndex:e.collisionBoxArray.length,ot=U?U.boxStartIndex:e.collisionBoxArray.length,st=U?U.boxEndIndex:e.collisionBoxArray.length,At=-1,ut=function(t,e){return t&&t.circleDiameter?Math.max(t.circleDiameter,e):e};At=ut(F,At),At=ut(I,At),At=ut(E,At);var lt=(At=ut(U,At))>-1?1:0;lt&&(At*=C/KA),e.glyphOffsetArray.length>=tl.MAX_GLYPHS&&b("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==w.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,w.sortKey);var ct=ac(A,w,k),ht=function(e,n){var r=e.length,i=null==n?void 0:n.values;if((null==i?void 0:i.length)>0)for(var a=0;a<i.length;a+=2){var o=i[a+1];e.emplaceBack(t.aq[i[a]],o[0],o[1])}return[r,e.length]}(e.textAnchorOffsets,ct),ft=gi(ht,2),dt=ft[0],pt=ft[1];e.symbolInstances.emplaceBack(n.x,n.y,O.right>=0?O.right:-1,O.center>=0?O.center:-1,O.left>=0?O.left:-1,O.vertical||-1,L,P,R,tt,et,nt,rt,it,at,ot,st,l,M,D,Q,T,lt,0,f,At,dt,pt)}(e,h,A,r,i,a,f,e.layers[0],e.collisionBoxArray,n.index,n.sourceLayerIndex,e.index,m,[x,x,x,x],C,u,_,B,F,p,n,o,l,c,s)};if("line"===E){var Q,T=pO(Ml(n.geometry,0,0,mo,mo));try{for(T.s();!(Q=T.n()).done;){var M,D=Q.value,L=pO(Hl(D,w,k,r.vertical||v,i,24,y,e.overscaling,mo));try{for(L.s();!(M=L.n()).done;){var P=M.value;v&&lc(e,v.text,I,P)||S(D,P)}}catch(t){L.e(t)}finally{L.f()}}}catch(t){T.e(t)}finally{T.f()}}else if("line-center"===E){var O,R=pO(n.geometry);try{for(R.s();!(O=R.n()).done;){var z=O.value;if(z.length>1){var H=zl(z,k,r.vertical||v,i,24,y);H&&S(z,H)}}}catch(t){R.e(t)}finally{R.f()}}else if("Polygon"===n.type){var V,N=pO(Ns(n.geometry,0));try{for(N.s();!(V=N.n()).done;){var K=V.value,G=Jl(K,16);S(K[0],new Dl(G.x,G.y,0))}}catch(t){N.e(t)}finally{N.f()}}else if("LineString"===n.type){var j,$=pO(n.geometry);try{for($.s();!(j=$.n()).done;){var W=j.value;S(W,new Dl(W[0].x,W[0].y,0))}}catch(t){$.e(t)}finally{$.f()}}else if("Point"===n.type){var Z,q=pO(n.geometry);try{for(q.s();!(Z=q.n()).done;){var X,Y=pO(Z.value);try{for(Y.s();!(X=Y.n()).done;){var J=X.value;S([J],new Dl(J.x,J.y,0))}}catch(t){Y.e(t)}finally{Y.f()}}}catch(t){q.e(t)}finally{q.f()}}}function Ac(t,e,n,r,i,o,s,A,u,l,c,h,f,d,p){var v=function(t,e,n,r,i,o,s,A){var u,l=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,c=[],h=pO(e.positionedLines);try{for(h.s();!(u=h.n()).done;){var f,d=u.value,p=pO(d.positionedGlyphs);try{for(p.s();!(f=p.n()).done;){var v=f.value;if(v.rect){var g=v.rect||{},m=mu+1,y=!0,_=1,w=0,x=(i||A)&&v.vertical,b=v.metrics.advance*v.scale/2;if(A&&e.verticalizable&&(w=d.lineOffset/2-(v.imageName?-(KA-v.metrics.width*v.scale)/2:(v.scale-1)*KA)),v.imageName){var B=s[v.imageName];y=B.sdf,_=B.pixelRatio,m=wu/_}var k=i?[v.x+b,v.y]:[0,0],C=i?[0,0]:[v.x+b+n[0],v.y+n[1]-w],F=[0,0];x&&(F=C,C=[0,0]);var E=v.metrics.isDoubleResolution?2:1,I=(v.metrics.left-m)*v.scale-b+C[0],U=(-v.metrics.top-m)*v.scale+C[1],S=I+g.w/E*v.scale/_,Q=U+g.h/E*v.scale/_,T=new a(I,U),M=new a(S,U),D=new a(I,Q),L=new a(S,Q);if(x){var P=new a(-b,b-Bu),O=-Math.PI/2,R=KA/2-b,z=new a(5-Bu-R,-(v.imageName?R:0)),H=Qi(a,Di(F));T._rotateAround(O,P)._add(z)._add(H),M._rotateAround(O,P)._add(z)._add(H),D._rotateAround(O,P)._add(z)._add(H),L._rotateAround(O,P)._add(z)._add(H)}if(l){var V=Math.sin(l),N=Math.cos(l),K=[N,-V,V,N];T._matMult(K),M._matMult(K),D._matMult(K),L._matMult(K)}var G=new a(0,0),j=new a(0,0);c.push({tl:T,tr:M,bl:D,br:L,tex:g,writingMode:e.writingMode,glyphOffset:k,sectionIndex:v.sectionIndex,isSDF:y,pixelOffsetTL:G,pixelOffsetBR:j,minFontScaleX:0,minFontScaleY:0})}}}catch(t){p.e(t)}finally{p.f()}}}catch(t){h.e(t)}finally{h.f()}return c}(0,n,A,i,o,s,r,t.allowVerticalPlacement),g=t.textSizeData,m=null;"source"===g.kind?(m=[Hu*i.layout.get("text-size").evaluate(s,{})])[0]>Vu&&b("".concat(t.layerIds[0],': Value for "text-size" is >= ').concat(zu,'. Reduce your "text-size".')):"composite"===g.kind&&((m=[Hu*d.compositeTextSizes[0].evaluate(s,{},p),Hu*d.compositeTextSizes[1].evaluate(s,{},p)])[0]>Vu||m[1]>Vu)&&b("".concat(t.layerIds[0],': Value for "text-size" is >= ').concat(zu,'. Reduce your "text-size".')),t.addSymbols(t.text,v,m,A,o,s,l,e,u.lineStartIndex,u.lineLength,f,p);var y,_=pO(c);try{for(_.s();!(y=_.n()).done;)h[y.value]=t.text.placedSymbolArray.length-1}catch(t){_.e(t)}finally{_.f()}return 4*v.length}function uc(t){for(var e in t)return t[e];return null}function lc(t,e,n,r){var i=t.compareText;if(e in i){for(var a=i[e],o=a.length-1;o>=0;o--)if(r.dist(a[o])<n)return!0}else i[e]=[];return i[e].push(r),!1}var cc,hc=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],fc=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,i=arguments.length>3?arguments[3]:void 0;if(oi(this,t),isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+n,2),65535),this.ArrayType=r,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;var a=hc.indexOf(this.ArrayType),o=2*e*this.ArrayType.BYTES_PER_ELEMENT,s=e*this.IndexArrayType.BYTES_PER_ELEMENT,A=(8-s%8)%8;if(a<0)throw new Error("Unexpected typed array class: ".concat(r,"."));i&&i instanceof ArrayBuffer?(this.data=i,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+s+A,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+o+s+A),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+s+A,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+a]),new Uint16Array(this.data,2,1)[0]=n,new Uint32Array(this.data,4,1)[0]=e)}return ai(t,[{key:"add",value:function(t,e){var n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=t,this.coords[this._pos++]=e,n}},{key:"finish",value:function(){var t=this._pos>>1;if(t!==this.numItems)throw new Error("Added ".concat(t," items when expected ").concat(this.numItems,"."));return dc(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}},{key:"range",value:function(t,e,n,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var i=this.ids,a=this.coords,o=this.nodeSize,s=[0,i.length-1,0],A=[];s.length;){var u=s.pop()||0,l=s.pop()||0,c=s.pop()||0;if(l-c<=o)for(var h=c;h<=l;h++){var f=a[2*h],d=a[2*h+1];f>=t&&f<=n&&d>=e&&d<=r&&A.push(i[h])}else{var p=c+l>>1,v=a[2*p],g=a[2*p+1];v>=t&&v<=n&&g>=e&&g<=r&&A.push(i[p]),(0===u?t<=v:e<=g)&&(s.push(c),s.push(p-1),s.push(1-u)),(0===u?n>=v:r>=g)&&(s.push(p+1),s.push(l),s.push(1-u))}}return A}},{key:"within",value:function(t,e,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var r=this.ids,i=this.coords,a=this.nodeSize,o=[0,r.length-1,0],s=[],A=n*n;o.length;){var u=o.pop()||0,l=o.pop()||0,c=o.pop()||0;if(l-c<=a)for(var h=c;h<=l;h++)mc(i[2*h],i[2*h+1],t,e)<=A&&s.push(r[h]);else{var f=c+l>>1,d=i[2*f],p=i[2*f+1];mc(d,p,t,e)<=A&&s.push(r[f]),(0===u?t-n<=d:e-n<=p)&&(o.push(c),o.push(f-1),o.push(1-u)),(0===u?t+n>=d:e+n>=p)&&(o.push(f+1),o.push(l),o.push(1-u))}}return s}}],[{key:"from",value:function(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var n=gi(new Uint8Array(e,0,2),2),r=n[0],i=n[1];if(219!==r)throw new Error("Data does not appear to be in a KDBush format.");var a=i>>4;if(1!==a)throw new Error("Got v".concat(a," data when expected v1."));var o=hc[15&i];if(!o)throw new Error("Unrecognized array type.");var s=gi(new Uint16Array(e,2,1),1)[0];return new t(gi(new Uint32Array(e,4,1),1)[0],s,o,e)}}])}();function dc(t,e,n,r,i,a){if(!(i-r<=n)){var o=r+i>>1;pc(t,e,o,r,i,a),dc(t,e,n,r,o-1,1-a),dc(t,e,n,o+1,i,1-a)}}function pc(t,e,n,r,i,a){for(;i>r;){if(i-r>600){var o=i-r+1,s=n-r+1,A=Math.log(o),u=.5*Math.exp(2*A/3),l=.5*Math.sqrt(A*u*(o-u)/o)*(s-o/2<0?-1:1);pc(t,e,n,Math.max(r,Math.floor(n-s*u/o+l)),Math.min(i,Math.floor(n+(o-s)*u/o+l)),a)}var c=e[2*n+a],h=r,f=i;for(vc(t,e,r,n),e[2*i+a]>c&&vc(t,e,r,i);h<f;){for(vc(t,e,h,f),h++,f--;e[2*h+a]<c;)h++;for(;e[2*f+a]>c;)f--}e[2*r+a]===c?vc(t,e,r,f):vc(t,e,++f,i),f<=n&&(r=f+1),n<=f&&(i=f-1)}}function vc(t,e,n,r){gc(t,n,r),gc(e,2*n,2*r),gc(e,2*n+1,2*r+1)}function gc(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function mc(t,e,n,r){var i=t-n,a=e-r;return i*i+a*a}t.bh=void 0,(cc=t.bh||(t.bh={})).create="create",cc.load="load",cc.fullLoad="fullLoad";var yc=null,_c=[],wc=1e3/60,xc="loadTime",bc="fullLoadTime",Bc={mark:function(t){performance.mark(t)},frame:function(t){var e=t;null!=yc&&_c.push(e-yc),yc=e},clearMetrics:function(){for(var e in yc=null,_c=[],performance.clearMeasures(xc),performance.clearMeasures(bc),t.bh)performance.clearMarks(t.bh[e])},getPerformanceMetrics:function(){performance.measure(xc,t.bh.create,t.bh.load),performance.measure(bc,t.bh.create,t.bh.fullLoad);var e=performance.getEntriesByName(xc)[0].duration,n=performance.getEntriesByName(bc)[0].duration,r=_c.length,i=1/(_c.reduce((function(t,e){return t+e}),0)/r/1e3),a=_c.filter((function(t){return t>wc})).reduce((function(t,e){return t+(e-wc)/wc}),0);return{loadTime:e,fullLoadTime:n,fps:i,percentDroppedFrames:a/(r+a)*100,totalFrames:r}}};t.$=function(t,e,n){var r,i,a,o,s,A,u,l,c,h,f,d,p=n[0],v=n[1],g=n[2];return e===t?(t[12]=e[0]*p+e[4]*v+e[8]*g+e[12],t[13]=e[1]*p+e[5]*v+e[9]*g+e[13],t[14]=e[2]*p+e[6]*v+e[10]*g+e[14],t[15]=e[3]*p+e[7]*v+e[11]*g+e[15]):(i=e[1],a=e[2],o=e[3],s=e[4],A=e[5],u=e[6],l=e[7],c=e[8],h=e[9],f=e[10],d=e[11],t[0]=r=e[0],t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=A,t[6]=u,t[7]=l,t[8]=c,t[9]=h,t[10]=f,t[11]=d,t[12]=r*p+s*v+c*g+e[12],t[13]=i*p+A*v+h*g+e[13],t[14]=a*p+u*v+f*g+e[14],t[15]=o*p+l*v+d*g+e[15]),t},t.A=No,t.B=Ge,t.C=function(){function t(e,n,r){var i=this;oi(this,t),this.receive=function(t){var e=t.data,n=e.id;if(n&&(!e.targetMapId||i.mapId===e.targetMapId))if("<cancel>"===e.type){delete i.tasks[n];var r=i.cancelCallbacks[n];delete i.cancelCallbacks[n],r&&r()}else C()||e.mustQueue?(i.tasks[n]=e,i.taskQueue.push(n),i.invoker.trigger()):i.processTask(n,e)},this.process=function(){if(i.taskQueue.length){var t=i.taskQueue.shift(),e=i.tasks[t];delete i.tasks[t],i.taskQueue.length&&i.invoker.trigger(),e&&i.processTask(t,e)}},this.target=e,this.parent=n,this.mapId=r,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new cl(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=C()?e:window}return ai(t,[{key:"send",value:function(t,e,n,r){var i=this,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(this.callbacks[o]=n);var s=[],A={id:o,type:t,hasCallback:!!n,targetMapId:r,mustQueue:a,sourceMapId:this.mapId,data:Rr(e,s)};return this.target.postMessage(A,{transfer:s}),{cancel:function(){n&&delete i.callbacks[o],i.target.postMessage({id:o,type:"<cancel>",targetMapId:r,sourceMapId:i.mapId})}}}},{key:"processTask",value:function(t,e){var n=this;if("<response>"===e.type){var r=this.callbacks[t];delete this.callbacks[t],r&&(e.error?r(zr(e.error)):r(null,zr(e.data)))}else{var i=!1,a=[],o=e.hasCallback?function(e,r){i=!0,delete n.cancelCallbacks[t];var o={id:t,type:"<response>",sourceMapId:n.mapId,error:e?Rr(e):null,data:Rr(r,a)};n.target.postMessage(o,{transfer:a})}:function(t){i=!0},s=null,A=zr(e.data);if(this.parent[e.type])s=this.parent[e.type](e.sourceMapId,A,o);else if("getWorkerSource"in this.parent){var u=e.type.split(".");s=this.parent.getWorkerSource(e.sourceMapId,u[0],A.source)[u[1]](A,o)}else o(new Error("Could not find function ".concat(e.type)));!i&&s&&s.cancel&&(this.cancelCallbacks[t]=s.cancel)}}},{key:"remove",value:function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}}])}(),t.D=Ei,t.E=W,t.F=function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r];i in t&&(n[i]=t[i])}return n},t.G=vl,t.H=gl,t.I=xu,t.J=c,t.K=h,t.L=fl,t.M=M,t.N=mo,t.O=kl,t.P=a,t.Q=Ki,t.R=is,t.S=Va,t.T=xi,t.U=wl,t.V=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e)}(Wi),t.W=bl,t.X=function(t,e){var n=window.document.createElement("video");n.muted=!0,n.onloadstart=function(){e(null,n)};for(var r=0;r<t.length;r++){var i=window.document.createElement("source");N(t[r])||(n.crossOrigin="Anonymous"),i.src=t[r],n.appendChild(i)}return{cancel:function(){}}},t.Y=st,t.Z=function(){var t=new No(16);return No!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t._=e,t.a=E,t.a$=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e)}(fa),t.a0=function(t,e,n){var r=n[0],i=n[1],a=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.a1=Go,t.a2=function(){return m++},t.a3=va,t.a4=tl,t.a5=function(){mi.isLoading()||mi.isLoaded()||"deferred"!==hi()||di()},t.a6=Gn,t.a7=xo,t.a8=yi,t.a9=Il,t.aA=ii,t.aB=function(t){t=t.slice();for(var e=Object.create(null),n=0;n<t.length;n++)e[t[n].id]=t[n];for(var r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=X(t[r],e[t[r].ref]));return t},t.aC=function(t){if("custom"===t.type)return new ll(t);switch(t.type){case"background":return new sl(t);case"circle":return new Zo(t);case"fill":return new Xs(t);case"fill-extrusion":return new wA(t);case"heatmap":return new ss(t);case"hillshade":return new us(t);case"line":return new DA(t);case"raster":return new ul(t);case"symbol":return new al(t)}},t.aD=w,t.aE=function(t,e){if(!t)return[{command:J.setStyle,args:[e]}];var n=[];try{if(!Y(t.version,e.version))return[{command:J.setStyle,args:[e]}];Y(t.center,e.center)||n.push({command:J.setCenter,args:[e.center]}),Y(t.zoom,e.zoom)||n.push({command:J.setZoom,args:[e.zoom]}),Y(t.bearing,e.bearing)||n.push({command:J.setBearing,args:[e.bearing]}),Y(t.pitch,e.pitch)||n.push({command:J.setPitch,args:[e.pitch]}),Y(t.sprite,e.sprite)||n.push({command:J.setSprite,args:[e.sprite]}),Y(t.glyphs,e.glyphs)||n.push({command:J.setGlyphs,args:[e.glyphs]}),Y(t.transition,e.transition)||n.push({command:J.setTransition,args:[e.transition]}),Y(t.light,e.light)||n.push({command:J.setLight,args:[e.light]});var r={},i=[];!function(t,e,n,r){var i;for(i in e=e||{},t=t||{})Object.prototype.hasOwnProperty.call(t,i)&&(Object.prototype.hasOwnProperty.call(e,i)||et(i,n,r));for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(Object.prototype.hasOwnProperty.call(t,i)?Y(t[i],e[i])||("geojson"===t[i].type&&"geojson"===e[i].type&&rt(t,e,i)?n.push({command:J.setGeoJSONSourceData,args:[i,e[i].data]}):nt(i,e,n,r)):tt(i,e,n))}(t.sources,e.sources,i,r);var a=[];t.layers&&t.layers.forEach((function(t){r[t.source]?n.push({command:J.removeLayer,args:[t.id]}):a.push(t)})),n=n.concat(i),function(t,e,n){e=e||[];var r,i,a,o,s,A,u,l=(t=t||[]).map(at),c=e.map(at),h=t.reduce(ot,{}),f=e.reduce(ot,{}),d=l.slice(),p=Object.create(null);for(r=0,i=0;r<l.length;r++)a=l[r],Object.prototype.hasOwnProperty.call(f,a)?i++:(n.push({command:J.removeLayer,args:[a]}),d.splice(d.indexOf(a,i),1));for(r=0,i=0;r<c.length;r++)a=c[c.length-1-r],d[d.length-1-r]!==a&&(Object.prototype.hasOwnProperty.call(h,a)?(n.push({command:J.removeLayer,args:[a]}),d.splice(d.lastIndexOf(a,d.length-i),1)):i++,A=d[d.length-r],n.push({command:J.addLayer,args:[f[a],A]}),d.splice(d.length-r,0,a),p[a]=!0);for(r=0;r<c.length;r++)if(o=h[a=c[r]],s=f[a],!p[a]&&!Y(o,s))if(Y(o.source,s.source)&&Y(o["source-layer"],s["source-layer"])&&Y(o.type,s.type)){for(u in it(o.layout,s.layout,n,a,null,J.setLayoutProperty),it(o.paint,s.paint,n,a,null,J.setPaintProperty),Y(o.filter,s.filter)||n.push({command:J.setFilter,args:[a,s.filter]}),Y(o.minzoom,s.minzoom)&&Y(o.maxzoom,s.maxzoom)||n.push({command:J.setLayerZoomRange,args:[a,s.minzoom,s.maxzoom]}),o)Object.prototype.hasOwnProperty.call(o,u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?it(o[u],s[u],n,a,u.slice(6),J.setPaintProperty):Y(o[u],s[u])||n.push({command:J.setLayerProperty,args:[a,u,s[u]]}));for(u in s)Object.prototype.hasOwnProperty.call(s,u)&&!Object.prototype.hasOwnProperty.call(o,u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?it(o[u],s[u],n,a,u.slice(6),J.setPaintProperty):Y(o[u],s[u])||n.push({command:J.setLayerProperty,args:[a,u,s[u]]}))}else n.push({command:J.removeLayer,args:[a]}),A=d[d.lastIndexOf(a)+1],n.push({command:J.addLayer,args:[s,A]})}(a,e.layers,n)}catch(t){console.warn("Unable to compute style diff:",t),n=[{command:J.setStyle,args:[e]}]}return n},t.aF=function(t){var e=[],n=t.id;return void 0===n&&e.push({message:"layers.".concat(n,': missing required property "id"')}),void 0===t.render&&e.push({message:"layers.".concat(n,': missing required method "render"')}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers.".concat(n,': property "renderingMode" must be either "2d" or "3d"')}),e},t.aG=function t(e,n){if(Array.isArray(e)){if(!Array.isArray(n)||e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(!t(e[r],n[r]))return!1;return!0}if("object"==ni(e)&&null!==e&&null!==n){if("object"!=ni(n))return!1;if(Object.keys(e).length!==Object.keys(n).length)return!1;for(var i in e)if(!t(e[i],n[i]))return!1;return!0}return e===n},t.aH=y,t.aI=_,t.aJ=li,t.aK=function(t){return t({pluginStatus:ei,pluginURL:ri}),li.on("pluginStateChange",t),t},t.aL=function(t){function e(t,n){var r;return oi(this,e),(r=gO(this,e,[t,n])).current=0,r}return ci(e,t),ai(e,[{key:"set",value:function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))}}])}(no),t.aM=ro,t.aN=function(t){function e(t,n){var r;return oi(this,e),(r=gO(this,e,[t,n])).current=oo,r}return ci(e,t),ai(e,[{key:"set",value:function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}}}])}(no),t.aO=io,t.aP=function(t){function e(t,n){var r;return oi(this,e),(r=gO(this,e,[t,n])).current=[0,0,0],r}return ci(e,t),ai(e,[{key:"set",value:function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))}}])}(no),t.aQ=function(t){function e(t,n){var r;return oi(this,e),(r=gO(this,e,[t,n])).current=[0,0],r}return ci(e,t),ai(e,[{key:"set",value:function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))}}])}(no),t.aR=ao,t.aS=function(t,e,n,r,i,a,o){var s=1/(e-n),A=1/(r-i),u=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*A,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*A,t[14]=(o+a)*u,t[15]=1,t},t.aT=qt,t.aU=$o,t.aV=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e)}(ia),t.aW=HA,t.aX=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e)}(oa),t.aY=function(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},t.aZ=as,t.a_=Fa,t.aa=function(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(t,n,r,i){var a=r||i;return e[n]=!a||a.toLowerCase(),""})),e["max-age"]){var n=parseInt(e["max-age"],10);isNaN(n)?delete e["max-age"]:e["max-age"]=n}return e},t.ab=function(t,e){var n=[];for(var r in t)r in e||n.push(r);return n},t.ac=function(t){if(null==F){var e=t.navigator?t.navigator.userAgent:null;F=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return F},t.ad=p,t.ae=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[0],o=e[1],s=e[2],A=e[3],u=e[4],l=e[5],c=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i+u*r,t[1]=o*i+l*r,t[2]=s*i+c*r,t[3]=A*i+h*r,t[4]=u*i-a*r,t[5]=l*i-o*r,t[6]=c*i-s*r,t[7]=h*i-A*r,t},t.af=function(t){var e=new No(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.ag=Wo,t.ah=function(t,e){var n=0,r=0;if("constant"===t.kind)r=t.layoutSize;else if("source"!==t.kind){var i=t.interpolationType,a=t.minZoom,o=t.maxZoom,s=i?p(je.interpolationFactor(i,e,a,o),0,1):0;"camera"===t.kind?r=Ge.number(t.minSize,t.maxSize,s):n=s}return{uSizeT:n,uSize:r}},t.aj=function(t,e,n){var r=e.uSize,i=e.uSizeT,a=n.lowerSize,o=n.upperSize;return"source"===t.kind?a/Hu:"composite"===t.kind?Ge.number(a/Hu,o/Hu,i):r},t.ak=Wu,t.al=function(t,e,n,r){var i=e.y-t.y,o=e.x-t.x,s=r.y-n.y,A=r.x-n.x,u=s*o-A*i;if(0===u)return null;var l=(A*(t.y-n.y)-s*(t.x-n.x))/u;return new a(t.x+l*o,t.y+l*i)},t.am=Ml,t.an=Fo,t.ao=Ko,t.ap=KA,t.ar=Ku,t.as=function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],A=e[6],u=e[7],l=e[8],c=e[9],h=e[10],f=e[11],d=e[12],p=e[13],v=e[14],g=e[15],m=n*s-r*o,y=n*A-i*o,_=n*u-a*o,w=r*A-i*s,x=r*u-a*s,b=i*u-a*A,B=l*p-c*d,k=l*v-h*d,C=l*g-f*d,F=c*v-h*p,E=c*g-f*p,I=h*g-f*v,U=m*I-y*E+_*F+w*C-x*k+b*B;return U?(t[0]=(s*I-A*E+u*F)*(U=1/U),t[1]=(i*E-r*I-a*F)*U,t[2]=(p*b-v*x+g*w)*U,t[3]=(h*x-c*b-f*w)*U,t[4]=(A*C-o*I-u*k)*U,t[5]=(n*I-i*C+a*k)*U,t[6]=(v*_-d*b-g*y)*U,t[7]=(l*b-h*_+f*y)*U,t[8]=(o*E-s*C+u*B)*U,t[9]=(r*C-n*E-a*B)*U,t[10]=(d*x-p*_+g*m)*U,t[11]=(c*_-l*x-f*m)*U,t[12]=(s*k-o*F-A*B)*U,t[13]=(n*F-r*k+i*B)*U,t[14]=(p*y-d*w-v*m)*U,t[15]=(l*w-c*y+h*m)*U,t):null},t.at=oc,t.au=Lu,t.av=fc,t.aw=function(){var t={},e=Z.$version;for(var n in Z.$root){var r=Z.$root[n];if(r.required){var i=null;null!=(i="version"===n?e:"array"===r.type?[]:{})&&(t[n]=i)}}return t},t.ax=J,t.ay=Hr,t.az=O,t.b=function(t,e){var n=new Blob([new Uint8Array(t)],{type:"image/png"});createImageBitmap(n).then((function(t){e(null,t)})).catch((function(t){e(new Error("Could not load image because of ".concat(t.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")))}))},t.b0=Ra,t.b1=function(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],A=t[6],u=t[7],l=t[8],c=t[9],h=t[10],f=t[11],d=t[12],p=t[13],v=t[14],g=t[15],m=e[0],y=e[1],_=e[2],w=e[3],x=e[4],b=e[5],B=e[6],k=e[7],C=e[8],F=e[9],E=e[10],I=e[11],U=e[12],S=e[13],Q=e[14],T=e[15];return Math.abs(n-m)<=Vo*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(r-y)<=Vo*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(i-_)<=Vo*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(a-w)<=Vo*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(o-x)<=Vo*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(s-b)<=Vo*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(A-B)<=Vo*Math.max(1,Math.abs(A),Math.abs(B))&&Math.abs(u-k)<=Vo*Math.max(1,Math.abs(u),Math.abs(k))&&Math.abs(l-C)<=Vo*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(c-F)<=Vo*Math.max(1,Math.abs(c),Math.abs(F))&&Math.abs(h-E)<=Vo*Math.max(1,Math.abs(h),Math.abs(E))&&Math.abs(f-I)<=Vo*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(d-U)<=Vo*Math.max(1,Math.abs(d),Math.abs(U))&&Math.abs(p-S)<=Vo*Math.max(1,Math.abs(p),Math.abs(S))&&Math.abs(v-Q)<=Vo*Math.max(1,Math.abs(v),Math.abs(Q))&&Math.abs(g-T)<=Vo*Math.max(1,Math.abs(g),Math.abs(T))},t.b2=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.b3=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t},t.b4=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},t.b5=v,t.b6=Bl,t.b7=ml,t.b8=function(t,e,n,r,i){var a,o=1/Math.tan(e/2);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(t[10]=(i+r)*(a=1/(r-i)),t[14]=2*i*r*a):(t[10]=-1,t[14]=-2*r),t},t.b9=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[4],o=e[5],s=e[6],A=e[7],u=e[8],l=e[9],c=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*i+u*r,t[5]=o*i+l*r,t[6]=s*i+c*r,t[7]=A*i+h*r,t[8]=u*i-a*r,t[9]=l*i-o*r,t[10]=c*i-s*r,t[11]=h*i-A*r,t},t.bA=r,t.bB=GA,t.bC=Pn,t.bD=mi,t.ba=f,t.bb=d,t.bc=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.bd=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e)}($i),t.be=hl,t.bf=yl,t.bg=Bc,t.bi=P,t.bj=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ei===Xr||ei===Yr||ei===Jr)throw new Error("setRTLTextPlugin cannot be called multiple times.");ri=D.resolveURL(t),ei=Xr,ti=e,Ai(),n||di()},t.bk=hi,t.bl=function(t,e){for(var n={},r=0;r<t.length;r++){var i=e&&e[t[r].id]||tr(t[r]);e&&(e[t[r].id]=i);var a=n[i];a||(a=n[i]=[]),a.push(t[r])}var o=[];for(var s in n)o.push(n[s]);return o},t.bm=Lr,t.bn=El,t.bo=Ul,t.bp=bu,t.bq=function(e){e.bucket.createArrays(),e.bucket.tilePixelRatio=mo/(512*e.bucket.overscaling),e.bucket.compareText={},e.bucket.iconsNeedLinear=!1;var n=e.bucket.layers[0],r=n.layout,i=n._unevaluatedLayout._values,a={layoutIconSize:i["icon-size"].possiblyEvaluate(new yi(e.bucket.zoom+1),e.canonical),layoutTextSize:i["text-size"].possiblyEvaluate(new yi(e.bucket.zoom+1),e.canonical),textMaxSize:i["text-size"].possiblyEvaluate(new yi(18))};if("composite"===e.bucket.textSizeData.kind){var o=e.bucket.textSizeData,s=o.minZoom,A=o.maxZoom;a.compositeTextSizes=[i["text-size"].possiblyEvaluate(new yi(s),e.canonical),i["text-size"].possiblyEvaluate(new yi(A),e.canonical)]}if("composite"===e.bucket.iconSizeData.kind){var u=e.bucket.iconSizeData,l=u.minZoom,c=u.maxZoom;a.compositeIconSizes=[i["icon-size"].possiblyEvaluate(new yi(l),e.canonical),i["icon-size"].possiblyEvaluate(new yi(c),e.canonical)]}var h,f=r.get("text-line-height")*KA,d="viewport"!==r.get("text-rotation-alignment")&&"point"!==r.get("symbol-placement"),p=r.get("text-keep-upright"),v=r.get("text-size"),g=pO(e.bucket.features);try{var m=function(){var i,o=h.value,s=r.get("text-font").evaluate(o,{},e.canonical).join(","),A=v.evaluate(o,{},e.canonical),u=a.layoutTextSize.evaluate(o,{},e.canonical),l=a.layoutIconSize.evaluate(o,{},e.canonical),c={horizontal:{},vertical:void 0},g=o.text,m=[0,0];if(g){var y=g.toString(),_=r.get("text-letter-spacing").evaluate(o,{},e.canonical)*KA,w=Kr(y)?_:0,x=r.get("text-anchor").evaluate(o,{},e.canonical),B=ac(n,o,e.canonical);if(!B){var k=r.get("text-radial-offset").evaluate(o,{},e.canonical);m=k?ic(x,[k*KA,rc]):r.get("text-offset").evaluate(o,{},e.canonical).map((function(t){return t*KA}))}var C=d?"center":r.get("text-justify").evaluate(o,{},e.canonical),F=r.get("symbol-placement"),E="point"===F?r.get("text-max-width").evaluate(o,{},e.canonical)*KA:0,I=function(){e.bucket.allowVerticalPlacement&&Nr(y)&&(c.vertical=Fu(g,e.glyphMap,e.glyphPositions,e.imagePositions,s,E,f,x,"left",w,m,t.ai.vertical,!0,F,u,A))};if(!d&&B){var U=new Set;if("auto"===C)for(var S=0;S<B.values.length;S+=2)U.add(oc(B.values[S]));else U.add(C);var Q,T=!1,M=pO(U);try{for(M.s();!(Q=M.n()).done;){var D=Q.value;if(!c.horizontal[D])if(T)c.horizontal[D]=c.horizontal[0];else{var L=Fu(g,e.glyphMap,e.glyphPositions,e.imagePositions,s,E,f,"center",D,w,m,t.ai.horizontal,!1,F,u,A);L&&(c.horizontal[D]=L,T=1===L.positionedLines.length)}}}catch(t){M.e(t)}finally{M.f()}I()}else{"auto"===C&&(C=oc(x));var P=Fu(g,e.glyphMap,e.glyphPositions,e.imagePositions,s,E,f,x,C,w,m,t.ai.horizontal,!1,F,u,A);P&&(c.horizontal[C]=P),I(),Nr(y)&&d&&p&&(c.vertical=Fu(g,e.glyphMap,e.glyphPositions,e.imagePositions,s,E,f,x,C,w,m,t.ai.vertical,!1,F,u,A))}}var O=!1;if(o.icon&&o.icon.name){var R=e.imageMap[o.icon.name];R&&(i=Ou(e.imagePositions[o.icon.name],r.get("icon-offset").evaluate(o,{},e.canonical),r.get("icon-anchor").evaluate(o,{},e.canonical)),O=!!R.sdf,void 0===e.bucket.sdfIcons?e.bucket.sdfIcons=O:e.bucket.sdfIcons!==O&&b("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(R.pixelRatio!==e.bucket.pixelRatio||0!==r.get("icon-rotate").constantOr(1))&&(e.bucket.iconsNeedLinear=!0))}var z=uc(c.horizontal)||c.vertical;e.bucket.iconsInText=!!z&&z.iconsInText,(z||i)&&sc(e.bucket,o,c,i,e.imageMap,a,u,l,m,O,e.canonical)};for(g.s();!(h=g.n()).done;)m()}catch(t){g.e(t)}finally{g.f()}e.showCollisionBoxes&&e.bucket.generateCollisionDebugBuffers()},t.br=SA,t.bs=Zs,t.bt=gA,t.bu=function(){function t(e){oi(this,t),this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},performance.mark(this._marks.start)}return ai(t,[{key:"finish",value:function(){performance.mark(this._marks.end);var t=performance.getEntriesByName(this._marks.measure);return 0===t.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),t=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),t}}])}(),t.bv=fu,t.bw=eA,t.bx=function(t,n,r,i,a){return e(this,void 0,void 0,Qp.mark((function e(){return Qp.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h()){e.next=9;break}return e.prev=1,e.next=4,M(t,n,r,i,a);case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e.catch(1);case 9:return e.abrupt("return",function(t,e,n,r,i){var a=t.width,o=t.height;I&&U||(I=new OffscreenCanvas(a,o),U=I.getContext("2d",{willReadFrequently:!0})),I.width=a,I.height=o,U.drawImage(t,0,0,a,o);var s=U.getImageData(e,n,r,i);return U.clearRect(0,0,a,o),s.data}(t,n,r,i,a));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))},t.by=Fl,t.bz=n,t.c=L,t.d=function(t,e){var n=new Image;n.onload=function(){e(null,n),URL.revokeObjectURL(n.src),n.onload=null,window.requestAnimationFrame((function(){n.src=T}))},n.onerror=function(){return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var r=new Blob([new Uint8Array(t)],{type:"image/png"});n.src=t.byteLength?URL.createObjectURL(r):T},t.e=g,t.f=function(t,e){return H(g(t,{type:"json"}),e)},t.g=R,t.h=D,t.i=C,t.j=$,t.k=j,t.l=V,t.m=H,t.n=function(t){return new fu(t).readFields(pu,[])},t.o=function(t,e,n){if(!t.length)return n(null,[]);var r=t.length,i=new Array(t.length),a=null;t.forEach((function(t,o){e(t,(function(t,e){t&&(a=t),i[o]=e,0==--r&&n(a,i)}))}))},t.p=yu,t.q=rs,t.r=Oi,t.s=N,t.t=Ur,t.u=Vr,t.v=Z,t.w=b,t.x=Tr,t.y=Ir,t.z=function(t){var e=gi(t,3),n=e[0],r=e[1],i=e[2];return r+=90,r*=Math.PI/180,i*=Math.PI/180,{x:n*Math.cos(r)*Math.sin(i),y:n*Math.sin(r)*Math.sin(i),z:n*Math.cos(i)}}})),r(["./shared"],(function(t){var e=function(){function e(t){oi(this,e),this.keyCache={},t&&this.replace(t)}return ai(e,[{key:"replace",value:function(t){this._layerConfigs={},this._layers={},this.update(t,[])}},{key:"update",value:function(e,n){var r,i=this,a=pO(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;this._layerConfigs[o.id]=o;var s=this._layers[o.id]=t.aC(o);s._featureFilter=t.a6(s.filter),this.keyCache[o.id]&&delete this.keyCache[o.id]}}catch(t){a.e(t)}finally{a.f()}var A,u=pO(n);try{for(u.s();!(A=u.n()).done;){var l=A.value;delete this.keyCache[l],delete this._layerConfigs[l],delete this._layers[l]}}catch(t){u.e(t)}finally{u.f()}this.familiesBySource={};var c,h=pO(t.bl(Object.values(this._layerConfigs),this.keyCache));try{for(h.s();!(c=h.n()).done;){var f=c.value.map((function(t){return i._layers[t.id]})),d=f[0];if("none"!==d.visibility){var p=d.source||"",v=this.familiesBySource[p];v||(v=this.familiesBySource[p]={});var g=d.sourceLayer||"_geojsonTileLayer",m=v[g];m||(m=v[g]=[]),m.push(f)}}}catch(t){h.e(t)}finally{h.f()}}}])}(),n=ai((function e(n){oi(this,e);var r={},i=[];for(var a in n){var o=n[a],s=r[a]={};for(var A in o){var u=o[+A];if(u&&0!==u.bitmap.width&&0!==u.bitmap.height){var l={x:0,y:0,w:u.bitmap.width+2,h:u.bitmap.height+2};i.push(l),s[A]={rect:l,metrics:u.metrics}}}}var c=t.p(i),h=c.w,f=c.h,d=new t.q({width:h||1,height:f||1});for(var p in n){var v=n[p];for(var g in v){var m=v[+g];if(m&&0!==m.bitmap.width&&0!==m.bitmap.height){var y=r[p][g].rect;t.q.copy(m.bitmap,d,{x:0,y:0},{x:y.x+1,y:y.y+1},m.bitmap)}}}this.image=d,this.positions=r}));t.bm("GlyphAtlas",n);var r=function(){function e(n){oi(this,e),this.tileID=new t.O(n.tileID.overscaledZ,n.tileID.wrap,n.tileID.canonical.z,n.tileID.canonical.x,n.tileID.canonical.y),this.uid=n.uid,this.zoom=n.zoom,this.pixelRatio=n.pixelRatio,this.tileSize=n.tileSize,this.source=n.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=n.showCollisionBoxes,this.collectResourceTiming=!!n.collectResourceTiming,this.returnDependencies=!!n.returnDependencies,this.promoteId=n.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}return ai(e,[{key:"parse",value:function(e,r,a,o,s){var A=this;this.status="parsing",this.data=e,this.collisionBoxArray=new t.a3;var u=new t.bn(Object.keys(e.layers).sort()),l=new t.bo(this.tileID,this.promoteId);l.bucketLayerIDs=[];var c,h,f,d,p={},v={featureIndex:l,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:a},g=r.familiesBySource[this.source];for(var m in g){var y=e.layers[m];if(y){1===y.version&&t.w('Vector tile source "'.concat(this.source,'" layer "').concat(m,'" does not use vector tile spec v2 and therefore may have some rendering errors.'));for(var _=u.encode(m),w=[],x=0;x<y.length;x++){var b=y.feature(x),B=l.getId(b,m);w.push({feature:b,id:B,index:x,sourceLayerIndex:_})}var k,C=pO(g[m]);try{for(C.s();!(k=C.n()).done;){var F=k.value,E=F[0];E.source!==this.source&&t.w("layer.source = ".concat(E.source," does not equal this.source = ").concat(this.source)),E.minzoom&&this.zoom<Math.floor(E.minzoom)||E.maxzoom&&this.zoom>=E.maxzoom||"none"!==E.visibility&&(i(F,this.zoom,a),(p[E.id]=E.createBucket({index:l.bucketLayerIDs.length,layers:F,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:_,sourceID:this.source})).populate(w,v,this.tileID.canonical),l.bucketLayerIDs.push(F.map((function(t){return t.id}))))}}catch(t){C.e(t)}finally{C.f()}}}var I=t.aH(v.glyphDependencies,(function(t){return Object.keys(t).map(Number)}));this.inFlightDependencies.forEach((function(t){return null==t?void 0:t.cancel()})),this.inFlightDependencies=[];var U=++this.dependencySentinel;Object.keys(I).length?this.inFlightDependencies.push(o.send("getGlyphs",{uid:this.uid,stacks:I,source:this.source,tileID:this.tileID,type:"glyphs"},(function(t,e){U===A.dependencySentinel&&(c||(c=t,h=e,T.call(A)))}))):h={};var S=Object.keys(v.iconDependencies);S.length?this.inFlightDependencies.push(o.send("getImages",{icons:S,source:this.source,tileID:this.tileID,type:"icons"},(function(t,e){U===A.dependencySentinel&&(c||(c=t,f=e,T.call(A)))}))):f={};var Q=Object.keys(v.patternDependencies);function T(){if(c)return s(c);if(h&&f&&d){var e=new n(h),r=new t.bp(f,d);for(var o in p){var A=p[o];A instanceof t.a4?(i(A.layers,this.zoom,a),t.bq({bucket:A,glyphMap:h,glyphPositions:e.positions,imageMap:f,imagePositions:r.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):A.hasPattern&&(A instanceof t.br||A instanceof t.bs||A instanceof t.bt)&&(i(A.layers,this.zoom,a),A.addFeatures(v,this.tileID.canonical,r.patternPositions))}this.status="done",s(null,{buckets:Object.values(p).filter((function(t){return!t.isEmpty()})),featureIndex:l,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:r,glyphMap:this.returnDependencies?h:null,iconMap:this.returnDependencies?f:null,glyphPositions:this.returnDependencies?e.positions:null})}}Q.length?this.inFlightDependencies.push(o.send("getImages",{icons:Q,source:this.source,tileID:this.tileID,type:"patterns"},(function(t,e){U===A.dependencySentinel&&(c||(c=t,d=e,T.call(A)))}))):d={},T.call(this)}}])}();function i(e,n,r){var i,a=new t.a8(n),o=pO(e);try{for(o.s();!(i=o.n()).done;)i.value.recalculate(a,r)}catch(t){o.e(t)}finally{o.f()}}function a(e,n){var r=t.l(e.request,(function(r,i,a,o){if(r)n(r);else if(i)try{var s=new t.bw.VectorTile(new t.bv(i));n(null,{vectorTile:s,rawData:i,cacheControl:a,expires:o})}catch(t){var A=new Uint8Array(i),u="Unable to parse the tile at ".concat(e.request.url,", ");u+=31===A[0]&&139===A[1]?"please make sure the data is not gzipped and that you have configured the relevant header in the server":"got error: ".concat(t.messge),n(new Error(u))}}));return function(){r.cancel(),n()}}var o=function(){function e(t,n,r,i){oi(this,e),this.actor=t,this.layerIndex=n,this.availableImages=r,this.loadVectorData=i||a,this.fetching={},this.loading={},this.loaded={}}return ai(e,[{key:"loadTile",value:function(e,n){var i=this,a=e.uid;this.loading||(this.loading={});var o=!!(e&&e.request&&e.request.collectResourceTiming)&&new t.bu(e.request),s=this.loading[a]=new r(e);s.abort=this.loadVectorData(e,(function(e,r){if(delete i.loading[a],e||!r)return s.status="done",i.loaded[a]=s,n(e);var A=r.rawData,u={};r.expires&&(u.expires=r.expires),r.cacheControl&&(u.cacheControl=r.cacheControl);var l={};if(o){var c=o.finish();c&&(l.resourceTiming=JSON.parse(JSON.stringify(c)))}s.vectorTile=r.vectorTile,s.parse(r.vectorTile,i.layerIndex,i.availableImages,i.actor,(function(e,r){if(delete i.fetching[a],e||!r)return n(e);n(null,t.e({rawTileData:A.slice(0)},r,u,l))})),i.loaded=i.loaded||{},i.loaded[a]=s,i.fetching[a]={rawTileData:A,cacheControl:u,resourceTiming:l}}))}},{key:"reloadTile",value:function(e,n){var r=this,i=this.loaded,a=e.uid;if(i&&i[a]){var o=i[a];o.showCollisionBoxes=e.showCollisionBoxes,"parsing"===o.status?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,(function(e,i){if(e||!i)return n(e,i);var o;if(r.fetching[a]){var s=r.fetching[a],A=s.rawTileData,u=s.cacheControl,l=s.resourceTiming;delete r.fetching[a],o=t.e({rawTileData:A.slice(0)},i,u,l)}else o=i;n(null,o)})):"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,n):n())}}},{key:"abortTile",value:function(t,e){var n=this.loading,r=t.uid;n&&n[r]&&n[r].abort&&(n[r].abort(),delete n[r]),e()}},{key:"removeTile",value:function(t,e){var n=this.loaded,r=t.uid;n&&n[r]&&delete n[r],e()}}])}(),s=function(){function e(){oi(this,e),this.loaded={}}return ai(e,[{key:"loadTile",value:function(e,n){return t._(this,void 0,void 0,Qp.mark((function r(){var i,a,o,s,A,u,l,c,h,f,d;return Qp.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=e.uid,a=e.encoding,o=e.rawImageData,s=e.redFactor,A=e.greenFactor,u=e.blueFactor,l=e.baseShift,c=o.width+2,h=o.height+2,!t.a(o)){r.next=18;break}return r.t1=t.R,r.t2={width:c,height:h},r.next=14,t.bx(o,-1,-1,c,h);case 14:r.t3=r.sent,r.t0=new r.t1(r.t2,r.t3),r.next=19;break;case 18:r.t0=o;case 19:f=r.t0,d=new t.by(i,f,a,s,A,u,l),this.loaded=this.loaded||{},this.loaded[i]=d,n(null,d);case 22:case"end":return r.stop()}}),r,this)})))}},{key:"removeTile",value:function(t){var e=this.loaded,n=t.uid;e&&e[n]&&delete e[n]}}])}();function A(t,e){if(0!==t.length){u(t[0],e);for(var n=1;n<t.length;n++)u(t[n],!e)}}function u(t,e){for(var n=0,r=0,i=0,a=t.length,o=a-1;i<a;o=i++){var s=(t[i][0]-t[o][0])*(t[o][1]+t[i][1]),A=n+s;r+=Math.abs(n)>=Math.abs(s)?n-A+s:s-A+n,n=A}n+r>=0!=!!e&&t.reverse()}var l=t.bz((function t(e,n){var r,i=e&&e.type;if("FeatureCollection"===i)for(r=0;r<e.features.length;r++)t(e.features[r],n);else if("GeometryCollection"===i)for(r=0;r<e.geometries.length;r++)t(e.geometries[r],n);else if("Feature"===i)t(e.geometry,n);else if("Polygon"===i)A(e.coordinates,n);else if("MultiPolygon"===i)for(r=0;r<e.coordinates.length;r++)A(e.coordinates[r],n);return e})),c=t.bw.VectorTileFeature.prototype.toGeoJSON,h={exports:{}},f=t.bA,d=t.bw.VectorTileFeature,p=v;function v(t,e){this.options=e||{},this.features=t,this.length=t.length}function g(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}v.prototype.feature=function(t){return new g(this.features[t],this.options.extent)},g.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var e=0;e<t.length;e++){for(var n=t[e],r=[],i=0;i<n.length;i++)r.push(new f(n[i][0],n[i][1]));this.geometry.push(r)}return this.geometry},g.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,r=1/0,i=-1/0,a=0;a<t.length;a++)for(var o=t[a],s=0;s<o.length;s++){var A=o[s];e=Math.min(e,A.x),n=Math.max(n,A.x),r=Math.min(r,A.y),i=Math.max(i,A.y)}return[e,r,n,i]},g.prototype.toGeoJSON=d.prototype.toGeoJSON;var m=t.bB,y=p;function _(t){var e=new m;return function(t,e){for(var n in t.layers)e.writeMessage(3,w,t.layers[n])}(t,e),e.finish()}function w(t,e){var n;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)r.feature=t.feature(n),e.writeMessage(2,x,r);var i=r.keys;for(n=0;n<i.length;n++)e.writeStringField(3,i[n]);var a=r.values;for(n=0;n<a.length;n++)e.writeMessage(4,F,a[n])}function x(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,b,t),e.writeVarintField(3,n.type),e.writeMessage(4,C,n)}function b(t,e){var n=t.feature,r=t.keys,i=t.values,a=t.keycache,o=t.valuecache;for(var s in n.properties){var A=n.properties[s],u=a[s];if(null!==A){void 0===u&&(r.push(s),a[s]=u=r.length-1),e.writeVarint(u);var l=ni(A);"string"!==l&&"boolean"!==l&&"number"!==l&&(A=JSON.stringify(A));var c=l+":"+A,h=o[c];void 0===h&&(i.push(A),o[c]=h=i.length-1),e.writeVarint(h)}}}function B(t,e){return(e<<3)+(7&t)}function k(t){return t<<1^t>>31}function C(t,e){for(var n=t.loadGeometry(),r=t.type,i=0,a=0,o=n.length,s=0;s<o;s++){var A=n[s],u=1;1===r&&(u=A.length),e.writeVarint(B(1,u));for(var l=3===r?A.length-1:A.length,c=0;c<l;c++){1===c&&1!==r&&e.writeVarint(B(2,l-1));var h=A[c].x-i,f=A[c].y-a;e.writeVarint(k(h)),e.writeVarint(k(f)),i+=h,a+=f}3===r&&e.writeVarint(B(7,1))}}function F(t,e){var n=ni(t);"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}h.exports=_,h.exports.fromVectorTileJs=_,h.exports.fromGeojsonVt=function(t,e){e=e||{};var n={};for(var r in t)n[r]=new y(t[r].features,e),n[r].name=r,n[r].version=e.version,n[r].extent=e.extent;return _({layers:n})},h.exports.GeoJSONWrapper=y;var E,I=t.bz(h.exports),U={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(t){return t}},S=Math.fround||(E=new Float32Array(1),function(t){return E[0]=+t,E[0]}),Q=3,T=5,M=6,D=function(){function e(t){oi(this,e),this.options=Object.assign(Object.create(U),t),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}return ai(e,[{key:"load",value:function(t){var e=this.options,n=e.log,r=e.minZoom,i=e.maxZoom;n&&console.time("total time");var a="prepare ".concat(t.length," points");n&&console.time(a),this.points=t;for(var o=[],s=0;s<t.length;s++){var A=t[s];if(A.geometry){var u=gi(A.geometry.coordinates,2),l=u[0],c=u[1],h=S(O(l)),f=S(R(c));o.push(h,f,1/0,s,-1,1),this.options.reduce&&o.push(0)}}var d=this.trees[i+1]=this._createTree(o);n&&console.timeEnd(a);for(var p=i;p>=r;p--){var v=+Date.now();d=this.trees[p]=this._createTree(this._cluster(d,p)),n&&console.log("z%d: %d clusters in %dms",p,d.numItems,+Date.now()-v)}return n&&console.timeEnd("total time"),this}},{key:"getClusters",value:function(t,e){var n=((t[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,t[1])),i=180===t[2]?180:((t[2]+180)%360+360)%360-180,a=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,i=180;else if(n>i){var o=this.getClusters([n,r,180,a],e),s=this.getClusters([-180,r,i,a],e);return o.concat(s)}var A,u=this.trees[this._limitZoom(e)],l=u.range(O(n),R(a),O(i),R(r)),c=u.data,h=[],f=pO(l);try{for(f.s();!(A=f.n()).done;){var d=A.value,p=this.stride*d;h.push(c[p+T]>1?L(c,p,this.clusterProps):this.points[c[p+Q]])}}catch(t){f.e(t)}finally{f.f()}return h}},{key:"getChildren",value:function(t){var e=this._getOriginId(t),n=this._getOriginZoom(t),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var a=i.data;if(e*this.stride>=a.length)throw new Error(r);var o,s=this.options.radius/(this.options.extent*Math.pow(2,n-1)),A=[],u=pO(i.within(a[e*this.stride],a[e*this.stride+1],s));try{for(u.s();!(o=u.n()).done;){var l=o.value*this.stride;a[l+4]===t&&A.push(a[l+T]>1?L(a,l,this.clusterProps):this.points[a[l+Q]])}}catch(t){u.e(t)}finally{u.f()}if(0===A.length)throw new Error(r);return A}},{key:"getLeaves",value:function(t,e,n){var r=[];return this._appendLeaves(r,t,e=e||10,n=n||0,0),r}},{key:"getTile",value:function(t,e,n){var r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),a=this.options,o=a.extent,s=a.radius/o,A=(n-s)/i,u=(n+1+s)/i,l={features:[]};return this._addTileFeatures(r.range((e-s)/i,A,(e+1+s)/i,u),r.data,e,n,i,l),0===e&&this._addTileFeatures(r.range(1-s/i,A,1,u),r.data,i,n,i,l),e===i-1&&this._addTileFeatures(r.range(0,A,s/i,u),r.data,-1,n,i,l),l.features.length?l:null}},{key:"getClusterExpansionZoom",value:function(t){for(var e=this._getOriginZoom(t)-1;e<=this.options.maxZoom;){var n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e}},{key:"_appendLeaves",value:function(t,e,n,r,i){var a,o=pO(this.getChildren(e));try{for(o.s();!(a=o.n()).done;){var s=a.value,A=s.properties;if(A&&A.cluster?i+A.point_count<=r?i+=A.point_count:i=this._appendLeaves(t,A.cluster_id,n,r,i):i<r?i++:t.push(s),t.length===n)break}}catch(t){o.e(t)}finally{o.f()}return i}},{key:"_createTree",value:function(e){for(var n=new t.av(e.length/this.stride|0,this.options.nodeSize,Float32Array),r=0;r<e.length;r+=this.stride)n.add(e[r],e[r+1]);return n.finish(),n.data=e,n}},{key:"_addTileFeatures",value:function(t,e,n,r,i,a){var o,s=pO(t);try{for(s.s();!(o=s.n()).done;){var A=o.value*this.stride,u=e[A+T]>1,l=void 0,c=void 0,h=void 0;if(u)l=P(e,A,this.clusterProps),c=e[A],h=e[A+1];else{var f=this.points[e[A+Q]];l=f.properties;var d=gi(f.geometry.coordinates,2),p=d[0],v=d[1];c=O(p),h=R(v)}var g={type:1,geometry:[[Math.round(this.options.extent*(c*i-n)),Math.round(this.options.extent*(h*i-r))]],tags:l},m=void 0;void 0!==(m=u||this.options.generateId?e[A+Q]:this.points[e[A+Q]].id)&&(g.id=m),a.features.push(g)}}catch(t){s.e(t)}finally{s.f()}}},{key:"_limitZoom",value:function(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))}},{key:"_cluster",value:function(t,e){for(var n=this.options,r=n.radius,i=n.extent,a=n.reduce,o=n.minPoints,s=r/(i*Math.pow(2,e)),A=t.data,u=[],l=this.stride,c=0;c<A.length;c+=l)if(!(A[c+2]<=e)){A[c+2]=e;var h,f=A[c],d=A[c+1],p=t.within(A[c],A[c+1],s),v=A[c+T],g=v,m=pO(p);try{for(m.s();!(h=m.n()).done;){var y=h.value*l;A[y+2]>e&&(g+=A[y+T])}}catch(t){m.e(t)}finally{m.f()}if(g>v&&g>=o){var _,w=void 0,x=f*v,b=d*v,B=-1,k=(c/l<<5)+(e+1)+this.points.length,C=pO(p);try{for(C.s();!(_=C.n()).done;){var F=_.value*l;if(!(A[F+2]<=e)){A[F+2]=e;var E=A[F+T];x+=A[F]*E,b+=A[F+1]*E,A[F+4]=k,a&&(w||(w=this._map(A,c,!0),B=this.clusterProps.length,this.clusterProps.push(w)),a(w,this._map(A,F)))}}}catch(t){C.e(t)}finally{C.f()}A[c+4]=k,u.push(x/g,b/g,1/0,k,-1,g),a&&u.push(B)}else{for(var I=0;I<l;I++)u.push(A[c+I]);if(g>1){var U,S=pO(p);try{for(S.s();!(U=S.n()).done;){var Q=U.value*l;if(!(A[Q+2]<=e)){A[Q+2]=e;for(var M=0;M<l;M++)u.push(A[Q+M])}}}catch(t){S.e(t)}finally{S.f()}}}}return u}},{key:"_getOriginId",value:function(t){return t-this.points.length>>5}},{key:"_getOriginZoom",value:function(t){return(t-this.points.length)%32}},{key:"_map",value:function(t,e,n){if(t[e+T]>1){var r=this.clusterProps[t[e+M]];return n?Object.assign({},r):r}var i=this.points[t[e+Q]].properties,a=this.options.map(i);return n&&a===i?Object.assign({},a):a}}])}();function L(t,e,n){return{type:"Feature",id:t[e+Q],properties:P(t,e,n),geometry:{type:"Point",coordinates:[(r=t[e],360*(r-.5)),z(t[e+1])]}};var r}function P(t,e,n){var r=t[e+T],i=r>=1e4?"".concat(Math.round(r/1e3),"k"):r>=1e3?Math.round(r/100)/10+"k":r,a=t[e+M],o=-1===a?{}:Object.assign({},n[a]);return Object.assign(o,{cluster:!0,cluster_id:t[e+Q],point_count:r,point_count_abbreviated:i})}function O(t){return t/360+.5}function R(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function z(t){var e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function H(t,e,n,r){for(var i,a=r,o=n-e>>1,s=n-e,A=t[e],u=t[e+1],l=t[n],c=t[n+1],h=e+3;h<n;h+=3){var f=V(t[h],t[h+1],A,u,l,c);if(f>a)i=h,a=f;else if(f===a){var d=Math.abs(h-o);d<s&&(i=h,s=d)}}a>r&&(i-e>3&&H(t,e,i,r),t[i+2]=a,n-i>3&&H(t,i,n,r))}function V(t,e,n,r,i,a){var o=i-n,s=a-r;if(0!==o||0!==s){var A=((t-n)*o+(e-r)*s)/(o*o+s*s);A>1?(n=i,r=a):A>0&&(n+=o*A,r+=s*A)}return(o=t-n)*o+(s=e-r)*s}function N(t,e,n,r){var i={id:void 0===t?null:t,type:e,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)K(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<e.length;r++)K(t,e[r]);else if("MultiPolygon"===n)for(r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)K(t,e[r][i])}(i),i}function K(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function G(t,e,n,r){if(e.geometry){var i=e.geometry.coordinates,a=e.geometry.type,o=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],A=e.id;if(n.promoteId?A=e.properties[n.promoteId]:n.generateId&&(A=r||0),"Point"===a)j(i,s);else if("MultiPoint"===a)for(var u=0;u<i.length;u++)j(i[u],s);else if("LineString"===a)$(i,s,o,!1);else if("MultiLineString"===a){if(n.lineMetrics){for(u=0;u<i.length;u++)$(i[u],s=[],o,!1),t.push(N(A,"LineString",s,e.properties));return}W(i,s,o,!1)}else if("Polygon"===a)W(i,s,o,!0);else{if("MultiPolygon"!==a){if("GeometryCollection"===a){for(u=0;u<e.geometry.geometries.length;u++)G(t,{id:A,geometry:e.geometry.geometries[u],properties:e.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(u=0;u<i.length;u++){var l=[];W(i[u],l,o,!0),s.push(l)}}t.push(N(A,a,s,e.properties))}}function j(t,e){e.push(Z(t[0])),e.push(q(t[1])),e.push(0)}function $(t,e,n,r){for(var i,a,o=0,s=0;s<t.length;s++){var A=Z(t[s][0]),u=q(t[s][1]);e.push(A),e.push(u),e.push(0),s>0&&(o+=r?(i*u-A*a)/2:Math.sqrt(Math.pow(A-i,2)+Math.pow(u-a,2))),i=A,a=u}var l=e.length-3;e[2]=1,H(e,0,l,n),e[l+2]=1,e.size=Math.abs(o),e.start=0,e.end=e.size}function W(t,e,n,r){for(var i=0;i<t.length;i++){var a=[];$(t[i],a,n,r),e.push(a)}}function Z(t){return t/360+.5}function q(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function X(t,e,n,r,i,a,o,s){if(r/=e,a>=(n/=e)&&o<r)return t;if(o<n||a>=r)return null;for(var A=[],u=0;u<t.length;u++){var l=t[u],c=l.geometry,h=l.type,f=0===i?l.minX:l.minY,d=0===i?l.maxX:l.maxY;if(f>=n&&d<r)A.push(l);else if(!(d<n||f>=r)){var p=[];if("Point"===h||"MultiPoint"===h)Y(c,p,n,r,i);else if("LineString"===h)J(c,p,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===h)et(c,p,n,r,i,!1);else if("Polygon"===h)et(c,p,n,r,i,!0);else if("MultiPolygon"===h)for(var v=0;v<c.length;v++){var g=[];et(c[v],g,n,r,i,!0),g.length&&p.push(g)}if(p.length){if(s.lineMetrics&&"LineString"===h){for(v=0;v<p.length;v++)A.push(N(l.id,h,p[v],l.tags));continue}"LineString"!==h&&"MultiLineString"!==h||(1===p.length?(h="LineString",p=p[0]):h="MultiLineString"),"Point"!==h&&"MultiPoint"!==h||(h=3===p.length?"Point":"MultiPoint"),A.push(N(l.id,h,p,l.tags))}}}return A.length?A:null}function Y(t,e,n,r,i){for(var a=0;a<t.length;a+=3){var o=t[a+i];o>=n&&o<=r&&(e.push(t[a]),e.push(t[a+1]),e.push(t[a+2]))}}function J(t,e,n,r,i,a,o){for(var s,A,u=tt(t),l=0===i?rt:it,c=t.start,h=0;h<t.length-3;h+=3){var f=t[h],d=t[h+1],p=t[h+2],v=t[h+3],g=t[h+4],m=0===i?f:d,y=0===i?v:g,_=!1;o&&(s=Math.sqrt(Math.pow(f-v,2)+Math.pow(d-g,2))),m<n?y>n&&(A=l(u,f,d,v,g,n),o&&(u.start=c+s*A)):m>r?y<r&&(A=l(u,f,d,v,g,r),o&&(u.start=c+s*A)):nt(u,f,d,p),y<n&&m>=n&&(A=l(u,f,d,v,g,n),_=!0),y>r&&m<=r&&(A=l(u,f,d,v,g,r),_=!0),!a&&_&&(o&&(u.end=c+s*A),e.push(u),u=tt(t)),o&&(c+=s)}var w=t.length-3;f=t[w],d=t[w+1],p=t[w+2],(m=0===i?f:d)>=n&&m<=r&&nt(u,f,d,p),w=u.length-3,a&&w>=3&&(u[w]!==u[0]||u[w+1]!==u[1])&&nt(u,u[0],u[1],u[2]),u.length&&e.push(u)}function tt(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function et(t,e,n,r,i,a){for(var o=0;o<t.length;o++)J(t[o],e,n,r,i,a,!1)}function nt(t,e,n,r){t.push(e),t.push(n),t.push(r)}function rt(t,e,n,r,i,a){var o=(a-e)/(r-e);return t.push(a),t.push(n+(i-n)*o),t.push(1),o}function it(t,e,n,r,i,a){var o=(a-n)/(i-n);return t.push(e+(r-e)*o),t.push(a),t.push(1),o}function at(t,e){for(var n=[],r=0;r<t.length;r++){var i,a=t[r],o=a.type;if("Point"===o||"MultiPoint"===o||"LineString"===o)i=ot(a.geometry,e);else if("MultiLineString"===o||"Polygon"===o){i=[];for(var s=0;s<a.geometry.length;s++)i.push(ot(a.geometry[s],e))}else if("MultiPolygon"===o)for(i=[],s=0;s<a.geometry.length;s++){for(var A=[],u=0;u<a.geometry[s].length;u++)A.push(ot(a.geometry[s][u],e));i.push(A)}n.push(N(a.id,o,i,a.tags))}return n}function ot(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var r=0;r<t.length;r+=3)n.push(t[r]+e,t[r+1],t[r+2]);return n}function st(t,e){if(t.transformed)return t;var n,r,i,a=1<<t.z,o=t.x,s=t.y;for(n=0;n<t.features.length;n++){var A=t.features[n],u=A.geometry,l=A.type;if(A.geometry=[],1===l)for(r=0;r<u.length;r+=2)A.geometry.push(At(u[r],u[r+1],e,a,o,s));else for(r=0;r<u.length;r++){var c=[];for(i=0;i<u[r].length;i+=2)c.push(At(u[r][i],u[r][i+1],e,a,o,s));A.geometry.push(c)}}return t.transformed=!0,t}function At(t,e,n,r,i,a){return[Math.round(n*(t*r-i)),Math.round(n*(e*r-a))]}function ut(t,e,n,r,i){for(var a=e===i.maxZoom?0:i.tolerance/((1<<e)*i.extent),o={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){o.numFeatures++,lt(o,t[s],a,i);var A=t[s].minX,u=t[s].minY,l=t[s].maxX,c=t[s].maxY;A<o.minX&&(o.minX=A),u<o.minY&&(o.minY=u),l>o.maxX&&(o.maxX=l),c>o.maxY&&(o.maxY=c)}return o}function lt(t,e,n,r){var i=e.geometry,a=e.type,o=[];if("Point"===a||"MultiPoint"===a)for(var s=0;s<i.length;s+=3)o.push(i[s]),o.push(i[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===a)ct(o,i,t,n,!1,!1);else if("MultiLineString"===a||"Polygon"===a)for(s=0;s<i.length;s++)ct(o,i[s],t,n,"Polygon"===a,0===s);else if("MultiPolygon"===a)for(var A=0;A<i.length;A++){var u=i[A];for(s=0;s<u.length;s++)ct(o,u[s],t,n,!0,0===s)}if(o.length){var l=e.tags||null;if("LineString"===a&&r.lineMetrics){for(var c in l={},e.tags)l[c]=e.tags[c];l.mapbox_clip_start=i.start/i.size,l.mapbox_clip_end=i.end/i.size}var h={geometry:o,type:"Polygon"===a||"MultiPolygon"===a?3:"LineString"===a||"MultiLineString"===a?2:1,tags:l};null!==e.id&&(h.id=e.id),t.features.push(h)}}function ct(t,e,n,r,i,a){var o=r*r;if(r>0&&e.size<(i?o:r))n.numPoints+=e.length/3;else{for(var s=[],A=0;A<e.length;A+=3)(0===r||e[A+2]>o)&&(n.numSimplified++,s.push(e[A]),s.push(e[A+1])),n.numPoints++;i&&function(t,e){for(var n=0,r=0,i=t.length,a=i-2;r<i;a=r,r+=2)n+=(t[r]-t[a])*(t[r+1]+t[a+1]);if(n>0===e)for(r=0,i=t.length;r<i/2;r+=2){var o=t[r],s=t[r+1];t[r]=t[i-2-r],t[r+1]=t[i-1-r],t[i-2-r]=o,t[i-1-r]=s}}(s,a),t.push(s)}}function ht(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)G(n,t.features[r],e,r);else G(n,"Feature"===t.type?t:{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),r=function(t,e){var n=e.buffer/e.extent,r=t,i=X(t,1,-1-n,n,0,-1,2,e),a=X(t,1,1-n,2+n,0,-1,2,e);return(i||a)&&(r=X(t,1,-n,1+n,0,-1,2,e)||[],i&&(r=at(i,1).concat(r)),a&&(r=r.concat(at(a,-1)))),r}(r,e),r.length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ft(t,e,n){return 32*((1<<t)*n+e)+t}function dt(t,e){return e?t.properties[e]:t.id}function pt(t,e){if(null==t)return!0;if("Feature"===t.type)return null!=dt(t,e);if("FeatureCollection"===t.type){var n,r=new Set,i=pO(t.features);try{for(i.s();!(n=i.n()).done;){var a=dt(n.value,e);if(null==a)return!1;if(r.has(a))return!1;r.add(a)}}catch(t){i.e(t)}finally{i.f()}return!0}return!1}function vt(t,e){var n=new Map;if(null==t);else if("Feature"===t.type)n.set(dt(t,e),t);else{var r,i=pO(t.features);try{for(i.s();!(r=i.n()).done;){var a=r.value;n.set(dt(a,e),a)}}catch(t){i.e(t)}finally{i.f()}}return n}ht.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ht.prototype.splitTile=function(t,e,n,r,i,a,o){for(var s=[t,e,n,r],A=this.options,u=A.debug;s.length;){r=s.pop(),n=s.pop(),e=s.pop(),t=s.pop();var l=1<<e,c=ft(e,n,r),h=this.tiles[c];if(!h&&(u>1&&console.time("creation"),h=this.tiles[c]=ut(t,e,n,r,A),this.tileCoords.push({z:e,x:n,y:r}),u)){u>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,r,h.numFeatures,h.numPoints,h.numSimplified),console.timeEnd("creation"));var f="z"+e;this.stats[f]=(this.stats[f]||0)+1,this.total++}if(h.source=t,i){if(e===A.maxZoom||e===i)continue;var d=1<<i-e;if(n!==Math.floor(a/d)||r!==Math.floor(o/d))continue}else if(e===A.indexMaxZoom||h.numPoints<=A.indexMaxPoints)continue;if(h.source=null,0!==t.length){u>1&&console.time("clipping");var p,v,g,m,y,_,w=.5*A.buffer/A.extent,x=.5-w,b=.5+w,B=1+w;p=v=g=m=null,y=X(t,l,n-w,n+b,0,h.minX,h.maxX,A),_=X(t,l,n+x,n+B,0,h.minX,h.maxX,A),t=null,y&&(p=X(y,l,r-w,r+b,1,h.minY,h.maxY,A),v=X(y,l,r+x,r+B,1,h.minY,h.maxY,A),y=null),_&&(g=X(_,l,r-w,r+b,1,h.minY,h.maxY,A),m=X(_,l,r+x,r+B,1,h.minY,h.maxY,A),_=null),u>1&&console.timeEnd("clipping"),s.push(p||[],e+1,2*n,2*r),s.push(v||[],e+1,2*n,2*r+1),s.push(g||[],e+1,2*n+1,2*r),s.push(m||[],e+1,2*n+1,2*r+1)}}},ht.prototype.getTile=function(t,e,n){var r=this.options,i=r.extent,a=r.debug;if(t<0||t>24)return null;var o=1<<t,s=ft(t,e=(e%o+o)%o,n);if(this.tiles[s])return st(this.tiles[s],i);a>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var A,u=t,l=e,c=n;!A&&u>0;)u--,l=Math.floor(l/2),c=Math.floor(c/2),A=this.tiles[ft(u,l,c)];return A&&A.source?(a>1&&console.log("found parent tile z%d-%d-%d",u,l,c),a>1&&console.time("drilling down"),this.splitTile(A.source,u,l,c,t,e,n),a>1&&console.timeEnd("drilling down"),this.tiles[s]?st(this.tiles[s],i):null):null};var gt=function(e){function n(e,r,i,a){var o;return oi(this,n),(o=gO(this,n,[e,r,i]))._dataUpdateable=new Map,o.loadGeoJSON=function(e,n){var r=e.promoteId;if(e.request)return t.f(e.request,(function(t,e,i,a){o._dataUpdateable=pt(e,r)?vt(e,r):void 0,n(t,e,i,a)}));if("string"==typeof e.data)try{var i=JSON.parse(e.data);o._dataUpdateable=pt(i,r)?vt(i,r):void 0,n(null,i)}catch(t){n(new Error("Input data given to '".concat(e.source,"' is not a valid GeoJSON object.")))}else e.dataDiff?o._dataUpdateable?(function(t,e,n){var r,i,a,o;if(e.removeAll&&t.clear(),e.remove){var s,A=pO(e.remove);try{for(A.s();!(s=A.n()).done;){var u=s.value;t.delete(u)}}catch(t){A.e(t)}finally{A.f()}}if(e.add){var l,c=pO(e.add);try{for(c.s();!(l=c.n()).done;){var h=l.value,f=dt(h,n);null!=f&&t.set(f,h)}}catch(t){c.e(t)}finally{c.f()}}if(e.update){var d,p=pO(e.update);try{for(p.s();!(d=p.n()).done;){var v=d.value,g=t.get(v.id);if(null!=g){var m=!v.removeAllProperties&&((null===(r=v.removeProperties)||void 0===r?void 0:r.length)>0||(null===(i=v.addOrUpdateProperties)||void 0===i?void 0:i.length)>0);if((v.newGeometry||v.removeAllProperties||m)&&(g=Object.assign({},g),t.set(v.id,g),m&&(g.properties=Object.assign({},g.properties))),v.newGeometry&&(g.geometry=v.newGeometry),v.removeAllProperties)g.properties={};else if((null===(a=v.removeProperties)||void 0===a?void 0:a.length)>0){var y,_=pO(v.removeProperties);try{for(_.s();!(y=_.n()).done;){var w=y.value;Object.prototype.hasOwnProperty.call(g.properties,w)&&delete g.properties[w]}}catch(t){_.e(t)}finally{_.f()}}if((null===(o=v.addOrUpdateProperties)||void 0===o?void 0:o.length)>0){var x,b=pO(v.addOrUpdateProperties);try{for(b.s();!(x=b.n()).done;){var B=x.value,k=B.key,C=B.value;g.properties[k]=C}}catch(t){b.e(t)}finally{b.f()}}}}}catch(t){p.e(t)}finally{p.f()}}}(o._dataUpdateable,e.dataDiff,r),n(null,{type:"FeatureCollection",features:Array.from(o._dataUpdateable.values())})):n(new Error("Cannot update existing geojson data in ".concat(e.source))):n(new Error("Input data given to '".concat(e.source,"' is not a valid GeoJSON object.")));return{cancel:function(){}}},o.loadVectorData=o.loadGeoJSONTile,a&&(o.loadGeoJSON=a),o}return ci(n,e),ai(n,[{key:"loadGeoJSONTile",value:function(e,n){var r=e.tileID.canonical;if(!this._geoJSONIndex)return n(null,null);var i=this._geoJSONIndex.getTile(r.z,r.x,r.y);if(!i)return n(null,null);var a=new(function(){function e(n){oi(this,e),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.N,this.length=n.length,this._features=n}return ai(e,[{key:"feature",value:function(e){return new(function(){function e(n){oi(this,e),this._feature=n,this.extent=t.N,this.type=n.type,this.properties=n.tags,"id"in n&&!isNaN(n.id)&&(this.id=parseInt(n.id,10))}return ai(e,[{key:"loadGeometry",value:function(){if(1===this._feature.type){var e,n=[],r=pO(this._feature.geometry);try{for(r.s();!(e=r.n()).done;){var i=e.value;n.push([new t.P(i[0],i[1])])}}catch(t){r.e(t)}finally{r.f()}return n}var a,o=[],s=pO(this._feature.geometry);try{for(s.s();!(a=s.n()).done;){var A,u=a.value,l=[],c=pO(u);try{for(c.s();!(A=c.n()).done;){var h=A.value;l.push(new t.P(h[0],h[1]))}}catch(t){c.e(t)}finally{c.f()}o.push(l)}}catch(t){s.e(t)}finally{s.f()}return o}},{key:"toGeoJSON",value:function(t,e,n){return c.call(this,t,e,n)}}])}())(this._features[e])}}])}())(i.features),o=I(a);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),n(null,{vectorTile:a,rawData:o.buffer})}},{key:"loadData",value:function(e,n){var r,i=this;null===(r=this._pendingRequest)||void 0===r||r.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});var a=!!(e&&e.request&&e.request.collectResourceTiming)&&new t.bu(e.request);this._pendingCallback=n,this._pendingRequest=this.loadGeoJSON(e,(function(r,o){if(delete i._pendingCallback,delete i._pendingRequest,r||!o)return n(r);if("object"!=ni(o))return n(new Error("Input data given to '".concat(e.source,"' is not a valid GeoJSON object.")));l(o,!0);try{if(e.filter){var s=t.bC(e.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===s.result)throw new Error(s.value.map((function(t){return"".concat(t.key,": ").concat(t.message)})).join(", "));var A=o.features.filter((function(t){return s.value.evaluate({zoom:0},t)}));o={type:"FeatureCollection",features:A}}i._geoJSONIndex=e.cluster?new D(function(e){var n=e.superclusterOptions,r=e.clusterProperties;if(!r||!n)return n;for(var i={},a={},o={accumulated:null,zoom:0},s={properties:null},A=Object.keys(r),u=0,l=A;u<l.length;u++){var c=l[u],h=gi(r[c],2),f=h[0],d=h[1],p=t.bC(d),v=t.bC("string"==typeof f?[f,["accumulated"],["get",c]]:f);i[c]=p.value,a[c]=v.value}return n.map=function(t){s.properties=t;for(var e={},n=0,r=A;n<r.length;n++){var a=r[n];e[a]=i[a].evaluate(o,s)}return e},n.reduce=function(t,e){s.properties=e;for(var n=0,r=A;n<r.length;n++){var i=r[n];o.accumulated=t[i],t[i]=a[i].evaluate(o,s)}},n}(e)).load(o.features):function(t,e){return new ht(t,e)}(o,e.geojsonVtOptions)}catch(r){return n(r)}i.loaded={};var u={};if(a){var c=a.finish();c&&(u.resourceTiming={},u.resourceTiming[e.source]=JSON.parse(JSON.stringify(c)))}n(null,u)}))}},{key:"reloadTile",value:function(t,e){var r=this.loaded;return r&&r[t.uid]?Li(ui(n.prototype),"reloadTile",this).call(this,t,e):this.loadTile(t,e)}},{key:"removeSource",value:function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()}},{key:"getClusterExpansionZoom",value:function(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}}},{key:"getClusterChildren",value:function(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}}},{key:"getClusterLeaves",value:function(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}}}])}(o),mt=function(){function n(e){var r=this;oi(this,n),this.self=e,this.actor=new t.C(e,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:o,geojson:gt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(r.workerSourceTypes[t])throw new Error('Worker source with name "'.concat(t,'" already registered.'));r.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(e){if(t.bD.isParsed())throw new Error("RTL text plugin already registered.");t.bD.applyArabicShaping=e.applyArabicShaping,t.bD.processBidirectionalText=e.processBidirectionalText,t.bD.processStyledBidirectionalText=e.processStyledBidirectionalText}}return ai(n,[{key:"setReferrer",value:function(t,e){this.referrer=e}},{key:"setImages",value:function(t,e,n){for(var r in this.availableImages[t]=e,this.workerSources[t]){var i=this.workerSources[t][r];for(var a in i)i[a].availableImages=e}n()}},{key:"setLayers",value:function(t,e,n){this.getLayerIndex(t).replace(e),n()}},{key:"updateLayers",value:function(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()}},{key:"loadTile",value:function(t,e,n){this.getWorkerSource(t,e.type,e.source).loadTile(e,n)}},{key:"loadDEMTile",value:function(t,e,n){this.getDEMWorkerSource(t,e.source).loadTile(e,n)}},{key:"reloadTile",value:function(t,e,n){this.getWorkerSource(t,e.type,e.source).reloadTile(e,n)}},{key:"abortTile",value:function(t,e,n){this.getWorkerSource(t,e.type,e.source).abortTile(e,n)}},{key:"removeTile",value:function(t,e,n){this.getWorkerSource(t,e.type,e.source).removeTile(e,n)}},{key:"removeDEMTile",value:function(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)}},{key:"removeSource",value:function(t,e,n){if(this.workerSources[t]&&this.workerSources[t][e.type]&&this.workerSources[t][e.type][e.source]){var r=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==r.removeSource?r.removeSource(e,n):n()}}},{key:"loadWorkerSource",value:function(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t.toString())}}},{key:"syncRTLPluginState",value:function(e,n,r){try{t.bD.setState(n);var i=t.bD.getPluginURL();if(t.bD.isLoaded()&&!t.bD.isParsed()&&null!=i){this.self.importScripts(i);var a=t.bD.isParsed();r(a?void 0:new Error("RTL Text Plugin failed to import scripts from ".concat(i)),a)}}catch(t){r(t.toString())}}},{key:"getAvailableImages",value:function(t){var e=this.availableImages[t];return e||(e=[]),e}},{key:"getLayerIndex",value:function(t){var n=this.layerIndexes[t];return n||(n=this.layerIndexes[t]=new e),n}},{key:"getWorkerSource",value:function(t,e,n){var r=this;return this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),this.workerSources[t][e][n]||(this.workerSources[t][e][n]=new this.workerSourceTypes[e]({send:function(e,n,i){r.actor.send(e,n,i,t)}},this.getLayerIndex(t),this.getAvailableImages(t))),this.workerSources[t][e][n]}},{key:"getDEMWorkerSource",value:function(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new s),this.demWorkerSources[t][e]}}])}();return t.i()&&(self.worker=new mt(self)),mt})),r(["./shared"],(function(t){var e="3.6.2",n=function(){function e(){oi(this,e)}return ai(e,null,[{key:"testProp",value:function(t){if(!e.docStyle)return t[0];for(var n=0;n<t.length;n++)if(t[n]in e.docStyle)return t[n];return t[0]}},{key:"create",value:function(t,e,n){var r=window.document.createElement(t);return void 0!==e&&(r.className=e),n&&n.appendChild(r),r}},{key:"createNS",value:function(t,e){return window.document.createElementNS(t,e)}},{key:"disableDrag",value:function(){e.docStyle&&e.selectProp&&(e.userSelect=e.docStyle[e.selectProp],e.docStyle[e.selectProp]="none")}},{key:"enableDrag",value:function(){e.docStyle&&e.selectProp&&(e.docStyle[e.selectProp]=e.userSelect)}},{key:"setTransform",value:function(t,n){t.style[e.transformProp]=n}},{key:"addEventListener",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t.addEventListener(e,n,"passive"in r?r:r.capture)}},{key:"removeEventListener",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t.removeEventListener(e,n,"passive"in r?r:r.capture)}},{key:"suppressClickInternal",value:function(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",e.suppressClickInternal,!0)}},{key:"suppressClick",value:function(){window.addEventListener("click",e.suppressClickInternal,!0),window.setTimeout((function(){window.removeEventListener("click",e.suppressClickInternal,!0)}),0)}},{key:"mousePos",value:function(e,n){var r=e.getBoundingClientRect();return new t.P(n.clientX-r.left-e.clientLeft,n.clientY-r.top-e.clientTop)}},{key:"touchPos",value:function(e,n){for(var r=e.getBoundingClientRect(),i=[],a=0;a<n.length;a++)i.push(new t.P(n[a].clientX-r.left-e.clientLeft,n[a].clientY-r.top-e.clientTop));return i}},{key:"mouseButton",value:function(t){return t.button}},{key:"remove",value:function(t){t.parentNode&&t.parentNode.removeChild(t)}}])}();n.docStyle="undefined"!=typeof window&&window.document&&window.document.documentElement.style,n.selectProp=n.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),n.transformProp=n.testProp(["transform","WebkitTransform"]);var r,i,a,o,s={supported:!1,testSupport:function(t){!A&&i&&(u?l(t):r=t)}},A=!1,u=!1;function l(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i),t.isContextLost())return;s.supported=!0}catch(t){}t.deleteTexture(e),A=!0}"undefined"!=typeof document&&((i=document.createElement("img")).onload=function(){r&&l(r),r=null,u=!0},i.onerror=function(){A=!0,r=null},i.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(e){var n,r,i,a;e.resetRequestQueue=function(){n=[],r=0,i=0,a={}},e.addThrottleControl=function(t){var e=i++;return a[e]=t,e},e.removeThrottleControl=function(t){delete a[t],u()},e.getImage=function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];s.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*");var a={requestParameters:t,supportImageRefresh:i,callback:e,cancelled:!1,completed:!1,cancel:function(){a.completed||a.cancelled||(a.cancelled=!0,a.innerRequest&&(a.innerRequest.cancel(),r--),u())}};return n.push(a),u(),a};var o=function(e){var n=e.requestParameters,r=e.supportImageRefresh,i=e.callback;return t.e(n,{type:"image"}),(!1!==r||t.i()||t.g(n.url)||n.headers&&!Object.keys(n.headers).reduce((function(t,e){return t&&"accept"===e}),!0)?t.m:l)(n,(function(t,n,r,a){A(e,i,t,n,r,a)}))},A=function(e,n,i,a,o,s){i?n(i):a instanceof HTMLImageElement||t.a(a)?n(null,a):a&&function(e,n){"function"==typeof createImageBitmap?t.b(e,n):t.d(e,n)}(a,(function(t,e){null!=t?n(t):null!=e&&n(null,e,{cacheControl:o,expires:s})})),e.cancelled||(e.completed=!0,r--,u())},u=function(){for(var e=function(){var t=Object.keys(a),e=!1;if(t.length>0){var n,r=pO(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(e=a[i]())break}}catch(t){r.e(t)}finally{r.f()}}return e}()?t.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:t.c.MAX_PARALLEL_IMAGE_REQUESTS,i=r;i<e&&n.length>0;i++){var s=n.shift();if(s.cancelled)i--;else{var A=o(s);r++,s.innerRequest=A}}},l=function(e,n){var r=new Image,i=e.url,a=!1,o=e.credentials;return o&&"include"===o?r.crossOrigin="use-credentials":(o&&"same-origin"===o||!t.s(i))&&(r.crossOrigin="anonymous"),r.fetchPriority="high",r.onload=function(){n(null,r),r.onerror=r.onload=null},r.onerror=function(){a||n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),r.onerror=r.onload=null},r.src=i,{cancel:function(){a=!0,r.src=""}}}}(a||(a={})),a.resetRequestQueue(),function(t){t.Glyphs="Glyphs",t.Image="Image",t.Source="Source",t.SpriteImage="SpriteImage",t.SpriteJSON="SpriteJSON",t.Style="Style",t.Tile="Tile",t.Unknown="Unknown"}(o||(o={}));var c=function(){function t(e){oi(this,t),this._transformRequestFn=e}return ai(t,[{key:"transformRequest",value:function(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}}},{key:"normalizeSpriteURL",value:function(t,e,n){var r=function(t){var e=t.match(h);if(!e)throw new Error('Unable to parse URL "'.concat(t,'"'));return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}(t);return r.path+="".concat(e).concat(n),function(t){var e=t.params.length?"?".concat(t.params.join("&")):"";return"".concat(t.protocol,"://").concat(t.authority).concat(t.path).concat(e)}(r)}},{key:"setTransformRequest",value:function(t){this._transformRequestFn=t}}])}(),h=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function f(e){var n=new t.A(3);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n}var d,p=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t};d=new t.A(3),t.A!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0);var v=function(t){var e=t[0],n=t[1];return e*e+n*n};function g(t){var e=[];if("string"==typeof t)e.push({id:"default",url:t});else if(t&&t.length>0){var n,r=[],i=pO(t);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=a.id,s=a.url,A="".concat(o).concat(s);-1===r.indexOf(A)&&(r.push(A),e.push({id:o,url:s}))}}catch(t){i.e(t)}finally{i.f()}}return e}function m(e,n,r,i,a){if(i)e(i);else if(a===Object.values(n).length&&a===Object.values(r).length){var o={};for(var s in n){o[s]={};var A=t.h.getImageCanvasContext(r[s]),u=n[s];for(var l in u){var c=u[l],h=c.width,f=c.height,d=c.x,p=c.y,v=c.sdf,g=c.pixelRatio,m=c.stretchX,y=c.stretchY,_=c.content;o[s][l]={data:null,pixelRatio:g,sdf:v,stretchX:m,stretchY:y,content:_,spriteData:{width:h,height:f,x:d,y:p,context:A}}}}e(null,o)}}!function(){var e=new t.A(2);t.A!=Float32Array&&(e[0]=0,e[1]=0)}();var y=function(){function e(t,n,r,i){oi(this,e),this.context=t,this.format=r,this.texture=t.gl.createTexture(),this.update(n,i)}return ai(e,[{key:"update",value:function(e,n,r){var i=e.width,a=e.height,o=!(this.size&&this.size[0]===i&&this.size[1]===a||r),s=this.context,A=s.gl;if(this.useMipmap=Boolean(n&&n.useMipmap),A.bindTexture(A.TEXTURE_2D,this.texture),s.pixelStoreUnpackFlipY.set(!1),s.pixelStoreUnpack.set(1),s.pixelStoreUnpackPremultiplyAlpha.set(this.format===A.RGBA&&(!n||!1!==n.premultiply)),o)this.size=[i,a],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||t.a(e)?A.texImage2D(A.TEXTURE_2D,0,this.format,this.format,A.UNSIGNED_BYTE,e):A.texImage2D(A.TEXTURE_2D,0,this.format,i,a,0,this.format,A.UNSIGNED_BYTE,e.data);else{var u=r||{x:0,y:0},l=u.x,c=u.y;e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||t.a(e)?A.texSubImage2D(A.TEXTURE_2D,0,l,c,A.RGBA,A.UNSIGNED_BYTE,e):A.texSubImage2D(A.TEXTURE_2D,0,l,c,i,a,A.RGBA,A.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&A.generateMipmap(A.TEXTURE_2D)}},{key:"bind",value:function(t,e,n){var r=this.context.gl;r.bindTexture(r.TEXTURE_2D,this.texture),n!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=r.LINEAR),t!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n||t),this.filter=t),e!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e),this.wrap=e)}},{key:"isSizePowerOfTwo",value:function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}},{key:"destroy",value:function(){this.context.gl.deleteTexture(this.texture),this.texture=null}}])}();function _(t){var e=t.userImage;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}var w=function(e){function n(){var e;return oi(this,n),(e=gO(this,n)).images={},e.updatedImages={},e.callbackDispatchedThisFrame={},e.loaded=!1,e.requestors=[],e.patterns={},e.atlasImage=new t.R({width:1,height:1}),e.dirty=!0,e}return ci(n,e),ai(n,[{key:"isLoaded",value:function(){return this.loaded}},{key:"setLoaded",value:function(t){if(this.loaded!==t&&(this.loaded=t,t)){var e,n=pO(this.requestors);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=r.ids,a=r.callback;this._notify(i,a)}}catch(t){n.e(t)}finally{n.f()}this.requestors=[]}}},{key:"getImage",value:function(e){var n=this.images[e];if(n&&!n.data&&n.spriteData){var r=n.spriteData;n.data=new t.R({width:r.width,height:r.height},r.context.getImageData(r.x,r.y,r.width,r.height).data),n.spriteData=null}return n}},{key:"addImage",value:function(t,e){if(this.images[t])throw new Error("Image id ".concat(t," already exist, use updateImage instead"));this._validate(t,e)&&(this.images[t]=e)}},{key:"_validate",value:function(e,n){var r=!0,i=n.data||n.spriteData;return this._validateStretch(n.stretchX,i&&i.width)||(this.fire(new t.j(new Error('Image "'.concat(e,'" has invalid "stretchX" value')))),r=!1),this._validateStretch(n.stretchY,i&&i.height)||(this.fire(new t.j(new Error('Image "'.concat(e,'" has invalid "stretchY" value')))),r=!1),this._validateContent(n.content,n)||(this.fire(new t.j(new Error('Image "'.concat(e,'" has invalid "content" value')))),r=!1),r}},{key:"_validateStretch",value:function(t,e){if(!t)return!0;var n,r=0,i=pO(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a[0]<r||a[1]<a[0]||e<a[1])return!1;r=a[1]}}catch(t){i.e(t)}finally{i.f()}return!0}},{key:"_validateContent",value:function(t,e){if(!t)return!0;if(4!==t.length)return!1;var n=e.spriteData,r=n&&n.width||e.data.width,i=n&&n.height||e.data.height;return!(t[0]<0||r<t[0]||t[1]<0||i<t[1]||t[2]<0||r<t[2]||t[3]<0||i<t[3]||t[2]<t[0]||t[3]<t[1])}},{key:"updateImage",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.getImage(t);if(n&&(r.data.width!==e.data.width||r.data.height!==e.data.height))throw new Error("size mismatch between old image (".concat(r.data.width,"x").concat(r.data.height,") and new image (").concat(e.data.width,"x").concat(e.data.height,")."));e.version=r.version+1,this.images[t]=e,this.updatedImages[t]=!0}},{key:"removeImage",value:function(t){var e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()}},{key:"listImages",value:function(){return Object.keys(this.images)}},{key:"getImages",value:function(t,e){var n=!0;if(!this.isLoaded()){var r,i=pO(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.images[a]||(n=!1)}}catch(t){i.e(t)}finally{i.f()}}this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})}},{key:"_notify",value:function(e,n){var r,i={},a=pO(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=this.getImage(o);s||(this.fire(new t.k("styleimagemissing",{id:o})),s=this.getImage(o)),s?i[o]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,stretchX:s.stretchX,stretchY:s.stretchY,content:s.content,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:t.w('Image "'.concat(o,'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.'))}}catch(t){a.e(t)}finally{a.f()}n(null,i)}},{key:"getPixelSize",value:function(){var t=this.atlasImage;return{width:t.width,height:t.height}}},{key:"getPattern",value:function(e){var n=this.patterns[e],r=this.getImage(e);if(!r)return null;if(n&&n.position.version===r.version)return n.position;if(n)n.position.version=r.version;else{var i={w:r.data.width+2,h:r.data.height+2,x:0,y:0},a=new t.I(i,r);this.patterns[e]={bin:i,position:a}}return this._updatePatternAtlas(),this.patterns[e].position}},{key:"bind",value:function(t){var e=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new y(t,this.atlasImage,e.RGBA),this.atlasTexture.bind(e.LINEAR,e.CLAMP_TO_EDGE)}},{key:"_updatePatternAtlas",value:function(){var e=[];for(var n in this.patterns)e.push(this.patterns[n].bin);var r=t.p(e),i=r.w,a=r.h,o=this.atlasImage;for(var s in o.resize({width:i||1,height:a||1}),this.patterns){var A=this.patterns[s].bin,u=A.x+1,l=A.y+1,c=this.getImage(s).data,h=c.width,f=c.height;t.R.copy(c,o,{x:0,y:0},{x:u,y:l},{width:h,height:f}),t.R.copy(c,o,{x:0,y:f-1},{x:u,y:l-1},{width:h,height:1}),t.R.copy(c,o,{x:0,y:0},{x:u,y:l+f},{width:h,height:1}),t.R.copy(c,o,{x:h-1,y:0},{x:u-1,y:l},{width:1,height:f}),t.R.copy(c,o,{x:0,y:0},{x:u+h,y:l},{width:1,height:f})}this.dirty=!0}},{key:"beginFrame",value:function(){this.callbackDispatchedThisFrame={}}},{key:"dispatchRenderCallbacks",value:function(e){var n,r=pO(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!this.callbackDispatchedThisFrame[i]){this.callbackDispatchedThisFrame[i]=!0;var a=this.getImage(i);a||t.w('Image with ID: "'.concat(i,'" was not found')),_(a)&&this.updateImage(i,a)}}}catch(t){r.e(t)}finally{r.f()}}}])}(t.E),x=1e20;function b(t,e,n,r,i,a,o,s,A){for(var u=e;u<e+r;u++)B(t,n*a+u,a,i,o,s,A);for(var l=n;l<n+i;l++)B(t,l*a+e,1,r,o,s,A)}function B(t,e,n,r,i,a,o){a[0]=0,o[0]=-x,o[1]=x,i[0]=t[e];for(var s=1,A=0,u=0;s<r;s++){i[s]=t[e+s*n];var l=s*s;do{var c=a[A];u=(i[s]-i[c]+l-c*c)/(s-c)/2}while(u<=o[A]&&--A>-1);a[++A]=s,o[A]=u,o[A+1]=x}for(var h=0,f=0;h<r;h++){for(;o[f+1]<h;)f++;var d=a[f],p=h-d;t[e+h*n]=i[d]+p*p}}var k=function(){function e(t,n){oi(this,e),this.requestManager=t,this.localIdeographFontFamily=n,this.entries={}}return ai(e,[{key:"setURL",value:function(t){this.url=t}},{key:"getGlyphs",value:function(n,r){var i=this,a=[];for(var o in n){var s,A=pO(n[o]);try{for(A.s();!(s=A.n()).done;){var u=s.value;a.push({stack:o,id:u})}}catch(t){A.e(t)}finally{A.f()}}t.o(a,(function(t,n){var r=t.stack,a=t.id,o=i.entries[r];o||(o=i.entries[r]={glyphs:{},requests:{},ranges:{}});var s=o.glyphs[a];if(void 0===s){if(s=i._tinySDF(o,r,a))return o.glyphs[a]=s,void n(null,{stack:r,id:a,glyph:s});var A=Math.floor(a/256);if(256*A>65535)n(new Error("glyphs > 65535 not supported"));else if(o.ranges[A])n(null,{stack:r,id:a,glyph:s});else if(i.url){var u=o.requests[A];u||(u=o.requests[A]=[],e.loadGlyphRange(r,A,i.url,i.requestManager,(function(t,e){if(e){for(var n in e)i._doesCharSupportLocalGlyph(+n)||(o.glyphs[+n]=e[+n]);o.ranges[A]=!0}var r,a=pO(u);try{for(a.s();!(r=a.n()).done;)(0,r.value)(t,e)}catch(t){a.e(t)}finally{a.f()}delete o.requests[A]}))),u.push((function(t,e){t?n(t):e&&n(null,{stack:r,id:a,glyph:e[a]||null})}))}else n(new Error("glyphsUrl is not set"))}else n(null,{stack:r,id:a,glyph:s})}),(function(t,e){if(t)r(t);else if(e){var n,i={},a=pO(e);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.stack,A=o.id,u=o.glyph;(i[s]||(i[s]={}))[A]=u&&{id:u.id,bitmap:u.bitmap.clone(),metrics:u.metrics}}}catch(t){a.e(t)}finally{a.f()}r(null,i)}}))}},{key:"_doesCharSupportLocalGlyph",value:function(e){return!!this.localIdeographFontFamily&&(t.u["CJK Unified Ideographs"](e)||t.u["Hangul Syllables"](e)||t.u.Hiragana(e)||t.u.Katakana(e))}},{key:"_tinySDF",value:function(n,r,i){var a=this.localIdeographFontFamily;if(a&&this._doesCharSupportLocalGlyph(i)){var o=n.tinySDF;if(!o){var s="400";/bold/i.test(r)?s="900":/medium/i.test(r)?s="500":/light/i.test(r)&&(s="200"),o=n.tinySDF=new e.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:a,fontWeight:s})}var A=o.draw(String.fromCharCode(i));return{id:i,bitmap:new t.q({width:A.width||60,height:A.height||60},A.data),metrics:{width:A.glyphWidth/2||24,height:A.glyphHeight/2||24,left:A.glyphLeft/2+.5||0,top:A.glyphTop/2-27.5||-8,advance:A.glyphAdvance/2||24,isDoubleResolution:!0}}}}}])}();k.loadGlyphRange=function(e,n,r,i,a){var s=256*n,A=s+255,u=i.transformRequest(r.replace("{fontstack}",e).replace("{range}","".concat(s,"-").concat(A)),o.Glyphs);t.l(u,(function(e,n){if(e)a(e);else if(n){var r,i={},o=pO(t.n(n));try{for(o.s();!(r=o.n()).done;){var s=r.value;i[s.id]=s}}catch(t){o.e(t)}finally{o.f()}a(null,i)}}))},k.TinySDF=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.fontSize,r=void 0===n?24:n,i=e.buffer,a=void 0===i?3:i,o=e.radius,s=void 0===o?8:o,A=e.cutoff,u=void 0===A?.25:A,l=e.fontFamily,c=void 0===l?"sans-serif":l,h=e.fontWeight,f=void 0===h?"normal":h,d=e.fontStyle,p=void 0===d?"normal":d;oi(this,t),this.buffer=a,this.cutoff=u,this.radius=s;var v=this.size=r+4*a,g=this._createCanvas(v),m=this.ctx=g.getContext("2d",{willReadFrequently:!0});m.font="".concat(p," ").concat(f," ").concat(r,"px ").concat(c),m.textBaseline="alphabetic",m.textAlign="left",m.fillStyle="black",this.gridOuter=new Float64Array(v*v),this.gridInner=new Float64Array(v*v),this.f=new Float64Array(v),this.z=new Float64Array(v+1),this.v=new Uint16Array(v)}return ai(t,[{key:"_createCanvas",value:function(t){var e=document.createElement("canvas");return e.width=e.height=t,e}},{key:"draw",value:function(t){var e=this.ctx.measureText(t),n=e.width,r=e.actualBoundingBoxAscent,i=e.actualBoundingBoxDescent,a=e.actualBoundingBoxLeft,o=e.actualBoundingBoxRight,s=Math.ceil(r),A=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-a))),u=Math.min(this.size-this.buffer,s+Math.ceil(i)),l=A+2*this.buffer,c=u+2*this.buffer,h=Math.max(l*c,0),f=new Uint8ClampedArray(h),d={data:f,width:l,height:c,glyphWidth:A,glyphHeight:u,glyphTop:s,glyphLeft:0,glyphAdvance:n};if(0===A||0===u)return d;var p=this.ctx,v=this.buffer,g=this.gridInner,m=this.gridOuter;p.clearRect(v,v,A,u),p.fillText(t,v,v+s);var y=p.getImageData(v,v,A,u);m.fill(x,0,h),g.fill(0,0,h);for(var _=0;_<u;_++)for(var w=0;w<A;w++){var B=y.data[4*(_*A+w)+3]/255;if(0!==B){var k=(_+v)*l+w+v;if(1===B)m[k]=0,g[k]=x;else{var C=.5-B;m[k]=C>0?C*C:0,g[k]=C<0?C*C:0}}}b(m,0,0,l,c,l,this.f,this.v,this.z),b(g,v,v,A,u,l,this.f,this.v,this.z);for(var F=0;F<h;F++){var E=Math.sqrt(m[F])-Math.sqrt(g[F]);f[F]=Math.round(255-255*(E/this.radius+this.cutoff))}return d}}])}();var C,F=function(){function e(){oi(this,e),this.specification=t.v.light.position}return ai(e,[{key:"possiblyEvaluate",value:function(e,n){return t.z(e.expression.evaluate(n))}},{key:"interpolate",value:function(e,n,r){return{x:t.B.number(e.x,n.x,r),y:t.B.number(e.y,n.y,r),z:t.B.number(e.z,n.z,r)}}}])}(),E=function(e){function n(e){var r;return oi(this,n),r=gO(this,n),C=C||new t.r({anchor:new t.D(t.v.light.anchor),position:new F,color:new t.D(t.v.light.color),intensity:new t.D(t.v.light.intensity)}),r._transitionable=new t.T(C),r.setLight(e),r._transitioning=r._transitionable.untransitioned(),r}return ci(n,e),ai(n,[{key:"getLight",value:function(){return this._transitionable.serialize()}},{key:"setLight",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(t.t,e,n))for(var r in e){var i=e[r];r.endsWith("-transition")?this._transitionable.setTransition(r.slice(0,-11),i):this._transitionable.setValue(r,i)}}},{key:"updateTransitions",value:function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}},{key:"hasTransition",value:function(){return this._transitioning.hasTransition()}},{key:"recalculate",value:function(t){this.properties=this._transitioning.possiblyEvaluate(t)}},{key:"_validate",value:function(e,n,r){return(!r||!1!==r.validate)&&t.x(this,e.call(t.y,t.e({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.v})))}}])}(t.E),I=function(){function e(t,n){oi(this,e),this.width=t,this.height=n,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}return ai(e,[{key:"getDash",value:function(t,e){var n=t.join(",")+String(e);return this.dashEntry[n]||(this.dashEntry[n]=this.addDash(t,e)),this.dashEntry[n]}},{key:"getDashRanges",value:function(t,e,n){var r=[],i=t.length%2==1?-t[t.length-1]*n:0,a=t[0]*n,o=!0;r.push({left:i,right:a,isDash:o,zeroLength:0===t[0]});for(var s=t[0],A=1;A<t.length;A++){o=!o;var u=t[A];i=s*n,a=(s+=u)*n,r.push({left:i,right:a,isDash:o,zeroLength:0===u})}return r}},{key:"addRoundDash",value:function(t,e,n){for(var r=e/2,i=-n;i<=n;i++)for(var a=this.width*(this.nextRow+n+i),o=0,s=t[o],A=0;A<this.width;A++){A/s.right>1&&(s=t[++o]);var u=Math.abs(A-s.left),l=Math.abs(A-s.right),c=Math.min(u,l),h=void 0,f=i/n*(r+1);if(s.isDash){var d=r-Math.abs(f);h=Math.sqrt(c*c+d*d)}else h=r-Math.sqrt(c*c+f*f);this.data[a+A]=Math.max(0,Math.min(255,h+128))}}},{key:"addRegularDash",value:function(t){for(var e=t.length-1;e>=0;--e){var n=t[e],r=t[e+1];n.zeroLength?t.splice(e,1):r&&r.isDash===n.isDash&&(r.left=n.left,t.splice(e,1))}var i=t[0],a=t[t.length-1];i.isDash===a.isDash&&(i.left=a.left-this.width,a.right=i.right+this.width);for(var o=this.width*this.nextRow,s=0,A=t[s],u=0;u<this.width;u++){u/A.right>1&&(A=t[++s]);var l=Math.abs(u-A.left),c=Math.abs(u-A.right),h=Math.min(l,c);this.data[o+u]=Math.max(0,Math.min(255,(A.isDash?h:-h)+128))}}},{key:"addDash",value:function(e,n){var r=n?7:0,i=2*r+1;if(this.nextRow+i>this.height)return t.w("LineAtlas out of space"),null;for(var a=0,o=0;o<e.length;o++)a+=e[o];if(0!==a){var s=this.width/a,A=this.getDashRanges(e,this.width,s);n?this.addRoundDash(A,s,r):this.addRegularDash(A)}var u={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:a};return this.nextRow+=i,this.dirty=!0,u}},{key:"bind",value:function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,this.data))}}])}(),U=function(){function e(n,r,i){oi(this,e),this.workerPool=n,this.actors=[],this.currentActor=0,this.id=i;for(var a=this.workerPool.acquire(i),o=0;o<a.length;o++){var s=new t.C(a[o],r,i);s.name="Worker ".concat(o),this.actors.push(s)}if(!this.actors.length)throw new Error("No actors found")}return ai(e,[{key:"broadcast",value:function(e,n,r){t.o(this.actors,(function(t,r){t.send(e,n,r)}),r=r||function(){})}},{key:"getActor",value:function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}},{key:"remove",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.actors.forEach((function(t){t.remove()})),this.actors=[],t&&this.workerPool.release(this.id)}}])}();function S(e,n,r){var i=function(n,i){if(n)return r(n);if(i){var a=t.F(t.e(i,e),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);i.vector_layers&&(a.vectorLayers=i.vector_layers,a.vectorLayerIds=a.vectorLayers.map((function(t){return t.id}))),r(null,a)}};return e.url?t.f(n.transformRequest(e.url,o.Source),i):t.h.frame((function(){return i(null,e)}))}var Q=function(){function e(t,n){oi(this,e),t&&(n?this.setSouthWest(t).setNorthEast(n):Array.isArray(t)&&(4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1])))}return ai(e,[{key:"setNorthEast",value:function(e){return this._ne=e instanceof t.L?new t.L(e.lng,e.lat):t.L.convert(e),this}},{key:"setSouthWest",value:function(e){return this._sw=e instanceof t.L?new t.L(e.lng,e.lat):t.L.convert(e),this}},{key:"extend",value:function(n){var r,i,a=this._sw,o=this._ne;if(n instanceof t.L)r=n,i=n;else{if(!(n instanceof e))return Array.isArray(n)?4===n.length||n.every(Array.isArray)?this.extend(e.convert(n)):this.extend(t.L.convert(n)):n&&("lng"in n||"lon"in n)&&"lat"in n?this.extend(t.L.convert(n)):this;if(r=n._sw,i=n._ne,!r||!i)return this}return a||o?(a.lng=Math.min(r.lng,a.lng),a.lat=Math.min(r.lat,a.lat),o.lng=Math.max(i.lng,o.lng),o.lat=Math.max(i.lat,o.lat)):(this._sw=new t.L(r.lng,r.lat),this._ne=new t.L(i.lng,i.lat)),this}},{key:"getCenter",value:function(){return new t.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}},{key:"getSouthWest",value:function(){return this._sw}},{key:"getNorthEast",value:function(){return this._ne}},{key:"getNorthWest",value:function(){return new t.L(this.getWest(),this.getNorth())}},{key:"getSouthEast",value:function(){return new t.L(this.getEast(),this.getSouth())}},{key:"getWest",value:function(){return this._sw.lng}},{key:"getSouth",value:function(){return this._sw.lat}},{key:"getEast",value:function(){return this._ne.lng}},{key:"getNorth",value:function(){return this._ne.lat}},{key:"toArray",value:function(){return[this._sw.toArray(),this._ne.toArray()]}},{key:"toString",value:function(){return"LngLatBounds(".concat(this._sw.toString(),", ").concat(this._ne.toString(),")")}},{key:"isEmpty",value:function(){return!(this._sw&&this._ne)}},{key:"contains",value:function(e){var n=t.L.convert(e),r=n.lng,i=n.lat,a=this._sw.lng<=r&&r<=this._ne.lng;return this._sw.lng>this._ne.lng&&(a=this._sw.lng>=r&&r>=this._ne.lng),this._sw.lat<=i&&i<=this._ne.lat&&a}}],[{key:"convert",value:function(t){return t instanceof e?t:t?new e(t):t}},{key:"fromLngLat",value:function(n){var r=360*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)/40075017,i=r/Math.cos(Math.PI/180*n.lat);return new e(new t.L(n.lng-i,n.lat-r),new t.L(n.lng+i,n.lat+r))}}])}(),T=function(){function e(t,n,r){oi(this,e),this.bounds=Q.convert(this.validateBounds(t)),this.minzoom=n||0,this.maxzoom=r||24}return ai(e,[{key:"validateBounds",value:function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}},{key:"contains",value:function(e){var n=Math.pow(2,e.z),r=Math.floor(t.G(this.bounds.getWest())*n),i=Math.floor(t.H(this.bounds.getNorth())*n),a=Math.ceil(t.G(this.bounds.getEast())*n),o=Math.ceil(t.H(this.bounds.getSouth())*n);return e.x>=r&&e.x<a&&e.y>=i&&e.y<o}}])}(),M=function(e){function n(e,r,i,a){var o;if(oi(this,n),(o=gO(this,n)).load=function(){o._loaded=!1,o.fire(new t.k("dataloading",{dataType:"source"})),o._tileJSONRequest=S(o._options,o.map._requestManager,(function(e,n){o._tileJSONRequest=null,o._loaded=!0,o.map.style.sourceCaches[o.id].clearTiles(),e?o.fire(new t.j(e)):n&&(t.e(si(o),n),n.bounds&&(o.tileBounds=new T(n.bounds,o.minzoom,o.maxzoom)),o.fire(new t.k("data",{dataType:"source",sourceDataType:"metadata"})),o.fire(new t.k("data",{dataType:"source",sourceDataType:"content"})))}))},o.serialize=function(){return t.e({},o._options)},o.id=e,o.dispatcher=i,o.type="vector",o.minzoom=0,o.maxzoom=22,o.scheme="xyz",o.tileSize=512,o.reparseOverscaled=!0,o.isTileClipped=!0,o._loaded=!1,t.e(si(o),t.F(r,["url","scheme","tileSize","promoteId"])),o._options=t.e({type:"vector"},r),o._collectResourceTiming=r.collectResourceTiming,512!==o.tileSize)throw new Error("vector tile sources must have a tileSize of 512");return o.setEventedParent(a),si(o)}return ci(n,e),ai(n,[{key:"loaded",value:function(){return this._loaded}},{key:"hasTile",value:function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}},{key:"onAdd",value:function(t){this.map=t,this.load()}},{key:"setSourceProperty",value:function(t){this._tileJSONRequest&&this._tileJSONRequest.cancel(),t(),this.load()}},{key:"setTiles",value:function(t){var e=this;return this.setSourceProperty((function(){e._options.tiles=t})),this}},{key:"setUrl",value:function(t){var e=this;return this.setSourceProperty((function(){e.url=t,e._options.url=t})),this}},{key:"onRemove",value:function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}},{key:"loadTile",value:function(t,e){var n=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),r={request:this.map._requestManager.transformRequest(n,o.Tile),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function i(n,r){return delete t.request,t.aborted?e(null):n&&404!==n.status?e(n):(r&&r.resourceTiming&&(t.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&r&&t.setExpiryData(r),t.loadVectorData(r,this.map.painter),e(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}r.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state?"loading"===t.state?t.reloadCallback=e:t.request=t.actor.send("reloadTile",r,i.bind(this)):(t.actor=this.dispatcher.getActor(),t.request=t.actor.send("loadTile",r,i.bind(this)))}},{key:"abortTile",value:function(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)}},{key:"unloadTile",value:function(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)}},{key:"hasTransition",value:function(){return!1}}])}(t.E),D=function(e){function n(e,r,i,a){var o;return oi(this,n),(o=gO(this,n)).id=e,o.dispatcher=i,o.setEventedParent(a),o.type="raster",o.minzoom=0,o.maxzoom=22,o.roundZoom=!0,o.scheme="xyz",o.tileSize=512,o._loaded=!1,o._options=t.e({type:"raster"},r),t.e(si(o),t.F(r,["url","scheme","tileSize"])),o}return ci(n,e),ai(n,[{key:"load",value:function(){var e=this;this._loaded=!1,this.fire(new t.k("dataloading",{dataType:"source"})),this._tileJSONRequest=S(this._options,this.map._requestManager,(function(n,r){e._tileJSONRequest=null,e._loaded=!0,n?e.fire(new t.j(n)):r&&(t.e(e,r),r.bounds&&(e.tileBounds=new T(r.bounds,e.minzoom,e.maxzoom)),e.fire(new t.k("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.k("data",{dataType:"source",sourceDataType:"content"})))}))}},{key:"loaded",value:function(){return this._loaded}},{key:"onAdd",value:function(t){this.map=t,this.load()}},{key:"onRemove",value:function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}},{key:"setSourceProperty",value:function(t){this._tileJSONRequest&&this._tileJSONRequest.cancel(),t(),this.load()}},{key:"setTiles",value:function(t){var e=this;return this.setSourceProperty((function(){e._options.tiles=t})),this}},{key:"serialize",value:function(){return t.e({},this._options)}},{key:"hasTile",value:function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}},{key:"loadTile",value:function(t,e){var n=this,r=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);t.request=a.getImage(this.map._requestManager.transformRequest(r,o.Tile),(function(r,i,a){if(delete t.request,t.aborted)t.state="unloaded",e(null);else if(r)t.state="errored",e(r);else if(i){n.map._refreshExpiredTiles&&a&&t.setExpiryData(a);var o=n.map.painter.context,s=o.gl;t.texture=n.map.painter.getTileTexture(i.width),t.texture?t.texture.update(i,{useMipmap:!0}):(t.texture=new y(o,i,s.RGBA,{useMipmap:!0}),t.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),o.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,o.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,o.extTextureFilterAnisotropicMax)),t.state="loaded",e(null)}}),this.map._refreshExpiredTiles)}},{key:"abortTile",value:function(t,e){t.request&&(t.request.cancel(),delete t.request),e()}},{key:"unloadTile",value:function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()}},{key:"hasTransition",value:function(){return!1}}])}(t.E),L=function(e){function n(e,r,i,a){var o;return oi(this,n),(o=gO(this,n,[e,r,i,a])).type="raster-dem",o.maxzoom=22,o._options=t.e({type:"raster-dem"},r),o.encoding=r.encoding||"mapbox",o.redFactor=r.redFactor,o.greenFactor=r.greenFactor,o.blueFactor=r.blueFactor,o.baseShift=r.baseShift,o}return ci(n,e),ai(n,[{key:"loadTile",value:function(e,n){var r=this,i=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),s=this.map._requestManager.transformRequest(i,o.Tile);function A(t,r){t&&(e.state="errored",n(t)),r&&(e.dem=r,e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0,e.state="loaded",n(null))}e.neighboringTiles=this._getNeighboringTiles(e.tileID),e.request=a.getImage(s,(function(i,a,o){return t._(r,void 0,void 0,Qp.mark((function r(){var s,u;return Qp.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(delete e.request,!e.aborted){r.next=4;break}e.state="unloaded",n(null),r.next=20;break;case 4:if(!i){r.next=8;break}e.state="errored",n(i),r.next=20;break;case 8:if(!a){r.next=20;break}if(this.map._refreshExpiredTiles&&e.setExpiryData(o),!t.a(a)||!t.J()){r.next=14;break}r.t0=a,r.next=17;break;case 14:return r.next=16,function(e){return t._(this,void 0,void 0,Qp.mark((function n(){var r,i;return Qp.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("undefined"==typeof VideoFrame||!t.K()){n.next=13;break}return r=e.width+2,i=e.height+2,n.prev=2,n.t0=t.R,n.t1={width:r,height:i},n.next=7,t.M(e,-1,-1,r,i);case 7:return n.t2=n.sent,n.abrupt("return",new n.t0(n.t1,n.t2));case 11:n.prev=11,n.t3=n.catch(2);case 13:return n.abrupt("return",t.h.getImageData(e,1));case 14:case"end":return n.stop()}}),n,null,[[2,11]])})))}(a);case 16:r.t0=r.sent;case 17:s=r.t0,u={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:s,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift},e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",u,A));case 20:case"end":return r.stop()}}),r,this)})))}),this.map._refreshExpiredTiles)}},{key:"_getNeighboringTiles",value:function(e){var n=e.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,a=0===n.x?e.wrap-1:e.wrap,o=(n.x+1+r)%r,s=n.x+1===r?e.wrap+1:e.wrap,A={};return A[new t.O(e.overscaledZ,a,n.z,i,n.y).key]={backfilled:!1},A[new t.O(e.overscaledZ,s,n.z,o,n.y).key]={backfilled:!1},n.y>0&&(A[new t.O(e.overscaledZ,a,n.z,i,n.y-1).key]={backfilled:!1},A[new t.O(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},A[new t.O(e.overscaledZ,s,n.z,o,n.y-1).key]={backfilled:!1}),n.y+1<r&&(A[new t.O(e.overscaledZ,a,n.z,i,n.y+1).key]={backfilled:!1},A[new t.O(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},A[new t.O(e.overscaledZ,s,n.z,o,n.y+1).key]={backfilled:!1}),A}},{key:"unloadTile",value:function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})}}])}(D),P=function(e){function n(e,r,i,a){var o;oi(this,n),(o=gO(this,n)).load=function(){o._updateWorkerData()},o.serialize=function(){return t.e({},o._options,{type:o.type,data:o._data})},o.id=e,o.type="geojson",o.minzoom=0,o.maxzoom=18,o.tileSize=512,o.isTileClipped=!0,o.reparseOverscaled=!0,o._removed=!1,o._pendingLoads=0,o.actor=i.getActor(),o.setEventedParent(a),o._data=r.data,o._options=t.e({},r),o._collectResourceTiming=r.collectResourceTiming,void 0!==r.maxzoom&&(o.maxzoom=r.maxzoom),r.type&&(o.type=r.type),r.attribution&&(o.attribution=r.attribution),o.promoteId=r.promoteId;var s=t.N/o.tileSize;return o.workerOptions=t.e({source:o.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*s,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*s,extent:t.N,maxZoom:o.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?r.clusterMaxZoom:o.maxzoom-1,minPoints:Math.max(2,r.clusterMinPoints||2),extent:t.N,radius:(r.clusterRadius||50)*s,log:!1,generateId:r.generateId||!1},clusterProperties:r.clusterProperties,filter:r.filter},r.workerOptions),"string"==typeof o.promoteId&&(o.workerOptions.promoteId=o.promoteId),o}return ci(n,e),ai(n,[{key:"onAdd",value:function(t){this.map=t,this.load()}},{key:"setData",value:function(t){return this._data=t,this._updateWorkerData(),this}},{key:"updateData",value:function(t){return this._updateWorkerData(t),this}},{key:"setClusterOptions",value:function(t){return this.workerOptions.cluster=t.cluster,t&&(void 0!==t.clusterRadius&&(this.workerOptions.superclusterOptions.radius=t.clusterRadius),void 0!==t.clusterMaxZoom&&(this.workerOptions.superclusterOptions.maxZoom=t.clusterMaxZoom)),this._updateWorkerData(),this}},{key:"getClusterExpansionZoom",value:function(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this}},{key:"getClusterChildren",value:function(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this}},{key:"getClusterLeaves",value:function(t,e,n,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:n},r),this}},{key:"_updateWorkerData",value:function(e){var n=this,r=t.e({},this.workerOptions);e?r.dataDiff=e:"string"==typeof this._data?(r.request=this.map._requestManager.transformRequest(t.h.resolveURL(this._data),o.Source),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new t.k("dataloading",{dataType:"source"})),this.actor.send("".concat(this.type,".loadData"),r,(function(e,r){if(n._pendingLoads--,n._removed||r&&r.abandoned)n.fire(new t.k("dataabort",{dataType:"source"}));else{var i=null;if(r&&r.resourceTiming&&r.resourceTiming[n.id]&&(i=r.resourceTiming[n.id].slice(0)),e)n.fire(new t.j(e));else{var a={dataType:"source"};n._collectResourceTiming&&i&&i.length>0&&t.e(a,{resourceTiming:i}),n.fire(new t.k("data",Object.assign(Object.assign({},a),{sourceDataType:"metadata"}))),n.fire(new t.k("data",Object.assign(Object.assign({},a),{sourceDataType:"content"})))}}}))}},{key:"loaded",value:function(){return 0===this._pendingLoads}},{key:"loadTile",value:function(t,e){var n=this,r=t.actor?"reloadTile":"loadTile";t.actor=this.actor;var i={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};t.request=this.actor.send(r,i,(function(i,a){return delete t.request,t.unloadVectorData(),t.aborted?e(null):i?e(i):(t.loadVectorData(a,n.map.painter,"reloadTile"===r),e(null))}))}},{key:"abortTile",value:function(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0}},{key:"unloadTile",value:function(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}},{key:"onRemove",value:function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}},{key:"hasTransition",value:function(){return!1}}])}(t.E),O=t.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),R=function(e){function n(e,r,i,s){var A;return oi(this,n),(A=gO(this,n)).load=function(e,n){A._loaded=!1,A.fire(new t.k("dataloading",{dataType:"source"})),A.url=A.options.url,A._request=a.getImage(A.map._requestManager.transformRequest(A.url,o.Image),(function(r,i){A._request=null,A._loaded=!0,r?A.fire(new t.j(r)):i&&(A.image=i,e&&(A.coordinates=e),n&&n(),A._finishLoading())}))},A.prepare=function(){if(0!==Object.keys(A.tiles).length&&A.image){var e=A.map.painter.context,n=e.gl;A.boundsBuffer||(A.boundsBuffer=e.createVertexBuffer(A._boundsArray,O.members)),A.boundsSegments||(A.boundsSegments=t.S.simpleSegment(0,0,4,2)),A.texture||(A.texture=new y(e,A.image,n.RGBA),A.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));var r=!1;for(var i in A.tiles){var a=A.tiles[i];"loaded"!==a.state&&(a.state="loaded",a.texture=A.texture,r=!0)}r&&A.fire(new t.k("data",{dataType:"source",sourceDataType:"idle",sourceId:A.id}))}},A.serialize=function(){return{type:"image",url:A.options.url,coordinates:A.coordinates}},A.id=e,A.dispatcher=i,A.coordinates=r.coordinates,A.type="image",A.minzoom=0,A.maxzoom=22,A.tileSize=512,A.tiles={},A._loaded=!1,A.setEventedParent(s),A.options=r,A}return ci(n,e),ai(n,[{key:"loaded",value:function(){return this._loaded}},{key:"updateImage",value:function(t){var e=this;return t.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=t.url,this.load(t.coordinates,(function(){e.texture=null})),this):this}},{key:"_finishLoading",value:function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.k("data",{dataType:"source",sourceDataType:"metadata"})))}},{key:"onAdd",value:function(t){this.map=t,this.load()}},{key:"onRemove",value:function(){this._request&&(this._request.cancel(),this._request=null)}},{key:"setCoordinates",value:function(e){var n=this;this.coordinates=e;var r=e.map(t.U.fromLngLat);this.tileID=function(e){var n,r=1/0,i=1/0,a=-1/0,o=-1/0,s=pO(e);try{for(s.s();!(n=s.n()).done;){var A=n.value;r=Math.min(r,A.x),i=Math.min(i,A.y),a=Math.max(a,A.x),o=Math.max(o,A.y)}}catch(t){s.e(t)}finally{s.f()}var u=Math.max(a-r,o-i),l=Math.max(0,Math.floor(-Math.log(u)/Math.LN2)),c=Math.pow(2,l);return new t.W(l,Math.floor((r+a)/2*c),Math.floor((i+o)/2*c))}(r),this.minzoom=this.maxzoom=this.tileID.z;var i=r.map((function(t){return n.tileID.getTilePoint(t)._round()}));return this._boundsArray=new t.V,this._boundsArray.emplaceBack(i[0].x,i[0].y,0,0),this._boundsArray.emplaceBack(i[1].x,i[1].y,t.N,0),this._boundsArray.emplaceBack(i[3].x,i[3].y,0,t.N),this._boundsArray.emplaceBack(i[2].x,i[2].y,t.N,t.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.k("data",{dataType:"source",sourceDataType:"content"})),this}},{key:"loadTile",value:function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))}},{key:"hasTransition",value:function(){return!1}}])}(t.E),z=function(e){function n(e,r,i,a){var s;return oi(this,n),(s=gO(this,n,[e,r,i,a])).load=function(){s._loaded=!1;var e=s.options;s.urls=[];var n,r=pO(e.urls);try{for(r.s();!(n=r.n()).done;){var i=n.value;s.urls.push(s.map._requestManager.transformRequest(i,o.Source).url)}}catch(t){r.e(t)}finally{r.f()}t.X(s.urls,(function(e,n){s._loaded=!0,e?s.fire(new t.j(e)):n&&(s.video=n,s.video.loop=!0,s.video.addEventListener("playing",(function(){s.map.triggerRepaint()})),s.map&&s.video.play(),s._finishLoading())}))},s.prepare=function(){if(!(0===Object.keys(s.tiles).length||s.video.readyState<2)){var e=s.map.painter.context,n=e.gl;s.boundsBuffer||(s.boundsBuffer=e.createVertexBuffer(s._boundsArray,O.members)),s.boundsSegments||(s.boundsSegments=t.S.simpleSegment(0,0,4,2)),s.texture?s.video.paused||(s.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,s.video)):(s.texture=new y(e,s.video,n.RGBA),s.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));var r=!1;for(var i in s.tiles){var a=s.tiles[i];"loaded"!==a.state&&(a.state="loaded",a.texture=s.texture,r=!0)}r&&s.fire(new t.k("data",{dataType:"source",sourceDataType:"idle",sourceId:s.id}))}},s.serialize=function(){return{type:"video",urls:s.urls,coordinates:s.coordinates}},s.roundZoom=!0,s.type="video",s.options=r,s}return ci(n,e),ai(n,[{key:"pause",value:function(){this.video&&this.video.pause()}},{key:"play",value:function(){this.video&&this.video.play()}},{key:"seek",value:function(e){if(this.video){var n=this.video.seekable;e<n.start(0)||e>n.end(0)?this.fire(new t.j(new t.Y("sources.".concat(this.id),null,"Playback for this video can be set only between the ".concat(n.start(0)," and ").concat(n.end(0),"-second mark.")))):this.video.currentTime=e}}},{key:"getVideo",value:function(){return this.video}},{key:"onAdd",value:function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}},{key:"hasTransition",value:function(){return this.video&&!this.video.paused}}])}(R),H=function(e){function n(e,r,i,a){var o;return oi(this,n),(o=gO(this,n,[e,r,i,a])).load=function(){o._loaded=!0,o.canvas||(o.canvas=o.options.canvas instanceof HTMLCanvasElement?o.options.canvas:document.getElementById(o.options.canvas)),o.width=o.canvas.width,o.height=o.canvas.height,o._hasInvalidDimensions()?o.fire(new t.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(o.play=function(){this._playing=!0,this.map.triggerRepaint()},o.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},o._finishLoading())},o.prepare=function(){var e=!1;if(o.canvas.width!==o.width&&(o.width=o.canvas.width,e=!0),o.canvas.height!==o.height&&(o.height=o.canvas.height,e=!0),!o._hasInvalidDimensions()&&0!==Object.keys(o.tiles).length){var n=o.map.painter.context,r=n.gl;o.boundsBuffer||(o.boundsBuffer=n.createVertexBuffer(o._boundsArray,O.members)),o.boundsSegments||(o.boundsSegments=t.S.simpleSegment(0,0,4,2)),o.texture?(e||o._playing)&&o.texture.update(o.canvas,{premultiply:!0}):o.texture=new y(n,o.canvas,r.RGBA,{premultiply:!0});var i=!1;for(var a in o.tiles){var s=o.tiles[a];"loaded"!==s.state&&(s.state="loaded",s.texture=o.texture,i=!0)}i&&o.fire(new t.k("data",{dataType:"source",sourceDataType:"idle",sourceId:o.id}))}},o.serialize=function(){return{type:"canvas",coordinates:o.coordinates}},r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some((function(t){return!Array.isArray(t)||2!==t.length||t.some((function(t){return"number"!=typeof t}))}))||o.fire(new t.j(new t.Y("sources.".concat(e),null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):o.fire(new t.j(new t.Y("sources.".concat(e),null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&o.fire(new t.j(new t.Y("sources.".concat(e),null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof HTMLCanvasElement||o.fire(new t.j(new t.Y("sources.".concat(e),null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):o.fire(new t.j(new t.Y("sources.".concat(e),null,'missing required property "canvas"'))),o.options=r,o.animate=void 0===r.animate||r.animate,o}return ci(n,e),ai(n,[{key:"getCanvas",value:function(){return this.canvas}},{key:"onAdd",value:function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}},{key:"onRemove",value:function(){this.pause()}},{key:"hasTransition",value:function(){return this._playing}},{key:"_hasInvalidDimensions",value:function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t++){var n=e[t];if(isNaN(n)||n<=0)return!0}return!1}}])}(R),V={},N=function(t){switch(t){case"geojson":return P;case"image":return R;case"raster":return D;case"raster-dem":return L;case"vector":return M;case"video":return z;case"canvas":return H}return V[t]};function K(e,n){var r=t.Z();return t.$(r,r,[1,1,0]),t.a0(r,r,[.5*e.width,.5*e.height,1]),t.a1(r,r,e.calculatePosMatrix(n.toUnwrapped()))}function G(t,e,n,r,i,a){var o=function(t,e,n){if(t){var r,i=pO(t);try{for(i.s();!(r=i.n()).done;){var a=e[r.value];if(a&&a.source===n&&"fill-extrusion"===a.type)return!0}}catch(t){i.e(t)}finally{i.f()}}else for(var o in e){var s=e[o];if(s.source===n&&"fill-extrusion"===s.type)return!0}return!1}(i&&i.layers,e,t.id),s=a.maxPitchScaleFactor(),A=t.tilesIn(r,s,o);A.sort(j);var u,l=[],c=pO(A);try{for(c.s();!(u=c.n()).done;){var h=u.value;l.push({wrappedTileID:h.tileID.wrapped().key,queryResults:h.tile.queryRenderedFeatures(e,n,t._state,h.queryGeometry,h.cameraQueryGeometry,h.scale,i,a,s,K(t.transform,h.tileID))})}}catch(t){c.e(t)}finally{c.f()}var f=function(t){var e,n={},r={},i=pO(t);try{for(i.s();!(e=i.n()).done;){var a=e.value,o=a.queryResults,s=a.wrappedTileID,A=r[s]=r[s]||{};for(var u in o){var l,c=o[u],h=A[u]=A[u]||{},f=n[u]=n[u]||[],d=pO(c);try{for(d.s();!(l=d.n()).done;){var p=l.value;h[p.featureIndex]||(h[p.featureIndex]=!0,f.push(p))}}catch(t){d.e(t)}finally{d.f()}}}}catch(t){i.e(t)}finally{i.f()}return n}(l);for(var d in f)f[d].forEach((function(e){var n=e.feature,r=t.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=r}));return f}function j(t,e){var n=t.tileID,r=e.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}var $=function(){function e(n,r){oi(this,e),this.timeAdded=0,this.fadeEndTime=0,this.tileID=n,this.uid=t.a2(),this.uses=0,this.tileSize=r,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}return ai(e,[{key:"registerFadeDuration",value:function(t){var e=t+this.timeAdded;e<this.fadeEndTime||(this.fadeEndTime=e)}},{key:"wasRequested",value:function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}},{key:"clearTextures",value:function(t){this.demTexture&&t.saveTileTexture(this.demTexture),this.demTexture=null}},{key:"loadVectorData",value:function(e,n,r){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var i in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(t,e){var n={};if(!e)return n;var r,i=pO(t);try{var a=function(){var t=r.value,i=t.layerIds.map((function(t){return e.getLayer(t)})).filter(Boolean);if(0!==i.length){t.layers=i,t.stateDependentLayerIds&&(t.stateDependentLayers=t.stateDependentLayerIds.map((function(t){return i.filter((function(e){return e.id===t}))[0]})));var a,o=pO(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;n[s.id]=t}}catch(t){o.e(t)}finally{o.f()}}};for(i.s();!(r=i.n()).done;)a()}catch(t){i.e(t)}finally{i.f()}return n}(e.buckets,n.style),this.hasSymbolBuckets=!1,this.buckets){var a=this.buckets[i];if(a instanceof t.a4){if(this.hasSymbolBuckets=!0,!r)break;a.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var o in this.buckets){var s=this.buckets[o];if(s instanceof t.a4&&s.hasRTLText){this.hasRTLText=!0,t.a5();break}}for(var A in this.queryPadding=0,this.buckets){var u=this.buckets[A];this.queryPadding=Math.max(this.queryPadding,n.style.getLayer(A).queryRadius(u))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new t.a3}},{key:"unloadVectorData",value:function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}},{key:"getBucket",value:function(t){return this.buckets[t.id]}},{key:"upload",value:function(t){for(var e in this.buckets){var n=this.buckets[e];n.uploadPending()&&n.upload(t)}var r=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new y(t,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new y(t,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)}},{key:"prepare",value:function(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}},{key:"queryRenderedFeatures",value:function(t,e,n,r,i,a,o,s,A,u){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:i,scale:a,tileSize:this.tileSize,pixelPosMatrix:u,transform:s,params:o,queryPadding:this.queryPadding*A},t,e,n):{}}},{key:"querySourceFeatures",value:function(e,n){var r=this.latestFeatureIndex;if(r&&r.rawTileData){var i=r.loadVTLayers(),a=n&&n.sourceLayer?n.sourceLayer:"",o=i._geojsonTileLayer||i[a];if(o)for(var s=t.a6(n&&n.filter),A=this.tileID.canonical,u=A.z,l=A.x,c=A.y,h={z:u,x:l,y:c},f=0;f<o.length;f++){var d=o.feature(f);if(s.needGeometry){var p=t.a7(d,!0);if(!s.filter(new t.a8(this.tileID.overscaledZ),p,this.tileID.canonical))continue}else if(!s.filter(new t.a8(this.tileID.overscaledZ),d))continue;var v=r.getId(d,a),g=new t.a9(d,u,l,c,v);g.tile=h,e.push(g)}}}},{key:"hasData",value:function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}},{key:"patternsLoaded",value:function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}},{key:"setExpiryData",value:function(e){var n=this.expirationTime;if(e.cacheControl){var r=t.aa(e.cacheControl);r["max-age"]&&(this.expirationTime=Date.now()+1e3*r["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var i=Date.now(),a=!1;if(this.expirationTime>i)a=!1;else if(n)if(this.expirationTime<n)a=!0;else{var o=this.expirationTime-n;o?this.expirationTime=i+Math.max(o,3e4):a=!0}else a=!0;a?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}},{key:"getExpiryTimeout",value:function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}},{key:"setFeatureState",value:function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var n=this.latestFeatureIndex.loadVTLayers();for(var r in this.buckets)if(e.style.hasLayer(r)){var i=this.buckets[r],a=i.layers[0].sourceLayer||"_geojsonTileLayer",o=n[a],s=t[a];if(o&&s&&0!==Object.keys(s).length){i.update(s,o,this.imageAtlas&&this.imageAtlas.patternPositions||{});var A=e&&e.style&&e.style.getLayer(r);A&&(this.queryPadding=Math.max(this.queryPadding,A.queryRadius(i)))}}}}},{key:"holdingForFade",value:function(){return void 0!==this.symbolFadeHoldUntil}},{key:"symbolFadeFinished",value:function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<t.h.now()}},{key:"clearFadeHold",value:function(){this.symbolFadeHoldUntil=void 0}},{key:"setHoldDuration",value:function(e){this.symbolFadeHoldUntil=t.h.now()+e}},{key:"setDependencies",value:function(t,e){var n,r={},i=pO(e);try{for(i.s();!(n=i.n()).done;)r[n.value]=!0}catch(t){i.e(t)}finally{i.f()}this.dependencies[t]=r}},{key:"hasDependency",value:function(t,e){var n,r=pO(t);try{for(r.s();!(n=r.n()).done;){var i=n.value,a=this.dependencies[i];if(a){var o,s=pO(e);try{for(s.s();!(o=s.n()).done;)if(a[o.value])return!0}catch(t){s.e(t)}finally{s.f()}}}}catch(t){r.e(t)}finally{r.f()}return!1}}])}(),W=function(){function t(e,n){oi(this,t),this.max=e,this.onRemove=n,this.reset()}return ai(t,[{key:"reset",value:function(){for(var t in this.data){var e,n=pO(this.data[t]);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}}catch(t){n.e(t)}finally{n.f()}}return this.data={},this.order=[],this}},{key:"add",value:function(t,e,n){var r=this,i=t.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);var a={value:e,timeout:void 0};if(void 0!==n&&(a.timeout=setTimeout((function(){r.remove(t,a)}),n)),this.data[i].push(a),this.order.push(i),this.order.length>this.max){var o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}},{key:"has",value:function(t){return t.wrapped().key in this.data}},{key:"getAndRemove",value:function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}},{key:"_getAndRemoveByKey",value:function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value}},{key:"getByKey",value:function(t){var e=this.data[t];return e?e[0].value:null}},{key:"get",value:function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}},{key:"remove",value:function(t,e){if(!this.has(t))return this;var n=t.wrapped().key,r=void 0===e?0:this.data[n].indexOf(e),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this}},{key:"setMaxSize",value:function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}},{key:"filter",value:function(t){var e=[];for(var n in this.data){var r,i=pO(this.data[n]);try{for(i.s();!(r=i.n()).done;){var a=r.value;t(a.value)||e.push(a)}}catch(t){i.e(t)}finally{i.f()}}for(var o=0,s=e;o<s.length;o++){var A=s[o];this.remove(A.value.tileID,A)}}}])}(),Z=function(){function e(){oi(this,e),this.state={},this.stateChanges={},this.deletedStates={}}return ai(e,[{key:"updateState",value:function(e,n,r){var i=String(n);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][i]=this.stateChanges[e][i]||{},t.e(this.stateChanges[e][i],r),null===this.deletedStates[e])for(var a in this.deletedStates[e]={},this.state[e])a!==i&&(this.deletedStates[e][a]=null);else if(this.deletedStates[e]&&null===this.deletedStates[e][i])for(var o in this.deletedStates[e][i]={},this.state[e][i])r[o]||(this.deletedStates[e][i][o]=null);else for(var s in r)this.deletedStates[e]&&this.deletedStates[e][i]&&null===this.deletedStates[e][i][s]&&delete this.deletedStates[e][i][s]}},{key:"removeFeatureState",value:function(t,e,n){if(null!==this.deletedStates[t]){var r=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},n&&void 0!==e)null!==this.deletedStates[t][r]&&(this.deletedStates[t][r]=this.deletedStates[t][r]||{},this.deletedStates[t][r][n]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][r])for(n in this.deletedStates[t][r]={},this.stateChanges[t][r])this.deletedStates[t][r][n]=null;else this.deletedStates[t][r]=null;else this.deletedStates[t]=null}}},{key:"getState",value:function(e,n){var r=String(n),i=t.e({},(this.state[e]||{})[r],(this.stateChanges[e]||{})[r]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){var a=this.deletedStates[e][n];if(null===a)return{};for(var o in a)delete i[o]}return i}},{key:"initializeTileState",value:function(t,e){t.setFeatureState(this.state,e)}},{key:"coalesceChanges",value:function(e,n){var r={};for(var i in this.stateChanges){this.state[i]=this.state[i]||{};var a={};for(var o in this.stateChanges[i])this.state[i][o]||(this.state[i][o]={}),t.e(this.state[i][o],this.stateChanges[i][o]),a[o]=this.state[i][o];r[i]=a}for(var s in this.deletedStates){this.state[s]=this.state[s]||{};var A={};if(null===this.deletedStates[s])for(var u in this.state[s])A[u]={},this.state[s][u]={};else for(var l in this.deletedStates[s]){if(null===this.deletedStates[s][l])this.state[s][l]={};else for(var c=0,h=Object.keys(this.deletedStates[s][l]);c<h.length;c++){var f=h[c];delete this.state[s][l][f]}A[l]=this.state[s][l]}r[s]=r[s]||{},t.e(r[s],A)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(var d in e)e[d].setFeatureState(r,n)}}])}(),q=function(e){function n(t,e,r){var i;return oi(this,n),(i=gO(this,n)).id=t,i.dispatcher=r,i.on("data",(function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(i._sourceLoaded=!0),i._sourceLoaded&&!i._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(i.reload(),i.transform&&i.update(i.transform,i.terrain),i._didEmitContent=!0)})),i.on("dataloading",(function(){i._sourceErrored=!1})),i.on("error",(function(){i._sourceErrored=i._source.loaded()})),i._source=function(t,e,n,r){var i=new(N(e.type))(t,e,n,r);if(i.id!==t)throw new Error("Expected Source id to be ".concat(t," instead of ").concat(i.id));return i}(t,e,r,si(i)),i._tiles={},i._cache=new W(0,i._unloadTile.bind(si(i))),i._timers={},i._cacheTimers={},i._maxTileCacheSize=null,i._maxTileCacheZoomLevels=null,i._loadedParentTiles={},i._coveredTiles={},i._state=new Z,i._didEmitContent=!1,i._updated=!1,i}return ci(n,e),ai(n,[{key:"onAdd",value:function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._maxTileCacheZoomLevels=t?t._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(t)}},{key:"onRemove",value:function(t){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(t)}},{key:"loaded",value:function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;if(!(void 0===this.used&&void 0===this.usedForTerrain||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0}},{key:"getSource",value:function(){return this._source}},{key:"pause",value:function(){this._paused=!0}},{key:"resume",value:function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}}},{key:"_loadTile",value:function(t,e){return this._source.loadTile(t,e)}},{key:"_unloadTile",value:function(t){if(this._source.unloadTile)return this._source.unloadTile(t,(function(){}))}},{key:"_abortTile",value:function(e){this._source.abortTile&&this._source.abortTile(e,(function(){})),this._source.fire(new t.k("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}},{key:"serialize",value:function(){return this._source.serialize()}},{key:"prepare",value:function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var n=this._tiles[e];n.upload(t),n.prepare(this.map.style.imageManager)}}},{key:"getIds",value:function(){return Object.values(this._tiles).map((function(t){return t.tileID})).sort(X).map((function(t){return t.key}))}},{key:"getRenderableIds",value:function(e){var n=this,r=[];for(var i in this._tiles)this._isIdRenderable(i,e)&&r.push(this._tiles[i]);return e?r.sort((function(e,r){var i=e.tileID,a=r.tileID,o=new t.P(i.canonical.x,i.canonical.y)._rotate(n.transform.angle),s=new t.P(a.canonical.x,a.canonical.y)._rotate(n.transform.angle);return i.overscaledZ-a.overscaledZ||s.y-o.y||s.x-o.x})).map((function(t){return t.tileID.key})):r.map((function(t){return t.tileID})).sort(X).map((function(t){return t.key}))}},{key:"hasRenderableParent",value:function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)}},{key:"_isIdRenderable",value:function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())}},{key:"reload",value:function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")}},{key:"_reloadTile",value:function(t,e){var n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))}},{key:"_tileLoaded",value:function(e,n,r,i){if(i)return e.state="errored",void(404!==i.status?this._source.fire(new t.j(i,{tile:e})):this.update(this.transform,this.terrain));e.timeAdded=t.h.now(),"expired"===r&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(n,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new t.k("data",{dataType:"source",tile:e,coord:e.tileID}))}},{key:"_backfillDEM",value:function(t){for(var e=this.getRenderableIds(),n=0;n<e.length;n++){var r=e[n];if(t.neighboringTiles&&t.neighboringTiles[r]){var i=this.getTileByID(r);a(t,i),a(i,t)}}function a(t,e){t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0;var n=e.tileID.canonical.x-t.tileID.canonical.x,r=e.tileID.canonical.y-t.tileID.canonical.y,i=Math.pow(2,t.tileID.canonical.z),a=e.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,r),t.neighboringTiles&&t.neighboringTiles[a]&&(t.neighboringTiles[a].backfilled=!0)))}}},{key:"getTile",value:function(t){return this.getTileByID(t.key)}},{key:"getTileByID",value:function(t){return this._tiles[t]}},{key:"_retainLoadedChildren",value:function(t,e,n,r){for(var i in this._tiles){var a=this._tiles[i];if(!(r[i]||!a.hasData()||a.tileID.overscaledZ<=e||a.tileID.overscaledZ>n)){for(var o=a.tileID;a&&a.tileID.overscaledZ>e+1;){var s=a.tileID.scaledTo(a.tileID.overscaledZ-1);(a=this._tiles[s.key])&&a.hasData()&&(o=s)}for(var A=o;A.overscaledZ>e;)if(t[(A=A.scaledTo(A.overscaledZ-1)).key]){r[o.key]=o;break}}}}},{key:"findLoadedParent",value:function(t,e){if(t.key in this._loadedParentTiles){var n=this._loadedParentTiles[t.key];return n&&n.tileID.overscaledZ>=e?n:null}for(var r=t.overscaledZ-1;r>=e;r--){var i=t.scaledTo(r),a=this._getLoadedTile(i);if(a)return a}}},{key:"_getLoadedTile",value:function(t){var e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(t.wrapped().key)}},{key:"updateCacheSize",value:function(e){var n=Math.ceil(e.width/this._source.tileSize)+1,r=Math.ceil(e.height/this._source.tileSize)+1,i=Math.floor(n*r*(null===this._maxTileCacheZoomLevels?t.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),a="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,i):i;this._cache.setMaxSize(a)}},{key:"handleWrapJump",value:function(t){var e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){var n={};for(var r in this._tiles){var i=this._tiles[r];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+e),n[i.tileID.key]=i}for(var a in this._tiles=n,this._timers)clearTimeout(this._timers[a]),delete this._timers[a];for(var o in this._tiles)this._setTileReloadTimer(o,this._tiles[o])}}},{key:"update",value:function(e,r){var i=this;if(this.transform=e,this.terrain=r,this._sourceLoaded&&!this._paused){var a;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?a=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(e){return new t.O(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)})):(a=e.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:r}),this._source.hasTile&&(a=a.filter((function(t){return i._source.hasTile(t)})))):a=[];var o=e.coveringZoomLevel(this._source),s=Math.max(o-n.maxOverzooming,this._source.minzoom),A=Math.max(o+n.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){var u,l={},c=pO(a);try{for(c.s();!(u=c.n()).done;){var h=u.value;if(h.canonical.z>this._source.minzoom){var f=h.scaledTo(h.canonical.z-1);l[f.key]=f;var d=h.scaledTo(Math.max(this._source.minzoom,Math.min(h.canonical.z,5)));l[d.key]=d}}}catch(t){c.e(t)}finally{c.f()}a=a.concat(Object.values(l))}var p=0===a.length&&!this._updated&&this._didEmitContent;this._updated=!0,p&&this.fire(new t.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));var v=this._updateRetainedTiles(a,o);if(Y(this._source.type)){for(var g={},m={},y=Object.keys(v),_=t.h.now(),w=0,x=y;w<x.length;w++){var b=x[w],B=v[b],k=this._tiles[b];if(k&&!(0!==k.fadeEndTime&&k.fadeEndTime<=_)){var C=this.findLoadedParent(B,s);C&&(this._addTile(C.tileID),g[C.tileID.key]=C.tileID),m[b]=B}}for(var F in this._retainLoadedChildren(m,o,A,v),g)v[F]||(this._coveredTiles[F]=!0,v[F]=g[F]);if(r){var E,I={},U={},S=pO(a);try{for(S.s();!(E=S.n()).done;){var Q=E.value;this._tiles[Q.key].hasData()?I[Q.key]=Q:U[Q.key]=Q}}catch(t){S.e(t)}finally{S.f()}for(var T in U){var M=U[T].children(this._source.maxzoom);this._tiles[M[0].key]&&this._tiles[M[1].key]&&this._tiles[M[2].key]&&this._tiles[M[3].key]&&(I[M[0].key]=v[M[0].key]=M[0],I[M[1].key]=v[M[1].key]=M[1],I[M[2].key]=v[M[2].key]=M[2],I[M[3].key]=v[M[3].key]=M[3],delete U[T])}for(var D in U){var L=this.findLoadedParent(U[D],this._source.minzoom);if(L)for(var P in I[L.tileID.key]=v[L.tileID.key]=L.tileID,I)I[P].isChildOf(L.tileID)&&delete I[P]}for(var O in this._tiles)I[O]||(this._coveredTiles[O]=!0)}}for(var R in v)this._tiles[R].clearFadeHold();var z,H=pO(t.ab(this._tiles,v));try{for(H.s();!(z=H.n()).done;){var V=z.value,N=this._tiles[V];N.hasSymbolBuckets&&!N.holdingForFade()?N.setHoldDuration(this.map._fadeDuration):N.hasSymbolBuckets&&!N.symbolFadeFinished()||this._removeTile(V)}}catch(t){H.e(t)}finally{H.f()}this._updateLoadedParentTileCache()}}},{key:"releaseSymbolFadeTiles",value:function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)}},{key:"_updateRetainedTiles",value:function(t,e){var r,i={},a={},o=Math.max(e-n.maxOverzooming,this._source.minzoom),s=Math.max(e+n.maxUnderzooming,this._source.minzoom),A={},u=pO(t);try{for(u.s();!(r=u.n()).done;){var l=r.value,c=this._addTile(l);i[l.key]=l,c.hasData()||e<this._source.maxzoom&&(A[l.key]=l)}}catch(t){u.e(t)}finally{u.f()}this._retainLoadedChildren(A,e,s,i);var h,f=pO(t);try{for(f.s();!(h=f.n()).done;){var d=h.value,p=this._tiles[d.key];if(!p.hasData()){if(e+1>this._source.maxzoom){var v=d.children(this._source.maxzoom)[0],g=this.getTile(v);if(g&&g.hasData()){i[v.key]=v;continue}}else{var m=d.children(this._source.maxzoom);if(i[m[0].key]&&i[m[1].key]&&i[m[2].key]&&i[m[3].key])continue}for(var y=p.wasRequested(),_=d.overscaledZ-1;_>=o;--_){var w=d.scaledTo(_);if(a[w.key])break;if(a[w.key]=!0,!(p=this.getTile(w))&&y&&(p=this._addTile(w)),p){var x=p.hasData();if((y||x)&&(i[w.key]=w),y=p.wasRequested(),x)break}}}}}catch(t){f.e(t)}finally{f.f()}return i}},{key:"_updateLoadedParentTileCache",value:function(){for(var t in this._loadedParentTiles={},this._tiles){for(var e=[],n=void 0,r=this._tiles[t].tileID;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){n=this._loadedParentTiles[r.key];break}e.push(r.key);var i=r.scaledTo(r.overscaledZ-1);if(n=this._getLoadedTile(i))break;r=i}for(var a=0,o=e;a<o.length;a++){var s=o[a];this._loadedParentTiles[s]=n}}}},{key:"_addTile",value:function(e){var n=this._tiles[e.key];if(n)return n;(n=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,n),n.tileID=e,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,n)));var r=n;return n||(n=new $(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(n,this._tileLoaded.bind(this,n,e.key,n.state))),n.uses++,this._tiles[e.key]=n,r||this._source.fire(new t.k("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n}},{key:"_setTileReloadTimer",value:function(t,e){var n=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var r=e.getExpiryTimeout();r&&(this._timers[t]=setTimeout((function(){n._reloadTile(t,"expired"),delete n._timers[t]}),r))}},{key:"_removeTile",value:function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))}},{key:"clearTiles",value:function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()}},{key:"tilesIn",value:function(e,n,r){var i=this,a=[],o=this.transform;if(!o)return a;var s,A=r?o.getCameraQueryGeometry(e):e,u=e.map((function(t){return o.pointCoordinate(t,i.terrain)})),l=A.map((function(t){return o.pointCoordinate(t,i.terrain)})),c=this.getIds(),h=1/0,f=1/0,d=-1/0,p=-1/0,v=pO(l);try{for(v.s();!(s=v.n()).done;){var g=s.value;h=Math.min(h,g.x),f=Math.min(f,g.y),d=Math.max(d,g.x),p=Math.max(p,g.y)}}catch(t){v.e(t)}finally{v.f()}for(var m=function(){var e=i._tiles[c[y]];if(e.holdingForFade())return 1;var r=e.tileID,s=Math.pow(2,o.zoom-e.tileID.overscaledZ),A=n*e.queryPadding*t.N/e.tileSize/s,v=[r.getTilePoint(new t.U(h,f)),r.getTilePoint(new t.U(d,p))];if(v[0].x-A<t.N&&v[0].y-A<t.N&&v[1].x+A>=0&&v[1].y+A>=0){var g=u.map((function(t){return r.getTilePoint(t)})),m=l.map((function(t){return r.getTilePoint(t)}));a.push({tile:e,tileID:r,queryGeometry:g,cameraQueryGeometry:m,scale:s})}},y=0;y<c.length;y++)m();return a}},{key:"getVisibleCoordinates",value:function(t){var e,n=this,r=this.getRenderableIds(t).map((function(t){return n._tiles[t].tileID})),i=pO(r);try{for(i.s();!(e=i.n()).done;){var a=e.value;a.posMatrix=this.transform.calculatePosMatrix(a.toUnwrapped())}}catch(t){i.e(t)}finally{i.f()}return r}},{key:"hasTransition",value:function(){if(this._source.hasTransition())return!0;if(Y(this._source.type)){var e=t.h.now();for(var n in this._tiles)if(this._tiles[n].fadeEndTime>=e)return!0}return!1}},{key:"setFeatureState",value:function(t,e,n){this._state.updateState(t=t||"_geojsonTileLayer",e,n)}},{key:"removeFeatureState",value:function(t,e,n){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,n)}},{key:"getFeatureState",value:function(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)}},{key:"setDependencies",value:function(t,e,n){var r=this._tiles[t];r&&r.setDependencies(e,n)}},{key:"reloadTilesForDependencies",value:function(t,e){for(var n in this._tiles)this._tiles[n].hasDependency(t,e)&&this._reloadTile(n,"reloading");this._cache.filter((function(n){return!n.hasDependency(t,e)}))}}])}(t.E);function X(t,e){var n=Math.abs(2*t.wrap)-+(t.wrap<0),r=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||r-n||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function Y(t){return"raster"===t||"image"===t||"video"===t}q.maxOverzooming=10,q.maxUnderzooming=3;var J,tt="mapboxgl_preloaded_worker_pool",et=function(){function e(){oi(this,e),this.active={}}return ai(e,[{key:"acquire",value:function(n){if(!this.workers)for(this.workers=[];this.workers.length<e.workerCount;)this.workers.push(new Worker(t.c.WORKER_URL));return this.active[n]=!0,this.workers.slice()}},{key:"release",value:function(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach((function(t){t.terminate()})),this.workers=null)}},{key:"isPreloaded",value:function(){return!!this.active[tt]}},{key:"numActive",value:function(){return Object.keys(this.active).length}}])}(),nt=Math.floor(t.h.hardwareConcurrency/2);function rt(){return J||(J=new et),J}et.workerCount=t.ac(globalThis)?Math.max(Math.min(nt,3),1):1;var it=function(){function e(t,n){oi(this,e),this.reset(t,n)}return ai(e,[{key:"reset",value:function(t,e){this.points=t||[],this._distances=[0];for(var n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding}},{key:"lerp",value:function(e){if(1===this.points.length)return this.points[0];e=t.ad(e,0,1);for(var n=1,r=this._distances[n],i=e*this.paddedLength+this.padding;r<i&&n<this._distances.length;)r=this._distances[++n];var a=n-1,o=this._distances[a],s=r-o,A=s>0?(i-o)/s:0;return this.points[a].mult(1-A).add(this.points[n].mult(A))}}])}();function at(t,e){var n=!0;return"always"===t||"never"!==t&&"never"!==e||(n=!1),n}var ot=function(){function t(e,n,r){oi(this,t);var i=this.boxCells=[],a=this.circleCells=[];this.xCellCount=Math.ceil(e/r),this.yCellCount=Math.ceil(n/r);for(var o=0;o<this.xCellCount*this.yCellCount;o++)i.push([]),a.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=n,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/n,this.boxUid=0,this.circleUid=0}return ai(t,[{key:"keysLength",value:function(){return this.boxKeys.length+this.circleKeys.length}},{key:"insert",value:function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}},{key:"insertCircle",value:function(t,e,n,r){this._forEachCell(e-r,n-r,e+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(r)}},{key:"_insertBoxCell",value:function(t,e,n,r,i,a){this.boxCells[i].push(a)}},{key:"_insertCircleCell",value:function(t,e,n,r,i,a){this.circleCells[i].push(a)}},{key:"_query",value:function(t,e,n,r,i,a,o){if(n<0||t>this.width||r<0||e>this.height)return[];var s=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=r){if(i)return[{key:null,x1:t,y1:e,x2:n,y2:r}];for(var A=0;A<this.boxKeys.length;A++)s.push({key:this.boxKeys[A],x1:this.bboxes[4*A],y1:this.bboxes[4*A+1],x2:this.bboxes[4*A+2],y2:this.bboxes[4*A+3]});for(var u=0;u<this.circleKeys.length;u++){var l=this.circles[3*u],c=this.circles[3*u+1],h=this.circles[3*u+2];s.push({key:this.circleKeys[u],x1:l-h,y1:c-h,x2:l+h,y2:c+h})}}else this._forEachCell(t,e,n,r,this._queryCell,s,{hitTest:i,overlapMode:a,seenUids:{box:{},circle:{}}},o);return s}},{key:"query",value:function(t,e,n,r){return this._query(t,e,n,r,!1,null)}},{key:"hitTest",value:function(t,e,n,r,i,a){return this._query(t,e,n,r,!0,i,a).length>0}},{key:"hitTestCircle",value:function(t,e,n,r,i){var a=t-n,o=t+n,s=e-n,A=e+n;if(o<0||a>this.width||A<0||s>this.height)return!1;var u=[];return this._forEachCell(a,s,o,A,this._queryCellCircle,u,{hitTest:!0,overlapMode:r,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}},i),u.length>0}},{key:"_queryCell",value:function(t,e,n,r,i,a,o,s){var A=o.seenUids,u=o.hitTest,l=o.overlapMode,c=this.boxCells[i];if(null!==c){var h,f=this.bboxes,d=pO(c);try{for(d.s();!(h=d.n()).done;){var p=h.value;if(!A.box[p]){A.box[p]=!0;var v=4*p,g=this.boxKeys[p];if(t<=f[v+2]&&e<=f[v+3]&&n>=f[v+0]&&r>=f[v+1]&&(!s||s(g))&&(!u||!at(l,g.overlapMode))&&(a.push({key:g,x1:f[v],y1:f[v+1],x2:f[v+2],y2:f[v+3]}),u))return!0}}}catch(t){d.e(t)}finally{d.f()}}var m=this.circleCells[i];if(null!==m){var y,_=this.circles,w=pO(m);try{for(w.s();!(y=w.n()).done;){var x=y.value;if(!A.circle[x]){A.circle[x]=!0;var b=3*x,B=this.circleKeys[x];if(this._circleAndRectCollide(_[b],_[b+1],_[b+2],t,e,n,r)&&(!s||s(B))&&(!u||!at(l,B.overlapMode))){var k=_[b],C=_[b+1],F=_[b+2];if(a.push({key:B,x1:k-F,y1:C-F,x2:k+F,y2:C+F}),u)return!0}}}}catch(t){w.e(t)}finally{w.f()}}return!1}},{key:"_queryCellCircle",value:function(t,e,n,r,i,a,o,s){var A=o.circle,u=o.seenUids,l=o.overlapMode,c=this.boxCells[i];if(null!==c){var h,f=this.bboxes,d=pO(c);try{for(d.s();!(h=d.n()).done;){var p=h.value;if(!u.box[p]){u.box[p]=!0;var v=4*p,g=this.boxKeys[p];if(this._circleAndRectCollide(A.x,A.y,A.radius,f[v+0],f[v+1],f[v+2],f[v+3])&&(!s||s(g))&&!at(l,g.overlapMode))return a.push(!0),!0}}}catch(t){d.e(t)}finally{d.f()}}var m=this.circleCells[i];if(null!==m){var y,_=this.circles,w=pO(m);try{for(w.s();!(y=w.n()).done;){var x=y.value;if(!u.circle[x]){u.circle[x]=!0;var b=3*x,B=this.circleKeys[x];if(this._circlesCollide(_[b],_[b+1],_[b+2],A.x,A.y,A.radius)&&(!s||s(B))&&!at(l,B.overlapMode))return a.push(!0),!0}}}catch(t){w.e(t)}finally{w.f()}}}},{key:"_forEachCell",value:function(t,e,n,r,i,a,o,s){for(var A=this._convertToXCellCoord(t),u=this._convertToYCellCoord(e),l=this._convertToXCellCoord(n),c=this._convertToYCellCoord(r),h=A;h<=l;h++)for(var f=u;f<=c;f++)if(i.call(this,t,e,n,r,this.xCellCount*f+h,a,o,s))return}},{key:"_convertToXCellCoord",value:function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}},{key:"_convertToYCellCoord",value:function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}},{key:"_circlesCollide",value:function(t,e,n,r,i,a){var o=r-t,s=i-e,A=n+a;return A*A>o*o+s*s}},{key:"_circleAndRectCollide",value:function(t,e,n,r,i,a,o){var s=(a-r)/2,A=Math.abs(t-(r+s));if(A>s+n)return!1;var u=(o-i)/2,l=Math.abs(e-(i+u));if(l>u+n)return!1;if(A<=s||l<=u)return!0;var c=A-s,h=l-u;return c*c+h*h<=n*n}}])}();function st(e,n,r,i,a){var o=t.Z();return n?(t.a0(o,o,[1/a,1/a,1]),r||t.ae(o,o,i.angle)):t.a1(o,i.labelPlaneMatrix,e),o}function At(e,n,r,i,a){if(n){var o=t.af(e);return t.a0(o,o,[a,a,1]),r||t.ae(o,o,-i.angle),o}return i.glCoordMatrix}function ut(e,n,r){var i;r?(i=[e.x,e.y,r(e.x,e.y),1],t.ag(i,i,n)):bt(i=[e.x,e.y,0,1],i,n);var a=i[3];return{point:new t.P(i[0]/a,i[1]/a),signedDistanceFromCamera:a}}function lt(t,e){return.5+t/e*.5}function ct(t,e){var n=t[0]/t[3],r=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&r>=-e[1]&&r<=e[1]}function ht(e,n,r,i,a,o,s,A,u,l){var c=i?e.textSizeData:e.iconSizeData,h=t.ah(c,r.transform.zoom),f=[256/r.width*2+1,256/r.height*2+1],d=i?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;d.clear();for(var p=e.lineVertexArray,v=i?e.text.placedSymbolArray:e.icon.placedSymbolArray,g=r.transform.width/r.transform.height,m=!1,y=0;y<v.length;y++){var _=v.get(y);if(_.hidden||_.writingMode===t.ai.vertical&&!m)xt(_.numGlyphs,d);else{var w=void 0;if(m=!1,l?(w=[_.anchorX,_.anchorY,l(_.anchorX,_.anchorY),1],t.ag(w,w,n)):bt(w=[_.anchorX,_.anchorY,0,1],w,n),ct(w,f)){var x=lt(r.transform.cameraToCenterDistance,w[3]),b=t.aj(c,h,_),B=s?b/x:b*x,k=new t.P(_.anchorX,_.anchorY),C=ut(k,a,l).point,F={projections:{},offsets:{}},E=pt(_,B,!1,A,n,a,o,e.glyphOffsetArray,p,d,C,k,F,g,u,l);m=E.useVertical,(E.notEnoughRoom||m||E.needsFlipping&&pt(_,B,!0,A,n,a,o,e.glyphOffsetArray,p,d,C,k,F,g,u,l).notEnoughRoom)&&xt(_.numGlyphs,d)}else xt(_.numGlyphs,d)}}i?e.text.dynamicLayoutVertexBuffer.updateData(d):e.icon.dynamicLayoutVertexBuffer.updateData(d)}function ft(t,e,n,r,i,a,o,s,A,u,l,c,h){var f=s.glyphStartIndex+s.numGlyphs,d=s.lineStartIndex,p=s.lineStartIndex+s.lineLength,v=e.getoffsetX(s.glyphStartIndex),g=e.getoffsetX(f-1),m=_t(t*v,n,r,i,a,o,s.segment,d,p,A,u,l,c,h);if(!m)return null;var y=_t(t*g,n,r,i,a,o,s.segment,d,p,A,u,l,c,h);return y?{first:m,last:y}:null}function dt(e,n,r,i){return e===t.ai.horizontal&&Math.abs(r.y-n.y)>Math.abs(r.x-n.x)*i?{useVertical:!0}:(e===t.ai.vertical?n.y<r.y:n.x>r.x)?{needsFlipping:!0}:null}function pt(e,n,r,i,a,o,s,A,u,l,c,h,f,d,p,v){var g,m=n/24,y=e.lineOffsetX*m,_=e.lineOffsetY*m;if(e.numGlyphs>1){var w=e.glyphStartIndex+e.numGlyphs,x=e.lineStartIndex,b=e.lineStartIndex+e.lineLength,B=ft(m,A,y,_,r,c,h,e,u,o,f,p,v);if(!B)return{notEnoughRoom:!0};var k=ut(B.first.point,s,v).point,C=ut(B.last.point,s,v).point;if(i&&!r){var F=dt(e.writingMode,k,C,d);if(F)return F}g=[B.first];for(var E=e.glyphStartIndex+1;E<w-1;E++)g.push(_t(m*A.getoffsetX(E),y,_,r,c,h,e.segment,x,b,u,o,f,p,v));g.push(B.last)}else{if(i&&!r){var I=ut(h,a,v).point,U=e.lineStartIndex+e.segment+1,S=new t.P(u.getx(U),u.gety(U)),Q=ut(S,a,v),T=Q.signedDistanceFromCamera>0?Q.point:vt(h,S,I,1,a,v),M=dt(e.writingMode,I,T,d);if(M)return M}var D=_t(m*A.getoffsetX(e.glyphStartIndex),y,_,r,c,h,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,u,o,f,p,v);if(!D)return{notEnoughRoom:!0};g=[D]}var L,P=pO(g);try{for(P.s();!(L=P.n()).done;){var O=L.value;t.ak(l,O.point,O.angle)}}catch(t){P.e(t)}finally{P.f()}return{}}function vt(t,e,n,r,i,a){var o=ut(t.add(t.sub(e)._unit()),i,a).point,s=n.sub(o);return n.add(s._mult(r/s.mag()))}function gt(e,n){var r=n.projectionCache,i=n.lineVertexArray,a=n.labelPlaneMatrix,o=n.tileAnchorPoint,s=n.distanceFromAnchor,A=n.getElevation,u=n.previousVertex,l=n.direction,c=n.absOffsetX;if(r.projections[e])return r.projections[e];var h=new t.P(i.getx(e),i.gety(e)),f=ut(h,a,A);if(f.signedDistanceFromCamera>0)return r.projections[e]=f.point,f.point;var d=e-l;return vt(0===s?o:new t.P(i.getx(d),i.gety(d)),h,u,c-s+1,a,A)}function mt(t,e,n){return t._unit()._perp()._mult(e*n)}function yt(e,n,r,i,a,o,s,A){var u=A.projectionCache,l=A.direction;if(u.offsets[e])return u.offsets[e];var c=r.add(n);if(e+l<i||e+l>=a)return u.offsets[e]=c,c;var h=gt(e+l,A),f=mt(h.sub(r),s,l),d=r.add(f),p=h.add(f);return u.offsets[e]=t.al(o,c,d,p)||c,u.offsets[e]}function _t(t,e,n,r,i,a,o,s,A,u,l,c,h,f){var d=r?t-e:t+e,p=d>0?1:-1,v=0;r&&(p*=-1,v=Math.PI),p<0&&(v+=Math.PI);for(var g,m,y,_=p>0?s+o:s+o+1,w=i,x=i,b=0,B=0,k=Math.abs(d),C=[];b+B<=k;){if((_+=p)<s||_>=A)return null;m=g;var F={projectionCache:c,lineVertexArray:u,labelPlaneMatrix:l,tileAnchorPoint:a,distanceFromAnchor:b+=B,getElevation:f,previousVertex:x=w,direction:p,absOffsetX:k};if(w=gt(_,F),0===n)C.push(x),y=w.sub(x);else{var E=void 0,I=w.sub(x);E=0===I.mag()?mt(gt(_+p,F).sub(w),n,p):mt(I,n,p),m||(m=x.add(E)),g=yt(_,E,w,s,A,m,n,F),C.push(m),y=g.sub(m)}B=y.mag()}var U=y._mult((k-b)/B)._add(m||x),S=v+Math.atan2(w.y-x.y,w.x-x.x);return C.push(U),{point:U,angle:h?S:0,path:C}}var wt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function xt(t,e){for(var n=0;n<t;n++){var r=e.length;e.resize(r+4),e.float32.set(wt,3*r)}}function bt(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t[3]=n[3]*r+n[7]*i+n[15],t}var Bt=100,kt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ot(t.width+200,t.height+200,25),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ot(t.width+200,t.height+200,25);oi(this,e),this.transform=t,this.grid=n,this.ignoredGrid=r,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+Bt,this.screenBottomBoundary=t.height+Bt,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.perspectiveRatioCutoff=.6}return ai(e,[{key:"placeCollisionBox",value:function(t,e,n,r,i,a){var o=this.projectAndGetPerspectiveRatio(r,t.anchorPointX,t.anchorPointY,a),s=n*o.perspectiveRatio,A=t.x1*s+o.point.x,u=t.y1*s+o.point.y,l=t.x2*s+o.point.x,c=t.y2*s+o.point.y;return!this.isInsideGrid(A,u,l,c)||"always"!==e&&this.grid.hitTest(A,u,l,c,e,i)||o.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[A,u,l,c],offscreen:this.isOffscreen(A,u,l,c)}}},{key:"placeCollisionCircles",value:function(e,n,r,i,a,o,s,A,u,l,c,h,f,d){var p=[],v=new t.P(n.anchorX,n.anchorY),g=ut(v,o,d),m=lt(this.transform.cameraToCenterDistance,g.signedDistanceFromCamera),y=(l?a/m:a*m)/t.ap,_=ut(v,s,d).point,w=ft(y,i,n.lineOffsetX*y,n.lineOffsetY*y,!1,_,v,n,r,s,{projections:{},offsets:{}},!1,d),x=!1,b=!1,B=!0;if(w){for(var k=.5*h*m+f,C=new t.P(-100,-100),F=new t.P(this.screenRightBoundary,this.screenBottomBoundary),E=new it,I=w.first,U=w.last,S=[],Q=I.path.length-1;Q>=1;Q--)S.push(I.path[Q]);for(var T=1;T<U.path.length;T++)S.push(U.path[T]);var M=2.5*k;if(A){var D=S.map((function(t){return ut(t,A,d)}));S=D.some((function(t){return t.signedDistanceFromCamera<=0}))?[]:D.map((function(t){return t.point}))}var L=[];if(S.length>0){for(var P=S[0].clone(),O=S[0].clone(),R=1;R<S.length;R++)P.x=Math.min(P.x,S[R].x),P.y=Math.min(P.y,S[R].y),O.x=Math.max(O.x,S[R].x),O.y=Math.max(O.y,S[R].y);L=P.x>=C.x&&O.x<=F.x&&P.y>=C.y&&O.y<=F.y?[S]:O.x<C.x||P.x>F.x||O.y<C.y||P.y>F.y?[]:t.am([S],C.x,C.y,F.x,F.y)}var z,H=pO(L);try{for(H.s();!(z=H.n()).done;){var V=z.value;E.reset(V,.25*k);var N=0;N=E.length<=.5*k?1:Math.ceil(E.paddedLength/M)+1;for(var K=0;K<N;K++){var G=K/Math.max(N-1,1),j=E.lerp(G),$=j.x+Bt,W=j.y+Bt;p.push($,W,k,0);var Z=$-k,q=W-k,X=$+k,Y=W+k;if(B=B&&this.isOffscreen(Z,q,X,Y),b=b||this.isInsideGrid(Z,q,X,Y),"always"!==e&&this.grid.hitTestCircle($,W,k,e,c)&&(x=!0,!u))return{circles:[],offscreen:!1,collisionDetected:x}}}}catch(t){H.e(t)}finally{H.f()}}return{circles:!u&&x||!b||m<this.perspectiveRatioCutoff?[]:p,offscreen:B,collisionDetected:x}}},{key:"queryRenderedSymbols",value:function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};var n,r=[],i=1/0,a=1/0,o=-1/0,s=-1/0,A=pO(e);try{for(A.s();!(n=A.n()).done;){var u=n.value,l=new t.P(u.x+Bt,u.y+Bt);i=Math.min(i,l.x),a=Math.min(a,l.y),o=Math.max(o,l.x),s=Math.max(s,l.y),r.push(l)}}catch(t){A.e(t)}finally{A.f()}var c,h={},f={},d=pO(this.grid.query(i,a,o,s).concat(this.ignoredGrid.query(i,a,o,s)));try{for(d.s();!(c=d.n()).done;){var p=c.value,v=p.key;if(void 0===h[v.bucketInstanceId]&&(h[v.bucketInstanceId]={}),!h[v.bucketInstanceId][v.featureIndex]){var g=[new t.P(p.x1,p.y1),new t.P(p.x2,p.y1),new t.P(p.x2,p.y2),new t.P(p.x1,p.y2)];t.an(r,g)&&(h[v.bucketInstanceId][v.featureIndex]=!0,void 0===f[v.bucketInstanceId]&&(f[v.bucketInstanceId]=[]),f[v.bucketInstanceId].push(v.featureIndex))}}}catch(t){d.e(t)}finally{d.f()}return f}},{key:"insertCollisionBox",value:function(t,e,n,r,i,a){(n?this.ignoredGrid:this.grid).insert({bucketInstanceId:r,featureIndex:i,collisionGroupID:a,overlapMode:e},t[0],t[1],t[2],t[3])}},{key:"insertCollisionCircles",value:function(t,e,n,r,i,a){for(var o=n?this.ignoredGrid:this.grid,s={bucketInstanceId:r,featureIndex:i,collisionGroupID:a,overlapMode:e},A=0;A<t.length;A+=4)o.insertCircle(s,t[A],t[A+1],t[A+2])}},{key:"projectAndGetPerspectiveRatio",value:function(e,n,r,i){var a;return i?(a=[n,r,i(n,r),1],t.ag(a,a,e)):bt(a=[n,r,0,1],a,e),{point:new t.P((a[0]/a[3]+1)/2*this.transform.width+Bt,(-a[1]/a[3]+1)/2*this.transform.height+Bt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/a[3]*.5}}},{key:"isOffscreen",value:function(t,e,n,r){return n<Bt||t>=this.screenRightBoundary||r<Bt||e>this.screenBottomBoundary}},{key:"isInsideGrid",value:function(t,e,n,r){return n>=0&&t<this.gridRightBoundary&&r>=0&&e<this.gridBottomBoundary}},{key:"getViewportMatrix",value:function(){var e=t.ao([]);return t.$(e,e,[-100,-100,0]),e}}])}();function Ct(e,n,r){return n*(t.N/(e.tileSize*Math.pow(2,r-e.tileID.overscaledZ)))}var Ft=function(){function t(e,n,r,i){oi(this,t),this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?n:-n))):i&&r?1:0,this.placed=r}return ai(t,[{key:"isHidden",value:function(){return 0===this.opacity&&!this.placed}}])}(),Et=function(){function t(e,n,r,i,a){oi(this,t),this.text=new Ft(e?e.text:null,n,r,a),this.icon=new Ft(e?e.icon:null,n,i,a)}return ai(t,[{key:"isHidden",value:function(){return this.text.isHidden()&&this.icon.isHidden()}}])}(),It=ai((function t(e,n,r){oi(this,t),this.text=e,this.icon=n,this.skipFade=r})),Ut=ai((function e(){oi(this,e),this.invProjMatrix=t.Z(),this.viewportMatrix=t.Z(),this.circles=[]})),St=ai((function t(e,n,r,i,a){oi(this,t),this.bucketInstanceId=e,this.featureIndex=n,this.sourceLayerIndex=r,this.bucketIndex=i,this.tileID=a})),Qt=function(){function t(e){oi(this,t),this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}return ai(t,[{key:"get",value:function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]}}])}();function Tt(e,n,r,i,a){var o=t.au(e),s=o.horizontalAlign,A=o.verticalAlign;return new t.P(-(s-.5)*n+i[0]*a,-(A-.5)*r+i[1]*a)}function Mt(e,n,r,i,a,o){var s=e.x1,A=e.x2,u=e.y1,l=e.y2,c=e.anchorPointX,h=e.anchorPointY,f=new t.P(n,r);return i&&f._rotate(a?o:-o),{x1:s+f.x,y1:u+f.y,x2:A+f.x,y2:l+f.y,anchorPointX:c,anchorPointY:h}}var Dt=function(){function e(t,n,r,i,a){oi(this,e),this.transform=t.clone(),this.terrain=n,this.collisionIndex=new kt(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=r,this.retainedQueryData={},this.collisionGroups=new Qt(i),this.collisionCircleArrays={},this.prevPlacement=a,a&&(a.prevPlacement=void 0),this.placedOrientations={}}return ai(e,[{key:"getBucketParts",value:function(e,n,r,i){var a=r.getBucket(n),o=r.latestFeatureIndex;if(a&&o&&n.id===a.layerIds[0]){var s=r.collisionBoxArray,A=a.layers[0].layout,u=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),l=r.tileSize/t.N,c=this.transform.calculatePosMatrix(r.tileID.toUnwrapped()),h="map"===A.get("text-pitch-alignment"),f="map"===A.get("text-rotation-alignment"),d=Ct(r,1,this.transform.zoom),p=st(c,h,f,this.transform,d),v=null;if(h){var g=At(c,h,f,this.transform,d);v=t.a1([],this.transform.labelPlaneMatrix,g)}this.retainedQueryData[a.bucketInstanceId]=new St(a.bucketInstanceId,o,a.sourceLayerIndex,a.index,r.tileID);var m={bucket:a,layout:A,posMatrix:c,textLabelPlaneMatrix:p,labelToScreenMatrix:v,scale:u,textPixelRatio:l,holdingForFade:r.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:t.ah(a.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(a.sourceID)};if(i){var y,_=pO(a.sortKeyRanges);try{for(_.s();!(y=_.n()).done;){var w=y.value,x=w.sortKey,b=w.symbolInstanceStart,B=w.symbolInstanceEnd;e.push({sortKey:x,symbolInstanceStart:b,symbolInstanceEnd:B,parameters:m})}}catch(t){_.e(t)}finally{_.f()}}else e.push({symbolInstanceStart:0,symbolInstanceEnd:a.symbolInstances.length,parameters:m})}}},{key:"attemptAnchorPlacement",value:function(e,n,r,i,a,o,s,A,u,l,c,h,f,d,p,v){var g=t.aq[e.textAnchor],m=[e.textOffset0,e.textOffset1],y=Tt(g,r,i,m,a),_=this.collisionIndex.placeCollisionBox(Mt(n,y.x,y.y,o,s,this.transform.angle),c,A,u,l.predicate,v);if((!p||0!==this.collisionIndex.placeCollisionBox(Mt(p,y.x,y.y,o,s,this.transform.angle),c,A,u,l.predicate,v).box.length)&&_.box.length>0){var w;if(this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(w=this.prevPlacement.variableOffsets[h.crossTileID].anchor),0===h.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[h.crossTileID]={textOffset:m,width:r,height:i,anchor:g,textBoxScale:a,prevAnchor:w},this.markUsedJustification(f,g,h,d),f.allowVerticalPlacement&&(this.markUsedOrientation(f,d,h),this.placedOrientations[h.crossTileID]=d),{shift:y,placedGlyphBoxes:_}}}},{key:"placeLayerBucketPart",value:function(e,n,r){var i=this,a=e.parameters,o=a.bucket,s=a.layout,A=a.posMatrix,u=a.textLabelPlaneMatrix,l=a.labelToScreenMatrix,c=a.textPixelRatio,h=a.holdingForFade,f=a.collisionBoxArray,d=a.partiallyEvaluatedTextSize,p=a.collisionGroup,v=s.get("text-optional"),g=s.get("icon-optional"),m=t.ar(s,"text-overlap","text-allow-overlap"),y="always"===m,_=t.ar(s,"icon-overlap","icon-allow-overlap"),w="always"===_,x="map"===s.get("text-rotation-alignment"),b="map"===s.get("text-pitch-alignment"),B="none"!==s.get("icon-text-fit"),k="viewport-y"===s.get("symbol-z-order"),C=y&&(w||!o.hasIconData()||g),F=w&&(y||!o.hasTextData()||v);!o.collisionArrays&&f&&o.deserializeCollisionBoxes(f);var E=this.retainedQueryData[o.bucketInstanceId].tileID,I=this.terrain?function(t,e){return i.terrain.getElevation(E,t,e)}:null,U=function(e,a){var f,w;if(!n[e.crossTileID])if(h)i.placements[e.crossTileID]=new It(!1,!1,!1);else{var k=!1,E=!1,U=!0,S=null,Q={box:null,offscreen:null},T={box:null,offscreen:null},M=null,D=null,L=null,P=0,O=0,R=0;a.textFeatureIndex?P=a.textFeatureIndex:e.useRuntimeCollisionCircles&&(P=e.featureIndex),a.verticalTextFeatureIndex&&(O=a.verticalTextFeatureIndex);var z=a.textBox;if(z){var H=function(n){var r=t.ai.horizontal;if(o.allowVerticalPlacement&&!n&&i.prevPlacement){var a=i.prevPlacement.placedOrientations[e.crossTileID];a&&(i.placedOrientations[e.crossTileID]=a,r=a,i.markUsedOrientation(o,r,e))}return r},V=function(n,r){if(o.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&a.verticalTextBox){var i,s=pO(o.writingModes);try{for(s.s();!(i=s.n()).done&&(i.value===t.ai.vertical?(Q=r(),T=Q):Q=n(),!(Q&&Q.box&&Q.box.length)););}catch(t){s.e(t)}finally{s.f()}}else Q=n()},N=e.textAnchorOffsetStartIndex,K=e.textAnchorOffsetEndIndex;if(K===N){var G=function(t,n){var r=i.collisionIndex.placeCollisionBox(t,m,c,A,p.predicate,I);return r&&r.box&&r.box.length&&(i.markUsedOrientation(o,n,e),i.placedOrientations[e.crossTileID]=n),r};V((function(){return G(z,t.ai.horizontal)}),(function(){var n=a.verticalTextBox;return o.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&n?G(n,t.ai.vertical):{box:null,offscreen:null}})),H(Q&&Q.box&&Q.box.length)}else{var j=t.aq[null===(w=null===(f=i.prevPlacement)||void 0===f?void 0:f.variableOffsets[e.crossTileID])||void 0===w?void 0:w.anchor],$=function(t,n,r){var a=t.x2-t.x1,s=t.y2-t.y1,u=e.textBoxScale,l=B&&"never"===_?n:null,h={box:[],offscreen:!1},f="never"===m?1:2,d="never";j&&f++;for(var v=0;v<f;v++){for(var g=N;g<K;g++){var y=o.textAnchorOffsets.get(g);if(!j||y.textAnchor===j){var w=i.attemptAnchorPlacement(y,t,a,s,u,x,b,c,A,p,d,e,o,r,l,I);if(w&&(h=w.placedGlyphBoxes)&&h.box&&h.box.length)return k=!0,S=w.shift,h}}j?j=null:d=m}return h};V((function(){return $(z,a.iconBox,t.ai.horizontal)}),(function(){var n=a.verticalTextBox;return o.allowVerticalPlacement&&!(Q&&Q.box&&Q.box.length)&&e.numVerticalGlyphVertices>0&&n?$(n,a.verticalIconBox,t.ai.vertical):{box:null,offscreen:null}})),Q&&(k=Q.box,U=Q.offscreen);var W=H(Q&&Q.box);if(!k&&i.prevPlacement){var Z=i.prevPlacement.variableOffsets[e.crossTileID];Z&&(i.variableOffsets[e.crossTileID]=Z,i.markUsedJustification(o,Z.anchor,e,W))}}}if(k=(M=Q)&&M.box&&M.box.length>0,U=M&&M.offscreen,e.useRuntimeCollisionCircles){var q=o.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),X=t.aj(o.textSizeData,d,q),Y=s.get("text-padding");(D=i.collisionIndex.placeCollisionCircles(m,q,o.lineVertexArray,o.glyphOffsetArray,X,A,u,l,r,b,p.predicate,e.collisionCircleDiameter,Y,I)).circles.length&&D.collisionDetected&&!r&&t.w("Collisions detected, but collision boxes are not shown"),k=y||D.circles.length>0&&!D.collisionDetected,U=U&&D.offscreen}if(a.iconFeatureIndex&&(R=a.iconFeatureIndex),a.iconBox){var J=function(t){var e=B&&S?Mt(t,S.x,S.y,x,b,i.transform.angle):t;return i.collisionIndex.placeCollisionBox(e,_,c,A,p.predicate,I)};E=T&&T.box&&T.box.length&&a.verticalIconBox?(L=J(a.verticalIconBox)).box.length>0:(L=J(a.iconBox)).box.length>0,U=U&&L.offscreen}var tt=v||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,et=g||0===e.numIconVertices;if(tt||et?et?tt||(E=E&&k):k=E&&k:E=k=E&&k,k&&M&&M.box&&i.collisionIndex.insertCollisionBox(M.box,m,s.get("text-ignore-placement"),o.bucketInstanceId,T&&T.box&&O?O:P,p.ID),E&&L&&i.collisionIndex.insertCollisionBox(L.box,_,s.get("icon-ignore-placement"),o.bucketInstanceId,R,p.ID),D&&(k&&i.collisionIndex.insertCollisionCircles(D.circles,m,s.get("text-ignore-placement"),o.bucketInstanceId,P,p.ID),r)){var nt=o.bucketInstanceId,rt=i.collisionCircleArrays[nt];void 0===rt&&(rt=i.collisionCircleArrays[nt]=new Ut);for(var it=0;it<D.circles.length;it+=4)rt.circles.push(D.circles[it+0]),rt.circles.push(D.circles[it+1]),rt.circles.push(D.circles[it+2]),rt.circles.push(D.collisionDetected?1:0)}if(0===e.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===o.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");i.placements[e.crossTileID]=new It(k||C,E||F,U||o.justReloaded),n[e.crossTileID]=!0}};if(k){if(0!==e.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");for(var S=o.getSortedSymbolIndexes(this.transform.angle),Q=S.length-1;Q>=0;--Q){var T=S[Q];U(o.symbolInstances.get(T),o.collisionArrays[T])}}else for(var M=e.symbolInstanceStart;M<e.symbolInstanceEnd;M++)U(o.symbolInstances.get(M),o.collisionArrays[M]);if(r&&o.bucketInstanceId in this.collisionCircleArrays){var D=this.collisionCircleArrays[o.bucketInstanceId];t.as(D.invProjMatrix,A),D.viewportMatrix=this.collisionIndex.getViewportMatrix()}o.justReloaded=!1}},{key:"markUsedJustification",value:function(e,n,r,i){var a;a=i===t.ai.vertical?r.verticalPlacedTextSymbolIndex:{left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex}[t.at(n)];for(var o=0,s=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex,r.verticalPlacedTextSymbolIndex];o<s.length;o++){var A=s[o];A>=0&&(e.text.placedSymbolArray.get(A).crossTileID=a>=0&&A!==a?0:r.crossTileID)}}},{key:"markUsedOrientation",value:function(e,n,r){for(var i=n===t.ai.horizontal||n===t.ai.horizontalOnly?n:0,a=n===t.ai.vertical?n:0,o=0,s=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex];o<s.length;o++){var A=s[o];e.text.placedSymbolArray.get(A).placedOrientation=i}r.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).placedOrientation=a)}},{key:"commit",value:function(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;var e=this.prevPlacement,n=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;var r=e?e.symbolFadeChange(t):1,i=e?e.opacities:{},a=e?e.variableOffsets:{},o=e?e.placedOrientations:{};for(var s in this.placements){var A=this.placements[s],u=i[s];u?(this.opacities[s]=new Et(u,r,A.text,A.icon),n=n||A.text!==u.text.placed||A.icon!==u.icon.placed):(this.opacities[s]=new Et(null,r,A.text,A.icon,A.skipFade),n=n||A.text||A.icon)}for(var l in i){var c=i[l];if(!this.opacities[l]){var h=new Et(c,r,!1,!1);h.isHidden()||(this.opacities[l]=h,n=n||c.text.placed||c.icon.placed)}}for(var f in a)this.variableOffsets[f]||!this.opacities[f]||this.opacities[f].isHidden()||(this.variableOffsets[f]=a[f]);for(var d in o)this.placedOrientations[d]||!this.opacities[d]||this.opacities[d].isHidden()||(this.placedOrientations[d]=o[d]);if(e&&void 0===e.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");n?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)}},{key:"updateLayerOpacities",value:function(t,e){var n,r={},i=pO(e);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=a.getBucket(t);o&&a.latestFeatureIndex&&t.id===o.layerIds[0]&&this.updateBucketOpacities(o,r,a.collisionBoxArray)}}catch(t){i.e(t)}finally{i.f()}}},{key:"updateBucketOpacities",value:function(e,n,r){var i=this;e.hasTextData()&&(e.text.opacityVertexArray.clear(),e.text.hasVisibleVertices=!1),e.hasIconData()&&(e.icon.opacityVertexArray.clear(),e.icon.hasVisibleVertices=!1),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();var a=e.layers[0],o=a.layout,s=new Et(null,0,!1,!1,!0),A=o.get("text-allow-overlap"),u=o.get("icon-allow-overlap"),l=a._unevaluatedLayout.hasValue("text-variable-anchor")||a._unevaluatedLayout.hasValue("text-variable-anchor-offset"),c="map"===o.get("text-rotation-alignment"),h="map"===o.get("text-pitch-alignment"),f="none"!==o.get("icon-text-fit"),d=new Et(null,0,A&&(u||!e.hasIconData()||o.get("icon-optional")),u&&(A||!e.hasTextData()||o.get("text-optional")),!0);!e.collisionArrays&&r&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(r);for(var p=function(t,e,n){for(var r=0;r<e/4;r++)t.opacityVertexArray.emplaceBack(n);t.hasVisibleVertices=t.hasVisibleVertices||n!==Gt},v=function(){var r=e.symbolInstances.get(g),a=r.numHorizontalGlyphVertices,o=r.numVerticalGlyphVertices,A=r.crossTileID,u=i.opacities[A];n[A]?u=s:u||(u=d,i.opacities[A]=u),n[A]=!0;var v=r.numIconVertices>0,m=i.placedOrientations[r.crossTileID],y=m===t.ai.vertical,_=m===t.ai.horizontal||m===t.ai.horizontalOnly;if(a>0||o>0){var w=Kt(u.text);p(e.text,a,y?Gt:w),p(e.text,o,_?Gt:w);var x=u.text.isHidden();[r.rightJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.leftJustifiedTextSymbolIndex].forEach((function(t){t>=0&&(e.text.placedSymbolArray.get(t).hidden=x||y?1:0)})),r.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).hidden=x||_?1:0);var b=i.variableOffsets[r.crossTileID];b&&i.markUsedJustification(e,b.anchor,r,m);var B=i.placedOrientations[r.crossTileID];B&&(i.markUsedJustification(e,"left",r,B),i.markUsedOrientation(e,B,r))}if(v){var k=Kt(u.icon),C=!(f&&r.verticalPlacedIconSymbolIndex&&y);r.placedIconSymbolIndex>=0&&(p(e.icon,r.numIconVertices,C?k:Gt),e.icon.placedSymbolArray.get(r.placedIconSymbolIndex).hidden=u.icon.isHidden()),r.verticalPlacedIconSymbolIndex>=0&&(p(e.icon,r.numVerticalIconVertices,C?Gt:k),e.icon.placedSymbolArray.get(r.verticalPlacedIconSymbolIndex).hidden=u.icon.isHidden())}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){var F=e.collisionArrays[g];if(F){var E=new t.P(0,0);if(F.textBox||F.verticalTextBox){var I=!0;if(l){var U=i.variableOffsets[A];U?(E=Tt(U.anchor,U.width,U.height,U.textOffset,U.textBoxScale),c&&E._rotate(h?i.transform.angle:-i.transform.angle)):I=!1}F.textBox&&Lt(e.textCollisionBox.collisionVertexArray,u.text.placed,!I||y,E.x,E.y),F.verticalTextBox&&Lt(e.textCollisionBox.collisionVertexArray,u.text.placed,!I||_,E.x,E.y)}var S=Boolean(!_&&F.verticalIconBox);F.iconBox&&Lt(e.iconCollisionBox.collisionVertexArray,u.icon.placed,S,f?E.x:0,f?E.y:0),F.verticalIconBox&&Lt(e.iconCollisionBox.collisionVertexArray,u.icon.placed,!S,f?E.x:0,f?E.y:0)}}},g=0;g<e.symbolInstances.length;g++)v();if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.text.opacityVertexArray.length!==e.text.layoutVertexArray.length/4)throw new Error("bucket.text.opacityVertexArray.length (= ".concat(e.text.opacityVertexArray.length,") !== bucket.text.layoutVertexArray.length (= ").concat(e.text.layoutVertexArray.length,") / 4"));if(e.icon.opacityVertexArray.length!==e.icon.layoutVertexArray.length/4)throw new Error("bucket.icon.opacityVertexArray.length (= ".concat(e.icon.opacityVertexArray.length,") !== bucket.icon.layoutVertexArray.length (= ").concat(e.icon.layoutVertexArray.length,") / 4"));if(e.bucketInstanceId in this.collisionCircleArrays){var m=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=m.invProjMatrix,e.placementViewportMatrix=m.viewportMatrix,e.collisionCircleArray=m.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}},{key:"symbolFadeChange",value:function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}},{key:"zoomAdjustment",value:function(t){return Math.max(0,(this.transform.zoom-t)/1.5)}},{key:"hasTransitions",value:function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}},{key:"stillRecent",value:function(t,e){var n=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*n>t}},{key:"setStale",value:function(){this.stale=!0}}])}();function Lt(t,e,n,r,i){t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0)}var Pt=Math.pow(2,25),Ot=Math.pow(2,24),Rt=Math.pow(2,17),zt=Math.pow(2,16),Ht=Math.pow(2,9),Vt=Math.pow(2,8),Nt=Math.pow(2,1);function Kt(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*Pt+e*Ot+n*Rt+e*zt+n*Ht+e*Vt+n*Nt+e}var Gt=0,jt=function(){function t(e){oi(this,t),this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&!e.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}return ai(t,[{key:"continuePlacement",value:function(t,e,n,r,i){for(var a=this._bucketParts;this._currentTileIndex<t.length;)if(e.getBucketParts(a,r,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,a.sort((function(t,e){return t.sortKey-e.sortKey})));this._currentPartIndex<a.length;)if(e.placeLayerBucketPart(a[this._currentPartIndex],this._seenCrossTileIDs,n),this._currentPartIndex++,i())return!0;return!1}}])}(),$t=function(){function e(t,n,r,i,a,o,s,A){oi(this,e),this.placement=new Dt(t,n,o,s,A),this._currentPlacementIndex=r.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=a,this._done=!1}return ai(e,[{key:"isDone",value:function(){return this._done}},{key:"continuePlacement",value:function(e,n,r){for(var i=this,a=t.h.now(),o=function(){return!i._forceFullPlacement&&t.h.now()-a>2};this._currentPlacementIndex>=0;){var s=n[e[this._currentPlacementIndex]],A=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=A)&&(!s.maxzoom||s.maxzoom>A)){if(this._inProgressLayer||(this._inProgressLayer=new jt(s)),this._inProgressLayer.continuePlacement(r[s.source],this.placement,this._showCollisionBoxes,s,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}},{key:"commit",value:function(t){return this.placement.commit(t),this.placement}}])}(),Wt=512/t.N/2,Zt=function(){function e(n,r,i){oi(this,e),this.tileID=n,this.bucketInstanceId=i,this._symbolsByKey={};for(var a=new Map,o=0;o<r.length;o++){var s=r.get(o),A=s.key,u=a.get(A);u?u.push(s):a.set(A,[s])}var l,c=pO(a);try{for(c.s();!(l=c.n()).done;){var h=gi(l.value,2),f=h[0],d=h[1],p={positions:d.map((function(t){return{x:Math.floor(t.anchorX*Wt),y:Math.floor(t.anchorY*Wt)}})),crossTileIDs:d.map((function(t){return t.crossTileID}))};if(p.positions.length>128){var v,g=new t.av(p.positions.length,16,Uint16Array),m=pO(p.positions);try{for(m.s();!(v=m.n()).done;){var y=v.value,_=y.x,w=y.y;g.add(_,w)}}catch(t){m.e(t)}finally{m.f()}g.finish(),delete p.positions,p.index=g}this._symbolsByKey[f]=p}}catch(t){c.e(t)}finally{c.f()}}return ai(e,[{key:"getScaledCoordinates",value:function(e,n){var r=this.tileID.canonical,i=r.x,a=r.y,o=r.z,s=n.canonical,A=s.x,u=s.y,l=s.z,c=Wt/Math.pow(2,l-o),h=(u*t.N+e.anchorY)*c,f=a*t.N*Wt;return{x:Math.floor((A*t.N+e.anchorX)*c-i*t.N*Wt),y:Math.floor(h-f)}}},{key:"findMatches",value:function(t,e,n){for(var r=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),i=0;i<t.length;i++){var a=t.get(i);if(!a.crossTileID){var o=this._symbolsByKey[a.key];if(o){var s=this.getScaledCoordinates(a,e);if(o.index){var A,u=pO(o.index.range(s.x-r,s.y-r,s.x+r,s.y+r).sort());try{for(u.s();!(A=u.n()).done;){var l=A.value,c=o.crossTileIDs[l];if(!n[c]){n[c]=!0,a.crossTileID=c;break}}}catch(t){u.e(t)}finally{u.f()}}else if(o.positions)for(var h=0;h<o.positions.length;h++){var f=o.positions[h],d=o.crossTileIDs[h];if(Math.abs(f.x-s.x)<=r&&Math.abs(f.y-s.y)<=r&&!n[d]){n[d]=!0,a.crossTileID=d;break}}}}}}},{key:"getCrossTileIDsLists",value:function(){return Object.values(this._symbolsByKey).map((function(t){return t.crossTileIDs}))}}])}(),qt=function(){function t(){oi(this,t),this.maxCrossTileID=0}return ai(t,[{key:"generate",value:function(){return++this.maxCrossTileID}}])}(),Xt=function(){function t(){oi(this,t),this.indexes={},this.usedCrossTileIDs={},this.lng=0}return ai(t,[{key:"handleWrapJump",value:function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var n in this.indexes){var r=this.indexes[n],i={};for(var a in r){var o=r[a];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+e),i[o.tileID.key]=o}this.indexes[n]=i}this.lng=t}},{key:"addBucket",value:function(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var r=0;r<e.symbolInstances.length;r++)e.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var i=this.usedCrossTileIDs[t.overscaledZ];for(var a in this.indexes){var o=this.indexes[a];if(Number(a)>t.overscaledZ)for(var s in o){var A=o[s];A.tileID.isChildOf(t)&&A.findMatches(e.symbolInstances,t,i)}else{var u=o[t.scaledTo(Number(a)).key];u&&u.findMatches(e.symbolInstances,t,i)}}for(var l=0;l<e.symbolInstances.length;l++){var c=e.symbolInstances.get(l);c.crossTileID||(c.crossTileID=n.generate(),i[c.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Zt(t,e.symbolInstances,e.bucketInstanceId),!0}},{key:"removeBucketCrossTileIDs",value:function(t,e){var n,r=pO(e.getCrossTileIDsLists());try{for(r.s();!(n=r.n()).done;){var i,a=pO(n.value);try{for(a.s();!(i=a.n()).done;){var o=i.value;delete this.usedCrossTileIDs[t][o]}}catch(t){a.e(t)}finally{a.f()}}}catch(t){r.e(t)}finally{r.f()}}},{key:"removeStaleBuckets",value:function(t){var e=!1;for(var n in this.indexes){var r=this.indexes[n];for(var i in r)t[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],e=!0)}return e}}])}(),Yt=function(){function t(){oi(this,t),this.layerIndexes={},this.crossTileIDs=new qt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}return ai(t,[{key:"addLayer",value:function(t,e,n){var r=this.layerIndexes[t.id];void 0===r&&(r=this.layerIndexes[t.id]=new Xt);var i=!1,a={};r.handleWrapJump(n);var o,s=pO(e);try{for(s.s();!(o=s.n()).done;){var A=o.value,u=A.getBucket(t);u&&t.id===u.layerIds[0]&&(u.bucketInstanceId||(u.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(A.tileID,u,this.crossTileIDs)&&(i=!0),a[u.bucketInstanceId]=!0)}}catch(t){s.e(t)}finally{s.f()}return r.removeStaleBuckets(a)&&(i=!0),i}},{key:"pruneUnusedLayers",value:function(t){var e={};for(var n in t.forEach((function(t){e[t]=!0})),this.layerIndexes)e[n]||delete this.layerIndexes[n]}}])}(),Jt=function(e,n){return t.x(e,n&&n.filter((function(t){return"source.canvas"!==t.identifier})))},te=t.F(t.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),ee=t.F(t.ax,["setCenter","setZoom","setBearing","setPitch"]),ne=t.aw(),re=function(e){function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};oi(this,n),(r=gO(this,n)).map=e,r.dispatcher=new U(rt(),si(r),e._getMapId()),r.imageManager=new w,r.imageManager.setEventedParent(si(r)),r.glyphManager=new k(e._requestManager,i.localIdeographFontFamily),r.lineAtlas=new I(256,512),r.crossTileSymbolIndex=new Yt,r._spritesImagesIds={},r._layers={},r._order=[],r.sourceCaches={},r.zoomHistory=new t.ay,r._loaded=!1,r._availableImages=[],r._resetUpdates(),r.dispatcher.broadcast("setReferrer",t.az());var a=r;return r._rtlTextPluginCallback=n.registerForPluginStateChange((function(e){a.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},(function(e,n){if(t.aA(e),n&&n.every((function(t){return t})))for(var r in a.sourceCaches){var i=a.sourceCaches[r].getSource().type;"vector"!==i&&"geojson"!==i||a.sourceCaches[r].reload()}}))})),r.on("data",(function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=r.sourceCaches[t.sourceId];if(e){var n=e.getSource();if(n&&n.vectorLayerIds)for(var i in r._layers){var a=r._layers[i];a.source===n.id&&r._validateLayer(a)}}}})),r}return ci(n,e),ai(n,[{key:"loadURL",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;this.fire(new t.k("dataloading",{dataType:"style"})),r.validate="boolean"!=typeof r.validate||r.validate;var a=this.map._requestManager.transformRequest(e,o.Style);this._request=t.f(a,(function(e,a){n._request=null,e?n.fire(new t.j(e)):a&&n._load(a,r,i)}))}},{key:"loadJSON",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;this.fire(new t.k("dataloading",{dataType:"style"})),this._request=t.h.frame((function(){n._request=null,r.validate=!1!==r.validate,n._load(e,r,i)}))}},{key:"loadEmpty",value:function(){this.fire(new t.k("dataloading",{dataType:"style"})),this._load(ne,{validate:!1})}},{key:"_load",value:function(e,n,r){var i,a=n.transformStyle?n.transformStyle(r,e):e;if(!n.validate||!Jt(this,t.y(a))){for(var o in this._loaded=!0,this.stylesheet=a,a.sources)this.addSource(o,a.sources[o],{validate:!1});a.sprite?this._loadSprite(a.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(a.glyphs),this._createLayers(),this.light=new E(this.stylesheet.light),this.map.setTerrain(null!==(i=this.stylesheet.terrain)&&void 0!==i?i:null),this.fire(new t.k("data",{dataType:"style"})),this.fire(new t.k("style.load"))}}},{key:"_createLayers",value:function(){var e=t.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",e),this._order=e.map((function(t){return t.id})),this._layers={},this._serializedLayers=null;var n,r=pO(e);try{for(r.s();!(n=r.n()).done;){var i=n.value,a=t.aC(i);a.setEventedParent(this,{layer:{id:i.id}}),this._layers[i.id]=a}}catch(t){r.e(t)}finally{r.f()}}},{key:"_loadSprite",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.imageManager.setLoaded(!1),this._spriteRequest=function(e,n,r,i){var s,A=g(e),u=A.length,l=r>1?"@2x":"",c={},h={},f={},d=pO(A);try{var p=function(){var e=s.value,r=e.id,A=e.url,d=n.transformRequest(n.normalizeSpriteURL(A,l,".json"),o.SpriteJSON),p="".concat(r,"_").concat(d.url);c[p]=t.f(d,(function(t,e){delete c[p],h[r]=e,m(i,h,f,t,u)}));var v=n.transformRequest(n.normalizeSpriteURL(A,l,".png"),o.SpriteImage),g="".concat(r,"_").concat(v.url);c[g]=a.getImage(v,(function(t,e){delete c[g],f[r]=e,m(i,h,f,t,u)}))};for(d.s();!(s=d.n()).done;)p()}catch(t){d.e(t)}finally{d.f()}return{cancel:function(){for(var t=0,e=Object.values(c);t<e.length;t++)e[t].cancel()}}}(e,this.map._requestManager,this.map.getPixelRatio(),(function(e,a){if(n._spriteRequest=null,e)n.fire(new t.j(e));else if(a)for(var o in a){n._spritesImagesIds[o]=[];var s,A=n._spritesImagesIds[o]?n._spritesImagesIds[o].filter((function(t){return!(t in a)})):[],u=pO(A);try{for(u.s();!(s=u.n()).done;){var l=s.value;n.imageManager.removeImage(l),n._changedImages[l]=!0}}catch(t){u.e(t)}finally{u.f()}for(var c in a[o]){var h="default"===o?c:"".concat(o,":").concat(c);n._spritesImagesIds[o].push(h),h in n.imageManager.images?n.imageManager.updateImage(h,a[o][c],!1):n.imageManager.addImage(h,a[o][c]),r&&(n._changedImages[h]=!0)}}n.imageManager.setLoaded(!0),n._availableImages=n.imageManager.listImages(),r&&(n._changed=!0),n.dispatcher.broadcast("setImages",n._availableImages),n.fire(new t.k("data",{dataType:"style"})),i&&i(e)}))}},{key:"_unloadSprite",value:function(){var e,n=pO(Object.values(this._spritesImagesIds).flat());try{for(n.s();!(e=n.n()).done;){var r=e.value;this.imageManager.removeImage(r),this._changedImages[r]=!0}}catch(t){n.e(t)}finally{n.f()}this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.k("data",{dataType:"style"}))}},{key:"_validateLayer",value:function(e){var n=this.sourceCaches[e.source];if(n){var r=e.sourceLayer;if(r){var i=n.getSource();("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(r))&&this.fire(new t.j(new Error('Source layer "'.concat(r,'" does not exist on source "').concat(i.id,'" as specified by style layer "').concat(e.id,'".'))))}}}},{key:"loaded",value:function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}},{key:"_serializeByIds",value:function(t){var e=this._serializedAllLayers();if(!t||0===t.length)return Object.values(e);var n,r=[],i=pO(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;e[a]&&r.push(e[a])}}catch(t){i.e(t)}finally{i.f()}return r}},{key:"_serializedAllLayers",value:function(){var t=this._serializedLayers;if(t)return t;t=this._serializedLayers={};for(var e=0,n=Object.keys(this._layers);e<n.length;e++){var r=n[e],i=this._layers[r];"custom"!==i.type&&(t[r]=i.serialize())}return t}},{key:"hasTransitions",value:function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}},{key:"_checkLoaded",value:function(){if(!this._loaded)throw new Error("Style is not done loading.")}},{key:"update",value:function(e){if(this._loaded){var n=this._changed;if(this._changed){var r=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);for(var a in(r.length||i.length)&&this._updateWorkerLayers(r,i),this._updatedSources){var o=this._updatedSources[a];if("reload"===o)this._reloadSource(a);else{if("clear"!==o)throw new Error("Invalid action ".concat(o));this._clearSource(a)}}for(var s in this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs(),this._updatedPaintProps)this._layers[s].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}var A={};for(var u in this.sourceCaches){var l=this.sourceCaches[u];A[u]=l.used,l.used=!1}var c,h=pO(this._order);try{for(h.s();!(c=h.n()).done;){var f=c.value,d=this._layers[f];d.recalculate(e,this._availableImages),!d.isHidden(e.zoom)&&d.source&&(this.sourceCaches[d.source].used=!0)}}catch(t){h.e(t)}finally{h.f()}for(var p in A){var v=this.sourceCaches[p];A[p]!==v.used&&v.fire(new t.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:p}))}this.light.recalculate(e),this.z=e.zoom,n&&this.fire(new t.k("data",{dataType:"style"}))}}},{key:"_updateTilesForChangedImages",value:function(){var t=Object.keys(this._changedImages);if(t.length){for(var e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}},{key:"_updateTilesForChangedGlyphs",value:function(){if(this._glyphsDidChange){for(var t in this.sourceCaches)this.sourceCaches[t].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}},{key:"_updateWorkerLayers",value:function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(t),removedIds:e})}},{key:"_resetUpdates",value:function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}},{key:"setState",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded();var r=this.serialize();if(e=n.transformStyle?n.transformStyle(r,e):e,Jt(this,t.y(e)))return!1;(e=t.aD(e)).layers=t.aB(e.layers);var i=t.aE(r,e).filter((function(t){return!(t.command in ee)}));if(0===i.length)return!1;var a=i.filter((function(t){return!(t.command in te)}));if(a.length>0)throw new Error("Unimplemented: ".concat(a.map((function(t){return t.command})).join(", "),"."));var o,s=pO(i);try{for(s.s();!(o=s.n()).done;){var A=o.value;"setTransition"!==A.command&&this[A.command].apply(this,A.args)}}catch(t){s.e(t)}finally{s.f()}return this.stylesheet=e,this._serializedLayers=null,!0}},{key:"addImage",value:function(e,n){if(this.getImage(e))return this.fire(new t.j(new Error('An image named "'.concat(e,'" already exists.'))));this.imageManager.addImage(e,n),this._afterImageUpdated(e)}},{key:"updateImage",value:function(t,e){this.imageManager.updateImage(t,e)}},{key:"getImage",value:function(t){return this.imageManager.getImage(t)}},{key:"removeImage",value:function(e){if(!this.getImage(e))return this.fire(new t.j(new Error('An image named "'.concat(e,'" does not exist.'))));this.imageManager.removeImage(e),this._afterImageUpdated(e)}},{key:"_afterImageUpdated",value:function(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.k("data",{dataType:"style"}))}},{key:"listImages",value:function(){return this._checkLoaded(),this.imageManager.listImages()}},{key:"addSource",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error('Source "'.concat(e,'" already exists.'));if(!n.type)throw new Error("The type property must be defined, but only the following properties were given: ".concat(Object.keys(n).join(", "),"."));if(!(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(t.y.source,"sources.".concat(e),n,null,r))){this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);var i=this.sourceCaches[e]=new q(e,n,this.dispatcher);i.style=this,i.setEventedParent(this,(function(){return{isSourceLoaded:i.loaded(),source:i.serialize(),sourceId:e}})),i.onAdd(this.map),this._changed=!0}}},{key:"removeSource",value:function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var n in this._layers)if(this._layers[n].source===e)return this.fire(new t.j(new Error('Source "'.concat(e,'" cannot be removed while layer "').concat(n,'" is using it.'))));var r=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],r.fire(new t.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),r.setEventedParent(null),r.onRemove(this.map),this._changed=!0}},{key:"setGeoJSONSourceData",value:function(t,e){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error("There is no source with this ID=".concat(t));var n=this.sourceCaches[t].getSource();if("geojson"!==n.type)throw new Error("geojsonSource.type is ".concat(n.type,", which is !== 'geojson"));n.setData(e),this._changed=!0}},{key:"getSource",value:function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()}},{key:"addLayer",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();var i=e.id;if(this.getLayer(i))this.fire(new t.j(new Error('Layer "'.concat(i,'" already exists on this map.'))));else{var a;if("custom"===e.type){if(Jt(this,t.aF(e)))return;a=t.aC(e)}else{if("source"in e&&"object"==ni(e.source)&&(this.addSource(i,e.source),e=t.aD(e),e=t.e(e,{source:i})),this._validate(t.y.layer,"layers.".concat(i),e,{arrayIndex:-1},r))return;a=t.aC(e),this._validateLayer(a),a.setEventedParent(this,{layer:{id:i}})}var o=n?this._order.indexOf(n):this._order.length;if(n&&-1===o)this.fire(new t.j(new Error('Cannot add layer "'.concat(i,'" before non-existing layer "').concat(n,'".'))));else{if(this._order.splice(o,0,i),this._layerOrderChanged=!0,this._layers[i]=a,this._removedLayers[i]&&a.source&&"custom"!==a.type){var s=this._removedLayers[i];delete this._removedLayers[i],s.type!==a.type?this._updatedSources[a.source]="clear":(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause())}this._updateLayer(a),a.onAdd&&a.onAdd(this.map)}}}},{key:"moveLayer",value:function(e,n){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==n){var r=this._order.indexOf(e);this._order.splice(r,1);var i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new t.j(new Error('Cannot move layer "'.concat(e,'" before non-existing layer "').concat(n,'".')))):(this._order.splice(i,0,e),this._layerOrderChanged=!0)}}else this.fire(new t.j(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot be moved."))))}},{key:"removeLayer",value:function(e){this._checkLoaded();var n=this._layers[e];if(n){n.setEventedParent(null);var r=this._order.indexOf(e);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],this._serializedLayers&&delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map)}else this.fire(new t.j(new Error('Cannot remove non-existing layer "'.concat(e,'".'))))}},{key:"getLayer",value:function(t){return this._layers[t]}},{key:"getLayersOrder",value:function(){return Di(this._order)}},{key:"hasLayer",value:function(t){return t in this._layers}},{key:"setLayerZoomRange",value:function(e,n,r){this._checkLoaded();var i=this.getLayer(e);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new t.j(new Error('Cannot set the zoom range of non-existing layer "'.concat(e,'".'))))}},{key:"setFilter",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();var i=this.getLayer(e);if(i){if(!t.aG(i.filter,n))return null==n?(i.filter=void 0,void this._updateLayer(i)):void(this._validate(t.y.filter,"layers.".concat(i.id,".filter"),n,null,r)||(i.filter=t.aD(n),this._updateLayer(i)))}else this.fire(new t.j(new Error('Cannot filter non-existing layer "'.concat(e,'".'))))}},{key:"getFilter",value:function(e){return t.aD(this.getLayer(e).filter)}},{key:"setLayoutProperty",value:function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();var a=this.getLayer(e);a?t.aG(a.getLayoutProperty(n),r)||(a.setLayoutProperty(n,r,i),this._updateLayer(a)):this.fire(new t.j(new Error('Cannot style non-existing layer "'.concat(e,'".'))))}},{key:"getLayoutProperty",value:function(e,n){var r=this.getLayer(e);if(r)return r.getLayoutProperty(n);this.fire(new t.j(new Error('Cannot get style of non-existing layer "'.concat(e,'".'))))}},{key:"setPaintProperty",value:function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();var a=this.getLayer(e);a?t.aG(a.getPaintProperty(n),r)||(a.setPaintProperty(n,r,i)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.j(new Error('Cannot style non-existing layer "'.concat(e,'".'))))}},{key:"getPaintProperty",value:function(t,e){return this.getLayer(t).getPaintProperty(e)}},{key:"setFeatureState",value:function(e,n){this._checkLoaded();var r=e.source,i=e.sourceLayer,a=this.sourceCaches[r];if(void 0!==a){var o=a.getSource().type;"geojson"===o&&i?this.fire(new t.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==o||i?(void 0===e.id&&this.fire(new t.j(new Error("The feature id parameter must be provided."))),a.setFeatureState(i,e.id,n)):this.fire(new t.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.j(new Error("The source '".concat(r,"' does not exist in the map's style."))))}},{key:"removeFeatureState",value:function(e,n){this._checkLoaded();var r=e.source,i=this.sourceCaches[r];if(void 0!==i){var a=i.getSource().type,o="vector"===a?e.sourceLayer:void 0;"vector"!==a||o?n&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.j(new Error("A feature id is required to remove its specific state property."))):i.removeFeatureState(o,e.id,n):this.fire(new t.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.j(new Error("The source '".concat(r,"' does not exist in the map's style."))))}},{key:"getFeatureState",value:function(e){this._checkLoaded();var n=e.source,r=e.sourceLayer,i=this.sourceCaches[n];if(void 0!==i)return"vector"!==i.getSource().type||r?(void 0===e.id&&this.fire(new t.j(new Error("The feature id parameter must be provided."))),i.getFeatureState(r,e.id)):void this.fire(new t.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new t.j(new Error("The source '".concat(n,"' does not exist in the map's style."))))}},{key:"getTransition",value:function(){return t.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}},{key:"serialize",value:function(){if(this._loaded){var e=t.aH(this.sourceCaches,(function(t){return t.serialize()})),n=this._serializeByIds(this._order),r=this.map.getTerrain()||void 0,i=this.stylesheet;return t.aI({version:i.version,name:i.name,metadata:i.metadata,light:i.light,center:i.center,zoom:i.zoom,bearing:i.bearing,pitch:i.pitch,sprite:i.sprite,glyphs:i.glyphs,transition:i.transition,sources:e,layers:n,terrain:r},(function(t){return void 0!==t}))}}},{key:"_updateLayer",value:function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._serializedLayers=null,this._changed=!0}},{key:"_flattenAndSortRenderedFeatures",value:function(t){for(var e=this,n=function(t){return"fill-extrusion"===e._layers[t].type},r={},i=[],a=this._order.length-1;a>=0;a--){var o=this._order[a];if(n(o)){r[o]=a;var s,A=pO(t);try{for(A.s();!(s=A.n()).done;){var u=s.value[o];if(u){var l,c=pO(u);try{for(c.s();!(l=c.n()).done;){var h=l.value;i.push(h)}}catch(t){c.e(t)}finally{c.f()}}}}catch(t){A.e(t)}finally{A.f()}}}i.sort((function(t,e){return e.intersectionZ-t.intersectionZ}));for(var f=[],d=this._order.length-1;d>=0;d--){var p=this._order[d];if(n(p))for(var v=i.length-1;v>=0;v--){var g=i[v].feature;if(r[g.layer.id]<d)break;f.push(g),i.pop()}else{var m,y=pO(t);try{for(y.s();!(m=y.n()).done;){var _=m.value[p];if(_){var w,x=pO(_);try{for(x.s();!(w=x.n()).done;){var b=w.value;f.push(b.feature)}}catch(t){x.e(t)}finally{x.f()}}}}catch(t){y.e(t)}finally{y.f()}}}return f}},{key:"queryRenderedFeatures",value:function(e,n,r){n&&n.filter&&this._validate(t.y.filter,"queryRenderedFeatures.filter",n.filter,null,n);var i={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.j(new Error("parameters.layers must be an Array."))),[];var a,o=pO(n.layers);try{for(o.s();!(a=o.n()).done;){var s=a.value,A=this._layers[s];if(!A)return this.fire(new t.j(new Error("The layer '".concat(s,"' does not exist in the map's style and cannot be queried for features.")))),[];i[A.source]=!0}}catch(t){o.e(t)}finally{o.f()}}var u=[];n.availableImages=this._availableImages;var l=this._serializedAllLayers();for(var c in this.sourceCaches)n.layers&&!i[c]||u.push(G(this.sourceCaches[c],this._layers,l,e,n,r));return this.placement&&u.push(function(t,e,n,r,i,a,o){var s,A={},u=a.queryRenderedSymbols(r),l=[],c=pO(Object.keys(u).map(Number));try{for(c.s();!(s=c.n()).done;){var h=s.value;l.push(o[h])}}catch(t){c.e(t)}finally{c.f()}l.sort(j);for(var f=function(){var n=p[d],r=n.featureIndex.lookupSymbolFeatures(u[n.bucketInstanceId],e,n.bucketIndex,n.sourceLayerIndex,i.filter,i.layers,i.availableImages,t);for(var a in r){var o=A[a]=A[a]||[],s=r[a];s.sort((function(t,e){var r=n.featureSortOrder;if(r){var i=r.indexOf(t.featureIndex);return r.indexOf(e.featureIndex)-i}return e.featureIndex-t.featureIndex}));var l,c=pO(s);try{for(c.s();!(l=c.n()).done;){var h=l.value;o.push(h)}}catch(t){c.e(t)}finally{c.f()}}},d=0,p=l;d<p.length;d++)f();var v=function(e){A[e].forEach((function(r){var i=r.feature,a=n[t[e].source].getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=a}))};for(var g in A)v(g);return A}(this._layers,l,this.sourceCaches,e,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(u)}},{key:"querySourceFeatures",value:function(e,n){n&&n.filter&&this._validate(t.y.filter,"querySourceFeatures.filter",n.filter,null,n);var r=this.sourceCaches[e];return r?function(t,e){for(var n=t.getRenderableIds().map((function(e){return t.getTileByID(e)})),r=[],i={},a=0;a<n.length;a++){var o=n[a],s=o.tileID.canonical.key;i[s]||(i[s]=!0,o.querySourceFeatures(r,e))}return r}(r,n):[]}},{key:"addSourceType",value:function(t,e,n){return N(t)?n(new Error('A source type called "'.concat(t,'" already exists.'))):(function(t,e){V[t]=e}(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},n):n(null,null))}},{key:"getLight",value:function(){return this.light.getLight()}},{key:"setLight",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded();var r=this.light.getLight(),i=!1;for(var a in e)if(!t.aG(e[a],r[a])){i=!0;break}if(i){var o={now:t.h.now(),transition:t.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,n),this.light.updateTransitions(o)}}},{key:"_validate",value:function(e,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!a||!1!==a.validate)&&Jt(this,e.call(t.y,t.e({key:n,style:this.serialize(),value:r,styleSpec:t.v},i)))}},{key:"_remove",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];for(var n in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.aJ.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[n].setEventedParent(null);for(var r in this.sourceCaches){var i=this.sourceCaches[r];i.setEventedParent(null),i.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(e)}},{key:"_clearSource",value:function(t){this.sourceCaches[t].clearTiles()}},{key:"_reloadSource",value:function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()}},{key:"_updateSources",value:function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t,this.map.terrain)}},{key:"_generateCollisionBoxes",value:function(){for(var t in this.sourceCaches)this._reloadSource(t)}},{key:"_updatePlacement",value:function(e,n,r,i){var a,o=this,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],A=!1,u=!1,l={},c=pO(this._order);try{var h=function(){var t=a.value,n=o._layers[t];if("symbol"!==n.type)return 1;if(!l[n.source]){var r=o.sourceCaches[n.source];l[n.source]=r.getRenderableIds(!0).map((function(t){return r.getTileByID(t)})).sort((function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)}))}var i=o.crossTileSymbolIndex.addLayer(n,l[n.source],e.center.lng);A=A||i};for(c.s();!(a=c.n()).done;)h()}catch(t){c.e(t)}finally{c.f()}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((s=s||this._layerOrderChanged||0===r)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.h.now(),e.zoom))&&(this.pauseablePlacement=new $t(e,this.map.terrain,this._order,s,n,r,i,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.h.now()),u=!0),A&&this.pauseablePlacement.placement.setStale()),u||A){var f,d=pO(this._order);try{for(d.s();!(f=d.n()).done;){var p=f.value,v=this._layers[p];"symbol"===v.type&&this.placement.updateLayerOpacities(v,l[v.source])}}catch(t){d.e(t)}finally{d.f()}}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.h.now())}},{key:"_releaseSymbolFadeTiles",value:function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()}},{key:"getImages",value:function(t,e,n){this.imageManager.getImages(e.icons,n),this._updateTilesForChangedImages();var r=this.sourceCaches[e.source];r&&r.setDependencies(e.tileID.key,e.type,e.icons)}},{key:"getGlyphs",value:function(t,e,n){this.glyphManager.getGlyphs(e.stacks,n);var r=this.sourceCaches[e.source];r&&r.setDependencies(e.tileID.key,e.type,[""])}},{key:"getResource",value:function(e,n,r){return t.m(n,r)}},{key:"getGlyphsUrl",value:function(){return this.stylesheet.glyphs||null}},{key:"setGlyphs",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded(),e&&this._validate(t.y.glyphs,"glyphs",e,null,n)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=e,this.glyphManager.entries={},this.glyphManager.setURL(e))}},{key:"addSprite",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;this._checkLoaded();var a=[{id:e,url:n}],o=[].concat(Di(g(this.stylesheet.sprite)),a);this._validate(t.y.sprite,"sprite",o,null,r)||(this.stylesheet.sprite=o,this._loadSprite(a,!0,i))}},{key:"removeSprite",value:function(e){this._checkLoaded();var n=g(this.stylesheet.sprite);if(n.find((function(t){return t.id===e}))){if(this._spritesImagesIds[e]){var r,i=pO(this._spritesImagesIds[e]);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.imageManager.removeImage(a),this._changedImages[a]=!0}}catch(t){i.e(t)}finally{i.f()}}n.splice(n.findIndex((function(t){return t.id===e})),1),this.stylesheet.sprite=n.length>0?n:void 0,delete this._spritesImagesIds[e],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.k("data",{dataType:"style"}))}else this.fire(new t.j(new Error('Sprite "'.concat(e,"\" doesn't exists on this map."))))}},{key:"getSprite",value:function(){return g(this.stylesheet.sprite)}},{key:"setSprite",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;this._checkLoaded(),e&&this._validate(t.y.sprite,"sprite",e,null,n)||(this.stylesheet.sprite=e,e?this._loadSprite(e,!0,r):(this._unloadSprite(),r&&r(null)))}}])}(t.E);re.registerForPluginStateChange=t.aK;var ie=t.Q([{name:"a_pos",type:"Int16",components:2}]),ae="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}",oe={prelude:se("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\n","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}"),background:se("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:se("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:se("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:se("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:se("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:se("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:se("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:se("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:se("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:se("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:se("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:se("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:se("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:se("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:se("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:se("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:se("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:se("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:se("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:se("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:se("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:se("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:se("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:se("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:se("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:se("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",ae),terrainDepth:se("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",ae),terrainCoords:se("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",ae)};function se(t,e){var n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=e.match(/attribute ([\w]+) ([\w]+)/g),i=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=a?a.concat(i):i,s={};return{fragmentSource:t=t.replace(n,(function(t,e,n,r,i){return s[i]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_".concat(i,"\nvarying ").concat(n," ").concat(r," ").concat(i,";\n#else\nuniform ").concat(n," ").concat(r," u_").concat(i,";\n#endif\n"):"\n#ifdef HAS_UNIFORM_u_".concat(i,"\n    ").concat(n," ").concat(r," ").concat(i," = u_").concat(i,";\n#endif\n")})),vertexSource:e=e.replace(n,(function(t,e,n,r,i){var a="float"===r?"vec2":"vec4",o=i.match(/color/)?"color":a;return s[i]?"define"===e?"\n#ifndef HAS_UNIFORM_u_".concat(i,"\nuniform lowp float u_").concat(i,"_t;\nattribute ").concat(n," ").concat(a," a_").concat(i,";\nvarying ").concat(n," ").concat(r," ").concat(i,";\n#else\nuniform ").concat(n," ").concat(r," u_").concat(i,";\n#endif\n"):"vec4"===o?"\n#ifndef HAS_UNIFORM_u_".concat(i,"\n    ").concat(i," = a_").concat(i,";\n#else\n    ").concat(n," ").concat(r," ").concat(i," = u_").concat(i,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(i,"\n    ").concat(i," = unpack_mix_").concat(o,"(a_").concat(i,", u_").concat(i,"_t);\n#else\n    ").concat(n," ").concat(r," ").concat(i," = u_").concat(i,";\n#endif\n"):"define"===e?"\n#ifndef HAS_UNIFORM_u_".concat(i,"\nuniform lowp float u_").concat(i,"_t;\nattribute ").concat(n," ").concat(a," a_").concat(i,";\n#else\nuniform ").concat(n," ").concat(r," u_").concat(i,";\n#endif\n"):"vec4"===o?"\n#ifndef HAS_UNIFORM_u_".concat(i,"\n    ").concat(n," ").concat(r," ").concat(i," = a_").concat(i,";\n#else\n    ").concat(n," ").concat(r," ").concat(i," = u_").concat(i,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(i,"\n    ").concat(n," ").concat(r," ").concat(i," = unpack_mix_").concat(o,"(a_").concat(i,", u_").concat(i,"_t);\n#else\n    ").concat(n," ").concat(r," ").concat(i," = u_").concat(i,";\n#endif\n")})),staticAttributes:r,staticUniforms:o}}var Ae=function(){function t(){oi(this,t),this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}return ai(t,[{key:"bind",value:function(t,e,n,r,i,a,o,s,A){this.context=t;for(var u=this.boundPaintVertexBuffers.length!==r.length,l=0;!u&&l<r.length;l++)this.boundPaintVertexBuffers[l]!==r[l]&&(u=!0);!this.vao||this.boundProgram!==e||this.boundLayoutVertexBuffer!==n||u||this.boundIndexBuffer!==i||this.boundVertexOffset!==a||this.boundDynamicVertexBuffer!==o||this.boundDynamicVertexBuffer2!==s||this.boundDynamicVertexBuffer3!==A?this.freshBind(e,n,r,i,a,o,s,A):(t.bindVertexArray.set(this.vao),o&&o.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind(),A&&A.bind())}},{key:"freshBind",value:function(t,e,n,r,i,a,o,s){var A=t.numAttributes,u=this.context,l=u.gl;this.vao&&this.destroy(),this.vao=u.createVertexArray(),u.bindVertexArray.set(this.vao),this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=a,this.boundDynamicVertexBuffer2=o,this.boundDynamicVertexBuffer3=s,e.enableAttributes(l,t);var c,h=pO(n);try{for(h.s();!(c=h.n()).done;)c.value.enableAttributes(l,t)}catch(t){h.e(t)}finally{h.f()}a&&a.enableAttributes(l,t),o&&o.enableAttributes(l,t),s&&s.enableAttributes(l,t),e.bind(),e.setVertexAttribPointers(l,t,i);var f,d=pO(n);try{for(d.s();!(f=d.n()).done;){var p=f.value;p.bind(),p.setVertexAttribPointers(l,t,i)}}catch(t){d.e(t)}finally{d.f()}a&&(a.bind(),a.setVertexAttribPointers(l,t,i)),r&&r.bind(),o&&(o.bind(),o.setVertexAttribPointers(l,t,i)),s&&(s.bind(),s.setVertexAttribPointers(l,t,i)),u.currentNumAttributes=A}},{key:"destroy",value:function(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}])}();function ue(t){for(var e=[],n=0;n<t.length;n++)if(null!==t[n]){var r=t[n].split(" ");e.push(r.pop())}return e}var le=function(){function e(n,r,i,a,o,s){oi(this,e);var A=n.gl;this.program=A.createProgram();var u,l=ue(r.staticAttributes),c=i?i.getBinderAttributes():[],h=l.concat(c),f=oe.prelude.staticUniforms?ue(oe.prelude.staticUniforms):[],d=r.staticUniforms?ue(r.staticUniforms):[],p=i?i.getBinderUniforms():[],v=[],g=pO(f.concat(d).concat(p));try{for(g.s();!(u=g.n()).done;){var m=u.value;v.indexOf(m)<0&&v.push(m)}}catch(t){g.e(t)}finally{g.f()}var y=i?i.defines():[];o&&y.push("#define OVERDRAW_INSPECTOR;"),s&&y.push("#define TERRAIN3D;");var _=y.concat(oe.prelude.fragmentSource,r.fragmentSource).join("\n"),w=y.concat(oe.prelude.vertexSource,r.vertexSource).join("\n"),x=A.createShader(A.FRAGMENT_SHADER);if(A.isContextLost())this.failedToCreate=!0;else{if(A.shaderSource(x,_),A.compileShader(x),!A.getShaderParameter(x,A.COMPILE_STATUS))throw new Error("Could not compile fragment shader: ".concat(A.getShaderInfoLog(x)));A.attachShader(this.program,x);var b=A.createShader(A.VERTEX_SHADER);if(A.isContextLost())this.failedToCreate=!0;else{if(A.shaderSource(b,w),A.compileShader(b),!A.getShaderParameter(b,A.COMPILE_STATUS))throw new Error("Could not compile vertex shader: ".concat(A.getShaderInfoLog(b)));A.attachShader(this.program,b),this.attributes={};var B={};this.numAttributes=h.length;for(var k=0;k<this.numAttributes;k++)h[k]&&(A.bindAttribLocation(this.program,k,h[k]),this.attributes[h[k]]=k);if(A.linkProgram(this.program),!A.getProgramParameter(this.program,A.LINK_STATUS))throw new Error("Program failed to link: ".concat(A.getProgramInfoLog(this.program)));A.deleteShader(b),A.deleteShader(x);for(var C=0;C<v.length;C++){var F=v[C];if(F&&!B[F]){var E=A.getUniformLocation(this.program,F);E&&(B[F]=E)}}this.fixedUniforms=a(n,B),this.terrainUniforms=function(e,n){return{u_depth:new t.aL(e,n.u_depth),u_terrain:new t.aL(e,n.u_terrain),u_terrain_dim:new t.aM(e,n.u_terrain_dim),u_terrain_matrix:new t.aN(e,n.u_terrain_matrix),u_terrain_unpack:new t.aO(e,n.u_terrain_unpack),u_terrain_exaggeration:new t.aM(e,n.u_terrain_exaggeration)}}(n,B),this.binderUniforms=i?i.getUniforms(n,B):[]}}}return ai(e,[{key:"draw",value:function(t,e,n,r,i,a,o,s,A,u,l,c,h,f,d,p,v,g){var m=t.gl;if(!this.failedToCreate){if(t.program.set(this.program),t.setDepthMode(n),t.setStencilMode(r),t.setColorMode(i),t.setCullFace(a),s)for(var y in t.activeTexture.set(m.TEXTURE2),m.bindTexture(m.TEXTURE_2D,s.depthTexture),t.activeTexture.set(m.TEXTURE3),m.bindTexture(m.TEXTURE_2D,s.texture),this.terrainUniforms)this.terrainUniforms[y].set(s[y]);for(var _ in this.fixedUniforms)this.fixedUniforms[_].set(o[_]);d&&d.setUniforms(t,this.binderUniforms,h,{zoom:f});var w=0;switch(e){case m.LINES:w=2;break;case m.TRIANGLES:w=3;break;case m.LINE_STRIP:w=1}var x,b=pO(c.get());try{for(b.s();!(x=b.n()).done;){var B=x.value,k=B.vaos||(B.vaos={});(k[A]||(k[A]=new Ae)).bind(t,this,u,d?d.getPaintVertexBuffers():[],l,B.vertexOffset,p,v,g),m.drawElements(e,B.primitiveLength*w,m.UNSIGNED_SHORT,B.primitiveOffset*w*2)}}catch(t){b.e(t)}finally{b.f()}}}}])}();function ce(t,e,n){var r=1/Ct(n,1,e.transform.tileZoom),i=Math.pow(2,n.tileID.overscaledZ),a=n.tileSize*Math.pow(2,e.transform.tileZoom)/i,o=a*(n.tileID.canonical.x+n.tileID.wrap*i),s=a*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[r,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[o>>16,s>>16],u_pixel_coord_lower:[65535&o,65535&s]}}var he=function(e,n,r,i){var a=n.style.light,o=a.properties.get("position"),s=[o.x,o.y,o.z],A=function(){var e=new t.A(9);return t.A!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}();"viewport"===a.properties.get("anchor")&&function(t,e){var n=Math.sin(e),r=Math.cos(e);t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1}(A,-n.transform.angle),function(t,e,n){var r=e[0],i=e[1],a=e[2];t[0]=r*n[0]+i*n[3]+a*n[6],t[1]=r*n[1]+i*n[4]+a*n[7],t[2]=r*n[2]+i*n[5]+a*n[8]}(s,s,A);var u=a.properties.get("color");return{u_matrix:e,u_lightpos:s,u_lightintensity:a.properties.get("intensity"),u_lightcolor:[u.r,u.g,u.b],u_vertical_gradient:+r,u_opacity:i}},fe=function(e,n,r,i,a,o,s){return t.e(he(e,n,r,i),ce(o,n,s),{u_height_factor:-Math.pow(2,a.overscaledZ)/s.tileSize/8})},de=function(t){return{u_matrix:t}},pe=function(e,n,r,i){return t.e(de(e),ce(r,n,i))},ve=function(t,e){return{u_matrix:t,u_world:e}},ge=function(e,n,r,i,a){return t.e(pe(e,n,r,i),{u_world:a})},me=function(t,e,n,r){var i,a,o=t.transform;if("map"===r.paint.get("circle-pitch-alignment")){var s=Ct(n,1,o.zoom);i=!0,a=[s,s]}else i=!1,a=o.pixelsToGLUnits;return{u_camera_to_center_distance:o.cameraToCenterDistance,u_scale_with_map:+("map"===r.paint.get("circle-pitch-scale")),u_matrix:t.translatePosMatrix(e.posMatrix,n,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_pitch_with_map:+i,u_device_pixel_ratio:t.pixelRatio,u_extrude_scale:a}},ye=function(t,e,n){var r=Ct(n,1,e.zoom),i=Math.pow(2,e.zoom-n.tileID.overscaledZ),a=n.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:r,u_extrude_scale:[e.pixelsToGLUnits[0]/(r*i),e.pixelsToGLUnits[1]/(r*i)],u_overscale_factor:a}},_e=function(t,e){return{u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:arguments.length>2&&void 0!==arguments[2]?arguments[2]:1}},we=function(t){return{u_matrix:t}},xe=function(t,e,n,r){return{u_matrix:t,u_extrude_scale:Ct(e,1,n),u_intensity:r}};function be(e,n){var r=Math.pow(2,n.canonical.z),i=n.canonical.y;return[new t.U(0,i/r).toLngLat().lat,new t.U(0,(i+1)/r).toLngLat().lat]}var Be=function(t,e,n,r){var i=t.transform;return{u_matrix:Ie(t,e,n,r),u_ratio:1/Ct(e,1,i.zoom),u_device_pixel_ratio:t.pixelRatio,u_units_to_pixels:[1/i.pixelsToGLUnits[0],1/i.pixelsToGLUnits[1]]}},ke=function(e,n,r,i,a){return t.e(Be(e,n,r,a),{u_image:0,u_image_height:i})},Ce=function(t,e,n,r,i){var a=t.transform,o=Ee(e,a);return{u_matrix:Ie(t,e,n,i),u_texsize:e.imageAtlasTexture.size,u_ratio:1/Ct(e,1,a.zoom),u_device_pixel_ratio:t.pixelRatio,u_image:0,u_scale:[o,r.fromScale,r.toScale],u_fade:r.t,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]]}},Fe=function(e,n,r,i,a,o){var s=e.lineAtlas,A=Ee(n,e.transform),u="round"===r.layout.get("line-cap"),l=s.getDash(i.from,u),c=s.getDash(i.to,u),h=l.width*a.fromScale,f=c.width*a.toScale;return t.e(Be(e,n,r,o),{u_patternscale_a:[A/h,-l.height/2],u_patternscale_b:[A/f,-c.height/2],u_sdfgamma:s.width/(256*Math.min(h,f)*e.pixelRatio)/2,u_image:0,u_tex_y_a:l.y,u_tex_y_b:c.y,u_mix:a.t})};function Ee(t,e){return 1/Ct(t,1,e.tileZoom)}function Ie(t,e,n,r){return t.translatePosMatrix(r?r.posMatrix:e.tileID.posMatrix,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}var Ue=function(t,e,n,r,i){return{u_matrix:t,u_tl_parent:e,u_scale_parent:n,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(o=i.paint.get("raster-saturation"),o>0?1-1/(1.001-o):-o),u_contrast_factor:(a=i.paint.get("raster-contrast"),a>0?1/(1-a):1+a),u_spin_weights:Se(i.paint.get("raster-hue-rotate"))};var a,o};function Se(t){t*=Math.PI/180;var e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}var Qe=function(t,e,n,r,i,a,o,s,A,u){var l=i.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:l.cameraToCenterDistance,u_pitch:l.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:l.width/l.height,u_fade_change:i.options.fadeDuration?i.symbolFadeChange:1,u_matrix:a,u_label_plane_matrix:o,u_coord_matrix:s,u_is_text:+A,u_pitch_with_map:+r,u_texsize:u,u_texture:0}},Te=function(e,n,r,i,a,o,s,A,u,l,c){var h=a.transform;return t.e(Qe(e,n,r,i,a,o,s,A,u,l),{u_gamma_scale:i?Math.cos(h._pitch)*h.cameraToCenterDistance:1,u_device_pixel_ratio:a.pixelRatio,u_is_halo:+c})},Me=function(e,n,r,i,a,o,s,A,u,l){return t.e(Te(e,n,r,i,a,o,s,A,!0,u,!0),{u_texsize_icon:l,u_texture_icon:1})},De=function(t,e,n){return{u_matrix:t,u_opacity:e,u_color:n}},Le=function(e,n,r,i,a,o){return t.e(function(t,e,n,r){var i=n.imageManager.getPattern(t.from.toString()),a=n.imageManager.getPattern(t.to.toString()),o=n.imageManager.getPixelSize(),s=o.width,A=o.height,u=Math.pow(2,r.tileID.overscaledZ),l=r.tileSize*Math.pow(2,n.transform.tileZoom)/u,c=l*(r.tileID.canonical.x+r.tileID.wrap*u),h=l*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:i.tl,u_pattern_br_a:i.br,u_pattern_tl_b:a.tl,u_pattern_br_b:a.br,u_texsize:[s,A],u_mix:e.t,u_pattern_size_a:i.displaySize,u_pattern_size_b:a.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/Ct(r,1,n.transform.tileZoom),u_pixel_coord_upper:[c>>16,h>>16],u_pixel_coord_lower:[65535&c,65535&h]}}(i,o,r,a),{u_matrix:e,u_opacity:n})},Pe={fillExtrusion:function(e,n){return{u_matrix:new t.aN(e,n.u_matrix),u_lightpos:new t.aP(e,n.u_lightpos),u_lightintensity:new t.aM(e,n.u_lightintensity),u_lightcolor:new t.aP(e,n.u_lightcolor),u_vertical_gradient:new t.aM(e,n.u_vertical_gradient),u_opacity:new t.aM(e,n.u_opacity)}},fillExtrusionPattern:function(e,n){return{u_matrix:new t.aN(e,n.u_matrix),u_lightpos:new t.aP(e,n.u_lightpos),u_lightintensity:new t.aM(e,n.u_lightintensity),u_lightcolor:new t.aP(e,n.u_lightcolor),u_vertical_gradient:new t.aM(e,n.u_vertical_gradient),u_height_factor:new t.aM(e,n.u_height_factor),u_image:new t.aL(e,n.u_image),u_texsize:new t.aQ(e,n.u_texsize),u_pixel_coord_upper:new t.aQ(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.aQ(e,n.u_pixel_coord_lower),u_scale:new t.aP(e,n.u_scale),u_fade:new t.aM(e,n.u_fade),u_opacity:new t.aM(e,n.u_opacity)}},fill:function(e,n){return{u_matrix:new t.aN(e,n.u_matrix)}},fillPattern:function(e,n){return{u_matrix:new t.aN(e,n.u_matrix),u_image:new t.aL(e,n.u_image),u_texsize:new t.aQ(e,n.u_texsize),u_pixel_coord_upper:new t.aQ(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.aQ(e,n.u_pixel_coord_lower),u_scale:new t.aP(e,n.u_scale),u_fade:new t.aM(e,n.u_fade)}},fillOutline:function(e,n){return{u_matrix:new t.aN(e,n.u_matrix),u_world:new t.aQ(e,n.u_world)}},fillOutlinePattern:function(e,n){return{u_matrix:new t.aN(e,n.u_matrix),u_world:new t.aQ(e,n.u_world),u_image:new t.aL(e,n.u_image),u_texsize:new t.aQ(e,n.u_texsize),u_pixel_coord_upper:new t.aQ(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.aQ(e,n.u_pixel_coord_lower),u_scale:new t.aP(e,n.u_scale),u_fade:new t.aM(e,n.u_fade)}},circle:function(e,n){return{u_camera_to_center_distance:new t.aM(e,n.u_camera_to_center_distance),u_scale_with_map:new t.aL(e,n.u_scale_with_map),u_pitch_with_map:new t.aL(e,n.u_pitch_with_map),u_extrude_scale:new t.aQ(e,n.u_extrude_scale),u_device_pixel_ratio:new t.aM(e,n.u_device_pixel_ratio),u_matrix:new t.aN(e,n.u_matrix)}},collisionBox:function(e,n){return{u_matrix:new t.aN(e,n.u_matrix),u_camera_to_center_distance:new t.aM(e,n.u_camera_to_center_distance),u_pixels_to_tile_units:new t.aM(e,n.u_pixels_to_tile_units),u_extrude_scale:new t.aQ(e,n.u_extrude_scale),u_overscale_factor:new t.aM(e,n.u_overscale_factor)}},collisionCircle:function(e,n){return{u_matrix:new t.aN(e,n.u_matrix),u_inv_matrix:new t.aN(e,n.u_inv_matrix),u_camera_to_center_distance:new t.aM(e,n.u_camera_to_center_distance),u_viewport_size:new t.aQ(e,n.u_viewport_size)}},debug:function(e,n){return{u_color:new t.aR(e,n.u_color),u_matrix:new t.aN(e,n.u_matrix),u_overlay:new t.aL(e,n.u_overlay),u_overlay_scale:new t.aM(e,n.u_overlay_scale)}},clippingMask:function(e,n){return{u_matrix:new t.aN(e,n.u_matrix)}},heatmap:function(e,n){return{u_extrude_scale:new t.aM(e,n.u_extrude_scale),u_intensity:new t.aM(e,n.u_intensity),u_matrix:new t.aN(e,n.u_matrix)}},heatmapTexture:function(e,n){return{u_matrix:new t.aN(e,n.u_matrix),u_world:new t.aQ(e,n.u_world),u_image:new t.aL(e,n.u_image),u_color_ramp:new t.aL(e,n.u_color_ramp),u_opacity:new t.aM(e,n.u_opacity)}},hillshade:function(e,n){return{u_matrix:new t.aN(e,n.u_matrix),u_image:new t.aL(e,n.u_image),u_latrange:new t.aQ(e,n.u_latrange),u_light:new t.aQ(e,n.u_light),u_shadow:new t.aR(e,n.u_shadow),u_highlight:new t.aR(e,n.u_highlight),u_accent:new t.aR(e,n.u_accent)}},hillshadePrepare:function(e,n){return{u_matrix:new t.aN(e,n.u_matrix),u_image:new t.aL(e,n.u_image),u_dimension:new t.aQ(e,n.u_dimension),u_zoom:new t.aM(e,n.u_zoom),u_unpack:new t.aO(e,n.u_unpack)}},line:function(e,n){return{u_matrix:new t.aN(e,n.u_matrix),u_ratio:new t.aM(e,n.u_ratio),u_device_pixel_ratio:new t.aM(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.aQ(e,n.u_units_to_pixels)}},lineGradient:function(e,n){return{u_matrix:new t.aN(e,n.u_matrix),u_ratio:new t.aM(e,n.u_ratio),u_device_pixel_ratio:new t.aM(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.aQ(e,n.u_units_to_pixels),u_image:new t.aL(e,n.u_image),u_image_height:new t.aM(e,n.u_image_height)}},linePattern:function(e,n){return{u_matrix:new t.aN(e,n.u_matrix),u_texsize:new t.aQ(e,n.u_texsize),u_ratio:new t.aM(e,n.u_ratio),u_device_pixel_ratio:new t.aM(e,n.u_device_pixel_ratio),u_image:new t.aL(e,n.u_image),u_units_to_pixels:new t.aQ(e,n.u_units_to_pixels),u_scale:new t.aP(e,n.u_scale),u_fade:new t.aM(e,n.u_fade)}},lineSDF:function(e,n){return{u_matrix:new t.aN(e,n.u_matrix),u_ratio:new t.aM(e,n.u_ratio),u_device_pixel_ratio:new t.aM(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.aQ(e,n.u_units_to_pixels),u_patternscale_a:new t.aQ(e,n.u_patternscale_a),u_patternscale_b:new t.aQ(e,n.u_patternscale_b),u_sdfgamma:new t.aM(e,n.u_sdfgamma),u_image:new t.aL(e,n.u_image),u_tex_y_a:new t.aM(e,n.u_tex_y_a),u_tex_y_b:new t.aM(e,n.u_tex_y_b),u_mix:new t.aM(e,n.u_mix)}},raster:function(e,n){return{u_matrix:new t.aN(e,n.u_matrix),u_tl_parent:new t.aQ(e,n.u_tl_parent),u_scale_parent:new t.aM(e,n.u_scale_parent),u_buffer_scale:new t.aM(e,n.u_buffer_scale),u_fade_t:new t.aM(e,n.u_fade_t),u_opacity:new t.aM(e,n.u_opacity),u_image0:new t.aL(e,n.u_image0),u_image1:new t.aL(e,n.u_image1),u_brightness_low:new t.aM(e,n.u_brightness_low),u_brightness_high:new t.aM(e,n.u_brightness_high),u_saturation_factor:new t.aM(e,n.u_saturation_factor),u_contrast_factor:new t.aM(e,n.u_contrast_factor),u_spin_weights:new t.aP(e,n.u_spin_weights)}},symbolIcon:function(e,n){return{u_is_size_zoom_constant:new t.aL(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.aL(e,n.u_is_size_feature_constant),u_size_t:new t.aM(e,n.u_size_t),u_size:new t.aM(e,n.u_size),u_camera_to_center_distance:new t.aM(e,n.u_camera_to_center_distance),u_pitch:new t.aM(e,n.u_pitch),u_rotate_symbol:new t.aL(e,n.u_rotate_symbol),u_aspect_ratio:new t.aM(e,n.u_aspect_ratio),u_fade_change:new t.aM(e,n.u_fade_change),u_matrix:new t.aN(e,n.u_matrix),u_label_plane_matrix:new t.aN(e,n.u_label_plane_matrix),u_coord_matrix:new t.aN(e,n.u_coord_matrix),u_is_text:new t.aL(e,n.u_is_text),u_pitch_with_map:new t.aL(e,n.u_pitch_with_map),u_texsize:new t.aQ(e,n.u_texsize),u_texture:new t.aL(e,n.u_texture)}},symbolSDF:function(e,n){return{u_is_size_zoom_constant:new t.aL(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.aL(e,n.u_is_size_feature_constant),u_size_t:new t.aM(e,n.u_size_t),u_size:new t.aM(e,n.u_size),u_camera_to_center_distance:new t.aM(e,n.u_camera_to_center_distance),u_pitch:new t.aM(e,n.u_pitch),u_rotate_symbol:new t.aL(e,n.u_rotate_symbol),u_aspect_ratio:new t.aM(e,n.u_aspect_ratio),u_fade_change:new t.aM(e,n.u_fade_change),u_matrix:new t.aN(e,n.u_matrix),u_label_plane_matrix:new t.aN(e,n.u_label_plane_matrix),u_coord_matrix:new t.aN(e,n.u_coord_matrix),u_is_text:new t.aL(e,n.u_is_text),u_pitch_with_map:new t.aL(e,n.u_pitch_with_map),u_texsize:new t.aQ(e,n.u_texsize),u_texture:new t.aL(e,n.u_texture),u_gamma_scale:new t.aM(e,n.u_gamma_scale),u_device_pixel_ratio:new t.aM(e,n.u_device_pixel_ratio),u_is_halo:new t.aL(e,n.u_is_halo)}},symbolTextAndIcon:function(e,n){return{u_is_size_zoom_constant:new t.aL(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.aL(e,n.u_is_size_feature_constant),u_size_t:new t.aM(e,n.u_size_t),u_size:new t.aM(e,n.u_size),u_camera_to_center_distance:new t.aM(e,n.u_camera_to_center_distance),u_pitch:new t.aM(e,n.u_pitch),u_rotate_symbol:new t.aL(e,n.u_rotate_symbol),u_aspect_ratio:new t.aM(e,n.u_aspect_ratio),u_fade_change:new t.aM(e,n.u_fade_change),u_matrix:new t.aN(e,n.u_matrix),u_label_plane_matrix:new t.aN(e,n.u_label_plane_matrix),u_coord_matrix:new t.aN(e,n.u_coord_matrix),u_is_text:new t.aL(e,n.u_is_text),u_pitch_with_map:new t.aL(e,n.u_pitch_with_map),u_texsize:new t.aQ(e,n.u_texsize),u_texsize_icon:new t.aQ(e,n.u_texsize_icon),u_texture:new t.aL(e,n.u_texture),u_texture_icon:new t.aL(e,n.u_texture_icon),u_gamma_scale:new t.aM(e,n.u_gamma_scale),u_device_pixel_ratio:new t.aM(e,n.u_device_pixel_ratio),u_is_halo:new t.aL(e,n.u_is_halo)}},background:function(e,n){return{u_matrix:new t.aN(e,n.u_matrix),u_opacity:new t.aM(e,n.u_opacity),u_color:new t.aR(e,n.u_color)}},backgroundPattern:function(e,n){return{u_matrix:new t.aN(e,n.u_matrix),u_opacity:new t.aM(e,n.u_opacity),u_image:new t.aL(e,n.u_image),u_pattern_tl_a:new t.aQ(e,n.u_pattern_tl_a),u_pattern_br_a:new t.aQ(e,n.u_pattern_br_a),u_pattern_tl_b:new t.aQ(e,n.u_pattern_tl_b),u_pattern_br_b:new t.aQ(e,n.u_pattern_br_b),u_texsize:new t.aQ(e,n.u_texsize),u_mix:new t.aM(e,n.u_mix),u_pattern_size_a:new t.aQ(e,n.u_pattern_size_a),u_pattern_size_b:new t.aQ(e,n.u_pattern_size_b),u_scale_a:new t.aM(e,n.u_scale_a),u_scale_b:new t.aM(e,n.u_scale_b),u_pixel_coord_upper:new t.aQ(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.aQ(e,n.u_pixel_coord_lower),u_tile_units_to_pixels:new t.aM(e,n.u_tile_units_to_pixels)}},terrain:function(e,n){return{u_matrix:new t.aN(e,n.u_matrix),u_texture:new t.aL(e,n.u_texture),u_ele_delta:new t.aM(e,n.u_ele_delta)}},terrainDepth:function(e,n){return{u_matrix:new t.aN(e,n.u_matrix),u_ele_delta:new t.aM(e,n.u_ele_delta)}},terrainCoords:function(e,n){return{u_matrix:new t.aN(e,n.u_matrix),u_texture:new t.aL(e,n.u_texture),u_terrain_coords_id:new t.aM(e,n.u_terrain_coords_id),u_ele_delta:new t.aM(e,n.u_ele_delta)}}},Oe=function(){function t(e,n,r){oi(this,t),this.context=e;var i=e.gl;this.buffer=i.createBuffer(),this.dynamicDraw=Boolean(r),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete n.arrayBuffer}return ai(t,[{key:"bind",value:function(){this.context.bindElementBuffer.set(this.buffer)}},{key:"updateData",value:function(t){var e=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}},{key:"destroy",value:function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}])}(),Re={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},ze=function(){function t(e,n,r,i){oi(this,t),this.length=n.length,this.attributes=r,this.itemSize=n.bytesPerElement,this.dynamicDraw=i,this.context=e;var a=e.gl;this.buffer=a.createBuffer(),e.bindVertexBuffer.set(this.buffer),a.bufferData(a.ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?a.DYNAMIC_DRAW:a.STATIC_DRAW),this.dynamicDraw||delete n.arrayBuffer}return ai(t,[{key:"bind",value:function(){this.context.bindVertexBuffer.set(this.buffer)}},{key:"updateData",value:function(t){if(t.length!==this.length)throw new Error("Length of new data is ".concat(t.length,", which doesn't match current length of ").concat(this.length));var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)}},{key:"enableAttributes",value:function(t,e){for(var n=0;n<this.attributes.length;n++){var r=e.attributes[this.attributes[n].name];void 0!==r&&t.enableVertexAttribArray(r)}}},{key:"setVertexAttribPointers",value:function(t,e,n){for(var r=0;r<this.attributes.length;r++){var i=this.attributes[r],a=e.attributes[i.name];void 0!==a&&t.vertexAttribPointer(a,i.components,t[Re[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}}},{key:"destroy",value:function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}])}(),He=new WeakMap;function Ve(t){var e;if(He.has(t))return He.get(t);var n=null===(e=t.getParameter(t.VERSION))||void 0===e?void 0:e.startsWith("WebGL 2.0");return He.set(t,n),n}var Ne=function(){function t(e){oi(this,t),this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}return ai(t,[{key:"get",value:function(){return this.current}},{key:"set",value:function(t){}},{key:"getDefault",value:function(){return this.default}},{key:"setDefault",value:function(){this.set(this.default)}}])}(),Ke=function(e){function n(){return oi(this,n),gO(this,n,arguments)}return ci(n,e),ai(n,[{key:"getDefault",value:function(){return t.aT.transparent}},{key:"set",value:function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}])}(Ne),Ge=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"getDefault",value:function(){return 1}},{key:"set",value:function(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}])}(Ne),je=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"getDefault",value:function(){return 0}},{key:"set",value:function(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}])}(Ne),$e=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"getDefault",value:function(){return[!0,!0,!0,!0]}},{key:"set",value:function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}])}(Ne),We=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"getDefault",value:function(){return!0}},{key:"set",value:function(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}])}(Ne),Ze=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"getDefault",value:function(){return 255}},{key:"set",value:function(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}])}(Ne),qe=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"getDefault",value:function(){return{func:this.gl.ALWAYS,ref:0,mask:255}}},{key:"set",value:function(t){var e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}])}(Ne),Xe=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"getDefault",value:function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}},{key:"set",value:function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}])}(Ne),Ye=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}}}])}(Ne),Je=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"getDefault",value:function(){return[0,1]}},{key:"set",value:function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}])}(Ne),tn=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}}}])}(Ne),en=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"getDefault",value:function(){return this.gl.LESS}},{key:"set",value:function(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}])}(Ne),nn=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}}}])}(Ne),rn=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"getDefault",value:function(){var t=this.gl;return[t.ONE,t.ZERO]}},{key:"set",value:function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}])}(Ne),an=function(e){function n(){return oi(this,n),gO(this,n,arguments)}return ci(n,e),ai(n,[{key:"getDefault",value:function(){return t.aT.transparent}},{key:"set",value:function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}])}(Ne),on=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"getDefault",value:function(){return this.gl.FUNC_ADD}},{key:"set",value:function(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}])}(Ne),sn=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}}}])}(Ne),An=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"getDefault",value:function(){return this.gl.BACK}},{key:"set",value:function(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}])}(Ne),un=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"getDefault",value:function(){return this.gl.CCW}},{key:"set",value:function(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}])}(Ne),ln=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}])}(Ne),cn=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"getDefault",value:function(){return this.gl.TEXTURE0}},{key:"set",value:function(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}])}(Ne),hn=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"getDefault",value:function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}},{key:"set",value:function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}])}(Ne),fn=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}}])}(Ne),dn=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}}])}(Ne),pn=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}}}])}(Ne),vn=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}}])}(Ne),gn=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}])}(Ne),mn=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(t){var e;if(t!==this.current||this.dirty){var n=this.gl;Ve(n)?n.bindVertexArray(t):null===(e=n.getExtension("OES_vertex_array_object"))||void 0===e||e.bindVertexArrayOES(t),this.current=t,this.dirty=!1}}}])}(Ne),yn=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"getDefault",value:function(){return 4}},{key:"set",value:function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}}])}(Ne),_n=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}}])}(Ne),wn=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}}])}(Ne),xn=function(t){function e(t,n){var r;return oi(this,e),(r=gO(this,e,[t])).context=t,r.parent=n,r}return ci(e,t),ai(e,[{key:"getDefault",value:function(){return null}}])}(Ne),bn=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"setDirty",value:function(){this.dirty=!0}},{key:"set",value:function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}}])}(xn),Bn=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"set",value:function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}}])}(xn),kn=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"set",value:function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}}])}(xn),Cn=function(){function t(e,n,r,i,a){oi(this,t),this.context=e,this.width=n,this.height=r;var o=e.gl,s=this.framebuffer=o.createFramebuffer();if(this.colorAttachment=new bn(e,s),i)this.depthAttachment=a?new kn(e,s):new Bn(e,s);else if(a)throw new Error("Stencil cannot be setted without depth");if(o.checkFramebufferStatus(o.FRAMEBUFFER)!==o.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}return ai(t,[{key:"destroy",value:function(){var t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){var n=this.depthAttachment.get();n&&t.deleteRenderbuffer(n)}t.deleteFramebuffer(this.framebuffer)}}])}(),Fn=ai((function t(e,n,r){oi(this,t),this.blendFunction=e,this.blendColor=n,this.mask=r}));Fn.Replace=[1,0],Fn.disabled=new Fn(Fn.Replace,t.aT.transparent,[!1,!1,!1,!1]),Fn.unblended=new Fn(Fn.Replace,t.aT.transparent,[!0,!0,!0,!0]),Fn.alphaBlended=new Fn([1,771],t.aT.transparent,[!0,!0,!0,!0]);var En=function(){function e(t){var n,r;if(oi(this,e),this.gl=t,this.clearColor=new Ke(this),this.clearDepth=new Ge(this),this.clearStencil=new je(this),this.colorMask=new $e(this),this.depthMask=new We(this),this.stencilMask=new Ze(this),this.stencilFunc=new qe(this),this.stencilOp=new Xe(this),this.stencilTest=new Ye(this),this.depthRange=new Je(this),this.depthTest=new tn(this),this.depthFunc=new en(this),this.blend=new nn(this),this.blendFunc=new rn(this),this.blendColor=new an(this),this.blendEquation=new on(this),this.cullFace=new sn(this),this.cullFaceSide=new An(this),this.frontFace=new un(this),this.program=new ln(this),this.activeTexture=new cn(this),this.viewport=new hn(this),this.bindFramebuffer=new fn(this),this.bindRenderbuffer=new dn(this),this.bindTexture=new pn(this),this.bindVertexBuffer=new vn(this),this.bindElementBuffer=new gn(this),this.bindVertexArray=new mn(this),this.pixelStoreUnpack=new yn(this),this.pixelStoreUnpackPremultiplyAlpha=new _n(this),this.pixelStoreUnpackFlipY=new wn(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),Ve(t)){this.HALF_FLOAT=t.HALF_FLOAT;var i=t.getExtension("EXT_color_buffer_half_float");this.RGBA16F=null!==(n=t.RGBA16F)&&void 0!==n?n:null==i?void 0:i.RGBA16F_EXT,this.RGB16F=null!==(r=t.RGB16F)&&void 0!==r?r:null==i?void 0:i.RGB16F_EXT,t.getExtension("EXT_color_buffer_float")}else{t.getExtension("EXT_color_buffer_half_float"),t.getExtension("OES_texture_half_float_linear");var a=t.getExtension("OES_texture_half_float");this.HALF_FLOAT=null==a?void 0:a.HALF_FLOAT_OES}}return ai(e,[{key:"setDefault",value:function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}},{key:"setDirty",value:function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}},{key:"createIndexBuffer",value:function(t,e){return new Oe(this,t,e)}},{key:"createVertexBuffer",value:function(t,e,n){return new ze(this,t,e,n)}},{key:"createRenderbuffer",value:function(t,e,n){var r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),i}},{key:"createFramebuffer",value:function(t,e,n,r){return new Cn(this,t,e,n,r)}},{key:"clear",value:function(t){var e=t.color,n=t.depth,r=t.stencil,i=this.gl,a=0;e&&(a|=i.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(a|=i.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),void 0!==r&&(a|=i.STENCIL_BUFFER_BIT,this.clearStencil.set(r),this.stencilMask.set(255)),i.clear(a)}},{key:"setCullFace",value:function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}},{key:"setDepthMode",value:function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}},{key:"setStencilMode",value:function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}},{key:"setColorMode",value:function(e){t.aG(e.blendFunction,Fn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}},{key:"createVertexArray",value:function(){var t;return Ve(this.gl)?this.gl.createVertexArray():null===(t=this.gl.getExtension("OES_vertex_array_object"))||void 0===t?void 0:t.createVertexArrayOES()}},{key:"deleteVertexArray",value:function(t){var e;return Ve(this.gl)?this.gl.deleteVertexArray(t):null===(e=this.gl.getExtension("OES_vertex_array_object"))||void 0===e?void 0:e.deleteVertexArrayOES(t)}},{key:"unbindVAO",value:function(){this.bindVertexArray.set(null)}}])}(),In=ai((function t(e,n,r){oi(this,t),this.func=e,this.mask=n,this.range=r}));In.ReadOnly=!1,In.ReadWrite=!0,In.disabled=new In(519,In.ReadOnly,[0,1]);var Un=7680,Sn=ai((function t(e,n,r,i,a,o){oi(this,t),this.test=e,this.ref=n,this.mask=r,this.fail=i,this.depthFail=a,this.pass=o}));Sn.disabled=new Sn({func:519,mask:0},0,0,Un,Un,Un);var Qn,Tn=ai((function t(e,n,r){oi(this,t),this.enable=e,this.mode=n,this.frontFace=r}));function Mn(e,n,r,i,a,o,s){for(var A=e.context,u=A.gl,l=e.useProgram("collisionBox"),c=[],h=0,f=0,d=0;d<i.length;d++){var p=i[d],v=n.getTile(p),g=v.getBucket(r);if(g){var m=p.posMatrix;0===a[0]&&0===a[1]||(m=e.translatePosMatrix(p.posMatrix,v,a,o));var y=s?g.textCollisionBox:g.iconCollisionBox,_=g.collisionCircleArray;if(_.length>0){var w=t.Z(),x=m;t.aU(w,g.placementInvProjMatrix,e.transform.glCoordMatrix),t.aU(w,w,g.placementViewportMatrix),c.push({circleArray:_,circleOffset:f,transform:x,invTransform:w,coord:p}),f=h+=_.length/4}y&&l.draw(A,u.LINES,In.disabled,Sn.disabled,e.colorModeForRenderPass(),Tn.disabled,ye(m,e.transform,v),e.style.map.terrain&&e.style.map.terrain.getTerrainData(p),r.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,null,e.transform.zoom,null,null,y.collisionVertexBuffer)}}if(s&&c.length){var b=e.useProgram("collisionCircle"),B=new t.aV;B.resize(4*h),B._trim();for(var k=0,C=0,F=c;C<F.length;C++)for(var E=F[C],I=0;I<E.circleArray.length/4;I++){var U=4*I,S=E.circleArray[U+0],Q=E.circleArray[U+1],T=E.circleArray[U+2],M=E.circleArray[U+3];B.emplace(k++,S,Q,T,M,0),B.emplace(k++,S,Q,T,M,1),B.emplace(k++,S,Q,T,M,2),B.emplace(k++,S,Q,T,M,3)}(!Qn||Qn.length<2*h)&&(Qn=function(e){var n=2*e,r=new t.aX;r.resize(n),r._trim();for(var i=0;i<n;i++){var a=6*i;r.uint16[a+0]=4*i+0,r.uint16[a+1]=4*i+1,r.uint16[a+2]=4*i+2,r.uint16[a+3]=4*i+2,r.uint16[a+4]=4*i+3,r.uint16[a+5]=4*i+0}return r}(h));for(var D,L=A.createIndexBuffer(Qn,!0),P=A.createVertexBuffer(B,t.aW.members,!0),O=0,R=c;O<R.length;O++){var z=R[O],H={u_matrix:z.transform,u_inv_matrix:z.invTransform,u_camera_to_center_distance:(D=e.transform).cameraToCenterDistance,u_viewport_size:[D.width,D.height]};b.draw(A,u.TRIANGLES,In.disabled,Sn.disabled,e.colorModeForRenderPass(),Tn.disabled,H,e.style.map.terrain&&e.style.map.terrain.getTerrainData(z.coord),r.id,P,L,t.S.simpleSegment(0,2*z.circleOffset,z.circleArray.length,z.circleArray.length/2),null,e.transform.zoom,null,null,null)}P.destroy(),L.destroy()}}Tn.disabled=new Tn(!1,1029,2305),Tn.backCCW=new Tn(!0,1029,2305);var Dn=t.ao(new Float32Array(16));function Ln(e,n,r,i,a,o){var s=t.au(e),A=s.horizontalAlign,u=s.verticalAlign;return new t.P((-(A-.5)*n/a+i[0])*o,(-(u-.5)*r/a+i[1])*o)}function Pn(e,n,r,i,a,o,s,A,u,l,c){var h=e.text.placedSymbolArray,f=e.text.dynamicLayoutVertexArray,d=e.icon.dynamicLayoutVertexArray,p={};f.clear();for(var v=0;v<h.length;v++){var g=h.get(v),m=g.hidden||!g.crossTileID||e.allowVerticalPlacement&&!g.placedOrientation?null:i[g.crossTileID];if(m){var y=new t.P(g.anchorX,g.anchorY),_=ut(y,r?s:o,c),w=lt(a.cameraToCenterDistance,_.signedDistanceFromCamera),x=t.aj(e.textSizeData,u,g)*w/t.ap;r&&(x*=e.tilePixelRatio/A);for(var b=m.width,B=m.height,k=Ln(m.anchor,b,B,m.textOffset,m.textBoxScale,x),C=r?ut(y.add(k),o,c).point:_.point.add(n?k.rotate(-a.angle):k),F=e.allowVerticalPlacement&&g.placedOrientation===t.ai.vertical?Math.PI/2:0,E=0;E<g.numGlyphs;E++)t.ak(f,C,F);l&&g.associatedIconIndex>=0&&(p[g.associatedIconIndex]={shiftedAnchor:C,angle:F})}else xt(g.numGlyphs,f)}if(l){d.clear();for(var I=e.icon.placedSymbolArray,U=0;U<I.length;U++){var S=I.get(U);if(S.hidden)xt(S.numGlyphs,d);else{var Q=p[U];if(Q)for(var T=0;T<S.numGlyphs;T++)t.ak(d,Q.shiftedAnchor,Q.angle);else xt(S.numGlyphs,d)}}e.icon.dynamicLayoutVertexBuffer.updateData(d)}e.text.dynamicLayoutVertexBuffer.updateData(f)}function On(t,e,n){return n.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function Rn(e,n,r,i,a,o,s,A,u,l,c,h){var f,d=e.context,p=d.gl,v=e.transform,g="map"===A,m="map"===u,y="viewport"!==A&&"point"!==r.layout.get("symbol-placement"),_=g&&!m&&!y,w=!r.layout.get("symbol-sort-key").isConstant(),x=!1,b=e.depthModeForSublayer(0,In.ReadOnly),B=r._unevaluatedLayout.hasValue("text-variable-anchor")||r._unevaluatedLayout.hasValue("text-variable-anchor-offset"),k=[],C=pO(i);try{var F=function(){var i=f.value,A=n.getTile(i),u=A.getBucket(r);if(!u)return 0;var c=a?u.text:u.icon;if(!c||!c.segments.get().length||!c.hasVisibleVertices)return 0;var h,d,b,C,F=c.programConfigurations.get(r.id),E=a||u.sdfIcons,I=a?u.textSizeData:u.iconSizeData,U=m||0!==v.pitch,S=e.useProgram(On(E,a,u),F),Q=t.ah(I,v.zoom),T=e.style.map.terrain&&e.style.map.terrain.getTerrainData(i),M=[0,0],D=null;if(a)d=A.glyphAtlasTexture,b=p.LINEAR,h=A.glyphAtlasTexture.size,u.iconsInText&&(M=A.imageAtlasTexture.size,D=A.imageAtlasTexture,C=U||e.options.rotating||e.options.zooming||"composite"===I.kind||"camera"===I.kind?p.LINEAR:p.NEAREST);else{var L=1!==r.layout.get("icon-size").constantOr(0)||u.iconsNeedLinear;d=A.imageAtlasTexture,b=E||e.options.rotating||e.options.zooming||L||U?p.LINEAR:p.NEAREST,h=A.imageAtlasTexture.size}var P=Ct(A,1,e.transform.zoom),O=st(i.posMatrix,m,g,e.transform,P),R=At(i.posMatrix,m,g,e.transform,P),z=B&&u.hasTextData(),H="none"!==r.layout.get("icon-text-fit")&&z&&u.hasIconData();if(y){var V=e.style.map.terrain?function(t,n){return e.style.map.terrain.getElevation(i,t,n)}:null,N="map"===r.layout.get("text-rotation-alignment");ht(u,i.posMatrix,e,a,O,R,m,l,N,V)}var K=e.translatePosMatrix(i.posMatrix,A,o,s),G=y||a&&B||H?Dn:O,j=e.translatePosMatrix(R,A,o,s,!0),$=E&&0!==r.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1),W={program:S,buffers:c,uniformValues:E?u.iconsInText?Me(I.kind,Q,_,m,e,K,G,j,h,M):Te(I.kind,Q,_,m,e,K,G,j,a,h,!0):Qe(I.kind,Q,_,m,e,K,G,j,a,h),atlasTexture:d,atlasTextureIcon:D,atlasInterpolation:b,atlasInterpolationIcon:C,isSDF:E,hasHalo:$};if(w&&u.canOverlap){x=!0;var Z,q=pO(c.segments.get());try{for(q.s();!(Z=q.n()).done;){var X=Z.value;k.push({segments:new t.S([X]),sortKey:X.sortKey,state:W,terrainData:T})}}catch(t){q.e(t)}finally{q.f()}}else k.push({segments:c.segments,sortKey:0,state:W,terrainData:T})};for(C.s();!(f=C.n()).done;)F()}catch(t){C.e(t)}finally{C.f()}x&&k.sort((function(t,e){return t.sortKey-e.sortKey}));for(var E=0,I=k;E<I.length;E++){var U=I[E],S=U.state;if(d.activeTexture.set(p.TEXTURE0),S.atlasTexture.bind(S.atlasInterpolation,p.CLAMP_TO_EDGE),S.atlasTextureIcon&&(d.activeTexture.set(p.TEXTURE1),S.atlasTextureIcon&&S.atlasTextureIcon.bind(S.atlasInterpolationIcon,p.CLAMP_TO_EDGE)),S.isSDF){var Q=S.uniformValues;S.hasHalo&&(Q.u_is_halo=1,zn(S.buffers,U.segments,r,e,S.program,b,c,h,Q,U.terrainData)),Q.u_is_halo=0}zn(S.buffers,U.segments,r,e,S.program,b,c,h,S.uniformValues,U.terrainData)}}function zn(t,e,n,r,i,a,o,s,A,u){var l=r.context;i.draw(l,l.gl.TRIANGLES,a,o,s,Tn.disabled,A,u,n.id,t.layoutVertexBuffer,t.indexBuffer,e,n.paint,r.transform.zoom,t.programConfigurations.get(n.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function Hn(t,e,n,r,i){if(n&&r&&r.imageAtlas){var a=r.imageAtlas.patternPositions,o=a[n.to.toString()],s=a[n.from.toString()];if(!o&&s&&(o=s),!s&&o&&(s=o),!o||!s){var A=i.getPaintProperty(e);o=a[A],s=a[A]}o&&s&&t.setConstantPatternPositions(o,s)}}function Vn(t,e,n,r,i,a,o){var s,A,u,l,c,h=t.context.gl,f="fill-pattern",d=n.paint.get(f),p=d&&d.constantOr(1),v=n.getCrossfadeParameters();o?(A=p&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=h.LINES):(A=p?"fillPattern":"fill",s=h.TRIANGLES);var g,m=d.constantOr(null),y=pO(r);try{for(y.s();!(g=y.n()).done;){var _=g.value,w=e.getTile(_);if(!p||w.patternsLoaded()){var x=w.getBucket(n);if(x){var b=x.programConfigurations.get(n.id),B=t.useProgram(A,b),k=t.style.map.terrain&&t.style.map.terrain.getTerrainData(_);p&&(t.context.activeTexture.set(h.TEXTURE0),w.imageAtlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE),b.updatePaintBuffers(v)),Hn(b,f,m,w,n);var C=k?_:null,F=t.translatePosMatrix(C?C.posMatrix:_.posMatrix,w,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(o){l=x.indexBuffer2,c=x.segments2;var E=[h.drawingBufferWidth,h.drawingBufferHeight];u="fillOutlinePattern"===A&&p?ge(F,t,v,w,E):ve(F,E)}else l=x.indexBuffer,c=x.segments,u=p?pe(F,t,v,w):de(F);B.draw(t.context,s,i,t.stencilModeForClipping(_),a,Tn.disabled,u,k,n.id,x.layoutVertexBuffer,l,c,n.paint,t.transform.zoom,b)}}}}catch(t){y.e(t)}finally{y.f()}}function Nn(t,e,n,r,i,a,o){var s,A=t.context,u=A.gl,l="fill-extrusion-pattern",c=n.paint.get(l),h=c.constantOr(1),f=n.getCrossfadeParameters(),d=n.paint.get("fill-extrusion-opacity"),p=c.constantOr(null),v=pO(r);try{for(v.s();!(s=v.n()).done;){var g=s.value,m=e.getTile(g),y=m.getBucket(n);if(y){var _=t.style.map.terrain&&t.style.map.terrain.getTerrainData(g),w=y.programConfigurations.get(n.id),x=t.useProgram(h?"fillExtrusionPattern":"fillExtrusion",w);h&&(t.context.activeTexture.set(u.TEXTURE0),m.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),w.updatePaintBuffers(f)),Hn(w,l,p,m,n);var b=t.translatePosMatrix(g.posMatrix,m,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),B=n.paint.get("fill-extrusion-vertical-gradient"),k=h?fe(b,t,B,d,g,f,m):he(b,t,B,d);x.draw(A,A.gl.TRIANGLES,i,a,o,Tn.backCCW,k,_,n.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,n.paint,t.transform.zoom,w,t.style.map.terrain&&y.centroidVertexBuffer)}}}catch(t){v.e(t)}finally{v.f()}}function Kn(t,e,n,r,i,a,o){var s=t.context,A=s.gl,u=n.fbo;if(u){var l=t.useProgram("hillshade"),c=t.style.map.terrain&&t.style.map.terrain.getTerrainData(e);s.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,u.colorAttachment.get()),l.draw(s,A.TRIANGLES,i,a,o,Tn.disabled,function(t,e,n,r){var i=n.paint.get("hillshade-shadow-color"),a=n.paint.get("hillshade-highlight-color"),o=n.paint.get("hillshade-accent-color"),s=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(s-=t.transform.angle);var A=!t.options.moving;return{u_matrix:r?r.posMatrix:t.transform.calculatePosMatrix(e.tileID.toUnwrapped(),A),u_image:0,u_latrange:be(0,e.tileID),u_light:[n.paint.get("hillshade-exaggeration"),s],u_shadow:i,u_highlight:a,u_accent:o}}(t,n,r,c?e:null),c,r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}function Gn(e,n,r,i,a,o){var s=e.context,A=s.gl,u=n.dem;if(u&&u.data){var l=u.dim,c=u.stride,h=u.getPixels();if(s.activeTexture.set(A.TEXTURE1),s.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(c),n.demTexture){var f=n.demTexture;f.update(h,{premultiply:!1}),f.bind(A.NEAREST,A.CLAMP_TO_EDGE)}else n.demTexture=new y(s,h,A.RGBA,{premultiply:!1}),n.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE);s.activeTexture.set(A.TEXTURE0);var d=n.fbo;if(!d){var p=new y(s,{width:l,height:l,data:null},A.RGBA);p.bind(A.LINEAR,A.CLAMP_TO_EDGE),(d=n.fbo=s.createFramebuffer(l,l,!0,!1)).colorAttachment.set(p.texture)}s.bindFramebuffer.set(d.framebuffer),s.viewport.set([0,0,l,l]),e.useProgram("hillshadePrepare").draw(s,A.TRIANGLES,i,a,o,Tn.disabled,function(e,n){var r=n.stride,i=t.Z();return t.aS(i,0,t.N,-t.N,0,0,1),t.$(i,i,[0,-t.N,0]),{u_matrix:i,u_image:1,u_dimension:[r,r],u_zoom:e.overscaledZ,u_unpack:n.getUnpackVector()}}(n.tileID,u),null,r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function jn(e,n,r,i,a,o){var s=i.paint.get("raster-fade-duration");if(!o&&s>0){var A=t.h.now(),u=(A-e.timeAdded)/s,l=n?(A-n.timeAdded)/s:-1,c=r.getSource(),h=a.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),f=!n||Math.abs(n.tileID.overscaledZ-h)>Math.abs(e.tileID.overscaledZ-h),d=f&&e.refreshedUponExpiration?1:t.ad(f?u:1-l,0,1);return e.refreshedUponExpiration&&u>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}var $n=new t.aT(1,0,0,1),Wn=new t.aT(0,1,0,1),Zn=new t.aT(0,0,1,1),qn=new t.aT(1,0,1,1),Xn=new t.aT(0,1,1,1);function Yn(t,e,n,r){tr(t,0,e+n/2,t.transform.width,n,r)}function Jn(t,e,n,r){tr(t,e-n/2,0,n,t.transform.height,r)}function tr(t,e,n,r,i,a){var o=t.context,s=o.gl;s.enable(s.SCISSOR_TEST),s.scissor(e*t.pixelRatio,n*t.pixelRatio,r*t.pixelRatio,i*t.pixelRatio),o.clear({color:a}),s.disable(s.SCISSOR_TEST)}function er(e,n,r){var i=e.context,a=i.gl,o=r.posMatrix,s=e.useProgram("debug"),A=In.disabled,u=Sn.disabled,l=e.colorModeForRenderPass(),c="$debug",h=e.style.map.terrain&&e.style.map.terrain.getTerrainData(r);i.activeTexture.set(a.TEXTURE0);var f=n.getTileByID(r.key).latestRawTileData,d=Math.floor((f&&f.byteLength||0)/1024),p=n.getTile(r).tileSize,v=512/Math.min(p,512)*(r.overscaledZ/e.transform.zoom)*.5,g=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(g+=" => ".concat(r.overscaledZ)),function(t,e){t.initDebugOverlayCanvas();var n=t.debugOverlayCanvas,r=t.context.gl,i=t.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,n.width,n.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(e,5,5),i.strokeText(e,5,5),t.debugOverlayTexture.update(n),t.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(e,"".concat(g," ").concat(d,"kB")),s.draw(i,a.TRIANGLES,A,u,Fn.alphaBlended,Tn.disabled,_e(o,t.aT.transparent,v),null,c,e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments),s.draw(i,a.LINE_STRIP,A,u,l,Tn.disabled,_e(o,t.aT.red),h,c,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments)}function nr(t,e,n){var r=t.context,i=r.gl,a=t.colorModeForRenderPass(),o=new In(i.LEQUAL,In.ReadWrite,t.depthRangeFor3D),s=t.useProgram("terrain"),A=e.getTerrainMesh();r.bindFramebuffer.set(null),r.viewport.set([0,0,t.width,t.height]);var u,l=pO(n);try{for(l.s();!(u=l.n()).done;){var c=u.value,h=t.renderToTexture.getTexture(c),f=e.getTerrainData(c.tileID);r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,h.texture);var d={u_matrix:t.transform.calculatePosMatrix(c.tileID.toUnwrapped()),u_texture:0,u_ele_delta:e.getMeshFrameDelta(t.transform.zoom)};s.draw(r,i.TRIANGLES,o,Sn.disabled,a,Tn.backCCW,d,f,"terrain",A.vertexBuffer,A.indexBuffer,A.segments)}}catch(t){l.e(t)}finally{l.f()}}var rr=function(){function e(n,r){oi(this,e),this.context=new En(n),this.transform=r,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:t.Z(),renderTime:0},this.setup(),this.numSublayers=q.maxUnderzooming+q.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Yt}return ai(e,[{key:"resize",value:function(t,e,n){if(this.width=Math.floor(t*n),this.height=Math.floor(e*n),this.pixelRatio=n,this.context.viewport.set([0,0,this.width,this.height]),this.style){var r,i=pO(this.style._order);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.style._layers[a].resize()}}catch(t){i.e(t)}finally{i.f()}}}},{key:"setup",value:function(){var e=this.context,n=new t.a_;n.emplaceBack(0,0),n.emplaceBack(t.N,0),n.emplaceBack(0,t.N),n.emplaceBack(t.N,t.N),this.tileExtentBuffer=e.createVertexBuffer(n,ie.members),this.tileExtentSegments=t.S.simpleSegment(0,0,4,2);var r=new t.a_;r.emplaceBack(0,0),r.emplaceBack(t.N,0),r.emplaceBack(0,t.N),r.emplaceBack(t.N,t.N),this.debugBuffer=e.createVertexBuffer(r,ie.members),this.debugSegments=t.S.simpleSegment(0,0,4,5);var i=new t.V;i.emplaceBack(0,0,0,0),i.emplaceBack(t.N,0,t.N,0),i.emplaceBack(0,t.N,0,t.N),i.emplaceBack(t.N,t.N,t.N,t.N),this.rasterBoundsBuffer=e.createVertexBuffer(i,O.members),this.rasterBoundsSegments=t.S.simpleSegment(0,0,4,2);var a=new t.a_;a.emplaceBack(0,0),a.emplaceBack(1,0),a.emplaceBack(0,1),a.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(a,ie.members),this.viewportSegments=t.S.simpleSegment(0,0,4,2);var o=new t.a$;o.emplaceBack(0),o.emplaceBack(1),o.emplaceBack(3),o.emplaceBack(2),o.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(o);var s=new t.b0;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s);var A=this.context.gl;this.stencilClearMode=new Sn({func:A.ALWAYS,mask:0},0,255,A.ZERO,A.ZERO,A.ZERO)}},{key:"clearStencil",value:function(){var e=this.context,n=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var r=t.Z();t.aS(r,0,this.width,this.height,0,0,1),t.a0(r,r,[n.drawingBufferWidth,n.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,n.TRIANGLES,In.disabled,this.stencilClearMode,Fn.disabled,Tn.disabled,we(r),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}},{key:"_renderTileClippingMasks",value:function(t,e){if(this.currentStencilSource!==t.source&&t.isTileClipped()&&e&&e.length){this.currentStencilSource=t.source;var n=this.context,r=n.gl;this.nextStencilID+e.length>256&&this.clearStencil(),n.setColorMode(Fn.disabled),n.setDepthMode(In.disabled);var i=this.useProgram("clippingMask");this._tileClippingMaskIDs={};var a,o=pO(e);try{for(o.s();!(a=o.n()).done;){var s=a.value,A=this._tileClippingMaskIDs[s.key]=this.nextStencilID++,u=this.style.map.terrain&&this.style.map.terrain.getTerrainData(s);i.draw(n,r.TRIANGLES,In.disabled,new Sn({func:r.ALWAYS,mask:0},A,255,r.KEEP,r.KEEP,r.REPLACE),Fn.disabled,Tn.disabled,we(s.posMatrix),u,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}catch(t){o.e(t)}finally{o.f()}}}},{key:"stencilModeFor3D",value:function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var t=this.nextStencilID++,e=this.context.gl;return new Sn({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)}},{key:"stencilModeForClipping",value:function(t){var e=this.context.gl;return new Sn({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)}},{key:"stencilConfigForOverlap",value:function(t){var e=this.context.gl,n=t.sort((function(t,e){return e.overscaledZ-t.overscaledZ})),r=n[n.length-1].overscaledZ,i=n[0].overscaledZ-r+1;if(i>1){this.currentStencilSource=void 0,this.nextStencilID+i>256&&this.clearStencil();for(var a={},o=0;o<i;o++)a[o+r]=new Sn({func:e.GEQUAL,mask:255},o+this.nextStencilID,255,e.KEEP,e.KEEP,e.REPLACE);return this.nextStencilID+=i,[a,n]}return[hi({},r,Sn.disabled),n]}},{key:"colorModeForRenderPass",value:function(){var e=this.context.gl;if(this._showOverdrawInspector){var n=1/8;return new Fn([e.CONSTANT_COLOR,e.ONE],new t.aT(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?Fn.unblended:Fn.alphaBlended}},{key:"depthModeForSublayer",value:function(t,e,n){if(!this.opaquePassEnabledForLayer())return In.disabled;var r=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new In(n||this.context.gl.LEQUAL,e,[r,r])}},{key:"opaquePassEnabledForLayer",value:function(){return this.currentLayer<this.opaquePassCutoff}},{key:"render",value:function(e,n){this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.h.now()),this.imageManager.beginFrame();var r=this.style._order,i=this.style.sourceCaches,a={},o={},s={};for(var A in i){var u=i[A];u.used&&u.prepare(this.context),a[A]=u.getVisibleCoordinates(),o[A]=a[A].slice().reverse(),s[A]=u.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var l=0;l<r.length;l++)if(this.style._layers[r[l]].is3D()){this.opaquePassCutoff=l;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;var c=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!t.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||c.length)&&(t.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(e,n){var r=e.context,i=r.gl,a=Fn.unblended,o=new In(i.LEQUAL,In.ReadWrite,[0,1]),s=n.getTerrainMesh(),A=n.sourceCache.getRenderableTiles(),u=e.useProgram("terrainDepth");r.bindFramebuffer.set(n.getFramebuffer("depth").framebuffer),r.viewport.set([0,0,e.width/devicePixelRatio,e.height/devicePixelRatio]),r.clear({color:t.aT.transparent,depth:1});var l,c=pO(A);try{for(c.s();!(l=c.n()).done;){var h=l.value,f=n.getTerrainData(h.tileID),d={u_matrix:e.transform.calculatePosMatrix(h.tileID.toUnwrapped()),u_ele_delta:n.getMeshFrameDelta(e.transform.zoom)};u.draw(r,i.TRIANGLES,o,Sn.disabled,a,Tn.backCCW,d,f,"terrain",s.vertexBuffer,s.indexBuffer,s.segments)}}catch(t){c.e(t)}finally{c.f()}r.bindFramebuffer.set(null),r.viewport.set([0,0,e.width,e.height])}(this,this.style.map.terrain),function(e,n){var r=e.context,i=r.gl,a=Fn.unblended,o=new In(i.LEQUAL,In.ReadWrite,[0,1]),s=n.getTerrainMesh(),A=n.getCoordsTexture(),u=n.sourceCache.getRenderableTiles(),l=e.useProgram("terrainCoords");r.bindFramebuffer.set(n.getFramebuffer("coords").framebuffer),r.viewport.set([0,0,e.width/devicePixelRatio,e.height/devicePixelRatio]),r.clear({color:t.aT.transparent,depth:1}),n.coordsIndex=[];var c,h=pO(u);try{for(h.s();!(c=h.n()).done;){var f=c.value,d=n.getTerrainData(f.tileID);r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,A.texture);var p={u_matrix:e.transform.calculatePosMatrix(f.tileID.toUnwrapped()),u_terrain_coords_id:(255-n.coordsIndex.length)/255,u_texture:0,u_ele_delta:n.getMeshFrameDelta(e.transform.zoom)};l.draw(r,i.TRIANGLES,o,Sn.disabled,a,Tn.backCCW,p,d,"terrain",s.vertexBuffer,s.indexBuffer,s.segments),n.coordsIndex.push(f.tileID.key)}}catch(t){h.e(t)}finally{h.f()}r.bindFramebuffer.set(null),r.viewport.set([0,0,e.width,e.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";var h,f=pO(r);try{for(f.s();!(h=f.n()).done;){var d=h.value,p=this.style._layers[d];if(p.hasOffscreenPass()&&!p.isHidden(this.transform.zoom)){var v=o[p.source];("custom"===p.type||v.length)&&this.renderLayer(this,i[p.source],p,v)}}}catch(t){f.e(t)}finally{f.f()}if(this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?t.aT.black:t.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){var g=this.style._layers[r[this.currentLayer]],m=i[g.source],y=a[g.source];this._renderTileClippingMasks(g,y),this.renderLayer(this,m,g,y)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<r.length;this.currentLayer++){var _=this.style._layers[r[this.currentLayer]],w=i[_.source];if(!this.renderToTexture||!this.renderToTexture.renderLayer(_)){var x=("symbol"===_.type?s:o)[_.source];this._renderTileClippingMasks(_,a[_.source]),this.renderLayer(this,w,_,x)}}if(this.options.showTileBoundaries){var b=function(t,e){var n=null,r=Object.values(t._layers).flatMap((function(n){return n.source&&!n.isHidden(e)?[t.sourceCaches[n.source]]:[]})),i=r.filter((function(t){return"vector"===t.getSource().type})),a=r.filter((function(t){return"vector"!==t.getSource().type})),o=function(t){(!n||n.getSource().maxzoom<t.getSource().maxzoom)&&(n=t)};return i.forEach((function(t){return o(t)})),n||a.forEach((function(t){return o(t)})),n}(this.style,this.transform.zoom);b&&function(t,e,n){for(var r=0;r<n.length;r++)er(t,e,n[r])}(this,b,b.getVisibleCoordinates())}this.options.showPadding&&function(t){var e=t.transform.padding;Yn(t,t.transform.height-(e.top||0),3,$n),Yn(t,e.bottom||0,3,Wn),Jn(t,e.left||0,3,Zn),Jn(t,t.transform.width-(e.right||0),3,qn);var n=t.transform.centerPoint;!function(t,e,n,r){tr(t,e-1,n-10,2,20,r),tr(t,e-10,n-1,20,2,r)}(t,n.x,t.transform.height-n.y,Xn)}(this),this.context.setDefault()}},{key:"renderLayer",value:function(e,n,r,i){if(!r.isHidden(this.transform.zoom)&&("background"===r.type||"custom"===r.type||(i||[]).length))switch(this.id=r.id,r.type){case"symbol":!function(e,n,r,i,a){if("translucent"===e.renderPass){var o=Sn.disabled,s=e.colorModeForRenderPass();(r._unevaluatedLayout.hasValue("text-variable-anchor")||r._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(e,n,r,i,a,o,s){var A,u=n.transform,l="map"===a,c="map"===o,h=pO(e);try{var f=function(){var e=A.value,a=i.getTile(e),o=a.getBucket(r);if(!o||!o.text||!o.text.segments.get().length)return 1;var h=t.ah(o.textSizeData,u.zoom),f=Ct(a,1,n.transform.zoom),d=st(e.posMatrix,c,l,n.transform,f),p="none"!==r.layout.get("icon-text-fit")&&o.hasIconData();if(h){var v=Math.pow(2,u.zoom-a.tileID.overscaledZ);Pn(o,l,c,s,u,d,e.posMatrix,v,h,p,n.style.map.terrain?function(t,r){return n.style.map.terrain.getElevation(e,t,r)}:null)}};for(h.s();!(A=h.n()).done;)f()}catch(t){h.e(t)}finally{h.f()}}(i,e,r,n,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),a),0!==r.paint.get("icon-opacity").constantOr(1)&&Rn(e,n,r,i,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),o,s),0!==r.paint.get("text-opacity").constantOr(1)&&Rn(e,n,r,i,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),o,s),n.map.showCollisionBoxes&&(Mn(e,n,r,i,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),Mn(e,n,r,i,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))}}(e,n,r,i,this.style.placement.variableOffsets);break;case"circle":!function(e,n,r,i){if("translucent"===e.renderPass){var a=r.paint.get("circle-opacity"),o=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),A=!r.layout.get("circle-sort-key").isConstant();if(0!==a.constantOr(1)||0!==o.constantOr(1)&&0!==s.constantOr(1)){for(var u=e.context,l=u.gl,c=e.depthModeForSublayer(0,In.ReadOnly),h=Sn.disabled,f=e.colorModeForRenderPass(),d=[],p=0;p<i.length;p++){var v=i[p],g=n.getTile(v),m=g.getBucket(r);if(m){var y=m.programConfigurations.get(r.id),_=e.useProgram("circle",y),w=m.layoutVertexBuffer,x=m.indexBuffer,b=e.style.map.terrain&&e.style.map.terrain.getTerrainData(v),B={programConfiguration:y,program:_,layoutVertexBuffer:w,indexBuffer:x,uniformValues:me(e,v,g,r),terrainData:b};if(A){var k,C=pO(m.segments.get());try{for(C.s();!(k=C.n()).done;){var F=k.value;d.push({segments:new t.S([F]),sortKey:F.sortKey,state:B})}}catch(t){C.e(t)}finally{C.f()}}else d.push({segments:m.segments,sortKey:0,state:B})}}A&&d.sort((function(t,e){return t.sortKey-e.sortKey}));for(var E=0,I=d;E<I.length;E++){var U=I[E],S=U.state,Q=S.programConfiguration,T=S.program,M=S.layoutVertexBuffer,D=S.indexBuffer,L=S.uniformValues,P=S.terrainData;T.draw(u,l.TRIANGLES,c,h,f,Tn.disabled,L,P,r.id,M,D,U.segments,r.paint,e.transform.zoom,Q)}}}}(e,n,r,i);break;case"heatmap":!function(e,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var a=e.context,o=a.gl,s=Sn.disabled,A=new Fn([o.ONE,o.ONE],t.aT.transparent,[!0,!0,!0,!0]);!function(t,e,n){var r=t.gl;t.activeTexture.set(r.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var i=n.heatmapFbo;if(i)r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),t.bindFramebuffer.set(i.framebuffer);else{var a=r.createTexture();r.bindTexture(r.TEXTURE_2D,a),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),i=n.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1,!1),function(t,e,n,r){var i,a,o=t.gl,s=null!==(i=t.HALF_FLOAT)&&void 0!==i?i:o.UNSIGNED_BYTE,A=null!==(a=t.RGBA16F)&&void 0!==a?a:o.RGBA;o.texImage2D(o.TEXTURE_2D,0,A,e.width/4,e.height/4,0,o.RGBA,s,null),r.colorAttachment.set(n)}(t,e,a,i)}}(a,e,r),a.clear({color:t.aT.transparent});for(var u=0;u<i.length;u++){var l=i[u];if(!n.hasRenderableParent(l)){var c=n.getTile(l),h=c.getBucket(r);if(h){var f=h.programConfigurations.get(r.id),d=e.useProgram("heatmap",f),p=e.transform.zoom;d.draw(a,o.TRIANGLES,In.disabled,s,A,Tn.disabled,xe(l.posMatrix,c,p,r.paint.get("heatmap-intensity")),null,r.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,r.paint,e.transform.zoom,f)}}}a.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){var r=e.context,i=r.gl,a=n.heatmapFbo;if(a){r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,a.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);var o=n.colorRampTexture;o||(o=n.colorRampTexture=new y(r,n.colorRamp,i.RGBA)),o.bind(i.LINEAR,i.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(r,i.TRIANGLES,In.disabled,Sn.disabled,e.colorModeForRenderPass(),Tn.disabled,function(e,n,r,i){var a=t.Z();t.aS(a,0,e.width,e.height,0,0,1);var o=e.context.gl;return{u_matrix:a,u_world:[o.drawingBufferWidth,o.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:n.paint.get("heatmap-opacity")}}(e,n),null,n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom)}}(e,r))}(e,n,r,i);break;case"line":!function(e,n,r,i){if("translucent"===e.renderPass){var a=r.paint.get("line-opacity"),o=r.paint.get("line-width");if(0!==a.constantOr(1)&&0!==o.constantOr(1)){var s,A=e.depthModeForSublayer(0,In.ReadOnly),u=e.colorModeForRenderPass(),l=r.paint.get("line-dasharray"),c=r.paint.get("line-pattern"),h=c.constantOr(1),f=r.paint.get("line-gradient"),d=r.getCrossfadeParameters(),p=h?"linePattern":l?"lineSDF":f?"lineGradient":"line",v=e.context,g=v.gl,m=!0,_=pO(i);try{for(_.s();!(s=_.n()).done;){var w=s.value,x=n.getTile(w);if(!h||x.patternsLoaded()){var b=x.getBucket(r);if(b){var B=b.programConfigurations.get(r.id),k=e.context.program.get(),C=e.useProgram(p,B),F=m||C.program!==k,E=e.style.map.terrain&&e.style.map.terrain.getTerrainData(w),I=c.constantOr(null);if(I&&x.imageAtlas){var U=x.imageAtlas,S=U.patternPositions[I.to.toString()],Q=U.patternPositions[I.from.toString()];S&&Q&&B.setConstantPatternPositions(S,Q)}var T=E?w:null,M=h?Ce(e,x,r,d,T):l?Fe(e,x,r,l,d,T):f?ke(e,x,r,b.lineClipsArray.length,T):Be(e,x,r,T);if(h)v.activeTexture.set(g.TEXTURE0),x.imageAtlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),B.updatePaintBuffers(d);else if(l&&(F||e.lineAtlas.dirty))v.activeTexture.set(g.TEXTURE0),e.lineAtlas.bind(v);else if(f){var D=b.gradients[r.id],L=D.texture;if(r.gradientVersion!==D.version){var P=256;if(r.stepInterpolant){var O=n.getSource().maxzoom,R=w.canonical.z===O?Math.ceil(1<<e.transform.maxZoom-w.canonical.z):1;P=t.ad(t.aY(b.maxLineLength/t.N*1024*R),256,v.maxTextureSize)}D.gradient=t.aZ({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:P,image:D.gradient||void 0,clips:b.lineClipsArray}),D.texture?D.texture.update(D.gradient):D.texture=new y(v,D.gradient,g.RGBA),D.version=r.gradientVersion,L=D.texture}v.activeTexture.set(g.TEXTURE0),L.bind(r.stepInterpolant?g.NEAREST:g.LINEAR,g.CLAMP_TO_EDGE)}C.draw(v,g.TRIANGLES,A,e.stencilModeForClipping(w),u,Tn.disabled,M,E,r.id,b.layoutVertexBuffer,b.indexBuffer,b.segments,r.paint,e.transform.zoom,B,b.layoutVertexBuffer2),m=!1}}}}catch(t){_.e(t)}finally{_.f()}}}}(e,n,r,i);break;case"fill":!function(e,n,r,i){var a=r.paint.get("fill-color"),o=r.paint.get("fill-opacity");if(0!==o.constantOr(1)){var s=e.colorModeForRenderPass(),A=r.paint.get("fill-pattern"),u=e.opaquePassEnabledForLayer()&&!A.constantOr(1)&&1===a.constantOr(t.aT.transparent).a&&1===o.constantOr(0)?"opaque":"translucent";if(e.renderPass===u){var l=e.depthModeForSublayer(1,"opaque"===e.renderPass?In.ReadWrite:In.ReadOnly);Vn(e,n,r,i,l,s,!1)}if("translucent"===e.renderPass&&r.paint.get("fill-antialias")){var c=e.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,In.ReadOnly);Vn(e,n,r,i,c,s,!0)}}}(e,n,r,i);break;case"fill-extrusion":!function(t,e,n,r){var i=n.paint.get("fill-extrusion-opacity");if(0!==i&&"translucent"===t.renderPass){var a=new In(t.context.gl.LEQUAL,In.ReadWrite,t.depthRangeFor3D);if(1!==i||n.paint.get("fill-extrusion-pattern").constantOr(1))Nn(t,e,n,r,a,Sn.disabled,Fn.disabled),Nn(t,e,n,r,a,t.stencilModeFor3D(),t.colorModeForRenderPass());else{var o=t.colorModeForRenderPass();Nn(t,e,n,r,a,Sn.disabled,o)}}}(e,n,r,i);break;case"hillshade":!function(t,e,n,r){if("offscreen"===t.renderPass||"translucent"===t.renderPass){var i,a=t.context,o=t.depthModeForSublayer(0,In.ReadOnly),s=t.colorModeForRenderPass(),A=gi("translucent"===t.renderPass?t.stencilConfigForOverlap(r):[{},r],2),u=A[0],l=pO(A[1]);try{for(l.s();!(i=l.n()).done;){var c=i.value,h=e.getTile(c);void 0!==h.needsHillshadePrepare&&h.needsHillshadePrepare&&"offscreen"===t.renderPass?Gn(t,h,n,o,Sn.disabled,s):"translucent"===t.renderPass&&Kn(t,c,h,n,o,u[c.overscaledZ],s)}}catch(t){l.e(t)}finally{l.f()}a.viewport.set([0,0,t.width,t.height])}}(e,n,r,i);break;case"raster":!function(t,e,n,r){if("translucent"===t.renderPass&&0!==n.paint.get("raster-opacity")&&r.length){var i,a=t.context,o=a.gl,s=e.getSource(),A=t.useProgram("raster"),u=t.colorModeForRenderPass(),l=gi(s instanceof R?[{},r]:t.stencilConfigForOverlap(r),2),c=l[0],h=l[1],f=h[h.length-1].overscaledZ,d=!t.options.moving,p=pO(h);try{for(p.s();!(i=p.n()).done;){var v=i.value,g=t.depthModeForSublayer(v.overscaledZ-f,1===n.paint.get("raster-opacity")?In.ReadWrite:In.ReadOnly,o.LESS),m=e.getTile(v);m.registerFadeDuration(n.paint.get("raster-fade-duration"));var y=e.findLoadedParent(v,0),_=jn(m,y,e,n,t.transform,t.style.map.terrain),w=void 0,x=void 0,b="nearest"===n.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;a.activeTexture.set(o.TEXTURE0),m.texture.bind(b,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),a.activeTexture.set(o.TEXTURE1),y?(y.texture.bind(b,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),w=Math.pow(2,y.tileID.overscaledZ-m.tileID.overscaledZ),x=[m.tileID.canonical.x*w%1,m.tileID.canonical.y*w%1]):m.texture.bind(b,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);var B=t.style.map.terrain&&t.style.map.terrain.getTerrainData(v),k=B?v:null,C=k?k.posMatrix:t.transform.calculatePosMatrix(v.toUnwrapped(),d),F=Ue(C,x||[0,0],w||1,_,n);s instanceof R?A.draw(a,o.TRIANGLES,g,Sn.disabled,u,Tn.disabled,F,B,n.id,s.boundsBuffer,t.quadTriangleIndexBuffer,s.boundsSegments):A.draw(a,o.TRIANGLES,g,c[v.overscaledZ],u,Tn.disabled,F,B,n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}catch(t){p.e(t)}finally{p.f()}}}(e,n,r,i);break;case"background":!function(t,e,n,r){var i=n.paint.get("background-color"),a=n.paint.get("background-opacity");if(0!==a){var o=t.context,s=o.gl,A=t.transform,u=A.tileSize,l=n.paint.get("background-pattern");if(!t.isPatternMissing(l)){var c=!l&&1===i.a&&1===a&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass===c){var h=Sn.disabled,f=t.depthModeForSublayer(0,"opaque"===c?In.ReadWrite:In.ReadOnly),d=t.colorModeForRenderPass(),p=t.useProgram(l?"backgroundPattern":"background"),v=r||A.coveringTiles({tileSize:u,terrain:t.style.map.terrain});l&&(o.activeTexture.set(s.TEXTURE0),t.imageManager.bind(t.context));var g,m=n.getCrossfadeParameters(),y=pO(v);try{for(y.s();!(g=y.n()).done;){var _=g.value,w=r?_.posMatrix:t.transform.calculatePosMatrix(_.toUnwrapped()),x=l?Le(w,a,t,l,{tileID:_,tileSize:u},m):De(w,a,i),b=t.style.map.terrain&&t.style.map.terrain.getTerrainData(_);p.draw(o,s.TRIANGLES,f,h,d,Tn.disabled,x,b,n.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}catch(t){y.e(t)}finally{y.f()}}}}}(e,0,r,i);break;case"custom":!function(t,e,n){var r=t.context,i=n.implementation;if("offscreen"===t.renderPass){var a=i.prerender;a&&(t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),a.call(i,r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),r.setStencilMode(Sn.disabled);var o="3d"===i.renderingMode?new In(t.context.gl.LEQUAL,In.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,In.ReadOnly);r.setDepthMode(o),i.render(r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState(),r.bindFramebuffer.set(null)}}(e,0,r)}}},{key:"translatePosMatrix",value:function(e,n,r,i,a){if(!r[0]&&!r[1])return e;var o=a?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(o){var s=Math.sin(o),A=Math.cos(o);r=[r[0]*A-r[1]*s,r[0]*s+r[1]*A]}var u=[a?r[0]:Ct(n,r[0],this.transform.zoom),a?r[1]:Ct(n,r[1],this.transform.zoom),0],l=new Float32Array(16);return t.$(l,e,u),l}},{key:"saveTileTexture",value:function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]}},{key:"getTileTexture",value:function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null}},{key:"isPatternMissing",value:function(t){if(!t)return!1;if(!t.from||!t.to)return!0;var e=this.imageManager.getPattern(t.from.toString()),n=this.imageManager.getPattern(t.to.toString());return!e||!n}},{key:"useProgram",value:function(t,e){this.cache=this.cache||{};var n=t+(e?e.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[n]||(this.cache[n]=new le(this.context,oe[t],e,Pe[t],this._showOverdrawInspector,this.style.map.terrain)),this.cache[n]}},{key:"setCustomLayerDefaults",value:function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}},{key:"setBaseState",value:function(){var t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}},{key:"initDebugOverlayCanvas",value:function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new y(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}},{key:"destroy",value:function(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}},{key:"overLimit",value:function(){var t=this.context.gl,e=t.drawingBufferWidth,n=t.drawingBufferHeight;return this.width!==e||this.height!==n}}])}(),ir=function(){function e(t,n){oi(this,e),this.points=t,this.planes=n}return ai(e,null,[{key:"fromInvProjectionMatrix",value:function(n,r,i){var a=Math.pow(2,i),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(e){var i=1/(e=t.ag([],e,n))[3]/r*a;return t.b3(e,e,[i,i,1/e[3],i])})),s=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(t){var e,n,r=function(t,e){var n=e[0],r=e[1],i=e[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t}([],function(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[0],s=n[1],A=n[2];return t[0]=i*A-a*s,t[1]=a*o-r*A,t[2]=r*s-i*o,t}([],p([],o[t[0]],o[t[1]]),p([],o[t[2]],o[t[1]]))),i=-((e=r)[0]*(n=o[t[1]])[0]+e[1]*n[1]+e[2]*n[2]);return r.concat(i)}));return new e(o,s)}}])}(),ar=function(){function e(t,n){oi(this,e),this.min=t,this.max=n,this.center=function(t,e,n){return t[0]=.5*e[0],t[1]=.5*e[1],t[2]=.5*e[2],t}([],function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}([],this.min,this.max))}return ai(e,[{key:"quadrant",value:function(t){for(var n=[t%2==0,t<2],r=f(this.min),i=f(this.max),a=0;a<n.length;a++)r[a]=n[a]?this.min[a]:this.center[a],i[a]=n[a]?this.center[a]:this.max[a];return i[2]=this.max[2],new e(r,i)}},{key:"distanceX",value:function(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}},{key:"distanceY",value:function(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}},{key:"intersects",value:function(e){for(var n=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]],r=!0,i=0;i<e.planes.length;i++){for(var a=e.planes[i],o=0,s=0;s<n.length;s++)t.b4(a,n[s])>=0&&o++;if(0===o)return 0;o!==n.length&&(r=!1)}if(r)return 2;for(var A=0;A<3;A++){for(var u=Number.MAX_VALUE,l=-Number.MAX_VALUE,c=0;c<e.points.length;c++){var h=e.points[c][A]-this.min[A];u=Math.min(u,h),l=Math.max(l,h)}if(l<0||u>this.max[A]-this.min[A])return 0}return 1}}])}(),or=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(oi(this,e),isNaN(t)||t<0||isNaN(n)||n<0||isNaN(r)||r<0||isNaN(i)||i<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=n,this.left=r,this.right=i}return ai(e,[{key:"interpolate",value:function(e,n,r){return null!=n.top&&null!=e.top&&(this.top=t.B.number(e.top,n.top,r)),null!=n.bottom&&null!=e.bottom&&(this.bottom=t.B.number(e.bottom,n.bottom,r)),null!=n.left&&null!=e.left&&(this.left=t.B.number(e.left,n.left,r)),null!=n.right&&null!=e.right&&(this.right=t.B.number(e.right,n.right,r)),this}},{key:"getCenter",value:function(e,n){var r=t.ad((this.left+e-this.right)/2,0,e),i=t.ad((this.top+n-this.bottom)/2,0,n);return new t.P(r,i)}},{key:"equals",value:function(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}},{key:"clone",value:function(){return new e(this.top,this.bottom,this.left,this.right)}},{key:"toJSON",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}])}(),sr=function(){function e(n,r,i,a,o){oi(this,e),this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===o||!!o,this._minZoom=n||0,this._maxZoom=r||22,this._minPitch=null==i?0:i,this._maxPitch=null==a?60:a,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new or,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}return ai(e,[{key:"clone",value:function(){var t=new e(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.apply(this),t}},{key:"apply",value:function(t){this.tileSize=t.tileSize,this.latRange=t.latRange,this.width=t.width,this.height=t.height,this._center=t._center,this._elevation=t._elevation,this._minEleveationForCurrentTile=t._minEleveationForCurrentTile,this.zoom=t.zoom,this.angle=t.angle,this._fov=t._fov,this._pitch=t._pitch,this._unmodified=t._unmodified,this._edgeInsets=t._edgeInsets.clone(),this._calcMatrices()}},{key:"minZoom",get:function(){return this._minZoom},set:function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}},{key:"minPitch",get:function(){return this._minPitch},set:function(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}},{key:"maxPitch",get:function(){return this._maxPitch},set:function(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}},{key:"renderWorldCopies",get:function(){return this._renderWorldCopies},set:function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"centerOffset",get:function(){return this.centerPoint._sub(this.size._div(2))}},{key:"size",get:function(){return new t.P(this.width,this.height)}},{key:"bearing",get:function(){return-this.angle/Math.PI*180},set:function(e){var n=-t.b5(e,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=function(){var e=new t.A(4);return t.A!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}(),function(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(n),A=Math.cos(n);t[0]=r*A+a*s,t[1]=i*A+o*s,t[2]=r*-s+a*A,t[3]=i*-s+o*A}(this.rotationMatrix,this.rotationMatrix,this.angle))}},{key:"pitch",get:function(){return this._pitch/Math.PI*180},set:function(e){var n=t.ad(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}},{key:"fov",get:function(){return this._fov/Math.PI*180},set:function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())}},{key:"zoom",get:function(){return this._zoom},set:function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.tileZoom=Math.max(0,Math.floor(e)),this.scale=this.zoomScale(e),this._constrain(),this._calcMatrices())}},{key:"center",get:function(){return this._center},set:function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())}},{key:"elevation",get:function(){return this._elevation},set:function(t){t!==this._elevation&&(this._elevation=t,this._constrain(),this._calcMatrices())}},{key:"padding",get:function(){return this._edgeInsets.toJSON()},set:function(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}},{key:"centerPoint",get:function(){return this._edgeInsets.getCenter(this.width,this.height)}},{key:"isPaddingEqual",value:function(t){return this._edgeInsets.equals(t)}},{key:"interpolatePadding",value:function(t,e,n){this._unmodified=!1,this._edgeInsets.interpolate(t,e,n),this._constrain(),this._calcMatrices()}},{key:"coveringZoomLevel",value:function(t){var e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)}},{key:"getVisibleUnwrappedCoordinates",value:function(e){var n=[new t.b6(0,e)];if(this._renderWorldCopies)for(var r=this.pointCoordinate(new t.P(0,0)),i=this.pointCoordinate(new t.P(this.width,0)),a=this.pointCoordinate(new t.P(this.width,this.height)),o=this.pointCoordinate(new t.P(0,this.height)),s=Math.floor(Math.min(r.x,i.x,a.x,o.x)),A=Math.floor(Math.max(r.x,i.x,a.x,o.x)),u=1,l=s-u;l<=A+u;l++)0!==l&&n.push(new t.b6(l,e));return n}},{key:"coveringTiles",value:function(e){var n,r,i=this.coveringZoomLevel(e),a=i;if(void 0!==e.minzoom&&i<e.minzoom)return[];void 0!==e.maxzoom&&i>e.maxzoom&&(i=e.maxzoom);var o=this.pointCoordinate(this.getCameraPoint()),s=t.U.fromLngLat(this.center),A=Math.pow(2,i),u=[A*o.x,A*o.y,0],l=[A*s.x,A*s.y,0],c=ir.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,i),h=e.minzoom||0;!e.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(h=i);var f=e.terrain?2/Math.min(this.tileSize,e.tileSize)*this.tileSize:3,d=function(t){return{aabb:new ar([t*A,0,0],[(t+1)*A,A,0]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}},p=[],g=[],m=i,y=e.reparseOverscaled?a:i;if(this._renderWorldCopies)for(var _=1;_<=3;_++)p.push(d(-_)),p.push(d(_));for(p.push(d(0));p.length>0;){var w=p.pop(),x=w.x,b=w.y,B=w.fullyVisible;if(!B){var k=w.aabb.intersects(c);if(0===k)continue;B=2===k}var C=e.terrain?u:l,F=w.aabb.distanceX(C),E=w.aabb.distanceY(C),I=Math.max(Math.abs(F),Math.abs(E));if(w.zoom===m||I>f+(1<<m-w.zoom)-2&&w.zoom>=h){var U=m-w.zoom,S=u[0]-.5-(x<<U),Q=u[1]-.5-(b<<U);g.push({tileID:new t.O(w.zoom===m?y:w.zoom,w.wrap,w.zoom,x,b),distanceSq:v([l[0]-.5-x,l[1]-.5-b]),tileDistanceToCamera:Math.sqrt(S*S+Q*Q)})}else for(var T=0;T<4;T++){var M=(x<<1)+T%2,D=(b<<1)+(T>>1),L=w.zoom+1,P=w.aabb.quadrant(T);if(e.terrain){var O=new t.O(L,w.wrap,L,M,D),R=e.terrain.getMinMaxElevation(O),z=null!==(n=R.minElevation)&&void 0!==n?n:this.elevation,H=null!==(r=R.maxElevation)&&void 0!==r?r:this.elevation;P=new ar([P.min[0],P.min[1],z],[P.max[0],P.max[1],H])}p.push({aabb:P,zoom:L,x:M,y:D,wrap:w.wrap,fullyVisible:B})}}return g.sort((function(t,e){return t.distanceSq-e.distanceSq})).map((function(t){return t.tileID}))}},{key:"resize",value:function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()}},{key:"unmodified",get:function(){return this._unmodified}},{key:"zoomScale",value:function(t){return Math.pow(2,t)}},{key:"scaleZoom",value:function(t){return Math.log(t)/Math.LN2}},{key:"project",value:function(e){var n=t.ad(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.P(t.G(e.lng)*this.worldSize,t.H(n)*this.worldSize)}},{key:"unproject",value:function(e){return new t.U(e.x/this.worldSize,e.y/this.worldSize).toLngLat()}},{key:"point",get:function(){return this.project(this.center)}},{key:"getCameraPosition",value:function(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}},{key:"recalculateZoom",value:function(e){var n=this.pointLocation(this.centerPoint,e),r=e.getElevationForLngLatZoom(n,this.tileZoom);if(this.elevation-r){var i=this.getCameraPosition(),a=t.U.fromLngLat(i.lngLat,i.altitude),o=t.U.fromLngLat(n,r),s=a.x-o.x,A=a.y-o.y,u=a.z-o.z,l=Math.sqrt(s*s+A*A+u*u),c=this.scaleZoom(this.cameraToCenterDistance/l/this.tileSize);this._elevation=r,this._center=n,this.zoom=c}}},{key:"setLocationAtPoint",value:function(e,n){var r=this.pointCoordinate(n),i=this.pointCoordinate(this.centerPoint),a=this.locationCoordinate(e),o=new t.U(a.x-(r.x-i.x),a.y-(r.y-i.y));this.center=this.coordinateLocation(o),this._renderWorldCopies&&(this.center=this.center.wrap())}},{key:"locationPoint",value:function(t,e){return e?this.coordinatePoint(this.locationCoordinate(t),e.getElevationForLngLatZoom(t,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(t))}},{key:"pointLocation",value:function(t,e){return this.coordinateLocation(this.pointCoordinate(t,e))}},{key:"locationCoordinate",value:function(e){return t.U.fromLngLat(e)}},{key:"coordinateLocation",value:function(t){return t&&t.toLngLat()}},{key:"pointCoordinate",value:function(e,n){if(n){var r=n.pointCoordinate(e);if(null!=r)return r}var i=[e.x,e.y,0,1],a=[e.x,e.y,1,1];t.ag(i,i,this.pixelMatrixInverse),t.ag(a,a,this.pixelMatrixInverse);var o=i[3],s=a[3],A=i[1]/o,u=a[1]/s,l=i[2]/o,c=a[2]/s,h=l===c?0:(0-l)/(c-l);return new t.U(t.B.number(i[0]/o,a[0]/s,h)/this.worldSize,t.B.number(A,u,h)/this.worldSize)}},{key:"coordinatePoint",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.pixelMatrix,i=[e.x*this.worldSize,e.y*this.worldSize,n,1];return t.ag(i,i,r),new t.P(i[0]/i[3],i[1]/i[3])}},{key:"getBounds",value:function(){var e=Math.max(0,this.height/2-this.getHorizon());return(new Q).extend(this.pointLocation(new t.P(0,e))).extend(this.pointLocation(new t.P(this.width,e))).extend(this.pointLocation(new t.P(this.width,this.height))).extend(this.pointLocation(new t.P(0,this.height)))}},{key:"getMaxBounds",value:function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new Q([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}},{key:"getHorizon",value:function(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}},{key:"setMaxBounds",value:function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}},{key:"calculatePosMatrix",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.key,i=n?this._alignedPosMatrixCache:this._posMatrixCache;if(i[r])return i[r];var a=e.canonical,o=this.worldSize/this.zoomScale(a.z),s=a.x+Math.pow(2,a.z)*e.wrap,A=t.ao(new Float64Array(16));return t.$(A,A,[s*o,a.y*o,0]),t.a0(A,A,[o/t.N,o/t.N,1]),t.a1(A,n?this.alignedProjMatrix:this.projMatrix,A),i[r]=new Float32Array(A),i[r]}},{key:"customLayerMatrix",value:function(){return this.mercatorMatrix.slice()}},{key:"_constrain",value:function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,n,r,i,a=-90,o=90,s=-180,A=180,u=this.size,l=this._unmodified;if(this.latRange){var c=this.latRange;a=t.H(c[1])*this.worldSize,e=(o=t.H(c[0])*this.worldSize)-a<u.y?u.y/(o-a):0}if(this.lngRange){var h=this.lngRange;s=t.b5(t.G(h[0])*this.worldSize,0,this.worldSize),(A=t.b5(t.G(h[1])*this.worldSize,0,this.worldSize))<s&&(A+=this.worldSize),n=A-s<u.x?u.x/(A-s):0}var f=this.point,d=Math.max(n||0,e||0);if(d)return this.center=this.unproject(new t.P(n?(A+s)/2:f.x,e?(o+a)/2:f.y)),this.zoom+=this.scaleZoom(d),this._unmodified=l,void(this._constraining=!1);if(this.latRange){var p=f.y,v=u.y/2;p-v<a&&(i=a+v),p+v>o&&(i=o-v)}if(this.lngRange){var g=(s+A)/2,m=t.b5(f.x,g-this.worldSize/2,g+this.worldSize/2),y=u.x/2;m-y<s&&(r=s+y),m+y>A&&(r=A-y)}void 0===r&&void 0===i||(this.center=this.unproject(new t.P(void 0!==r?r:f.x,void 0!==i?i:f.y)).wrap()),this._unmodified=l,this._constraining=!1}}},{key:"_calcMatrices",value:function(){if(this.height){var e=this.centerOffset,n=this.point.x,r=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=t.b7(1,this.center.lat)*this.worldSize;var i=t.ao(new Float64Array(16));t.a0(i,i,[this.width/2,-this.height/2,1]),t.$(i,i,[1,-1,0]),this.labelPlaneMatrix=i,i=t.ao(new Float64Array(16)),t.a0(i,i,[1,-1,1]),t.$(i,i,[-1,-1,0]),t.a0(i,i,[2/this.width,2/this.height,1]),this.glCoordMatrix=i;var a=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),o=Math.min(this.elevation,this._minEleveationForCurrentTile),s=a-o*this._pixelPerMeter/Math.cos(this._pitch),A=o<0?s:a,u=Math.PI/2+this._pitch,l=this._fov*(.5+e.y/this.height),c=Math.sin(l)*A/Math.sin(t.ad(Math.PI-u-l,.01,Math.PI-.01)),h=this.getHorizon(),f=2*Math.atan(h/this.cameraToCenterDistance)*(.5+e.y/(2*h)),d=Math.sin(f)*A/Math.sin(t.ad(Math.PI-u-f,.01,Math.PI-.01)),p=Math.min(c,d),v=1.01*(Math.cos(Math.PI/2-this._pitch)*p+A),g=this.height/50;i=new Float64Array(16),t.b8(i,this._fov,this.width/this.height,g,v),i[8]=2*-e.x/this.width,i[9]=2*e.y/this.height,t.a0(i,i,[1,-1,1]),t.$(i,i,[0,0,-this.cameraToCenterDistance]),t.b9(i,i,this._pitch),t.ae(i,i,this.angle),t.$(i,i,[-n,-r,0]),this.mercatorMatrix=t.a0([],i,[this.worldSize,this.worldSize,this.worldSize]),t.a0(i,i,[1,1,this._pixelPerMeter]),this.pixelMatrix=t.a1(new Float64Array(16),this.labelPlaneMatrix,i),t.$(i,i,[0,0,-this.elevation]),this.projMatrix=i,this.invProjMatrix=t.as([],i),this.pixelMatrix3D=t.a1(new Float64Array(16),this.labelPlaneMatrix,i);var m=this.width%2/2,y=this.height%2/2,_=Math.cos(this.angle),w=Math.sin(this.angle),x=n-Math.round(n)+_*m+w*y,b=r-Math.round(r)+_*y+w*m,B=new Float64Array(i);if(t.$(B,B,[x>.5?x-1:x,b>.5?b-1:b,0]),this.alignedProjMatrix=B,!(i=t.as(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=i,this._posMatrixCache={},this._alignedPosMatrixCache={}}}},{key:"maxPitchScaleFactor",value:function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.P(0,0)),n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.ag(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance}},{key:"getCameraPoint",value:function(){var e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.P(0,e))}},{key:"getCameraQueryGeometry",value:function(e){var n=this.getCameraPoint();if(1===e.length)return[e[0],n];var r,i=n.x,a=n.y,o=n.x,s=n.y,A=pO(e);try{for(A.s();!(r=A.n()).done;){var u=r.value;i=Math.min(i,u.x),a=Math.min(a,u.y),o=Math.max(o,u.x),s=Math.max(s,u.y)}}catch(t){A.e(t)}finally{A.f()}return[new t.P(i,a),new t.P(o,a),new t.P(o,s),new t.P(i,s),new t.P(i,a)]}}])}();function Ar(t,e){var n,r=this,i=!1,a=null,o=null,s=function r(){a=null,i&&(t.apply(o,n),a=setTimeout(r,e),i=!1)};return function(){for(var t=arguments.length,e=new Array(t),A=0;A<t;A++)e[A]=arguments[A];return i=!0,o=r,n=e,a||s(),a}}var ur=function(){function t(e){var n=this;oi(this,t),this._getCurrentHash=function(){var t,e=window.location.hash.replace("#","");return n._hashName?(e.split("&").map((function(t){return t.split("=")})).forEach((function(e){e[0]===n._hashName&&(t=e)})),(t&&t[1]||"").split("/")):e.split("/")},this._onHashChange=function(){var t=n._getCurrentHash();if(t.length>=3&&!t.some((function(t){return isNaN(t)}))){var e=n._map.dragRotate.isEnabled()&&n._map.touchZoomRotate.isEnabled()?+(t[3]||0):n._map.getBearing();return n._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1},this._updateHashUnthrottled=function(){var t=window.location.href.replace(/(#.+)?$/,n.getHashString());try{window.history.replaceState(window.history.state,null,t)}catch(t){}},this._updateHash=Ar(this._updateHashUnthrottled,300),this._hashName=e&&encodeURIComponent(e)}return ai(t,[{key:"addTo",value:function(t){return this._map=t,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}},{key:"remove",value:function(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}},{key:"getHashString",value:function(t){var e=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,r=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,r),a=Math.round(e.lng*i)/i,o=Math.round(e.lat*i)/i,s=this._map.getBearing(),A=this._map.getPitch(),u="";if(u+=t?"/".concat(a,"/").concat(o,"/").concat(n):"".concat(n,"/").concat(o,"/").concat(a),(s||A)&&(u+="/"+Math.round(10*s)/10),A&&(u+="/".concat(Math.round(A))),this._hashName){var l=this._hashName,c=!1,h=window.location.hash.slice(1).split("&").map((function(t){var e=t.split("=")[0];return e===l?(c=!0,"".concat(e,"=").concat(u)):t})).filter((function(t){return t}));return c||h.push("".concat(l,"=").concat(u)),"#".concat(h.join("&"))}return"#".concat(u)}}])}(),lr={linearity:.3,easing:t.ba(0,0,.3,1)},cr=t.e({deceleration:2500,maxSpeed:1400},lr),hr=t.e({deceleration:20,maxSpeed:1400},lr),fr=t.e({deceleration:1e3,maxSpeed:360},lr),dr=t.e({deceleration:1e3,maxSpeed:90},lr),pr=function(){function e(t){oi(this,e),this._map=t,this.clear()}return ai(e,[{key:"clear",value:function(){this._inertiaBuffer=[]}},{key:"record",value:function(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.h.now(),settings:e})}},{key:"_drainInertiaBuffer",value:function(){for(var e=this._inertiaBuffer,n=t.h.now();e.length>0&&n-e[0].time>160;)e.shift()}},{key:"_onMoveEnd",value:function(e){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){var n,r={zoom:0,bearing:0,pitch:0,pan:new t.P(0,0),pinchAround:void 0,around:void 0},i=pO(this._inertiaBuffer);try{for(i.s();!(n=i.n()).done;){var a=n.value.settings;r.zoom+=a.zoomDelta||0,r.bearing+=a.bearingDelta||0,r.pitch+=a.pitchDelta||0,a.panDelta&&r.pan._add(a.panDelta),a.around&&(r.around=a.around),a.pinchAround&&(r.pinchAround=a.pinchAround)}}catch(t){i.e(t)}finally{i.f()}var o=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,s={};if(r.pan.mag()){var A=gr(r.pan.mag(),o,t.e({},cr,e||{}));s.offset=r.pan.mult(A.amount/r.pan.mag()),s.center=this._map.transform.center,vr(s,A)}if(r.zoom){var u=gr(r.zoom,o,hr);s.zoom=this._map.transform.zoom+u.amount,vr(s,u)}if(r.bearing){var l=gr(r.bearing,o,fr);s.bearing=this._map.transform.bearing+t.ad(l.amount,-179,179),vr(s,l)}if(r.pitch){var c=gr(r.pitch,o,dr);s.pitch=this._map.transform.pitch+c.amount,vr(s,c)}if(s.zoom||s.bearing){var h=void 0===r.pinchAround?r.around:r.pinchAround;s.around=h?this._map.unproject(h):this._map.getCenter()}return this.clear(),t.e(s,{noMoveStart:!0})}}}])}();function vr(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function gr(e,n,r){var i=r.maxSpeed,a=r.linearity,o=r.deceleration,s=t.ad(e*a/(n/1e3),-i,i),A=Math.abs(s)/(o*a);return{easing:r.easing,duration:1e3*A,amount:s*(A/2)}}var mr=function(e){function r(e,i,a){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};oi(this,r);var A=n.mousePos(i.getCanvasContainer(),a),u=i.unproject(A);return(o=gO(this,r,[e,t.e({point:A,lngLat:u,originalEvent:a},s)]))._defaultPrevented=!1,o.target=i,o}return ci(r,e),ai(r,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}])}(t.k),yr=function(e){function r(e,i,a){var o;oi(this,r);var s="touchend"===e?a.changedTouches:a.touches,A=n.touchPos(i.getCanvasContainer(),s),u=A.map((function(t){return i.unproject(t)})),l=A.reduce((function(t,e,n,r){return t.add(e.div(r.length))}),new t.P(0,0));return(o=gO(this,r,[e,{points:A,point:l,lngLats:u,lngLat:i.unproject(l),originalEvent:a}]))._defaultPrevented=!1,o}return ci(r,e),ai(r,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}])}(t.k),_r=function(t){function e(t,n,r){var i;return oi(this,e),(i=gO(this,e,[t,{originalEvent:r}]))._defaultPrevented=!1,i}return ci(e,t),ai(e,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}])}(t.k),wr=function(){function t(e,n){oi(this,t),this._map=e,this._clickTolerance=n.clickTolerance}return ai(t,[{key:"reset",value:function(){delete this._mousedownPos}},{key:"wheel",value:function(t){return this._firePreventable(new _r(t.type,this._map,t))}},{key:"mousedown",value:function(t,e){return this._mousedownPos=e,this._firePreventable(new mr(t.type,this._map,t))}},{key:"mouseup",value:function(t){this._map.fire(new mr(t.type,this._map,t))}},{key:"click",value:function(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||this._map.fire(new mr(t.type,this._map,t))}},{key:"dblclick",value:function(t){return this._firePreventable(new mr(t.type,this._map,t))}},{key:"mouseover",value:function(t){this._map.fire(new mr(t.type,this._map,t))}},{key:"mouseout",value:function(t){this._map.fire(new mr(t.type,this._map,t))}},{key:"touchstart",value:function(t){return this._firePreventable(new yr(t.type,this._map,t))}},{key:"touchmove",value:function(t){this._map.fire(new yr(t.type,this._map,t))}},{key:"touchend",value:function(t){this._map.fire(new yr(t.type,this._map,t))}},{key:"touchcancel",value:function(t){this._map.fire(new yr(t.type,this._map,t))}},{key:"_firePreventable",value:function(t){if(this._map.fire(t),t.defaultPrevented)return{}}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){}},{key:"disable",value:function(){}}])}(),xr=function(){function t(e){oi(this,t),this._map=e}return ai(t,[{key:"reset",value:function(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}},{key:"mousemove",value:function(t){this._map.fire(new mr(t.type,this._map,t))}},{key:"mousedown",value:function(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}},{key:"mouseup",value:function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new mr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}},{key:"contextmenu",value:function(t){this._delayContextMenu?this._contextMenuEvent=t:this._ignoreContextMenu||this._map.fire(new mr(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){}},{key:"disable",value:function(){}}])}(),br=function(){function e(t){oi(this,e),this._map=t}return ai(e,[{key:"transform",get:function(){return this._map._requestedCameraState||this._map.transform}},{key:"center",get:function(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}},{key:"zoom",get:function(){return this.transform.zoom}},{key:"pitch",get:function(){return this.transform.pitch}},{key:"bearing",get:function(){return this.transform.bearing}},{key:"unproject",value:function(e){return this.transform.pointLocation(t.P.convert(e),this._map.terrain)}}])}(),Br=function(){function e(t,n){oi(this,e),this._map=t,this._tr=new br(t),this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=n.clickTolerance||1}return ai(e,[{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active}},{key:"enable",value:function(){this.isEnabled()||(this._enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this._enabled=!1)}},{key:"mousedown",value:function(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(n.disableDrag(),this._startPos=this._lastPos=e,this._active=!0)}},{key:"mousemoveWindow",value:function(t,e){if(this._active){var r=e;if(!(this._lastPos.equals(r)||!this._box&&r.dist(this._startPos)<this._clickTolerance)){var i=this._startPos;this._lastPos=r,this._box||(this._box=n.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",t));var a=Math.min(i.x,r.x),o=Math.max(i.x,r.x),s=Math.min(i.y,r.y),A=Math.max(i.y,r.y);n.setTransform(this._box,"translate(".concat(a,"px,").concat(s,"px)")),this._box.style.width=o-a+"px",this._box.style.height=A-s+"px"}}}},{key:"mouseupWindow",value:function(e,r){var i=this;if(this._active&&0===e.button){var a=this._startPos,o=r;if(this.reset(),n.suppressClick(),a.x!==o.x||a.y!==o.y)return this._map.fire(new t.k("boxzoomend",{originalEvent:e})),{cameraAnimation:function(t){return t.fitScreenCoordinates(a,o,i._tr.bearing,{linear:!0})}};this._fireEvent("boxzoomcancel",e)}}},{key:"keydown",value:function(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))}},{key:"reset",value:function(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(n.remove(this._box),this._box=null),n.enableDrag(),delete this._startPos,delete this._lastPos}},{key:"_fireEvent",value:function(e,n){return this._map.fire(new t.k(e,{originalEvent:n}))}}])}();function kr(t,e){if(t.length!==e.length)throw new Error("The number of touches and points are not equal - touches ".concat(t.length,", points ").concat(e.length));for(var n={},r=0;r<t.length;r++)n[t[r].identifier]=e[r];return n}var Cr=function(){function e(t){oi(this,e),this.reset(),this.numTouches=t.numTouches}return ai(e,[{key:"reset",value:function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}},{key:"touchstart",value:function(e,n,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),r.length===this.numTouches&&(this.centroid=function(e){var n,r=new t.P(0,0),i=pO(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;r._add(a)}}catch(t){i.e(t)}finally{i.f()}return r.div(e.length)}(n),this.touches=kr(r,n)))}},{key:"touchmove",value:function(t,e,n){if(!this.aborted&&this.centroid){var r=kr(n,e);for(var i in this.touches){var a=r[i];(!a||a.dist(this.touches[i])>30)&&(this.aborted=!0)}}}},{key:"touchend",value:function(t,e,n){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){var r=!this.aborted&&this.centroid;if(this.reset(),r)return r}}}])}(),Fr=function(){function t(e){oi(this,t),this.singleTap=new Cr(e),this.numTaps=e.numTaps,this.reset()}return ai(t,[{key:"reset",value:function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}},{key:"touchstart",value:function(t,e,n){this.singleTap.touchstart(t,e,n)}},{key:"touchmove",value:function(t,e,n){this.singleTap.touchmove(t,e,n)}},{key:"touchend",value:function(t,e,n){var r=this.singleTap.touchend(t,e,n);if(r){var i=t.timeStamp-this.lastTime<500,a=!this.lastTap||this.lastTap.dist(r)<30;if(i&&a||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}}}])}(),Er=function(){function t(e){oi(this,t),this._tr=new br(e),this._zoomIn=new Fr({numTouches:1,numTaps:2}),this._zoomOut=new Fr({numTouches:2,numTaps:1}),this.reset()}return ai(t,[{key:"reset",value:function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}},{key:"touchstart",value:function(t,e,n){this._zoomIn.touchstart(t,e,n),this._zoomOut.touchstart(t,e,n)}},{key:"touchmove",value:function(t,e,n){this._zoomIn.touchmove(t,e,n),this._zoomOut.touchmove(t,e,n)}},{key:"touchend",value:function(t,e,n){var r=this,i=this._zoomIn.touchend(t,e,n),a=this._zoomOut.touchend(t,e,n),o=this._tr;return i?(this._active=!0,t.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:o.zoom+1,around:o.unproject(i)},{originalEvent:t})}}):a?(this._active=!0,t.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:o.zoom-1,around:o.unproject(a)},{originalEvent:t})}}):void 0}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}])}(),Ir=function(){function t(e){oi(this,t),this._enabled=!!e.enable,this._moveStateManager=e.moveStateManager,this._clickTolerance=e.clickTolerance||1,this._moveFunction=e.move,this._activateOnStart=!!e.activateOnStart,e.assignEvents(this),this.reset()}return ai(t,[{key:"reset",value:function(t){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(t)}},{key:"_move",value:function(){var t=this._moveFunction.apply(this,arguments);if(t.bearingDelta||t.pitchDelta||t.around||t.panDelta)return this._active=!0,t}},{key:"dragStart",value:function(t,e){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(t)&&(this._moveStateManager.startMove(t),this._lastPoint=e.length?e[0]:e,this._activateOnStart&&this._lastPoint&&(this._active=!0))}},{key:"dragMove",value:function(t,e){if(this.isEnabled()){var n=this._lastPoint;if(n){if(t.preventDefault(),this._moveStateManager.isValidMoveEvent(t)){var r=e.length?e[0]:e;return!this._moved&&r.dist(n)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=r,this._move(n,r))}this.reset(t)}}}},{key:"dragEnd",value:function(t){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(t)&&(this._moved&&n.suppressClick(),this.reset(t))}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}},{key:"getClickTolerance",value:function(){return this._clickTolerance}}])}(),Ur={0:1,2:2},Sr=function(){function t(e){oi(this,t),this._correctEvent=e.checkCorrectEvent}return ai(t,[{key:"startMove",value:function(t){var e=n.mouseButton(t);this._eventButton=e}},{key:"endMove",value:function(t){delete this._eventButton}},{key:"isValidStartEvent",value:function(t){return this._correctEvent(t)}},{key:"isValidMoveEvent",value:function(t){return!function(t,e){var n=Ur[e];return void 0===t.buttons||(t.buttons&n)!==n}(t,this._eventButton)}},{key:"isValidEndEvent",value:function(t){return n.mouseButton(t)===this._eventButton}}])}(),Qr=function(){function t(){oi(this,t),this._firstTouch=void 0}return ai(t,[{key:"_isOneFingerTouch",value:function(t){return 1===t.targetTouches.length}},{key:"_isSameTouchEvent",value:function(t){return t.targetTouches[0].identifier===this._firstTouch}},{key:"startMove",value:function(t){this._firstTouch=t.targetTouches[0].identifier}},{key:"endMove",value:function(t){delete this._firstTouch}},{key:"isValidStartEvent",value:function(t){return this._isOneFingerTouch(t)}},{key:"isValidMoveEvent",value:function(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}},{key:"isValidEndEvent",value:function(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}}])}(),Tr=function(t){t.mousedown=t.dragStart,t.mousemoveWindow=t.dragMove,t.mouseup=t.dragEnd,t.contextmenu=function(t){t.preventDefault()}},Mr=function(t){var e=t.enable,r=t.clickTolerance,i=t.bearingDegreesPerPixelMoved,a=void 0===i?.8:i,o=new Sr({checkCorrectEvent:function(t){return 0===n.mouseButton(t)&&t.ctrlKey||2===n.mouseButton(t)}});return new Ir({clickTolerance:r,move:function(t,e){return{bearingDelta:(e.x-t.x)*a}},moveStateManager:o,enable:e,assignEvents:Tr})},Dr=function(t){var e=t.enable,r=t.clickTolerance,i=t.pitchDegreesPerPixelMoved,a=void 0===i?-.5:i,o=new Sr({checkCorrectEvent:function(t){return 0===n.mouseButton(t)&&t.ctrlKey||2===n.mouseButton(t)}});return new Ir({clickTolerance:r,move:function(t,e){return{pitchDelta:(e.y-t.y)*a}},moveStateManager:o,enable:e,assignEvents:Tr})},Lr=function(){function e(t,n){oi(this,e),this._minTouches=t.cooperativeGestures?2:1,this._clickTolerance=t.clickTolerance||1,this._map=n,this.reset()}return ai(e,[{key:"reset",value:function(){var e=this;this._active=!1,this._touches={},this._sum=new t.P(0,0),setTimeout((function(){e._cancelCooperativeMessage=!1}),200)}},{key:"touchstart",value:function(t,e,n){return this._calculateTransform(t,e,n)}},{key:"touchmove",value:function(t,e,n){if(this._map._cooperativeGestures&&(2===this._minTouches&&n.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(t,!1,n.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(n.length<this._minTouches))return t.preventDefault(),this._calculateTransform(t,e,n)}},{key:"touchend",value:function(t,e,n){this._calculateTransform(t,e,n),this._active&&n.length<this._minTouches&&this.reset()}},{key:"touchcancel",value:function(){this.reset()}},{key:"_calculateTransform",value:function(e,n,r){r.length>0&&(this._active=!0);var i=kr(r,n),a=new t.P(0,0),o=new t.P(0,0),s=0;for(var A in i){var u=i[A],l=this._touches[A];l&&(a._add(u),o._add(u.sub(l)),s++,i[A]=u)}if(this._touches=i,!(s<this._minTouches)&&o.mag()){var c=o.div(s);return this._sum._add(c),this._sum.mag()<this._clickTolerance?void 0:{around:a.div(s),panDelta:c}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}])}(),Pr=function(){function t(){oi(this,t),this.reset()}return ai(t,[{key:"reset",value:function(){this._active=!1,delete this._firstTwoTouches}},{key:"touchstart",value:function(t,e,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([e[0],e[1]]))}},{key:"touchmove",value:function(t,e,n){if(this._firstTwoTouches){t.preventDefault();var r=gi(this._firstTwoTouches,2),i=r[0],a=r[1],o=Or(n,e,i),s=Or(n,e,a);if(o&&s){var A=this._aroundCenter?null:o.add(s).div(2);return this._move([o,s],A,t)}}}},{key:"touchend",value:function(t,e,r){if(this._firstTwoTouches){var i=gi(this._firstTwoTouches,2),a=i[0],o=i[1],s=Or(r,e,a),A=Or(r,e,o);s&&A||(this._active&&n.suppressClick(),this.reset())}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}])}();function Or(t,e,n){for(var r=0;r<t.length;r++)if(t[r].identifier===n)return e[r]}function Rr(t,e){return Math.log(t/e)/Math.LN2}var zr=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"reset",value:function(){Li(ui(e.prototype),"reset",this).call(this),delete this._distance,delete this._startDistance}},{key:"_start",value:function(t){this._startDistance=this._distance=t[0].dist(t[1])}},{key:"_move",value:function(t,e){var n=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Rr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Rr(this._distance,n),pinchAround:e}}}])}(Pr);function Hr(t,e){return 180*t.angleWith(e)/Math.PI}var Vr=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e,[{key:"reset",value:function(){Li(ui(e.prototype),"reset",this).call(this),delete this._minDiameter,delete this._startVector,delete this._vector}},{key:"_start",value:function(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}},{key:"_move",value:function(t,e){var n=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Hr(this._vector,n),pinchAround:e}}},{key:"_isBelowThreshold",value:function(t){this._minDiameter=Math.min(this._minDiameter,t.mag());var e=25/(Math.PI*this._minDiameter)*360,n=Hr(t,this._startVector);return Math.abs(n)<e}}])}(Pr);function Nr(t){return Math.abs(t.y)>Math.abs(t.x)}var Kr=function(t){function e(t){var n;return oi(this,e),(n=gO(this,e))._map=t,n}return ci(e,t),ai(e,[{key:"reset",value:function(){Li(ui(e.prototype),"reset",this).call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints}},{key:"touchstart",value:function(t,n,r){Li(ui(e.prototype),"touchstart",this).call(this,t,n,r),this._currentTouchCount=r.length}},{key:"_start",value:function(t){this._lastPoints=t,Nr(t[0].sub(t[1]))&&(this._valid=!1)}},{key:"_move",value:function(t,e,n){if(!(this._map._cooperativeGestures&&this._currentTouchCount<3)){var r=t[0].sub(this._lastPoints[0]),i=t[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(r,i,n.timeStamp),this._valid?(this._lastPoints=t,this._active=!0,{pitchDelta:(r.y+i.y)/2*-.5}):void 0}}},{key:"gestureBeginsVertically",value:function(t,e,n){if(void 0!==this._valid)return this._valid;var r=t.mag()>=2,i=e.mag()>=2;if(r||i){if(!r||!i)return void 0===this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;var a=t.y>0==e.y>0;return Nr(t)&&Nr(e)&&a}}}])}(Pr),Gr={panStep:100,bearingStep:15,pitchStep:10},jr=function(){function t(e){oi(this,t),this._tr=new br(e);var n=Gr;this._panStep=n.panStep,this._bearingStep=n.bearingStep,this._pitchStep=n.pitchStep,this._rotationDisabled=!1}return ai(t,[{key:"reset",value:function(){this._active=!1}},{key:"keydown",value:function(t){var e=this;if(!(t.altKey||t.ctrlKey||t.metaKey)){var n=0,r=0,i=0,a=0,o=0;switch(t.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:t.shiftKey?r=-1:(t.preventDefault(),a=-1);break;case 39:t.shiftKey?r=1:(t.preventDefault(),a=1);break;case 38:t.shiftKey?i=1:(t.preventDefault(),o=-1);break;case 40:t.shiftKey?i=-1:(t.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(r=0,i=0),{cameraAnimation:function(s){var A=e._tr;s.easeTo({duration:300,easeId:"keyboardHandler",easing:$r,zoom:n?Math.round(A.zoom)+n*(t.shiftKey?2:1):A.zoom,bearing:A.bearing+r*e._bearingStep,pitch:A.pitch+i*e._pitchStep,offset:[-a*e._panStep,-o*e._panStep],center:A.center},{originalEvent:t})}}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}},{key:"disableRotation",value:function(){this._rotationDisabled=!0}},{key:"enableRotation",value:function(){this._rotationDisabled=!1}}])}();function $r(t){return t*(2-t)}var Wr=4.000244140625,Zr=function(){function e(t,n){var r=this;oi(this,e),this._onTimeout=function(t){r._type="wheel",r._delta-=r._lastValue,r._active||r._start(t)},this._map=t,this._tr=new br(t),this._el=t.getCanvasContainer(),this._triggerRenderFrame=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}return ai(e,[{key:"setZoomRate",value:function(t){this._defaultZoomRate=t}},{key:"setWheelZoomRate",value:function(t){this._wheelZoomRate=t}},{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active||void 0!==this._finishTimeout}},{key:"isZooming",value:function(){return!!this._zooming}},{key:"enable",value:function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around)}},{key:"disable",value:function(){this.isEnabled()&&(this._enabled=!1)}},{key:"wheel",value:function(e){if(this.isEnabled()){if(this._map._cooperativeGestures){if(!e[this._map._metaKey])return;e.preventDefault()}var n=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,r=t.h.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%Wr==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this._active||this._start(e)),e.preventDefault()}}},{key:"_start",value:function(e){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var r=n.mousePos(this._el,e),i=this._tr;this._around=t.L.convert(this._aroundCenter?i.center:i.unproject(r)),this._aroundPoint=i.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}}},{key:"renderFrame",value:function(){var e=this;if(this._frameId&&(this._frameId=null,this.isActive())){var n=this._tr.transform;if(0!==this._delta){var r="wheel"===this._type&&Math.abs(this._delta)>Wr?this._wheelZoomRate:this._defaultZoomRate,i=2/(1+Math.exp(-Math.abs(this._delta*r)));this._delta<0&&0!==i&&(i=1/i);var a="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(a*i))),"wheel"===this._type&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var o,s="number"==typeof this._targetZoom?this._targetZoom:n.zoom,A=this._startZoom,u=this._easing,l=!1;if("wheel"===this._type&&A&&u){var c=Math.min((t.h.now()-this._lastWheelEventTime)/200,1),h=u(c);o=t.B.number(A,s,h),c<1?this._frameId||(this._frameId=!0):l=!0}else o=s,l=!0;return this._active=!0,l&&(this._active=!1,this._finishTimeout=setTimeout((function(){e._zooming=!1,e._triggerRenderFrame(),delete e._targetZoom,delete e._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!l,zoomDelta:o-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}}},{key:"_smoothOutEasing",value:function(e){var n=t.bb;if(this._prevEase){var r=this._prevEase,i=(t.h.now()-r.start)/r.duration,a=r.easing(i+.01)-r.easing(i),o=.27/Math.sqrt(a*a+1e-4)*.01,s=Math.sqrt(.0729-o*o);n=t.ba(o,s,.25,1)}return this._prevEase={start:t.h.now(),duration:e,easing:n},n}},{key:"reset",value:function(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}])}(),qr=function(){function t(e,n){oi(this,t),this._clickZoom=e,this._tapZoom=n}return ai(t,[{key:"enable",value:function(){this._clickZoom.enable(),this._tapZoom.enable()}},{key:"disable",value:function(){this._clickZoom.disable(),this._tapZoom.disable()}},{key:"isEnabled",value:function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}},{key:"isActive",value:function(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}])}(),Xr=function(){function t(e){oi(this,t),this._tr=new br(e),this.reset()}return ai(t,[{key:"reset",value:function(){this._active=!1}},{key:"dblclick",value:function(t,e){var n=this;return t.preventDefault(),{cameraAnimation:function(r){r.easeTo({duration:300,zoom:n._tr.zoom+(t.shiftKey?-1:1),around:n._tr.unproject(e)},{originalEvent:t})}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}])}(),Yr=function(){function t(){oi(this,t),this._tap=new Fr({numTouches:1,numTaps:1}),this.reset()}return ai(t,[{key:"reset",value:function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}},{key:"touchstart",value:function(t,e,n){if(!this._swipePoint)if(this._tapTime){var r=e[0],i=t.timeStamp-this._tapTime<500,a=this._tapPoint.dist(r)<30;i&&a?n.length>0&&(this._swipePoint=r,this._swipeTouch=n[0].identifier):this.reset()}else this._tap.touchstart(t,e,n)}},{key:"touchmove",value:function(t,e,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;var r=e[0],i=r.y-this._swipePoint.y;return this._swipePoint=r,t.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(t,e,n)}},{key:"touchend",value:function(t,e,n){if(this._tapTime)this._swipePoint&&0===n.length&&this.reset();else{var r=this._tap.touchend(t,e,n);r&&(this._tapTime=t.timeStamp,this._tapPoint=r)}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}])}(),Jr=function(){function t(e,n,r){oi(this,t),this._el=e,this._mousePan=n,this._touchPan=r}return ai(t,[{key:"enable",value:function(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}},{key:"disable",value:function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}},{key:"isEnabled",value:function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}},{key:"isActive",value:function(){return this._mousePan.isActive()||this._touchPan.isActive()}}])}(),ti=function(){function t(e,n,r){oi(this,t),this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=n,this._mousePitch=r}return ai(t,[{key:"enable",value:function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}},{key:"disable",value:function(){this._mouseRotate.disable(),this._mousePitch.disable()}},{key:"isEnabled",value:function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}},{key:"isActive",value:function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}])}(),ei=function(){function t(e,n,r,i){oi(this,t),this._el=e,this._touchZoom=n,this._touchRotate=r,this._tapDragZoom=i,this._rotationDisabled=!1,this._enabled=!0}return ai(t,[{key:"enable",value:function(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}},{key:"disable",value:function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}},{key:"isEnabled",value:function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}},{key:"isActive",value:function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}},{key:"disableRotation",value:function(){this._rotationDisabled=!0,this._touchRotate.disable()}},{key:"enableRotation",value:function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}])}(),ri=function(t){return t.zoom||t.drag||t.pitch||t.rotate},ii=function(t){function e(){return oi(this,e),gO(this,e,arguments)}return ci(e,t),ai(e)}(t.k);function Ai(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}var li,fi=function(){function e(t,r){var i=this;oi(this,e),this.handleWindowEvent=function(t){i.handleEvent(t,"".concat(t.type,"Window"))},this.handleEvent=function(t,e){if("blur"!==t.type){i._updatingCamera=!0;var r,a="renderFrame"===t.type?void 0:t,o={needsRenderFrame:!1},s={},A={},u=t.touches,l=u?i._getMapTouches(u):void 0,c=l?n.touchPos(i._el,l):n.mousePos(i._el,t),h=pO(i._handlers);try{for(h.s();!(r=h.n()).done;){var f=r.value,d=f.handlerName,p=f.handler,v=f.allowed;if(p.isEnabled()){var g=void 0;i._blockedByActive(A,v,d)?p.reset():p[e||t.type]&&(g=p[e||t.type](t,c,l),i.mergeHandlerResult(o,s,g,d,a),g&&g.needsRenderFrame&&i._triggerRenderFrame()),(g||p.isActive())&&(A[d]=p)}}}catch(t){h.e(t)}finally{h.f()}var m={};for(var y in i._previousActiveHandlers)A[y]||(m[y]=a);i._previousActiveHandlers=A,(Object.keys(m).length||Ai(o))&&(i._changes.push([o,s,m]),i._triggerRenderFrame()),(Object.keys(A).length||Ai(o))&&i._map._stop(!0),i._updatingCamera=!1;var _=o.cameraAnimation;_&&(i._inertia.clear(),i._fireEvents({},{},!0),i._changes=[],_(i._map))}else i.stop(!0)},this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new pr(t),this._bearingSnap=r.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(r);var a=this._el;this._listeners=[[a,"touchstart",{passive:!0}],[a,"touchmove",{passive:!1}],[a,"touchend",void 0],[a,"touchcancel",void 0],[a,"mousedown",void 0],[a,"mousemove",void 0],[a,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[a,"mouseover",void 0],[a,"mouseout",void 0],[a,"dblclick",void 0],[a,"click",void 0],[a,"keydown",{capture:!1}],[a,"keyup",void 0],[a,"wheel",{passive:!1}],[a,"contextmenu",void 0],[window,"blur",void 0]];var o,s=pO(this._listeners);try{for(s.s();!(o=s.n()).done;){var A=gi(o.value,3),u=A[0],l=A[1],c=A[2];n.addEventListener(u,l,u===document?this.handleWindowEvent:this.handleEvent,c)}}catch(t){s.e(t)}finally{s.f()}}return ai(e,[{key:"destroy",value:function(){var t,e=pO(this._listeners);try{for(e.s();!(t=e.n()).done;){var r=gi(t.value,3),i=r[0],a=r[1],o=r[2];n.removeEventListener(i,a,i===document?this.handleWindowEvent:this.handleEvent,o)}}catch(t){e.e(t)}finally{e.f()}}},{key:"_addDefaultHandlers",value:function(t){var e=this,r=this._map,i=r.getCanvasContainer();this._add("mapEvent",new wr(r,t));var a=r.boxZoom=new Br(r,t);this._add("boxZoom",a),t.interactive&&t.boxZoom&&a.enable();var o=new Er(r),s=new Xr(r);r.doubleClickZoom=new qr(s,o),this._add("tapZoom",o),this._add("clickZoom",s),t.interactive&&t.doubleClickZoom&&r.doubleClickZoom.enable();var A=new Yr;this._add("tapDragZoom",A);var u=r.touchPitch=new Kr(r);this._add("touchPitch",u),t.interactive&&t.touchPitch&&r.touchPitch.enable(t.touchPitch);var l=Mr(t),c=Dr(t);r.dragRotate=new ti(t,l,c),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]),t.interactive&&t.dragRotate&&r.dragRotate.enable();var h=function(t){var e=t.enable,r=t.clickTolerance,i=new Sr({checkCorrectEvent:function(t){return 0===n.mouseButton(t)&&!t.ctrlKey}});return new Ir({clickTolerance:r,move:function(t,e){return{around:e,panDelta:e.sub(t)}},activateOnStart:!0,moveStateManager:i,enable:e,assignEvents:Tr})}(t),f=new Lr(t,r);r.dragPan=new Jr(i,h,f),this._add("mousePan",h),this._add("touchPan",f,["touchZoom","touchRotate"]),t.interactive&&t.dragPan&&r.dragPan.enable(t.dragPan);var d=new Vr,p=new zr;r.touchZoomRotate=new ei(i,p,d,A),this._add("touchRotate",d,["touchPan","touchZoom"]),this._add("touchZoom",p,["touchPan","touchRotate"]),t.interactive&&t.touchZoomRotate&&r.touchZoomRotate.enable(t.touchZoomRotate);var v=r.scrollZoom=new Zr(r,(function(){return e._triggerRenderFrame()}));this._add("scrollZoom",v,["mousePan"]),t.interactive&&t.scrollZoom&&r.scrollZoom.enable(t.scrollZoom);var g=r.keyboard=new jr(r);this._add("keyboard",g),t.interactive&&t.keyboard&&r.keyboard.enable(),this._add("blockableMapEvent",new xr(r))}},{key:"_add",value:function(t,e,n){this._handlers.push({handlerName:t,handler:e,allowed:n}),this._handlersById[t]=e}},{key:"stop",value:function(t){if(!this._updatingCamera){var e,n=pO(this._handlers);try{for(n.s();!(e=n.n()).done;)e.value.handler.reset()}catch(t){n.e(t)}finally{n.f()}this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}},{key:"isActive",value:function(){var t,e=pO(this._handlers);try{for(e.s();!(t=e.n()).done;)if(t.value.handler.isActive())return!0}catch(t){e.e(t)}finally{e.f()}return!1}},{key:"isZooming",value:function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}},{key:"isRotating",value:function(){return!!this._eventsInProgress.rotate}},{key:"isMoving",value:function(){return Boolean(ri(this._eventsInProgress))||this.isZooming()}},{key:"_blockedByActive",value:function(t,e,n){for(var r in t)if(r!==n&&(!e||e.indexOf(r)<0))return!0;return!1}},{key:"_getMapTouches",value:function(t){var e,n=[],r=pO(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;this._el.contains(i.target)&&n.push(i)}}catch(t){r.e(t)}finally{r.f()}return n}},{key:"mergeHandlerResult",value:function(e,n,r,i,a){if(r){t.e(e,r);var o={handlerName:i,originalEvent:r.originalEvent||a};void 0!==r.zoomDelta&&(n.zoom=o),void 0!==r.panDelta&&(n.drag=o),void 0!==r.pitchDelta&&(n.pitch=o),void 0!==r.bearingDelta&&(n.rotate=o)}}},{key:"_applyChanges",value:function(){var e,n={},r={},i={},a=pO(this._changes);try{for(a.s();!(e=a.n()).done;){var o=gi(e.value,3),s=o[0],A=o[1],u=o[2];s.panDelta&&(n.panDelta=(n.panDelta||new t.P(0,0))._add(s.panDelta)),s.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+s.zoomDelta),s.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+s.bearingDelta),s.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+s.pitchDelta),void 0!==s.around&&(n.around=s.around),void 0!==s.pinchAround&&(n.pinchAround=s.pinchAround),s.noInertia&&(n.noInertia=s.noInertia),t.e(r,A),t.e(i,u)}}catch(t){a.e(t)}finally{a.f()}this._updateMapTransform(n,r,i),this._changes=[]}},{key:"_updateMapTransform",value:function(t,e,n){var r=this,i=this._map,a=i._getTransformForUpdate(),o=i.terrain;if(!(Ai(t)||o&&this._terrainMovement))return this._fireEvents(e,n,!0);var s=t.panDelta,A=t.zoomDelta,u=t.bearingDelta,l=t.pitchDelta,c=t.around,h=t.pinchAround;void 0!==h&&(c=h),i._stop(!0),c=c||i.transform.centerPoint;var f=a.pointLocation(s?c.sub(s):c);u&&(a.bearing+=u),l&&(a.pitch+=l),A&&(a.zoom+=A),o?this._terrainMovement||!e.drag&&!e.zoom?e.drag&&this._terrainMovement?a.center=a.pointLocation(a.centerPoint.sub(s)):a.setLocationAtPoint(f,c):(this._terrainMovement=!0,this._map._elevationFreeze=!0,a.setLocationAtPoint(f,c),this._map.once("moveend",(function(){r._map._elevationFreeze=!1,r._terrainMovement=!1,a.recalculateZoom(i.terrain)}))):a.setLocationAtPoint(f,c),i._applyUpdatedTransform(a),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(e,n,!0)}},{key:"_fireEvents",value:function(e,n,r){var i=this,a=ri(this._eventsInProgress),o=ri(e),s={};for(var A in e){var u=e[A].originalEvent;this._eventsInProgress[A]||(s["".concat(A,"start")]=u),this._eventsInProgress[A]=e[A]}for(var l in!a&&o&&this._fireEvent("movestart",o.originalEvent),s)this._fireEvent(l,s[l]);for(var c in o&&this._fireEvent("move",o.originalEvent),e){var h=e[c].originalEvent;this._fireEvent(c,h)}var f,d={};for(var p in this._eventsInProgress){var v=this._eventsInProgress[p],g=v.handlerName,m=v.originalEvent;this._handlersById[g].isActive()||(delete this._eventsInProgress[p],f=n[g]||m,d["".concat(p,"end")]=f)}for(var y in d)this._fireEvent(y,d[y]);var _=ri(this._eventsInProgress);if(r&&(a||o)&&!_){this._updatingCamera=!0;var w=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),x=function(t){return 0!==t&&-i._bearingSnap<t&&t<i._bearingSnap};!w||!w.essential&&t.h.prefersReducedMotion?(this._map.fire(new t.k("moveend",{originalEvent:f})),x(this._map.getBearing())&&this._map.resetNorth()):(x(w.bearing||this._map.getBearing())&&(w.bearing=0),w.freezeElevation=!0,this._map.easeTo(w,{originalEvent:f})),this._updatingCamera=!1}}},{key:"_fireEvent",value:function(e,n){this._map.fire(new t.k(e,n?{originalEvent:n}:{}))}},{key:"_requestFrame",value:function(){var t=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add((function(e){delete t._frameId,t.handleEvent(new ii("renderFrame",{timeStamp:e})),t._applyChanges()}))}},{key:"_triggerRenderFrame",value:function(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}])}(),di=function(e){function n(e,r){var i;return oi(this,n),(i=gO(this,n))._renderFrameCallback=function(){var e=Math.min((t.h.now()-i._easeStart)/i._easeOptions.duration,1);i._onEaseFrame(i._easeOptions.easing(e)),e<1&&i._easeFrameId?i._easeFrameId=i._requestRenderFrame(i._renderFrameCallback):i.stop()},i._moving=!1,i._zooming=!1,i.transform=e,i._bearingSnap=r.bearingSnap,i.on("moveend",(function(){delete i._requestedCameraState})),i}return ci(n,e),ai(n,[{key:"getCenter",value:function(){return new t.L(this.transform.center.lng,this.transform.center.lat)}},{key:"setCenter",value:function(t,e){return this.jumpTo({center:t},e)}},{key:"panBy",value:function(e,n,r){return e=t.P.convert(e).mult(-1),this.panTo(this.transform.center,t.e({offset:e},n),r)}},{key:"panTo",value:function(e,n,r){return this.easeTo(t.e({center:e},n),r)}},{key:"getZoom",value:function(){return this.transform.zoom}},{key:"setZoom",value:function(t,e){return this.jumpTo({zoom:t},e),this}},{key:"zoomTo",value:function(e,n,r){return this.easeTo(t.e({zoom:e},n),r)}},{key:"zoomIn",value:function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this}},{key:"zoomOut",value:function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this}},{key:"getBearing",value:function(){return this.transform.bearing}},{key:"setBearing",value:function(t,e){return this.jumpTo({bearing:t},e),this}},{key:"getPadding",value:function(){return this.transform.padding}},{key:"setPadding",value:function(t,e){return this.jumpTo({padding:t},e),this}},{key:"rotateTo",value:function(e,n,r){return this.easeTo(t.e({bearing:e},n),r)}},{key:"resetNorth",value:function(e,n){return this.rotateTo(0,t.e({duration:1e3},e),n),this}},{key:"resetNorthPitch",value:function(e,n){return this.easeTo(t.e({bearing:0,pitch:0,duration:1e3},e),n),this}},{key:"snapToNorth",value:function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this}},{key:"getPitch",value:function(){return this.transform.pitch}},{key:"setPitch",value:function(t,e){return this.jumpTo({pitch:t},e),this}},{key:"cameraForBounds",value:function(t,e){t=Q.convert(t);var n=e&&e.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),n,e)}},{key:"_cameraForBoxAndBearing",value:function(e,n,r,i){var a={top:0,bottom:0,right:0,left:0};if("number"==typeof(i=t.e({padding:a,offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding){var o=i.padding;i.padding={top:o,bottom:o,right:o,left:o}}i.padding=t.e(a,i.padding);var s=this.transform,A=s.padding,u=s.project(t.L.convert(e)),l=s.project(t.L.convert(n)),c=u.rotate(-r*Math.PI/180),h=l.rotate(-r*Math.PI/180),f=new t.P(Math.max(c.x,h.x),Math.max(c.y,h.y)),d=new t.P(Math.min(c.x,h.x),Math.min(c.y,h.y)),p=f.sub(d),v=(s.width-(A.left+A.right+i.padding.left+i.padding.right))/p.x,g=(s.height-(A.top+A.bottom+i.padding.top+i.padding.bottom))/p.y;if(!(g<0||v<0)){var m=Math.min(s.scaleZoom(s.scale*Math.min(v,g)),i.maxZoom),y=t.P.convert(i.offset),_=new t.P((i.padding.left-i.padding.right)/2,(i.padding.top-i.padding.bottom)/2).rotate(r*Math.PI/180),w=y.add(_).mult(s.scale/s.zoomScale(m));return{center:s.unproject(u.add(l).div(2).sub(w)),zoom:m,bearing:r}}t.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}},{key:"fitBounds",value:function(t,e,n){return this._fitInternal(this.cameraForBounds(t,e),e,n)}},{key:"fitScreenCoordinates",value:function(e,n,r,i,a){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.P.convert(e)),this.transform.pointLocation(t.P.convert(n)),r,i),i,a)}},{key:"_fitInternal",value:function(e,n,r){return e?(delete(n=t.e(e,n)).padding,n.linear?this.easeTo(n,r):this.flyTo(n,r)):this}},{key:"jumpTo",value:function(e,n){this.stop();var r=this._getTransformForUpdate(),i=!1,a=!1,o=!1;return"zoom"in e&&r.zoom!==+e.zoom&&(i=!0,r.zoom=+e.zoom),void 0!==e.center&&(r.center=t.L.convert(e.center)),"bearing"in e&&r.bearing!==+e.bearing&&(a=!0,r.bearing=+e.bearing),"pitch"in e&&r.pitch!==+e.pitch&&(o=!0,r.pitch=+e.pitch),null==e.padding||r.isPaddingEqual(e.padding)||(r.padding=e.padding),this._applyUpdatedTransform(r),this.fire(new t.k("movestart",n)).fire(new t.k("move",n)),i&&this.fire(new t.k("zoomstart",n)).fire(new t.k("zoom",n)).fire(new t.k("zoomend",n)),a&&this.fire(new t.k("rotatestart",n)).fire(new t.k("rotate",n)).fire(new t.k("rotateend",n)),o&&this.fire(new t.k("pitchstart",n)).fire(new t.k("pitch",n)).fire(new t.k("pitchend",n)),this.fire(new t.k("moveend",n))}},{key:"calculateCameraOptionsFromTo",value:function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=t.U.fromLngLat(e,n),o=t.U.fromLngLat(r,i),s=o.x-a.x,A=o.y-a.y,u=o.z-a.z,l=Math.hypot(s,A,u);if(0===l)throw new Error("Can't calculate camera options with same From and To");var c=Math.hypot(s,A),h=this.transform.scaleZoom(this.transform.cameraToCenterDistance/l/this.transform.tileSize),f=180*Math.atan2(s,-A)/Math.PI,d=180*Math.acos(c/l)/Math.PI;return d=u<0?90-d:90+d,{center:o.toLngLat(),zoom:h,pitch:d,bearing:f}}},{key:"easeTo",value:function(e,n){var r=this;this._stop(!1,e.easeId),(!1===(e=t.e({offset:[0,0],duration:500,easing:t.bb},e)).animate||!e.essential&&t.h.prefersReducedMotion)&&(e.duration=0);var i=this._getTransformForUpdate(),a=this.getZoom(),o=this.getBearing(),s=this.getPitch(),A=this.getPadding(),u="zoom"in e?+e.zoom:a,l="bearing"in e?this._normalizeBearing(e.bearing,o):o,c="pitch"in e?+e.pitch:s,h="padding"in e?e.padding:i.padding,f=t.P.convert(e.offset),d=i.centerPoint.add(f),p=i.pointLocation(d),v=t.L.convert(e.center||p);this._normalizeCenter(v);var g,m,y=i.project(p),_=i.project(v).sub(y),w=i.zoomScale(u-a);e.around&&(g=t.L.convert(e.around),m=i.locationPoint(g));var x={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||u!==a,this._rotating=this._rotating||o!==l,this._pitching=this._pitching||c!==s,this._padding=!i.isPaddingEqual(h),this._easeId=e.easeId,this._prepareEase(n,e.noMoveStart,x),this.terrain&&this._prepareElevation(v),this._ease((function(p){if(r._zooming&&(i.zoom=t.B.number(a,u,p)),r._rotating&&(i.bearing=t.B.number(o,l,p)),r._pitching&&(i.pitch=t.B.number(s,c,p)),r._padding&&(i.interpolatePadding(A,h,p),d=i.centerPoint.add(f)),r.terrain&&!e.freezeElevation&&r._updateElevation(p),g)i.setLocationAtPoint(g,m);else{var v=i.zoomScale(i.zoom-a),x=u>a?Math.min(2,w):Math.max(.5,w),b=Math.pow(x,1-p),B=i.unproject(y.add(_.mult(p*b)).mult(v));i.setLocationAtPoint(i.renderWorldCopies?B.wrap():B,d)}r._applyUpdatedTransform(i),r._fireMoveEvents(n)}),(function(t){r.terrain&&r._finalizeElevation(),r._afterEase(n,t)}),e),this}},{key:"_prepareEase",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._moving=!0,n||r.moving||this.fire(new t.k("movestart",e)),this._zooming&&!r.zooming&&this.fire(new t.k("zoomstart",e)),this._rotating&&!r.rotating&&this.fire(new t.k("rotatestart",e)),this._pitching&&!r.pitching&&this.fire(new t.k("pitchstart",e))}},{key:"_prepareElevation",value:function(t){this._elevationCenter=t,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(t,this.transform.tileZoom),this._elevationFreeze=!0}},{key:"_updateElevation",value:function(e){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);var n=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(e<1&&n!==this._elevationTarget){var r=this._elevationTarget-this._elevationStart;this._elevationStart+=e*(r-(n-(r*e+this._elevationStart))/(1-e)),this._elevationTarget=n}this.transform.elevation=t.B.number(this._elevationStart,this._elevationTarget,e)}},{key:"_finalizeElevation",value:function(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}},{key:"_getTransformForUpdate",value:function(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}},{key:"_applyUpdatedTransform",value:function(t){if(this.transformCameraUpdate){var e=t.clone(),n=this.transformCameraUpdate(e),r=n.center,i=n.zoom,a=n.pitch,o=n.bearing,s=n.elevation;r&&(e.center=r),void 0!==i&&(e.zoom=i),void 0!==a&&(e.pitch=a),void 0!==o&&(e.bearing=o),void 0!==s&&(e.elevation=s),this.transform.apply(e)}}},{key:"_fireMoveEvents",value:function(e){this.fire(new t.k("move",e)),this._zooming&&this.fire(new t.k("zoom",e)),this._rotating&&this.fire(new t.k("rotate",e)),this._pitching&&this.fire(new t.k("pitch",e))}},{key:"_afterEase",value:function(e,n){if(!this._easeId||!n||this._easeId!==n){delete this._easeId;var r=this._zooming,i=this._rotating,a=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new t.k("zoomend",e)),i&&this.fire(new t.k("rotateend",e)),a&&this.fire(new t.k("pitchend",e)),this.fire(new t.k("moveend",e))}}},{key:"flyTo",value:function(e,n){var r=this;if(!e.essential&&t.h.prefersReducedMotion){var i=t.F(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(i,n)}this.stop(),e=t.e({offset:[0,0],speed:1.2,curve:1.42,easing:t.bb},e);var a=this._getTransformForUpdate(),o=this.getZoom(),s=this.getBearing(),A=this.getPitch(),u=this.getPadding(),l="zoom"in e?t.ad(+e.zoom,a.minZoom,a.maxZoom):o,c="bearing"in e?this._normalizeBearing(e.bearing,s):s,h="pitch"in e?+e.pitch:A,f="padding"in e?e.padding:a.padding,d=a.zoomScale(l-o),p=t.P.convert(e.offset),v=a.centerPoint.add(p),g=a.pointLocation(v),m=t.L.convert(e.center||g);this._normalizeCenter(m);var y=a.project(g),_=a.project(m).sub(y),w=e.curve,x=Math.max(a.width,a.height),b=x/d,B=_.mag();if("minZoom"in e){var k=t.ad(Math.min(e.minZoom,o,l),a.minZoom,a.maxZoom),C=x/a.zoomScale(k-o);w=Math.sqrt(C/B*2)}var F=w*w;function E(t){var e=(b*b-x*x+(t?-1:1)*F*F*B*B)/(2*(t?b:x)*F*B);return Math.log(Math.sqrt(e*e+1)-e)}function I(t){return(Math.exp(t)-Math.exp(-t))/2}function U(t){return(Math.exp(t)+Math.exp(-t))/2}var S=E(!1),Q=function(t){return U(S)/U(S+w*t)},T=function(t){return x*((U(S)*(I(e=S+w*t)/U(e))-I(S))/F)/B;var e},M=(E(!0)-S)/w;if(Math.abs(B)<1e-6||!isFinite(M)){if(Math.abs(x-b)<1e-6)return this.easeTo(e,n);var D=b<x?-1:1;M=Math.abs(Math.log(b/x))/w,T=function(){return 0},Q=function(t){return Math.exp(D*w*t)}}return e.duration="duration"in e?+e.duration:1e3*M/("screenSpeed"in e?+e.screenSpeed/w:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=s!==c,this._pitching=h!==A,this._padding=!a.isPaddingEqual(f),this._prepareEase(n,!1),this.terrain&&this._prepareElevation(m),this._ease((function(i){var d=i*M,g=1/Q(d);a.zoom=1===i?l:o+a.scaleZoom(g),r._rotating&&(a.bearing=t.B.number(s,c,i)),r._pitching&&(a.pitch=t.B.number(A,h,i)),r._padding&&(a.interpolatePadding(u,f,i),v=a.centerPoint.add(p)),r.terrain&&!e.freezeElevation&&r._updateElevation(i);var w=1===i?m:a.unproject(y.add(_.mult(T(d))).mult(g));a.setLocationAtPoint(a.renderWorldCopies?w.wrap():w,v),r._applyUpdatedTransform(a),r._fireMoveEvents(n)}),(function(){r.terrain&&r._finalizeElevation(),r._afterEase(n)}),e),this}},{key:"isEasing",value:function(){return!!this._easeFrameId}},{key:"stop",value:function(){return this._stop()}},{key:"_stop",value:function(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var n=this._onEaseEnd;delete this._onEaseEnd,n.call(this,e)}if(!t){var r=this.handlers;r&&r.stop(!1)}return this}},{key:"_ease",value:function(e,n,r){!1===r.animate||0===r.duration?(e(1),n()):(this._easeStart=t.h.now(),this._easeOptions=r,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}},{key:"_normalizeBearing",value:function(e,n){e=t.b5(e,-180,180);var r=Math.abs(e-n);return Math.abs(e-360-n)<r&&(e-=360),Math.abs(e+360-n)<r&&(e+=360),e}},{key:"_normalizeCenter",value:function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}}},{key:"queryTerrainElevation",value:function(e){return this.terrain?this.terrain.getElevationForLngLatZoom(t.L.convert(e),this.transform.tileZoom)-this.transform.elevation:null}}])}(t.E),pi=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};oi(this,t),this._toggleAttribution=function(){e._container.classList.contains("maplibregl-compact")&&(e._container.classList.contains("maplibregl-compact-show")?(e._container.setAttribute("open",""),e._container.classList.remove("maplibregl-compact-show")):(e._container.classList.add("maplibregl-compact-show"),e._container.removeAttribute("open")))},this._updateData=function(t){!t||"metadata"!==t.sourceDataType&&"visibility"!==t.sourceDataType&&"style"!==t.dataType&&"terrain"!==t.type||e._updateAttributions()},this._updateCompact=function(){e._map.getCanvasContainer().offsetWidth<=640||e._compact?!1===e._compact?e._container.setAttribute("open",""):e._container.classList.contains("maplibregl-compact")||e._container.classList.contains("maplibregl-attrib-empty")||(e._container.setAttribute("open",""),e._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(e._container.setAttribute("open",""),e._container.classList.contains("maplibregl-compact")&&e._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=function(){e._container.classList.contains("maplibregl-compact")&&e._container.classList.contains("maplibregl-compact-show")&&e._container.classList.remove("maplibregl-compact-show")},this.options=n}return ai(t,[{key:"getDefaultPosition",value:function(){return"bottom-right"}},{key:"onAdd",value:function(t){return this._map=t,this._compact=this.options&&this.options.compact,this._container=n.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=n.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=n.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}},{key:"onRemove",value:function(){n.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}},{key:"_setElementTitle",value:function(t,e){var n=this._map._getUIString("AttributionControl.".concat(e));t.title=n,t.setAttribute("aria-label",n)}},{key:"_updateAttributions",value:function(){if(this._map.style){var t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((function(t){return"string"!=typeof t?"":t}))):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var n=this._map.style.sourceCaches;for(var r in n){var i=n[r];if(i.used||i.usedForTerrain){var a=i.getSource();a.attribution&&t.indexOf(a.attribution)<0&&t.push(a.attribution)}}(t=t.filter((function(t){return String(t).trim()}))).sort((function(t,e){return t.length-e.length})),t=t.filter((function(e,n){for(var r=n+1;r<t.length;r++)if(t[r].indexOf(e)>=0)return!1;return!0}));var o=t.join(" | ");o!==this._attribHTML&&(this._attribHTML=o,t.length?(this._innerContainer.innerHTML=o,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}}])}(),vi=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};oi(this,t),this._updateCompact=function(){var t=e._container.children;if(t.length){var n=t[0];e._map.getCanvasContainer().offsetWidth<=640||e._compact?!1!==e._compact&&n.classList.add("maplibregl-compact"):n.classList.remove("maplibregl-compact")}},this.options=n}return ai(t,[{key:"getDefaultPosition",value:function(){return"bottom-left"}},{key:"onAdd",value:function(t){this._map=t,this._compact=this.options&&this.options.compact,this._container=n.create("div","maplibregl-ctrl");var e=n.create("a","maplibregl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://maplibre.org/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}},{key:"onRemove",value:function(){n.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}])}(),mi=function(){function t(){oi(this,t),this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}return ai(t,[{key:"add",value:function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e}},{key:"remove",value:function(t){var e,n=this._currentlyRunning,r=pO(n?this._queue.concat(n):this._queue);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(i.id===t)return void(i.cancelled=!0)}}catch(t){r.e(t)}finally{r.f()}}},{key:"run",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");var e=this._currentlyRunning=this._queue;this._queue=[];var n,r=pO(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.cancelled&&(i.callback(t),this._cleared))break}}catch(t){r.e(t)}finally{r.f()}this._cleared=!1,this._currentlyRunning=!1}},{key:"clear",value:function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}])}(),yi={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},_i=t.Q([{name:"a_pos3d",type:"Int16",components:3}]),wi=function(e){function n(t){var e;return oi(this,n),(e=gO(this,n)).sourceCache=t,e._tiles={},e._renderableTilesKeys=[],e._sourceTileCache={},e.minzoom=0,e.maxzoom=22,e.tileSize=512,e.deltaZoom=1,t.usedForTerrain=!0,t.tileSize=e.tileSize*Math.pow(2,e.deltaZoom),e}return ci(n,e),ai(n,[{key:"destruct",value:function(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}},{key:"update",value:function(e,n){this.sourceCache.update(e,n),this._renderableTilesKeys=[];var r,i={},a=pO(e.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:n}));try{for(a.s();!(r=a.n()).done;){var o=r.value;i[o.key]=!0,this._renderableTilesKeys.push(o.key),this._tiles[o.key]||(o.posMatrix=new Float64Array(16),t.aS(o.posMatrix,0,t.N,0,t.N,0,1),this._tiles[o.key]=new $(o,this.tileSize))}}catch(t){a.e(t)}finally{a.f()}for(var s in this._tiles)i[s]||delete this._tiles[s]}},{key:"freeRtt",value:function(t){for(var e in this._tiles){var n=this._tiles[e];(!t||n.tileID.equals(t)||n.tileID.isChildOf(t)||t.isChildOf(n.tileID))&&(n.rtt=[])}}},{key:"getRenderableTiles",value:function(){var t=this;return this._renderableTilesKeys.map((function(e){return t.getTileByID(e)}))}},{key:"getTileByID",value:function(t){return this._tiles[t]}},{key:"getTerrainCoords",value:function(e){var n,r={},i=pO(this._renderableTilesKeys);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=this._tiles[a].tileID;if(o.canonical.equals(e.canonical)){var s=e.clone();s.posMatrix=new Float64Array(16),t.aS(s.posMatrix,0,t.N,0,t.N,0,1),r[a]=s}else if(o.canonical.isChildOf(e.canonical)){var A=e.clone();A.posMatrix=new Float64Array(16);var u=o.canonical.z-e.canonical.z,l=o.canonical.x-(o.canonical.x>>u<<u),c=o.canonical.y-(o.canonical.y>>u<<u),h=t.N>>u;t.aS(A.posMatrix,0,h,0,h,0,1),t.$(A.posMatrix,A.posMatrix,[-l*h,-c*h,0]),r[a]=A}else if(e.canonical.isChildOf(o.canonical)){var f=e.clone();f.posMatrix=new Float64Array(16);var d=e.canonical.z-o.canonical.z,p=e.canonical.x-(e.canonical.x>>d<<d),v=e.canonical.y-(e.canonical.y>>d<<d),g=t.N>>d;t.aS(f.posMatrix,0,t.N,0,t.N,0,1),t.$(f.posMatrix,f.posMatrix,[p*g,v*g,0]),t.a0(f.posMatrix,f.posMatrix,[1/Math.pow(2,d),1/Math.pow(2,d),0]),r[a]=f}}}catch(t){i.e(t)}finally{i.f()}return r}},{key:"getSourceTile",value:function(t,e){var n=this.sourceCache._source,r=t.overscaledZ-this.deltaZoom;if(r>n.maxzoom&&(r=n.maxzoom),r<n.minzoom)return null;this._sourceTileCache[t.key]||(this._sourceTileCache[t.key]=t.scaledTo(r).key);var i=this.sourceCache.getTileByID(this._sourceTileCache[t.key]);if((!i||!i.dem)&&e)for(;r>=n.minzoom&&(!i||!i.dem);)i=this.sourceCache.getTileByID(t.scaledTo(r--).key);return i}},{key:"tilesAfterTime",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return Object.values(this._tiles).filter((function(e){return e.timeAdded>=t}))}}])}(t.E),xi=function(){function e(t,n,r){oi(this,e),this.painter=t,this.sourceCache=new wi(n),this.options=r,this.exaggeration="number"==typeof r.exaggeration?r.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}return ai(e,[{key:"getDEMElevation",value:function(e,n,r){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.N;if(!(n>=0&&n<a&&r>=0&&r<a))return 0;var o=this.getTerrainData(e),s=null===(i=o.tile)||void 0===i?void 0:i.dem;if(!s)return 0;var A=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}([],[n/a*t.N,r/a*t.N],o.u_terrain_matrix),u=[A[0]*s.dim,A[1]*s.dim],l=Math.floor(u[0]),c=Math.floor(u[1]),h=u[0]-l,f=u[1]-c;return s.get(l,c)*(1-h)*(1-f)+s.get(l+1,c)*h*(1-f)+s.get(l,c+1)*(1-h)*f+s.get(l+1,c+1)*h*f}},{key:"getElevationForLngLatZoom",value:function(e,n){var r=this._getOverscaledTileIDFromLngLatZoom(e,n),i=r.tileID,a=r.mercatorX,o=r.mercatorY;return this.getElevation(i,a%t.N,o%t.N,t.N)}},{key:"getElevation",value:function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.N;return this.getDEMElevation(e,n,r,i)*this.exaggeration}},{key:"getTerrainData",value:function(e){if(!this._emptyDemTexture){var n=this.painter.context,r=new t.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new y(n,r,n.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new y(n,new t.R({width:1,height:1}),n.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(n.gl.NEAREST,n.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=t.ao([])}var i=this.sourceCache.getSourceTile(e,!0);if(i&&i.dem&&(!i.demTexture||i.needsTerrainPrepare)){var a=this.painter.context;i.demTexture=this.painter.getTileTexture(i.dem.stride),i.demTexture?i.demTexture.update(i.dem.getPixels(),{premultiply:!1}):i.demTexture=new y(a,i.dem.getPixels(),a.gl.RGBA,{premultiply:!1}),i.demTexture.bind(a.gl.NEAREST,a.gl.CLAMP_TO_EDGE),i.needsTerrainPrepare=!1}var o=i&&i+i.tileID.key+e.key;if(o&&!this._demMatrixCache[o]){var s=this.sourceCache.sourceCache._source.maxzoom,A=e.canonical.z-i.tileID.canonical.z;e.overscaledZ>e.canonical.z&&(e.canonical.z>=s?A=e.canonical.z-s:t.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));var u=e.canonical.x-(e.canonical.x>>A<<A),l=e.canonical.y-(e.canonical.y>>A<<A),c=t.bc(new Float64Array(16),[1/(t.N<<A),1/(t.N<<A),0]);t.$(c,c,[u*t.N,l*t.N,0]),this._demMatrixCache[e.key]={matrix:c,coord:e}}return{u_depth:2,u_terrain:3,u_terrain_dim:i&&i.dem&&i.dem.dim||1,u_terrain_matrix:o?this._demMatrixCache[e.key].matrix:this._emptyDemMatrix,u_terrain_unpack:i&&i.dem&&i.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(i&&i.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:i}}},{key:"getFramebuffer",value:function(t){var e=this.painter,n=e.width/devicePixelRatio,r=e.height/devicePixelRatio;return!this._fbo||this._fbo.width===n&&this._fbo.height===r||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new y(e.context,{width:n,height:r,data:null},e.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(e.context.gl.NEAREST,e.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new y(e.context,{width:n,height:r,data:null},e.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(e.context.gl.NEAREST,e.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=e.context.createFramebuffer(n,r,!0,!1),this._fbo.depthAttachment.set(e.context.createRenderbuffer(e.context.gl.DEPTH_COMPONENT16,n,r))),this._fbo.colorAttachment.set("coords"===t?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}},{key:"getCoordsTexture",value:function(){var e=this.painter.context;if(this._coordsTexture)return this._coordsTexture;for(var n=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4),r=0,i=0;r<this._coordsTextureSize;r++)for(var a=0;a<this._coordsTextureSize;a++,i+=4)n[i+0]=255&a,n[i+1]=255&r,n[i+2]=a>>8<<4|r>>8,n[i+3]=0;var o=new t.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(n.buffer)),s=new y(e,o,e.gl.RGBA,{premultiply:!1});return s.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._coordsTexture=s,s}},{key:"pointCoordinate",value:function(e){var n=new Uint8Array(4),r=this.painter.context,i=r.gl;r.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),i.readPixels(e.x,this.painter.height/devicePixelRatio-e.y-1,1,1,i.RGBA,i.UNSIGNED_BYTE,n),r.bindFramebuffer.set(null);var a=n[0]+(n[2]>>4<<8),o=n[1]+((15&n[2])<<8),s=this.coordsIndex[255-n[3]],A=s&&this.sourceCache.getTileByID(s);if(!A)return null;var u=this._coordsTextureSize,l=(1<<A.tileID.canonical.z)*u;return new t.U(this._allowMercatorOverflow(e,(A.tileID.canonical.x*u+a)/l),(A.tileID.canonical.y*u+o)/l,this.getElevation(A.tileID,a,o,u))}},{key:"getTerrainMesh",value:function(){if(this._mesh)return this._mesh;for(var e=this.painter.context,n=new t.bd,r=new t.b0,i=this.meshSize,a=t.N/i,o=i*i,s=0;s<=i;s++)for(var A=0;A<=i;A++)n.emplaceBack(A*a,s*a,0);for(var u=0;u<o;u+=i+1)for(var l=0;l<i;l++)r.emplaceBack(l+u,i+l+u+1,i+l+u+2),r.emplaceBack(l+u,i+l+u+2,l+u+1);for(var c=n.length,h=c+2*(i+1),f=0,d=[0,1];f<d.length;f++)for(var p=d[f],v=0;v<=i;v++)for(var g=0,m=[0,1];g<m.length;g++){var y=m[g];n.emplaceBack(v*a,p*t.N,y)}for(var _=0;_<2*i;_+=2)r.emplaceBack(h+_,h+_+1,h+_+3),r.emplaceBack(h+_,h+_+3,h+_+2),r.emplaceBack(c+_,c+_+3,c+_+1),r.emplaceBack(c+_,c+_+2,c+_+3);for(var w=n.length,x=w+2*(i+1),b=0,B=[0,1];b<B.length;b++)for(var k=B[b],C=0;C<=i;C++)for(var F=0,E=[0,1];F<E.length;F++){var I=E[F];n.emplaceBack(k*t.N,C*a,I)}for(var U=0;U<2*i;U+=2)r.emplaceBack(w+U,w+U+1,w+U+3),r.emplaceBack(w+U,w+U+3,w+U+2),r.emplaceBack(x+U,x+U+3,x+U+1),r.emplaceBack(x+U,x+U+2,x+U+3);return this._mesh={indexBuffer:e.createIndexBuffer(r),vertexBuffer:e.createVertexBuffer(n,_i.members),segments:t.S.simpleSegment(0,0,n.length,r.length)},this._mesh}},{key:"getMeshFrameDelta",value:function(e){return 2*Math.PI*t.be/Math.pow(2,e)/5}},{key:"getMinTileElevationForLngLatZoom",value:function(t,e){var n,r=this._getOverscaledTileIDFromLngLatZoom(t,e).tileID;return null!==(n=this.getMinMaxElevation(r).minElevation)&&void 0!==n?n:0}},{key:"getMinMaxElevation",value:function(t){var e=this.getTerrainData(t).tile,n={minElevation:null,maxElevation:null};return e&&e.dem&&(n.minElevation=e.dem.min*this.exaggeration,n.maxElevation=e.dem.max*this.exaggeration),n}},{key:"_getOverscaledTileIDFromLngLatZoom",value:function(e,n){var r=t.U.fromLngLat(e.wrap()),i=(1<<n)*t.N,a=r.x*i,o=r.y*i,s=Math.floor(a/t.N),A=Math.floor(o/t.N);return{tileID:new t.O(n,0,n,s,A),mercatorX:a,mercatorY:o}}},{key:"_allowMercatorOverflow",value:function(e,n){var r=e.x<this.painter.width/2,i=t.bf(n),a=this.painter.transform.center.lng;return r&&Math.sign(i)>0&&Math.sign(a)<0||!r&&Math.sign(i)<0&&Math.sign(a)>0?(i=360*Math.sign(a)+i,t.G(i)):n}}])}(),bi=function(){function t(e,n,r){oi(this,t),this._context=e,this._size=n,this._tileSize=r,this._objects=[],this._recentlyUsed=[],this._stamp=0}return ai(t,[{key:"destruct",value:function(){var t,e=pO(this._objects);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.texture.destroy(),n.fbo.destroy()}}catch(t){e.e(t)}finally{e.f()}}},{key:"_createObject",value:function(t){var e=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),n=new y(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return n.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),e.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),e.colorAttachment.set(n.texture),{id:t,fbo:e,texture:n,stamp:-1,inUse:!1}}},{key:"getObjectForId",value:function(t){return this._objects[t]}},{key:"useObject",value:function(t){t.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((function(e){return t.id!==e})),this._recentlyUsed.push(t.id)}},{key:"stampObject",value:function(t){t.stamp=++this._stamp}},{key:"getOrCreateFreeObject",value:function(){var t,e=pO(this._recentlyUsed);try{for(e.s();!(t=e.n()).done;){var n=t.value;if(!this._objects[n].inUse)return this._objects[n]}}catch(t){e.e(t)}finally{e.f()}if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");var r=this._createObject(this._objects.length);return this._objects.push(r),r}},{key:"freeObject",value:function(t){t.inUse=!1}},{key:"freeAllObjects",value:function(){var t,e=pO(this._objects);try{for(e.s();!(t=e.n()).done;){var n=t.value;this.freeObject(n)}}catch(t){e.e(t)}finally{e.f()}}},{key:"isFull",value:function(){return!(this._objects.length<this._size)&&!1===this._objects.some((function(t){return!t.inUse}))}}])}(),Bi={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0},ki=function(){function e(t,n){oi(this,e),this.painter=t,this.terrain=n,this.pool=new bi(t.context,30,n.sourceCache.tileSize*n.qualityFactor)}return ai(e,[{key:"destruct",value:function(){this.pool.destruct()}},{key:"getTexture",value:function(t){return this.pool.getObjectForId(t.rtt[this._stacks.length-1].id).texture}},{key:"prepareForRender",value:function(t,e){for(var n in this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=t._order.filter((function(n){return!t._layers[n].isHidden(e)})),this._coordsDescendingInv={},t.sourceCaches){this._coordsDescendingInv[n]={};var r,i=pO(t.sourceCaches[n].getVisibleCoordinates());try{for(i.s();!(r=i.n()).done;){var a=r.value,o=this.terrain.sourceCache.getTerrainCoords(a);for(var s in o)this._coordsDescendingInv[n][s]||(this._coordsDescendingInv[n][s]=[]),this._coordsDescendingInv[n][s].push(o[s])}}catch(t){i.e(t)}finally{i.f()}}this._coordsDescendingInvStr={};var A,u=pO(t._order);try{for(u.s();!(A=u.n()).done;){var l=A.value,c=t._layers[l],h=c.source;if(Bi[c.type]&&!this._coordsDescendingInvStr[h])for(var f in this._coordsDescendingInvStr[h]={},this._coordsDescendingInv[h])this._coordsDescendingInvStr[h][f]=this._coordsDescendingInv[h][f].map((function(t){return t.key})).sort().join()}}catch(t){u.e(t)}finally{u.f()}var d,p=pO(this._renderableTiles);try{for(p.s();!(d=p.n()).done;){var v=d.value;for(var g in this._coordsDescendingInvStr){var m=this._coordsDescendingInvStr[g][v.tileID.key];m&&m!==v.rttCoords[g]&&(v.rtt=[])}}}catch(t){p.e(t)}finally{p.f()}}},{key:"renderLayer",value:function(e){if(e.isHidden(this.painter.transform.zoom))return!1;var n=e.type,r=this.painter,i=this._renderableLayerIds[this._renderableLayerIds.length-1]===e.id;if(Bi[n]&&(this._prevType&&Bi[this._prevType]||this._stacks.push([]),this._prevType=n,this._stacks[this._stacks.length-1].push(e.id),!i))return!0;if(Bi[this._prevType]||Bi[n]&&i){this._prevType=n;var a,o=this._stacks.length-1,s=this._stacks[o]||[],A=pO(this._renderableTiles);try{for(A.s();!(a=A.n()).done;){var u=a.value;if(this.pool.isFull()&&(nr(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(u),u.rtt[o]){var l=this.pool.getObjectForId(u.rtt[o].id);if(l.stamp===u.rtt[o].stamp){this.pool.useObject(l);continue}}var c=this.pool.getOrCreateFreeObject();this.pool.useObject(c),this.pool.stampObject(c),u.rtt[o]={id:c.id,stamp:c.stamp},r.context.bindFramebuffer.set(c.fbo.framebuffer),r.context.clear({color:t.aT.transparent,stencil:0}),r.currentStencilSource=void 0;for(var h=0;h<s.length;h++){var f=r.style._layers[s[h]],d=f.source?this._coordsDescendingInv[f.source][u.tileID.key]:[u.tileID];r.context.viewport.set([0,0,c.fbo.width,c.fbo.height]),r._renderTileClippingMasks(f,d),r.renderLayer(r,r.style.sourceCaches[f.source],f,d),f.source&&(u.rttCoords[f.source]=this._coordsDescendingInvStr[f.source][u.tileID.key])}}}catch(t){A.e(t)}finally{A.f()}return nr(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Bi[n]}return!1}}])}(),Ci=e,Fi={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:t.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},Ei=function(t){t.touchstart=t.dragStart,t.touchmoveWindow=t.dragMove,t.touchend=t.dragEnd},Ii={showCompass:!0,showZoom:!0,visualizePitch:!1},Ui=function(){function e(r,i){var a=this,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];oi(this,e),this.mousedown=function(e){a.startMouse(t.e({},e,{ctrlKey:!0,preventDefault:function(){return e.preventDefault()}}),n.mousePos(a.element,e)),n.addEventListener(window,"mousemove",a.mousemove),n.addEventListener(window,"mouseup",a.mouseup)},this.mousemove=function(t){a.moveMouse(t,n.mousePos(a.element,t))},this.mouseup=function(t){a.mouseRotate.dragEnd(t),a.mousePitch&&a.mousePitch.dragEnd(t),a.offTemp()},this.touchstart=function(t){1!==t.targetTouches.length?a.reset():(a._startPos=a._lastPos=n.touchPos(a.element,t.targetTouches)[0],a.startTouch(t,a._startPos),n.addEventListener(window,"touchmove",a.touchmove,{passive:!1}),n.addEventListener(window,"touchend",a.touchend))},this.touchmove=function(t){1!==t.targetTouches.length?a.reset():(a._lastPos=n.touchPos(a.element,t.targetTouches)[0],a.moveTouch(t,a._lastPos))},this.touchend=function(t){0===t.targetTouches.length&&a._startPos&&a._lastPos&&a._startPos.dist(a._lastPos)<a._clickTolerance&&a.element.click(),delete a._startPos,delete a._lastPos,a.offTemp()},this.reset=function(){a.mouseRotate.reset(),a.mousePitch&&a.mousePitch.reset(),a.touchRotate.reset(),a.touchPitch&&a.touchPitch.reset(),delete a._startPos,delete a._lastPos,a.offTemp()},this._clickTolerance=10;var s=r.dragRotate._mouseRotate.getClickTolerance(),A=r.dragRotate._mousePitch.getClickTolerance();this.element=i,this.mouseRotate=Mr({clickTolerance:s,enable:!0}),this.touchRotate=function(t){var e=t.enable,n=t.clickTolerance,r=t.bearingDegreesPerPixelMoved,i=void 0===r?.8:r,a=new Qr;return new Ir({clickTolerance:n,move:function(t,e){return{bearingDelta:(e.x-t.x)*i}},moveStateManager:a,enable:e,assignEvents:Ei})}({clickTolerance:s,enable:!0}),this.map=r,o&&(this.mousePitch=Dr({clickTolerance:A,enable:!0}),this.touchPitch=function(t){var e=t.enable,n=t.clickTolerance,r=t.pitchDegreesPerPixelMoved,i=void 0===r?-.5:r,a=new Qr;return new Ir({clickTolerance:n,move:function(t,e){return{pitchDelta:(e.y-t.y)*i}},moveStateManager:a,enable:e,assignEvents:Ei})}({clickTolerance:A,enable:!0})),n.addEventListener(i,"mousedown",this.mousedown),n.addEventListener(i,"touchstart",this.touchstart,{passive:!1}),n.addEventListener(i,"touchcancel",this.reset)}return ai(e,[{key:"startMouse",value:function(t,e){this.mouseRotate.dragStart(t,e),this.mousePitch&&this.mousePitch.dragStart(t,e),n.disableDrag()}},{key:"startTouch",value:function(t,e){this.touchRotate.dragStart(t,e),this.touchPitch&&this.touchPitch.dragStart(t,e),n.disableDrag()}},{key:"moveMouse",value:function(t,e){var n=this.map,r=(this.mouseRotate.dragMove(t,e)||{}).bearingDelta;if(r&&n.setBearing(n.getBearing()+r),this.mousePitch){var i=(this.mousePitch.dragMove(t,e)||{}).pitchDelta;i&&n.setPitch(n.getPitch()+i)}}},{key:"moveTouch",value:function(t,e){var n=this.map,r=(this.touchRotate.dragMove(t,e)||{}).bearingDelta;if(r&&n.setBearing(n.getBearing()+r),this.touchPitch){var i=(this.touchPitch.dragMove(t,e)||{}).pitchDelta;i&&n.setPitch(n.getPitch()+i)}}},{key:"off",value:function(){var t=this.element;n.removeEventListener(t,"mousedown",this.mousedown),n.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),n.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),n.removeEventListener(window,"touchend",this.touchend),n.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}},{key:"offTemp",value:function(){n.enableDrag(),n.removeEventListener(window,"mousemove",this.mousemove),n.removeEventListener(window,"mouseup",this.mouseup),n.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),n.removeEventListener(window,"touchend",this.touchend)}}])}();function Si(e,n,r){if(e=new t.L(e.lng,e.lat),n){var i=new t.L(e.lng-360,e.lat),a=new t.L(e.lng+360,e.lat),o=r.locationPoint(e).distSqr(n);r.locationPoint(i).distSqr(n)<o?e=i:r.locationPoint(a).distSqr(n)<o&&(e=a)}for(;Math.abs(e.lng-r.center.lng)>180;){var s=r.locationPoint(e);if(s.x>=0&&s.y>=0&&s.x<=r.width&&s.y<=r.height)break;e.lng>r.center.lng?e.lng-=360:e.lng+=360}return e}var Qi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ti(t,e,n){var r=t.classList;for(var i in Qi)r.remove("maplibregl-".concat(n,"-anchor-").concat(i));r.add("maplibregl-".concat(n,"-anchor-").concat(e))}var Mi=function(e){function r(e){var i;if(oi(this,r),(i=gO(this,r))._onKeyPress=function(t){var e=t.code,n=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==n&&13!==n||i.togglePopup()},i._onMapClick=function(t){var e=t.originalEvent.target,n=i._element;i._popup&&(e===n||n.contains(e))&&i.togglePopup()},i._update=function(t){if(i._map){var e=i._map.loaded()&&!i._map.isMoving();("terrain"===(null==t?void 0:t.type)||"render"===(null==t?void 0:t.type)&&!e)&&i._map.once("render",i._update),i._map.transform.renderWorldCopies&&(i._lngLat=Si(i._lngLat,i._pos,i._map.transform)),i._pos=i._map.project(i._lngLat)._add(i._offset);var r="";"viewport"===i._rotationAlignment||"auto"===i._rotationAlignment?r="rotateZ(".concat(i._rotation,"deg)"):"map"===i._rotationAlignment&&(r="rotateZ(".concat(i._rotation-i._map.getBearing(),"deg)"));var a="";"viewport"===i._pitchAlignment||"auto"===i._pitchAlignment?a="rotateX(0deg)":"map"===i._pitchAlignment&&(a="rotateX(".concat(i._map.getPitch(),"deg)")),t&&"moveend"!==t.type||(i._pos=i._pos.round()),n.setTransform(i._element,"".concat(Qi[i._anchor]," translate(").concat(i._pos.x,"px, ").concat(i._pos.y,"px) ").concat(a," ").concat(r)),i._map.terrain&&!i._opacityTimeout&&(i._opacityTimeout=setTimeout((function(){var t=i._map.unproject(i._pos),e=40075016.686*Math.abs(Math.cos(i._lngLat.lat*Math.PI/180))/Math.pow(2,i._map.transform.tileZoom+8);i._element.style.opacity=t.distanceTo(i._lngLat)>20*e?"0.2":"1.0",i._opacityTimeout=null}),100))}},i._onMove=function(e){if(!i._isDragging){var n=i._clickTolerance||i._map._clickTolerance;i._isDragging=e.point.dist(i._pointerdownPos)>=n}i._isDragging&&(i._pos=e.point.sub(i._positionDelta),i._lngLat=i._map.unproject(i._pos),i.setLngLat(i._lngLat),i._element.style.pointerEvents="none","pending"===i._state&&(i._state="active",i.fire(new t.k("dragstart"))),i.fire(new t.k("drag")))},i._onUp=function(){i._element.style.pointerEvents="auto",i._positionDelta=null,i._pointerdownPos=null,i._isDragging=!1,i._map.off("mousemove",i._onMove),i._map.off("touchmove",i._onMove),"active"===i._state&&i.fire(new t.k("dragend")),i._state="inactive"},i._addDragHandler=function(t){i._element.contains(t.originalEvent.target)&&(t.preventDefault(),i._positionDelta=t.point.sub(i._pos).add(i._offset),i._pointerdownPos=t.point,i._state="pending",i._map.on("mousemove",i._onMove),i._map.on("touchmove",i._onMove),i._map.once("mouseup",i._onUp),i._map.once("touchend",i._onUp))},i._anchor=e&&e.anchor||"center",i._color=e&&e.color||"#3FB1CE",i._scale=e&&e.scale||1,i._draggable=e&&e.draggable||!1,i._clickTolerance=e&&e.clickTolerance||0,i._isDragging=!1,i._state="inactive",i._rotation=e&&e.rotation||0,i._rotationAlignment=e&&e.rotationAlignment||"auto",i._pitchAlignment=e&&e.pitchAlignment&&"auto"!==e.pitchAlignment?e.pitchAlignment:i._rotationAlignment,e&&e.element)i._element=e.element,i._offset=t.P.convert(e&&e.offset||[0,0]);else{i._defaultMarker=!0,i._element=n.create("div"),i._element.setAttribute("aria-label","Map marker");var a=n.createNS("http://www.w3.org/2000/svg","svg"),o=41,s=27;a.setAttributeNS(null,"display","block"),a.setAttributeNS(null,"height","".concat(o,"px")),a.setAttributeNS(null,"width","".concat(s,"px")),a.setAttributeNS(null,"viewBox","0 0 ".concat(s," ").concat(o));var A=n.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"stroke","none"),A.setAttributeNS(null,"stroke-width","1"),A.setAttributeNS(null,"fill","none"),A.setAttributeNS(null,"fill-rule","evenodd");var u=n.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill-rule","nonzero");var l=n.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");for(var c=0,h=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];c<h.length;c++){var f=h[c],d=n.createNS("http://www.w3.org/2000/svg","ellipse");d.setAttributeNS(null,"opacity","0.04"),d.setAttributeNS(null,"cx","10.5"),d.setAttributeNS(null,"cy","5.80029008"),d.setAttributeNS(null,"rx",f.rx),d.setAttributeNS(null,"ry",f.ry),l.appendChild(d)}var p=n.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"fill",i._color);var v=n.createNS("http://www.w3.org/2000/svg","path");v.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),p.appendChild(v);var g=n.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"opacity","0.25"),g.setAttributeNS(null,"fill","#000000");var m=n.createNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),g.appendChild(m);var y=n.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"transform","translate(6.0, 7.0)"),y.setAttributeNS(null,"fill","#FFFFFF");var _=n.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"transform","translate(8.0, 8.0)");var w=n.createNS("http://www.w3.org/2000/svg","circle");w.setAttributeNS(null,"fill","#000000"),w.setAttributeNS(null,"opacity","0.25"),w.setAttributeNS(null,"cx","5.5"),w.setAttributeNS(null,"cy","5.5"),w.setAttributeNS(null,"r","5.4999962");var x=n.createNS("http://www.w3.org/2000/svg","circle");x.setAttributeNS(null,"fill","#FFFFFF"),x.setAttributeNS(null,"cx","5.5"),x.setAttributeNS(null,"cy","5.5"),x.setAttributeNS(null,"r","5.4999962"),_.appendChild(w),_.appendChild(x),u.appendChild(l),u.appendChild(p),u.appendChild(g),u.appendChild(y),u.appendChild(_),a.appendChild(u),a.setAttributeNS(null,"height",o*i._scale+"px"),a.setAttributeNS(null,"width",s*i._scale+"px"),i._element.appendChild(a),i._offset=t.P.convert(e&&e.offset||[0,-14])}if(i._element.classList.add("maplibregl-marker"),i._element.addEventListener("dragstart",(function(t){t.preventDefault()})),i._element.addEventListener("mousedown",(function(t){t.preventDefault()})),Ti(i._element,i._anchor,"marker"),e&&e.className){var b,B=pO(e.className.split(" "));try{for(B.s();!(b=B.n()).done;){var k=b.value;i._element.classList.add(k)}}catch(t){B.e(t)}finally{B.f()}}return i._popup=null,si(i)}return ci(r,e),ai(r,[{key:"addTo",value:function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),t.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}},{key:"remove",value:function(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),n.remove(this._element),this._popup&&this._popup.remove(),this}},{key:"getLngLat",value:function(){return this._lngLat}},{key:"setLngLat",value:function(e){return this._lngLat=t.L.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}},{key:"getElement",value:function(){return this._element}},{key:"setPopup",value:function(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){var e=38.1,n=13.5,r=Math.abs(n)/Math.SQRT2;t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-e],"bottom-left":[r,-1*(e-n+r)],"bottom-right":[-r,-1*(e-n+r)],left:[n,-1*(e-n)],right:[-n,-1*(e-n)]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}},{key:"getPopup",value:function(){return this._popup}},{key:"togglePopup",value:function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this}},{key:"getOffset",value:function(){return this._offset}},{key:"setOffset",value:function(e){return this._offset=t.P.convert(e),this._update(),this}},{key:"addClassName",value:function(t){this._element.classList.add(t)}},{key:"removeClassName",value:function(t){this._element.classList.remove(t)}},{key:"toggleClassName",value:function(t){return this._element.classList.toggle(t)}},{key:"setDraggable",value:function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}},{key:"isDraggable",value:function(){return this._draggable}},{key:"setRotation",value:function(t){return this._rotation=t||0,this._update(),this}},{key:"getRotation",value:function(){return this._rotation}},{key:"setRotationAlignment",value:function(t){return this._rotationAlignment=t||"auto",this._update(),this}},{key:"getRotationAlignment",value:function(){return this._rotationAlignment}},{key:"setPitchAlignment",value:function(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this}},{key:"getPitchAlignment",value:function(){return this._pitchAlignment}}])}(t.E),Pi={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Oi=0,Ri=!1,zi={maxWidth:100,unit:"metric"};function Hi(t,e,n){var r=n&&n.maxWidth||100,i=t._container.clientHeight/2,a=t.unproject([0,i]),o=t.unproject([r,i]),s=a.distanceTo(o);if(n&&"imperial"===n.unit){var A=3.2808*s;A>5280?Vi(e,r,A/5280,t._getUIString("ScaleControl.Miles")):Vi(e,r,A,t._getUIString("ScaleControl.Feet"))}else n&&"nautical"===n.unit?Vi(e,r,s/1852,t._getUIString("ScaleControl.NauticalMiles")):s>=1e3?Vi(e,r,s/1e3,t._getUIString("ScaleControl.Kilometers")):Vi(e,r,s,t._getUIString("ScaleControl.Meters"))}function Vi(t,e,n,r){var i=function(t){var e=Math.pow(10,"".concat(Math.floor(t)).length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(t){var e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(n),e*n}(n);t.style.width=e*(i/n)+"px",t.innerHTML="".concat(i,"&nbsp;").concat(r)}var Ni={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Ki=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Gi(e){if(e){if("number"==typeof e){var n=Math.round(Math.abs(e)/Math.SQRT2);return{center:new t.P(0,0),top:new t.P(0,e),"top-left":new t.P(n,n),"top-right":new t.P(-n,n),bottom:new t.P(0,-e),"bottom-left":new t.P(n,-n),"bottom-right":new t.P(-n,-n),left:new t.P(e,0),right:new t.P(-e,0)}}if(e instanceof t.P||Array.isArray(e)){var r=t.P.convert(e);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:t.P.convert(e.center||[0,0]),top:t.P.convert(e.top||[0,0]),"top-left":t.P.convert(e["top-left"]||[0,0]),"top-right":t.P.convert(e["top-right"]||[0,0]),bottom:t.P.convert(e.bottom||[0,0]),"bottom-left":t.P.convert(e["bottom-left"]||[0,0]),"bottom-right":t.P.convert(e["bottom-right"]||[0,0]),left:t.P.convert(e.left||[0,0]),right:t.P.convert(e.right||[0,0])}}return Gi(new t.P(0,0))}var ji={extend:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.e.apply(t,[e].concat(r))},run:function(t){t()},logToElement:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"log",r=window.document.getElementById(n);r&&(e&&(r.innerHTML=""),r.innerHTML+="<br>".concat(t))}},$i=e,Wi=function(){function e(){oi(this,e)}return ai(e,null,[{key:"version",get:function(){return $i}},{key:"workerCount",get:function(){return et.workerCount},set:function(t){et.workerCount=t}},{key:"maxParallelImageRequests",get:function(){return t.c.MAX_PARALLEL_IMAGE_REQUESTS},set:function(e){t.c.MAX_PARALLEL_IMAGE_REQUESTS=e}},{key:"workerUrl",get:function(){return t.c.WORKER_URL},set:function(e){t.c.WORKER_URL=e}},{key:"addProtocol",value:function(e,n){t.c.REGISTERED_PROTOCOLS[e]=n}},{key:"removeProtocol",value:function(e){delete t.c.REGISTERED_PROTOCOLS[e]}}])}();return Wi.Map=function(e){function r(e){var n;if(oi(this,r),t.bg.mark(t.bh.create),null!=(e=t.e({},Fi,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if((n=gO(this,r,[new sr(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),{bearingSnap:e.bearingSnap}]))._cooperativeGesturesOnWheel=function(t){n._onCooperativeGesture(t,t[n._metaKey],1)},n._contextLost=function(e){e.preventDefault(),n._frame&&(n._frame.cancel(),n._frame=null),n.fire(new t.k("webglcontextlost",{originalEvent:e}))},n._contextRestored=function(e){n._setupPainter(),n.resize(),n._update(),n.fire(new t.k("webglcontextrestored",{originalEvent:e}))},n._onMapScroll=function(t){if(t.target===n._container)return n._container.scrollTop=0,n._container.scrollLeft=0,!1},n._onWindowOnline=function(){n._update()},n._interactive=e.interactive,n._cooperativeGestures=e.cooperativeGestures,n._metaKey=0===navigator.platform.indexOf("Mac")?"metaKey":"ctrlKey",n._maxTileCacheSize=e.maxTileCacheSize,n._maxTileCacheZoomLevels=e.maxTileCacheZoomLevels,n._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,n._preserveDrawingBuffer=e.preserveDrawingBuffer,n._antialias=e.antialias,n._trackResize=e.trackResize,n._bearingSnap=e.bearingSnap,n._refreshExpiredTiles=e.refreshExpiredTiles,n._fadeDuration=e.fadeDuration,n._crossSourceCollisions=e.crossSourceCollisions,n._crossFadingFactor=1,n._collectResourceTiming=e.collectResourceTiming,n._renderTaskQueue=new mi,n._controls=[],n._mapId=t.a2(),n._locale=t.e({},yi,e.locale),n._clickTolerance=e.clickTolerance,n._overridePixelRatio=e.pixelRatio,n._maxCanvasSize=e.maxCanvasSize,n.transformCameraUpdate=e.transformCameraUpdate,n._imageQueueHandle=a.addThrottleControl((function(){return n.isMoving()})),n._requestManager=new c(e.transformRequest),"string"==typeof e.container){if(n._container=document.getElementById(e.container),!n._container)throw new Error("Container '".concat(e.container,"' not found."))}else{if(!(e.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");n._container=e.container}if(e.maxBounds&&n.setMaxBounds(e.maxBounds),n._setupContainer(),n._setupPainter(),n.on("move",(function(){return n._update(!1)})),n.on("moveend",(function(){return n._update(!1)})),n.on("zoom",(function(){return n._update(!0)})),n.on("terrain",(function(){n.painter.terrainFacilitator.dirty=!0,n._update(!0)})),n.once("idle",(function(){n._idleTriggered=!0})),"undefined"!=typeof window){addEventListener("online",n._onWindowOnline,!1);var i=!1,o=Ar((function(t){n._trackResize&&!n._removed&&n.resize(t)._update()}),50);n._resizeObserver=new ResizeObserver((function(t){i?o(t):i=!0})),n._resizeObserver.observe(n._container)}return n.handlers=new fi(si(n),e),n._cooperativeGestures&&n._setupCooperativeGestures(),n._hash=e.hash&&new ur("string"==typeof e.hash&&e.hash||void 0).addTo(si(n)),n._hash&&n._hash._onHashChange()||(n.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(n.resize(),n.fitBounds(e.bounds,t.e({},e.fitBoundsOptions,{duration:0})))),n.resize(),n._localIdeographFontFamily=e.localIdeographFontFamily,n._validateStyle=e.validateStyle,e.style&&n.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&n.addControl(new pi({customAttribution:e.customAttribution})),e.maplibreLogo&&n.addControl(new vi,e.logoPosition),n.on("style.load",(function(){n.transform.unmodified&&n.jumpTo(n.style.stylesheet)})),n.on("data",(function(e){n._update("style"===e.dataType),n.fire(new t.k("".concat(e.dataType,"data"),e))})),n.on("dataloading",(function(e){n.fire(new t.k("".concat(e.dataType,"dataloading"),e))})),n.on("dataabort",(function(e){n.fire(new t.k("sourcedataabort",e))})),si(n)}return ci(r,e),ai(r,[{key:"_getMapId",value:function(){return this._mapId}},{key:"addControl",value:function(e,n){if(void 0===n&&(n=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var r=e.onAdd(this);this._controls.push(e);var i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this}},{key:"removeControl",value:function(e){if(!e||!e.onRemove)return this.fire(new t.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this}},{key:"hasControl",value:function(t){return this._controls.indexOf(t)>-1}},{key:"calculateCameraOptionsFromTo",value:function(t,e,n,i){return null==i&&this.terrain&&(i=this.terrain.getElevationForLngLatZoom(n,this.transform.tileZoom)),Li(ui(r.prototype),"calculateCameraOptionsFromTo",this).call(this,t,e,n,i)}},{key:"resize",value:function(e){var n,r=this._containerDimensions(),i=r[0],a=r[1],o=this._getClampedPixelRatio(i,a);if(this._resizeCanvas(i,a,o),this.painter.resize(i,a,o),this.painter.overLimit()){var s=this.painter.context.gl;this._maxCanvasSize=[s.drawingBufferWidth,s.drawingBufferHeight];var A=this._getClampedPixelRatio(i,a);this._resizeCanvas(i,a,A),this.painter.resize(i,a,A)}this.transform.resize(i,a),null===(n=this._requestedCameraState)||void 0===n||n.resize(i,a);var u=!this._moving;return u&&(this.stop(),this.fire(new t.k("movestart",e)).fire(new t.k("move",e))),this.fire(new t.k("resize",e)),u&&this.fire(new t.k("moveend",e)),this}},{key:"_getClampedPixelRatio",value:function(t,e){var n=this._maxCanvasSize,r=n[0],i=n[1],a=this.getPixelRatio(),o=t*a,s=e*a;return Math.min(o>r?r/o:1,s>i?i/s:1)*a}},{key:"getPixelRatio",value:function(){var t;return null!==(t=this._overridePixelRatio)&&void 0!==t?t:devicePixelRatio}},{key:"setPixelRatio",value:function(t){this._overridePixelRatio=t,this.resize()}},{key:"getBounds",value:function(){return this.transform.getBounds()}},{key:"getMaxBounds",value:function(){return this.transform.getMaxBounds()}},{key:"setMaxBounds",value:function(t){return this.transform.setMaxBounds(Q.convert(t)),this._update()}},{key:"setMinZoom",value:function(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}},{key:"getMinZoom",value:function(){return this.transform.minZoom}},{key:"setMaxZoom",value:function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")}},{key:"getMaxZoom",value:function(){return this.transform.maxZoom}},{key:"setMinPitch",value:function(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}},{key:"getMinPitch",value:function(){return this.transform.minPitch}},{key:"setMaxPitch",value:function(t){if((t=null==t?60:t)>85)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")}},{key:"getMaxPitch",value:function(){return this.transform.maxPitch}},{key:"getRenderWorldCopies",value:function(){return this.transform.renderWorldCopies}},{key:"setRenderWorldCopies",value:function(t){return this.transform.renderWorldCopies=t,this._update()}},{key:"getCooperativeGestures",value:function(){return this._cooperativeGestures}},{key:"setCooperativeGestures",value:function(t){return this._cooperativeGestures=t,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}},{key:"project",value:function(e){return this.transform.locationPoint(t.L.convert(e),this.style&&this.terrain)}},{key:"unproject",value:function(e){return this.transform.pointLocation(t.P.convert(e),this.terrain)}},{key:"isMoving",value:function(){var t;return this._moving||(null===(t=this.handlers)||void 0===t?void 0:t.isMoving())}},{key:"isZooming",value:function(){var t;return this._zooming||(null===(t=this.handlers)||void 0===t?void 0:t.isZooming())}},{key:"isRotating",value:function(){var t;return this._rotating||(null===(t=this.handlers)||void 0===t?void 0:t.isRotating())}},{key:"_createDelegatedListener",value:function(t,e,n){var r=this;if("mouseenter"===t||"mouseover"===t){var i=!1,a=function(a){var o=r.getLayer(e)?r.queryRenderedFeatures(a.point,{layers:[e]}):[];o.length?i||(i=!0,n.call(r,new mr(t,r,a.originalEvent,{features:o}))):i=!1};return{layer:e,listener:n,delegates:{mousemove:a,mouseout:function(){i=!1}}}}if("mouseleave"===t||"mouseout"===t){var o=!1,s=function(i){(r.getLayer(e)?r.queryRenderedFeatures(i.point,{layers:[e]}):[]).length?o=!0:o&&(o=!1,n.call(r,new mr(t,r,i.originalEvent)))},A=function(e){o&&(o=!1,n.call(r,new mr(t,r,e.originalEvent)))};return{layer:e,listener:n,delegates:{mousemove:s,mouseout:A}}}var u=function(t){var i=r.getLayer(e)?r.queryRenderedFeatures(t.point,{layers:[e]}):[];i.length&&(t.features=i,n.call(r,t),delete t.features)};return{layer:e,listener:n,delegates:hi({},t,u)}}},{key:"on",value:function(t,e,n){if(void 0===n)return Li(ui(r.prototype),"on",this).call(this,t,e);var i=this._createDelegatedListener(t,e,n);for(var a in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(i),i.delegates)this.on(a,i.delegates[a]);return this}},{key:"once",value:function(t,e,n){if(void 0===n)return Li(ui(r.prototype),"once",this).call(this,t,e);var i=this._createDelegatedListener(t,e,n);for(var a in i.delegates)this.once(a,i.delegates[a]);return this}},{key:"off",value:function(t,e,n){var i=this;return void 0===n?Li(ui(r.prototype),"off",this).call(this,t,e):(this._delegatedListeners&&this._delegatedListeners[t]&&function(r){for(var a=i._delegatedListeners[t],o=0;o<a.length;o++){var s=a[o];if(s.layer===e&&s.listener===n){for(var A in s.delegates)i.off(A,s.delegates[A]);return a.splice(o,1),i}}}(),this)}},{key:"queryRenderedFeatures",value:function(e,n){if(!this.style)return[];var r,i=e instanceof t.P||Array.isArray(e),a=i?e:[[0,0],[this.transform.width,this.transform.height]];if(n=n||(i?{}:e)||{},a instanceof t.P||"number"==typeof a[0])r=[t.P.convert(a)];else{var o=t.P.convert(a[0]),s=t.P.convert(a[1]);r=[o,new t.P(s.x,o.y),s,new t.P(o.x,s.y),o]}return this.style.queryRenderedFeatures(r,n,this.transform)}},{key:"querySourceFeatures",value:function(t,e){return this.style.querySourceFeatures(t,e)}},{key:"setStyle",value:function(e,n){return!1!==(n=t.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(e,n))}},{key:"setTransformRequest",value:function(t){return this._requestManager.setTransformRequest(t),this}},{key:"_getUIString",value:function(t){var e=this._locale[t];if(null==e)throw new Error("Missing UI string '".concat(t,"'"));return e}},{key:"_updateStyle",value:function(t,e){var n=this;if(!e.transformStyle||!this.style||this.style._loaded){var r=this.style&&e.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!t)),t?(this.style=new re(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t,e,r):this.style.loadJSON(t,e,r),this):(delete this.style,this)}this.style.once("style.load",(function(){return n._updateStyle(t,e)}))}},{key:"_lazyInitEmptyStyle",value:function(){this.style||(this.style=new re(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}},{key:"_diffStyle",value:function(e,n){var r=this;if("string"==typeof e){var i=this._requestManager.transformRequest(e,o.Style);t.f(i,(function(e,i){e?r.fire(new t.j(e)):i&&r._updateDiff(i,n)}))}else"object"==ni(e)&&this._updateDiff(e,n)}},{key:"_updateDiff",value:function(e,n){try{this.style.setState(e,n)&&this._update(!0)}catch(r){t.w("Unable to perform style diff: ".concat(r.message||r.error||r,".  Rebuilding the style from scratch.")),this._updateStyle(e,n)}}},{key:"getStyle",value:function(){if(this.style)return this.style.serialize()}},{key:"isStyleLoaded",value:function(){return this.style?this.style.loaded():t.w("There is no style added to the map.")}},{key:"addSource",value:function(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)}},{key:"isSourceLoaded",value:function(e){var n=this.style&&this.style.sourceCaches[e];if(void 0!==n)return n.loaded();this.fire(new t.j(new Error("There is no source with ID '".concat(e,"'"))))}},{key:"setTerrain",value:function(e){var n=this;if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),e){var r=this.style.sourceCaches[e.source];if(!r)throw new Error("cannot load terrain, because there exists no source with ID: ".concat(e.source));for(var i in this.style._layers){var a=this.style._layers[i];"hillshade"===a.type&&a.source===e.source&&t.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new xi(this.painter,r,e),this.painter.renderToTexture=new ki(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=function(t){"style"===t.dataType?n.terrain.sourceCache.freeRtt():"source"===t.dataType&&t.tile&&(t.sourceId!==e.source||n._elevationFreeze||(n.transform._minEleveationForCurrentTile=n.terrain.getMinTileElevationForLngLatZoom(n.transform.center,n.transform.tileZoom),n.transform.elevation=n.terrain.getElevationForLngLatZoom(n.transform.center,n.transform.tileZoom)),n.terrain.sourceCache.freeRtt(t.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new t.k("terrain",{terrain:e})),this}},{key:"getTerrain",value:function(){var t,e;return null!==(e=null===(t=this.terrain)||void 0===t?void 0:t.options)&&void 0!==e?e:null}},{key:"areTilesLoaded",value:function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var n=t[e]._tiles;for(var r in n){var i=n[r];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0}},{key:"addSourceType",value:function(t,e,n){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,n)}},{key:"removeSource",value:function(t){return this.style.removeSource(t),this._update(!0)}},{key:"getSource",value:function(t){return this.style.getSource(t)}},{key:"addImage",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.pixelRatio,a=void 0===i?1:i,o=r.sdf,s=void 0!==o&&o,A=r.stretchX,u=r.stretchY,l=r.content;if(this._lazyInitEmptyStyle(),!(n instanceof HTMLImageElement||t.a(n))){if(void 0===n.width||void 0===n.height)return this.fire(new t.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var c=n.width,h=n.height,f=n.data,d=n;return this.style.addImage(e,{data:new t.R({width:c,height:h},new Uint8Array(f)),pixelRatio:a,stretchX:A,stretchY:u,content:l,sdf:s,version:0,userImage:d}),d.onAdd&&d.onAdd(this,e),this}var p=t.h.getImageData(n),v=p.width,g=p.height,m=p.data;this.style.addImage(e,{data:new t.R({width:v,height:g},m),pixelRatio:a,stretchX:A,stretchY:u,content:l,sdf:s,version:0})}},{key:"updateImage",value:function(e,n){var r=this.style.getImage(e);if(!r)return this.fire(new t.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var i=n instanceof HTMLImageElement||t.a(n)?t.h.getImageData(n):n,a=i.width,o=i.height,s=i.data;if(void 0===a||void 0===o)return this.fire(new t.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(a!==r.data.width||o!==r.data.height)return this.fire(new t.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));var A=!(n instanceof HTMLImageElement||t.a(n));return r.data.replace(s,A),this.style.updateImage(e,r),this}},{key:"getImage",value:function(t){return this.style.getImage(t)}},{key:"hasImage",value:function(e){return e?!!this.style.getImage(e):(this.fire(new t.j(new Error("Missing required image id"))),!1)}},{key:"removeImage",value:function(t){this.style.removeImage(t)}},{key:"loadImage",value:function(t,e){a.getImage(this._requestManager.transformRequest(t,o.Image),e)}},{key:"listImages",value:function(){return this.style.listImages()}},{key:"addLayer",value:function(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)}},{key:"moveLayer",value:function(t,e){return this.style.moveLayer(t,e),this._update(!0)}},{key:"removeLayer",value:function(t){return this.style.removeLayer(t),this._update(!0)}},{key:"getLayer",value:function(t){return this.style.getLayer(t)}},{key:"getLayersOrder",value:function(){return this.style.getLayersOrder()}},{key:"setLayerZoomRange",value:function(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0)}},{key:"setFilter",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.style.setFilter(t,e,n),this._update(!0)}},{key:"getFilter",value:function(t){return this.style.getFilter(t)}},{key:"setPaintProperty",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setPaintProperty(t,e,n,r),this._update(!0)}},{key:"getPaintProperty",value:function(t,e){return this.style.getPaintProperty(t,e)}},{key:"setLayoutProperty",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setLayoutProperty(t,e,n,r),this._update(!0)}},{key:"getLayoutProperty",value:function(t,e){return this.style.getLayoutProperty(t,e)}},{key:"setGlyphs",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setGlyphs(t,e),this._update(!0)}},{key:"getGlyphs",value:function(){return this.style.getGlyphsUrl()}},{key:"addSprite",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._lazyInitEmptyStyle(),this.style.addSprite(t,e,r,(function(t){t||n._update(!0)})),this}},{key:"removeSprite",value:function(t){return this._lazyInitEmptyStyle(),this.style.removeSprite(t),this._update(!0)}},{key:"getSprite",value:function(){return this.style.getSprite()}},{key:"setSprite",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setSprite(t,n,(function(t){t||e._update(!0)})),this}},{key:"setLight",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)}},{key:"getLight",value:function(){return this.style.getLight()}},{key:"setFeatureState",value:function(t,e){return this.style.setFeatureState(t,e),this._update()}},{key:"removeFeatureState",value:function(t,e){return this.style.removeFeatureState(t,e),this._update()}},{key:"getFeatureState",value:function(t){return this.style.getFeatureState(t)}},{key:"getContainer",value:function(){return this._container}},{key:"getCanvasContainer",value:function(){return this._canvasContainer}},{key:"getCanvas",value:function(){return this._canvas}},{key:"_containerDimensions",value:function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]}},{key:"_setupContainer",value:function(){var t=this._container;t.classList.add("maplibregl-map");var e=this._canvasContainer=n.create("div","maplibregl-canvas-container",t);this._interactive&&e.classList.add("maplibregl-interactive"),this._canvas=n.create("canvas","maplibregl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var r=this._containerDimensions(),i=this._getClampedPixelRatio(r[0],r[1]);this._resizeCanvas(r[0],r[1],i);var a=this._controlContainer=n.create("div","maplibregl-control-container",t),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(t){o[t]=n.create("div","maplibregl-ctrl-".concat(t," "),a)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}},{key:"_setupCooperativeGestures",value:function(){this._cooperativeGesturesScreen=n.create("div","maplibregl-cooperative-gesture-screen",this._container);var t="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";0===navigator.platform.indexOf("Mac")&&(t="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use â + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML='\n            <div class="maplibregl-desktop-message">'.concat(t,'</div>\n            <div class="maplibregl-mobile-message">').concat("boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map","</div>\n        "),this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}},{key:"_destroyCooperativeGestures",value:function(){n.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}},{key:"_resizeCanvas",value:function(t,e,n){this._canvas.width=Math.floor(n*t),this._canvas.height=Math.floor(n*e),this._canvas.style.width="".concat(t,"px"),this._canvas.style.height="".concat(e,"px")}},{key:"_setupPainter",value:function(){var t={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1},e=null;this._canvas.addEventListener("webglcontextcreationerror",(function(n){e={requestedAttributes:t},n&&(e.statusMessage=n.statusMessage,e.type=n.type)}),{once:!0});var n=this._canvas.getContext("webgl2",t)||this._canvas.getContext("webgl",t);if(!n){var r="Failed to initialize WebGL";throw e?(e.message=r,new Error(JSON.stringify(e))):new Error(r)}this.painter=new rr(n,this.transform),s.testSupport(n)}},{key:"_onCooperativeGesture",value:function(t,e,n){var r=this;return!e&&n<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout((function(){r._cooperativeGesturesScreen.classList.remove("maplibregl-show")}),100)),!1}},{key:"loaded",value:function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}},{key:"_update",value:function(t){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this}},{key:"_requestRenderFrame",value:function(t){return this._update(),this._renderTaskQueue.add(t)}},{key:"_cancelRenderFrame",value:function(t){this._renderTaskQueue.remove(t)}},{key:"_render",value:function(e){var n=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),!this._removed){var r=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var i=this.transform.zoom,a=t.h.now();this.style.zoomHistory.update(i,a);var o=new t.a8(i,{now:a,fadeDuration:n,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),s=o.crossFadingFactor();1===s&&s===this._crossFadingFactor||(r=!0,this._crossFadingFactor=s),this.style.update(o)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,n,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:n,showPadding:this.showPadding}),this.fire(new t.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,t.bg.mark(t.bh.load),this.fire(new t.k("load"))),this.style&&(this.style.hasTransitions()||r)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();var A=this._sourcesDirty||this._styleDirty||this._placementDirty;return A||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.k("idle")),!this._loaded||this._fullyLoaded||A||(this._fullyLoaded=!0,t.bg.mark(t.bh.fullLoad)),this}}},{key:"redraw",value:function(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}},{key:"remove",value:function(){var e;this._hash&&this._hash.remove();var r,i=pO(this._controls);try{for(i.s();!(r=i.n()).done;)r.value.onRemove(this)}catch(t){i.e(t)}finally{i.f()}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),"undefined"!=typeof window&&removeEventListener("online",this._onWindowOnline,!1),a.removeThrottleControl(this._imageQueueHandle),null===(e=this._resizeObserver)||void 0===e||e.disconnect();var o=this.painter.context.gl.getExtension("WEBGL_lose_context");o&&o.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),n.remove(this._canvasContainer),n.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),t.bg.clearMetrics(),this._removed=!0,this.fire(new t.k("remove"))}},{key:"triggerRepaint",value:function(){var e=this;this.style&&!this._frame&&(this._frame=t.h.frame((function(n){t.bg.frame(n),e._frame=null,e._render(n)})))}},{key:"showTileBoundaries",get:function(){return!!this._showTileBoundaries},set:function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())}},{key:"showPadding",get:function(){return!!this._showPadding},set:function(t){this._showPadding!==t&&(this._showPadding=t,this._update())}},{key:"showCollisionBoxes",get:function(){return!!this._showCollisionBoxes},set:function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())}},{key:"showOverdrawInspector",get:function(){return!!this._showOverdrawInspector},set:function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())}},{key:"repaint",get:function(){return!!this._repaint},set:function(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())}},{key:"vertices",get:function(){return!!this._vertices},set:function(t){this._vertices=t,this._update()}},{key:"version",get:function(){return Ci}},{key:"getCameraTargetElevation",value:function(){return this.transform.elevation}}])}(di),Wi.NavigationControl=function(){function e(r){var i=this;oi(this,e),this._updateZoomButtons=function(){var t=i._map.getZoom(),e=t===i._map.getMaxZoom(),n=t===i._map.getMinZoom();i._zoomInButton.disabled=e,i._zoomOutButton.disabled=n,i._zoomInButton.setAttribute("aria-disabled",e.toString()),i._zoomOutButton.setAttribute("aria-disabled",n.toString())},this._rotateCompassArrow=function(){var t=i.options.visualizePitch?"scale(".concat(1/Math.pow(Math.cos(i._map.transform.pitch*(Math.PI/180)),.5),") rotateX(").concat(i._map.transform.pitch,"deg) rotateZ(").concat(i._map.transform.angle*(180/Math.PI),"deg)"):"rotate(".concat(i._map.transform.angle*(180/Math.PI),"deg)");i._compassIcon.style.transform=t},this._setButtonTitle=function(t,e){var n=i._map._getUIString("NavigationControl.".concat(e));t.title=n,t.setAttribute("aria-label",n)},this.options=t.e({},Ii,r),this._container=n.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(function(t){return i._map.zoomIn({},{originalEvent:t})})),n.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(function(t){return i._map.zoomOut({},{originalEvent:t})})),n.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(function(t){i.options.visualizePitch?i._map.resetNorthPitch({},{originalEvent:t}):i._map.resetNorth({},{originalEvent:t})})),this._compassIcon=n.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}return ai(e,[{key:"onAdd",value:function(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ui(this._map,this._compass,this.options.visualizePitch)),this._container}},{key:"onRemove",value:function(){n.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}},{key:"_createButton",value:function(t,e){var r=n.create("button",t,this._container);return r.type="button",r.addEventListener("click",e),r}}])}(),Wi.GeolocateControl=function(e){function r(e){var i;return oi(this,r),(i=gO(this,r))._onSuccess=function(e){if(i._map){if(i._isOutOfMapMaxBounds(e))return i._setErrorState(),i.fire(new t.k("outofmaxbounds",e)),i._updateMarker(),void i._finish();if(i.options.trackUserLocation)switch(i._lastKnownPosition=e,i._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":i._watchState="ACTIVE_LOCK",i._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),i._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),i._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":i._watchState="BACKGROUND",i._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),i._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),i._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error("Unexpected watchState ".concat(i._watchState))}i.options.showUserLocation&&"OFF"!==i._watchState&&i._updateMarker(e),i.options.trackUserLocation&&"ACTIVE_LOCK"!==i._watchState||i._updateCamera(e),i.options.showUserLocation&&i._dotElement.classList.remove("maplibregl-user-location-dot-stale"),i.fire(new t.k("geolocate",e)),i._finish()}},i._updateCamera=function(e){var n=new t.L(e.coords.longitude,e.coords.latitude),r=e.coords.accuracy,a=i._map.getBearing(),o=t.e({bearing:a},i.options.fitBoundsOptions),s=Q.fromLngLat(n,r);i._map.fitBounds(s,o,{geolocateSource:!0})},i._updateMarker=function(e){if(e){var n=new t.L(e.coords.longitude,e.coords.latitude);i._accuracyCircleMarker.setLngLat(n).addTo(i._map),i._userLocationDotMarker.setLngLat(n).addTo(i._map),i._accuracy=e.coords.accuracy,i.options.showUserLocation&&i.options.showAccuracyCircle&&i._updateCircleRadius()}else i._userLocationDotMarker.remove(),i._accuracyCircleMarker.remove()},i._onZoom=function(){i.options.showUserLocation&&i.options.showAccuracyCircle&&i._updateCircleRadius()},i._onError=function(e){if(i._map){if(i.options.trackUserLocation)if(1===e.code){i._watchState="OFF",i._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),i._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),i._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),i._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),i._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),i._geolocateButton.disabled=!0;var n=i._map._getUIString("GeolocateControl.LocationNotAvailable");i._geolocateButton.title=n,i._geolocateButton.setAttribute("aria-label",n),void 0!==i._geolocationWatchID&&i._clearWatch()}else{if(3===e.code&&Ri)return;i._setErrorState()}"OFF"!==i._watchState&&i.options.showUserLocation&&i._dotElement.classList.add("maplibregl-user-location-dot-stale"),i.fire(new t.k("error",e)),i._finish()}},i._finish=function(){i._timeoutId&&clearTimeout(i._timeoutId),i._timeoutId=void 0},i._setupUI=function(e){if(i._map){if(i._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),i._geolocateButton=n.create("button","maplibregl-ctrl-geolocate",i._container),n.create("span","maplibregl-ctrl-icon",i._geolocateButton).setAttribute("aria-hidden","true"),i._geolocateButton.type="button",!1===e){t.w("Geolocation support is not available so the GeolocateControl will be disabled.");var r=i._map._getUIString("GeolocateControl.LocationNotAvailable");i._geolocateButton.disabled=!0,i._geolocateButton.title=r,i._geolocateButton.setAttribute("aria-label",r)}else{var a=i._map._getUIString("GeolocateControl.FindMyLocation");i._geolocateButton.title=a,i._geolocateButton.setAttribute("aria-label",a)}i.options.trackUserLocation&&(i._geolocateButton.setAttribute("aria-pressed","false"),i._watchState="OFF"),i.options.showUserLocation&&(i._dotElement=n.create("div","maplibregl-user-location-dot"),i._userLocationDotMarker=new Mi({element:i._dotElement}),i._circleElement=n.create("div","maplibregl-user-location-accuracy-circle"),i._accuracyCircleMarker=new Mi({element:i._circleElement,pitchAlignment:"map"}),i.options.trackUserLocation&&(i._watchState="OFF"),i._map.on("zoom",i._onZoom)),i._geolocateButton.addEventListener("click",i.trigger.bind(si(i))),i._setup=!0,i.options.trackUserLocation&&i._map.on("movestart",(function(e){e.geolocateSource||"ACTIVE_LOCK"!==i._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(i._watchState="BACKGROUND",i._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),i._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),i.fire(new t.k("trackuserlocationend")))}))}},i.options=t.e({},Pi,e),i}return ci(r,e),ai(r,[{key:"onAdd",value:function(t){return this._map=t,this._container=n.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(t){void 0===li||arguments.length>1&&void 0!==arguments[1]&&arguments[1]?void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then((function(e){li="denied"!==e.state,t(li)})).catch((function(){li=!!window.navigator.geolocation,t(li)})):(li=!!window.navigator.geolocation,t(li)):t(li)}(this._setupUI),this._container}},{key:"onRemove",value:function(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),n.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Oi=0,Ri=!1}},{key:"_isOutOfMapMaxBounds",value:function(t){var e=this._map.getMaxBounds(),n=t.coords;return e&&(n.longitude<e.getWest()||n.longitude>e.getEast()||n.latitude<e.getSouth()||n.latitude>e.getNorth())}},{key:"_setErrorState",value:function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error("Unexpected watchState ".concat(this._watchState))}}},{key:"_updateCircleRadius",value:function(){var t=this._map.getBounds(),e=t.getSouthEast(),n=t.getNorthEast(),r=e.distanceTo(n),i=Math.ceil(this._accuracy/(r/this._map._container.clientHeight)*2);this._circleElement.style.width="".concat(i,"px"),this._circleElement.style.height="".concat(i,"px")}},{key:"trigger",value:function(){if(!this._setup)return t.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Oi--,Ri=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new t.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.k("trackuserlocationstart"));break;default:throw new Error("Unexpected watchState ".concat(this._watchState))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error("Unexpected watchState ".concat(this._watchState))}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var e;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Oi>1?(e={maximumAge:6e5,timeout:0},Ri=!0):(e=this.options.positionOptions,Ri=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}},{key:"_clearWatch",value:function(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}}])}(t.E),Wi.AttributionControl=pi,Wi.LogoControl=vi,Wi.ScaleControl=function(){function e(n){var r=this;oi(this,e),this._onMove=function(){Hi(r._map,r._container,r.options)},this.setUnit=function(t){r.options.unit=t,Hi(r._map,r._container,r.options)},this.options=t.e({},zi,n)}return ai(e,[{key:"getDefaultPosition",value:function(){return"bottom-left"}},{key:"onAdd",value:function(t){return this._map=t,this._container=n.create("div","maplibregl-ctrl maplibregl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}},{key:"onRemove",value:function(){n.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}}])}(),Wi.FullscreenControl=function(e){function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return oi(this,r),(e=gO(this,r))._onFullscreenChange=function(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===e._container!==e._fullscreen&&e._handleFullscreenChange()},e._onClickFullscreen=function(){e._isFullscreen()?e._exitFullscreen():e._requestFullscreen()},e._fullscreen=!1,n&&n.container&&(n.container instanceof HTMLElement?e._container=n.container:t.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?e._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?e._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?e._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(e._fullscreenchange="MSFullscreenChange"),e}return ci(r,e),ai(r,[{key:"onAdd",value:function(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=n.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}},{key:"onRemove",value:function(){n.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}},{key:"_setupUI",value:function(){var t=this._fullscreenButton=n.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);n.create("span","maplibregl-ctrl-icon",t).setAttribute("aria-hidden","true"),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}},{key:"_updateTitle",value:function(){var t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t}},{key:"_getTitle",value:function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}},{key:"_isFullscreen",value:function(){return this._fullscreen}},{key:"_handleFullscreenChange",value:function(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new t.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new t.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}},{key:"_exitFullscreen",value:function(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}},{key:"_requestFullscreen",value:function(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}},{key:"_togglePseudoFullScreen",value:function(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}}])}(t.E),Wi.TerrainControl=function(){function t(e){var n=this;oi(this,t),this._toggleTerrain=function(){n._map.getTerrain()?n._map.setTerrain(null):n._map.setTerrain(n.options),n._updateTerrainIcon()},this._updateTerrainIcon=function(){n._terrainButton.classList.remove("maplibregl-ctrl-terrain"),n._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),n._map.terrain?(n._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),n._terrainButton.title=n._map._getUIString("TerrainControl.disableTerrain")):(n._terrainButton.classList.add("maplibregl-ctrl-terrain"),n._terrainButton.title=n._map._getUIString("TerrainControl.enableTerrain"))},this.options=e}return ai(t,[{key:"onAdd",value:function(t){return this._map=t,this._container=n.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=n.create("button","maplibregl-ctrl-terrain",this._container),n.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}},{key:"onRemove",value:function(){n.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}}])}(),Wi.Popup=function(e){function r(e){var i;return oi(this,r),(i=gO(this,r)).remove=function(){return i._content&&n.remove(i._content),i._container&&(n.remove(i._container),delete i._container),i._map&&(i._map.off("move",i._update),i._map.off("move",i._onClose),i._map.off("click",i._onClose),i._map.off("remove",i.remove),i._map.off("mousemove",i._onMouseMove),i._map.off("mouseup",i._onMouseUp),i._map.off("drag",i._onDrag),delete i._map),i.fire(new t.k("close")),si(i)},i._onMouseUp=function(t){i._update(t.point)},i._onMouseMove=function(t){i._update(t.point)},i._onDrag=function(t){i._update(t.point)},i._update=function(t){if(i._map&&(i._lngLat||i._trackPointer)&&i._content){if(!i._container){if(i._container=n.create("div","maplibregl-popup",i._map.getContainer()),i._tip=n.create("div","maplibregl-popup-tip",i._container),i._container.appendChild(i._content),i.options.className){var e,r=pO(i.options.className.split(" "));try{for(r.s();!(e=r.n()).done;){var a=e.value;i._container.classList.add(a)}}catch(t){r.e(t)}finally{r.f()}}i._trackPointer&&i._container.classList.add("maplibregl-popup-track-pointer")}if(i.options.maxWidth&&i._container.style.maxWidth!==i.options.maxWidth&&(i._container.style.maxWidth=i.options.maxWidth),i._map.transform.renderWorldCopies&&!i._trackPointer&&(i._lngLat=Si(i._lngLat,i._pos,i._map.transform)),!i._trackPointer||t){var o=i._pos=i._trackPointer&&t?t:i._map.project(i._lngLat),s=i.options.anchor,A=Gi(i.options.offset);if(!s){var u,l=i._container.offsetWidth,c=i._container.offsetHeight;u=o.y+A.bottom.y<c?["top"]:o.y>i._map.transform.height-c?["bottom"]:[],o.x<l/2?u.push("left"):o.x>i._map.transform.width-l/2&&u.push("right"),s=0===u.length?"bottom":u.join("-")}var h=o.add(A[s]).round();n.setTransform(i._container,"".concat(Qi[s]," translate(").concat(h.x,"px,").concat(h.y,"px)")),Ti(i._container,s,"popup")}}},i._onClose=function(){i.remove()},i.options=t.e(Object.create(Ni),e),i}return ci(r,e),ai(r,[{key:"addTo",value:function(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new t.k("open")),this}},{key:"isOpen",value:function(){return!!this._map}},{key:"getLngLat",value:function(){return this._lngLat}},{key:"setLngLat",value:function(e){return this._lngLat=t.L.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}},{key:"trackPointer",value:function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}},{key:"getElement",value:function(){return this._container}},{key:"setText",value:function(t){return this.setDOMContent(document.createTextNode(t))}},{key:"setHTML",value:function(t){var e,n=document.createDocumentFragment(),r=document.createElement("body");for(r.innerHTML=t;e=r.firstChild;)n.appendChild(e);return this.setDOMContent(n)}},{key:"getMaxWidth",value:function(){var t;return null===(t=this._container)||void 0===t?void 0:t.style.maxWidth}},{key:"setMaxWidth",value:function(t){return this.options.maxWidth=t,this._update(),this}},{key:"setDOMContent",value:function(t){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=n.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(t),this._createCloseButton(),this._update(),this._focusFirstElement(),this}},{key:"addClassName",value:function(t){this._container&&this._container.classList.add(t)}},{key:"removeClassName",value:function(t){this._container&&this._container.classList.remove(t)}},{key:"setOffset",value:function(t){return this.options.offset=t,this._update(),this}},{key:"toggleClassName",value:function(t){if(this._container)return this._container.classList.toggle(t)}},{key:"_createCloseButton",value:function(){this.options.closeButton&&(this._closeButton=n.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}},{key:"_focusFirstElement",value:function(){if(this.options.focusAfterOpen&&this._container){var t=this._container.querySelector(Ki);t&&t.focus()}}}])}(t.E),Wi.Marker=Mi,Wi.Style=re,Wi.LngLat=t.L,Wi.LngLatBounds=Q,Wi.Point=t.P,Wi.MercatorCoordinate=t.U,Wi.Evented=t.E,Wi.AJAXError=t.bi,Wi.config=t.c,Wi.CanvasSource=H,Wi.GeoJSONSource=P,Wi.ImageSource=R,Wi.RasterDEMTileSource=L,Wi.RasterTileSource=D,Wi.VectorTileSource=M,Wi.VideoSource=z,Wi.setRTLTextPlugin=t.bj,Wi.getRTLTextPluginStatus=t.bk,Wi.prewarm=function(){rt().acquire(tt)},Wi.clearPrewarmedResources=function(){var t=J;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(tt),J=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},ji.extend(Wi,{isSafari:t.ac,getPerformanceMetrics:t.bg.getPerformanceMetrics}),Wi})),n}()}));var RO="light",zO=.65,HO=!0,VO="year",NO="Ne",KO="species";function GO(t,e,n){tp("theme",RO),function(t,e){for(var n in t[e])document.documentElement.style.setProperty("--"+n,t[e][n])}(Uv,RO);var r={},i={};Yd((function(){i=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?wO(Object(n),!0).forEach((function(e){hi(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},r)}));var a,o,s={psmc:{}},A=!0;var u={chart:{chart01:function(){n(4,o=[]),n(2,A=!0)},chart02:function(){n(4,o=["France"]),n(2,A=!0)},chart03:function(){n(4,o=["Britain"]),n(2,A=!0)},chart04:function(){n(4,o=[]),n(2,A=!1)}}};return["psmc"].forEach((function(t){(function(t){return Iv.apply(this,arguments)})("./data/data_".concat(t,".csv")).then((function(e){var r=e.map((function(t,e){return{species:t.ID,year:parseFloat(t.Time),Ne:parseFloat(t.Ne)}}));n(1,s[t].Netimes=r,s)}))})),t.$$.update=function(){1&t.$$.dirty&&r&&function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(t){r[t]!=i[t]&&(u[t][r[t]]&&u[t][r[t]](),i[t]=r[t])}))}(Object.keys(u))},[r,s,A,a,o,function(t){console.log(t),n(3,a=t.detail.id)},function(e){t.$$.not_equal(r.chart,e)&&(r.chart=e,n(0,r))}]}return new(function(t){function e(t){var n;return oi(this,e),Cp(n=yO(this,e),t,GO,OO,fd,{},xO),n}return ci(e,t),ai(e)}(Fp))({target:document.body})}();
//# sourceMappingURL=bundle.legacy.js.map
